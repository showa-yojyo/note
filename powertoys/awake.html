<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Awake &#8212; 読書ノート 1.5dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=1a9a5cd9" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=91898170"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/mermaid.js?v=578dbed1"></script>
    <link rel="next" title="Color Picker" href="color-picker.html" />
    <link rel="prev" title="Always on Top" href="always-on-top.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="always-on-top.html" title="Previous document">Always on Top</a>
        </li>
        <li>
          <a href="color-picker.html" title="Next document">Color Picker</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="awake">
<h1><a class="toc-backref" href="#id5" role="doc-backlink">Awake</a><a class="headerlink" href="#awake" title="Permalink to this heading">¶</a></h1>
<p>一般的には、一定時間入力がないと OS としての Windows はディスプレイを切り、スリープまたはサスペンドモードに移行する。この動作は内部的には
<span class="guilabel">電源とスリープ</span> の設定に従う。Awake は、この OS 設定を上書きすることができる。つまり、Windows を起動したままにする機能を有するユーティリティーだ。何らかの長時間処理を実行するときに、スリープやサスペンドから抑止するという用途にうってつけだ。</p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p><a class="reference internal" href="index.html"><span class="doc">Microsoft PowerToys 利用ノート</span></a> 冒頭の前提条件に留意すること。</p>
</div>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#awake" id="id5">Awake</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id6">稼働方法</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id7">設定</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id8">動作</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id4" id="id9">タスクトレイ</a></p></li>
<li><p><a class="reference internal" href="#cli" id="id10">CLI</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="id1">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">稼働方法</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<p>Awake は設定画面から直接稼働するか、スタンドアロン実行ファイルから稼働することが可能だ。設定画面から起動している場合、さらにシステムトレイから管理することも可能だ。</p>
<p>Awake は Windows の電源プラン設定を一切変更せず、カスタム電源プラン設定に依存しない。その代わり、バックグラウンドスレッドを生成し、マシンの特定の状態を必要とすることを Windows に伝える。</p>
</section>
<section id="id2">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">設定</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<p><span class="guilabel">Awake</span> スイッチを入れて Awake にコンピューターの覚醒状態を管理させる。</p>
<section id="id3">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">動作</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<p><span class="guilabel">モード</span> では、本ツールが有効であるときに PC の状態の管理方法を指定する。決定できるのは次の三つのいずれかとなる：</p>
<dl class="simple">
<dt><span class="guilabel">選択した電源プランを引き続き使用する</span></dt><dd><p>PC 本来の電源プランを適用する。つまり当ツール固有の機能を用いない。</p>
</dd>
<dt><span class="guilabel">無期限に起動したままにする</span></dt><dd><p>この設定を変更するまで、PC の通知、実行を維持する。</p>
</dd>
<dt><span class="guilabel">一時的に起動したままにする</span></dt><dd><p>設定画面のタイマーで設定されている一定時間 PC を起動させ続ける。時間切れになると、PC 本来の電源プランに戻る。</p>
</dd>
</dl>
<p>下二つのモードでは、OS の時刻を変更すると Awake タイマーがリセットされる。</p>
<p><span class="guilabel">画面をオンにしたままにする</span> は Awake によって PC を起動状態にしているときに、ディスプレイを点けたままにするかどうかを切り替えられる。オフのままでは
PC がスリープ状態にならなくてもディスプレイは切られることに注意。</p>
</section>
</section>
<section id="id4">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">タスクトレイ</a><a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h2>
<p>Awake が有効であるとき、Windows のタスクトレイに専用アイコンが出現する。そのメニューから上述のモードを設定することができる。</p>
</section>
<section id="cli">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">CLI</a><a class="headerlink" href="#cli" title="Permalink to this heading">¶</a></h2>
<p>Awake を独立プロセスとして直接実行することも可能だ。PowerToys が存在するフォルダーを作業ディレクトリーとして実行する。</p>
<p><strong class="program">PowerToys.Awake.exe</strong> を端末または <code class="docutils literal notranslate"><span class="pre">.lnk</span></code> ショートカットファイルから実行する場合、次のコマンドライン引数を指定することが可能だ：</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-use-pt-config">
<span class="sig-name descname"><span class="pre">--use-pt-config</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-use-pt-config" title="Permalink to this definition">¶</a></dt>
<dd><p>PowerToys の設定ファイルを使用して設定を管理する。前提としては PowerToys が保管している Awake 用の設定ファイル <code class="file docutils literal notranslate"><span class="pre">settings.json</span></code> がすでに存在し、そこには必要なランタイム情報をすべて含んでいるとする。これは設定画面の
<span class="guilabel">動作</span> で指定されている内容だ。</p>
<p>このオプションが使用されると、他のオプションはすべて無視される。Awake はファイル <code class="file docutils literal notranslate"><span class="pre">settings.json</span></code> の変更を探して、状態を更新する。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-display-on">
<span class="sig-name descname"><span class="pre">--display-on</span></span><span class="sig-prename descclassname"><span class="pre">=FLAG</span></span><a class="headerlink" href="#cmdoption-display-on" title="Permalink to this definition">¶</a></dt>
<dd><p>マシンが覚醒している間、ディスプレイを点けておくか消しておくかを指定する。値は <code class="docutils literal notranslate"><span class="pre">true</span></code> または <code class="docutils literal notranslate"><span class="pre">false</span></code> とする。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-time-limit">
<span class="sig-name descname"><span class="pre">--time-limit</span></span><span class="sig-prename descclassname"><span class="pre">=SECONDS</span></span><a class="headerlink" href="#cmdoption-time-limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Awake がコンピュータを覚醒させておく時間を秒単位で指定する。
<a class="reference internal" href="#cmdoption-display-on"><code class="xref std std-option docutils literal notranslate"><span class="pre">--display-on</span></code></a> と組み合わせて使用する。</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-pid">
<span class="sig-name descname"><span class="pre">--pid</span></span><span class="sig-prename descclassname"><span class="pre">=PID</span></span><a class="headerlink" href="#cmdoption-pid" title="Permalink to this definition">¶</a></dt>
<dd><p>Awake の実行をプロセスにアタッチする。与えられた PID を持つプロセスが終了すると Awake も終了する。</p>
<div class="admonition- admonition">
<p class="admonition-title">利用者ノート</p>
<p>この機能を上手に使いこなせれば「何かの作業を終了したら Windows を即閉じる」のようなタスクを実現できると読める。要研究。</p>
</div>
</dd></dl>

<p>コンソールから <strong class="program">PowerToys.Awake.exe</strong> を実行する場合には、コマンドラインオプションを指定することもできる。引数なしで起動すると、Awake は
<span class="guilabel">無期限に起動したままにする</span> 相当の挙動を呈する。</p>
<p>例えば、オプション <a class="reference internal" href="#cmdoption-time-limit"><code class="xref std std-option docutils literal notranslate"><span class="pre">--time-limit</span></code></a> に値を設定する場合、次の両方の引数指定形式を受け入れる：</p>
<div class="highlight-pwsh notranslate"><div class="highlight"><pre><span></span><span class="p">&gt;</span> <span class="n">PowerToys</span><span class="p">.</span><span class="n">Awake</span><span class="p">.</span><span class="n">exe</span> <span class="p">-</span><span class="n">-time-limit</span> <span class="n">36000</span>
<span class="p">&gt;</span> <span class="n">PowerToys</span><span class="p">.</span><span class="n">Awake</span><span class="p">.</span><span class="n">exe</span> <span class="p">-</span><span class="n">-time-limit</span><span class="p">=</span><span class="n">36000</span>
</pre></div>
</div>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="always-on-top.html" title="Previous document">Always on Top</a>
        </li>
        <li>
          <a href="color-picker.html" title="Next document">Color Picker</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="../_static/logos.png"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2023, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>