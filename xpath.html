
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>XPath 学習ノート &#8212; 読書ノート 1.5dev documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/mermaid.js"></script>
    <link rel="next" title="HTML-XML-utils 利用ノート" href="hxutils.html" />
    <link rel="prev" title="CSS セレクター学習ノート" href="css-selector.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="css-selector.html" title="Previous document">CSS セレクター学習ノート</a>
        </li>
        <li>
          <a href="hxutils.html" title="Next document">HTML-XML-utils 利用ノート</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="xpath">
<h1><a class="toc-backref" href="#id21" role="doc-backlink">XPath 学習ノート</a><a class="headerlink" href="#xpath" title="Permalink to this heading">¶</a></h1>
<p>Web スクレイピングの基本技術である XPath に関するノート。さしあたり XPath 1.0 だけで済ませるが、これしか習得しなくても十分いろいろなことが実現できる。</p>
<nav class="contents" id="id1">
<p class="topic-title">ノート目次</p>
<ul class="simple">
<li><p><a class="reference internal" href="#xpath" id="id21">XPath 学習ノート</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id22">練習方法</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id23">開発ツールのコンソール</a></p></li>
<li><p><a class="reference internal" href="#scrapy" id="id24">Scrapy シェル</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id5" id="id25">基本仕様</a></p>
<ul>
<li><p><a class="reference internal" href="#id6" id="id26">文法・構文</a></p>
<ul>
<li><p><a class="reference internal" href="#id7" id="id27">ファイルパスのように表現する</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id28">文頭のダブルスラッシュ <code class="docutils literal notranslate"><span class="pre">//</span></code> は「文書内のすべての～」</a></p></li>
<li><p><a class="reference internal" href="#id9" id="id29">星印 <code class="docutils literal notranslate"><span class="pre">*</span></code> は全ての要素にマッチする</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id30">角括弧 <code class="docutils literal notranslate"><span class="pre">[]</span></code> は条件を与えて絞り込む</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id31">記号 <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> で属性を表す</a></p></li>
<li><p><a class="reference internal" href="#id12" id="id32">属性値</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id13" id="id33">軸</a></p>
<ul>
<li><p><a class="reference internal" href="#child" id="id34">軸 <code class="docutils literal notranslate"><span class="pre">child::</span></code></a></p></li>
<li><p><a class="reference internal" href="#descendant" id="id35">軸 <code class="docutils literal notranslate"><span class="pre">descendant::</span></code></a></p></li>
<li><p><a class="reference internal" href="#attribute" id="id36">軸 <code class="docutils literal notranslate"><span class="pre">attribute::</span></code></a></p></li>
<li><p><a class="reference internal" href="#self" id="id37">軸 <code class="docutils literal notranslate"><span class="pre">self::</span></code></a></p></li>
<li><p><a class="reference internal" href="#parent" id="id38">軸 <code class="docutils literal notranslate"><span class="pre">parent::</span></code></a></p></li>
<li><p><a class="reference internal" href="#ancestor" id="id39">軸 <code class="docutils literal notranslate"><span class="pre">ancestor::</span></code></a></p></li>
<li><p><a class="reference internal" href="#following-sibling" id="id40">軸 <code class="docutils literal notranslate"><span class="pre">following-sibling::</span></code></a></p></li>
<li><p><a class="reference internal" href="#preceding-sibling" id="id41">軸 <code class="docutils literal notranslate"><span class="pre">preceding-sibling::</span></code></a></p></li>
<li><p><a class="reference internal" href="#following" id="id42">軸 <code class="docutils literal notranslate"><span class="pre">following::</span></code></a></p></li>
<li><p><a class="reference internal" href="#namespace" id="id43">軸 <code class="docutils literal notranslate"><span class="pre">namespace::</span></code></a></p></li>
<li><p><a class="reference internal" href="#preceding" id="id44">軸 <code class="docutils literal notranslate"><span class="pre">preceding::</span></code></a></p></li>
<li><p><a class="reference internal" href="#descendant-or-self" id="id45">軸 <code class="docutils literal notranslate"><span class="pre">descendant-or-self::</span></code></a></p></li>
<li><p><a class="reference internal" href="#ancestor-or-self" id="id46">軸 <code class="docutils literal notranslate"><span class="pre">ancestor-or-self::</span></code></a></p></li>
<li><p><a class="reference internal" href="#id14" id="id47">文書中の要素ノードを類別する</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id15" id="id48">関数</a></p>
<ul>
<li><p><a class="reference internal" href="#count" id="id49">関数 <code class="docutils literal notranslate"><span class="pre">count()</span></code></a></p></li>
<li><p><a class="reference internal" href="#name-contains-starts-with" id="id50">関数 <code class="docutils literal notranslate"><span class="pre">name()</span></code>, <code class="docutils literal notranslate"><span class="pre">contains()</span></code>, <code class="docutils literal notranslate"><span class="pre">starts-with()</span></code></a></p></li>
<li><p><a class="reference internal" href="#string-length" id="id51">関数 <code class="docutils literal notranslate"><span class="pre">string-length()</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id16" id="id52">演算子</a></p>
<ul>
<li><p><a class="reference internal" href="#id17" id="id53">演算子 <code class="docutils literal notranslate"><span class="pre">|</span></code></a></p></li>
<li><p><a class="reference internal" href="#id18" id="id54">論理演算</a></p></li>
<li><p><a class="reference internal" href="#id19" id="id55">算術演算</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#id20" id="id56">関連リンク</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="id2">
<h2><a class="toc-backref" href="#id22" role="doc-backlink">練習方法</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<p>ブラウザーの開発ツールのコンソールを利用するか、Scrapy のシェルを利用する。</p>
<section id="id3">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">開発ツールのコンソール</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<p>モダンなウェブブラウザーには開発ツールというのが実装されていて、そのうちのコンソールで XPath 式を評価することができる。<strong class="program">Chrome</strong> 系では関数 <code class="docutils literal notranslate"><span class="pre">$x()</span></code>
が XPath を評価する。</p>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>できればスクリーンショットをここに入れる。</p>
</div>
<ol class="arabic simple">
<li><p>ブラウザーで対象となるファイルのローカルパスなり URL なりを指定して開く。</p></li>
<li><p>例えばページ上で右クリックメニューを表示して、そこから「検証」を選択する。</p></li>
<li><p>雑多な画面が出てくるので、コンソールを表示するためのタブを見つけてそれをクリックする。</p></li>
<li><p>コンソールが出てくるはずなので、そこで <code class="docutils literal notranslate"><span class="pre">$x()</span></code> とタイプして、評価したい
XPath 式を丸括弧内にタイプする。</p></li>
</ol>
<p>あとは JavaScript で処理する。</p>
</section>
<section id="scrapy">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">Scrapy シェル</a><a class="headerlink" href="#scrapy" title="Permalink to this heading">¶</a></h3>
<p>HTML ファイルまたはそのコードが手許にあるときには、それを対象として Scrapy シェルを起動する。以下、対象となる HTML ファイルが <code class="file docutils literal notranslate"><span class="pre">target.html</span></code> という名前でカレントディレクトリーにある場合の例を示す。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bash$ scrapy shell ./target.html --nolog</span>
</pre></div>
</div>
<p>それから次のようにして XPath 式を試すことができる。</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="go">[s] Available Scrapy objects:</span>
<span class="go">[s]   scrapy     scrapy module (contains scrapy.Request, scrapy.Selector, etc)</span>
<span class="go">[s]   crawler    &lt;scrapy.crawler.Crawler object at 0x7eff721870a0&gt;</span>
<span class="go">[s]   item       {}</span>
<span class="go">[s]   request    &lt;GET file:///path/to/target.html&gt;</span>
<span class="go">[s]   response   &lt;200 file:///path/to/target.html&gt;</span>
<span class="go">[s]   settings   &lt;scrapy.settings.Settings object at 0x7eff72184fa0&gt;</span>
<span class="go">[s]   spider     &lt;DefaultSpider &#39;default&#39; at 0x7eff71419070&gt;</span>
<span class="go">[s] Useful shortcuts:</span>
<span class="go">[s]   fetch(url[, redirect=True]) Fetch URL and update local objects (by default, redirects are followed)</span>
<span class="go">[s]   fetch(req)                  Fetch a scrapy.Request and update local objects</span>
<span class="go">[s]   shelp()           Shell help (print this help)</span>
<span class="go">[s]   view(response)    View response in a browser</span>
<span class="gp">In [1]: </span><span class="n">response</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s1">&#39;//h1&#39;</span><span class="p">)</span>
<span class="gh">Out[1]:</span>
<span class="go">[&lt;Selector xpath=&#39;//h1&#39; data=&#39;&lt;h1&gt;内容&lt;/h1&gt;&#39;&gt;,</span>
<span class="go"> &lt;Selector xpath=&#39;//h1&#39; data=&#39;&lt;h1&gt;応答&lt;/h1&gt;&#39;&gt;]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="python-scrapy.html"><span class="doc">Scrapy 利用ノート</span></a> も参照。</p>
</div>
</section>
</section>
<section id="id5">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">基本仕様</a><a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h2>
<p>XPath 1.0 の急所に絞って記す。</p>
<section id="id6">
<h3><a class="toc-backref" href="#id26" role="doc-backlink">文法・構文</a><a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h3>
<section id="id7">
<h4><a class="toc-backref" href="#id27" role="doc-backlink">ファイルパスのように表現する</a><a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h4>
<p>スラッシュ一つから始まる UNIX のファイルシステムの絶対パス表記のような XPath 式は、ドキュメントルートからのパスを表現する。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/AAA
/AAA/CCC
/AAA/DDD/BBB
</pre></div>
</div>
<p>以下、このような <code class="docutils literal notranslate"><span class="pre">AAA</span></code>, <code class="docutils literal notranslate"><span class="pre">BBB</span></code> などが何であるのかを敢えて説明しないが、例えば要素ノードの名前などは当てはまると記しておく。</p>
</section>
<section id="id8">
<h4><a class="toc-backref" href="#id28" role="doc-backlink">文頭のダブルスラッシュ <code class="docutils literal notranslate"><span class="pre">//</span></code> は「文書内のすべての～」</a><a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h4>
<p>スラッシュ二つ <code class="docutils literal notranslate"><span class="pre">//</span></code> から始まる XPath 式は、後続する条件を満たし、かつドキュメント内にある要素全てを表す。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>//BBB
//DDD/BBB
</pre></div>
</div>
<ul class="simple">
<li><p>例えば最初の式は「ドキュメント内にある <code class="docutils literal notranslate"><span class="pre">BBB</span></code> すべて」を表す。</p></li>
<li><p>次の式では「すべて」が <code class="docutils literal notranslate"><span class="pre">DDD</span></code> のほうにかかることに注意する。</p></li>
</ul>
</section>
<section id="id9">
<h4><a class="toc-backref" href="#id29" role="doc-backlink">星印 <code class="docutils literal notranslate"><span class="pre">*</span></code> は全ての要素にマッチする</a><a class="headerlink" href="#id9" title="Permalink to this heading">¶</a></h4>
<p>星印 <code class="docutils literal notranslate"><span class="pre">*</span></code> はあらゆる要素にマッチする。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/AAA/CCC/DDD/*
/*/*/*/BBB
//*
</pre></div>
</div>
<ul class="simple">
<li><p>二番目の式はルートから数えて 4 階層目にある要素 <code class="docutils literal notranslate"><span class="pre">BBB</span></code> すべてを選択する。</p></li>
<li><p>最後の式は「文書中にあるすべての要素」を表現するふつうの XPath 式だ。</p></li>
</ul>
</section>
<section id="id10">
<h4><a class="toc-backref" href="#id30" role="doc-backlink">角括弧 <code class="docutils literal notranslate"><span class="pre">[]</span></code> は条件を与えて絞り込む</a><a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h4>
<p>角括弧 <code class="docutils literal notranslate"><span class="pre">[]</span></code> を使って要素をさらに限定するための何かを指定する。</p>
<p>番号を指定すると、選択集合にある要素の位置を指定することになる。関数 <code class="docutils literal notranslate"><span class="pre">last()</span></code>
を指定すると、選択集合の最後の要素を指定することになる。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/AAA/BBB[1]
/AAA/BBB[last()]
</pre></div>
</div>
</section>
<section id="id11">
<h4><a class="toc-backref" href="#id31" role="doc-backlink">記号 <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> で属性を表す</a><a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h4>
<p>属性を指定するには <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> 接頭辞を用いることができる。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>//BBB[@id]
//@id
//BBB[@name]
//BBB[@*]
//BBB[not(@*)]
</pre></div>
</div>
<p>今までは XML の要素を選択する例だったが、この例では属性を選択することに注意。
XML では要素も属性もノードと呼ばれる抽象概念の特殊概念として捉えること。</p>
<ul class="simple">
<li><p>三番目の式と最後の式はそれぞれ「（何でもいいから）属性を有する要素」「属性を（何も）有しない要素」を表す。</p></li>
</ul>
</section>
<section id="id12">
<h4><a class="toc-backref" href="#id32" role="doc-backlink">属性値</a><a class="headerlink" href="#id12" title="Permalink to this heading">¶</a></h4>
<p>属性の値を選択の判定方法として用いることができる。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>//BBB[@id=&#39;b1&#39;]
//BBB[@name=&#39;bbb&#39;]
//BBB[normalize-space(@name)=&#39;bbb&#39;]
</pre></div>
</div>
<ul class="simple">
<li><p>最初の XPath 式は「属性 <code class="docutils literal notranslate"><span class="pre">id</span></code> の値が <code class="docutils literal notranslate"><span class="pre">b1</span></code> であるような要素 <code class="docutils literal notranslate"><span class="pre">BBB</span></code> すべて」を表現する。</p></li>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">normalize-space()</span></code> は文字列の前後から空白を除去し、なおかつ連続する空白文字の列を単一の空白文字に置き換える。ここでは <code class="docutils literal notranslate"><span class="pre">&#64;name</span></code> に、つまり属性
<code class="docutils literal notranslate"><span class="pre">name</span></code> の値に作用する。</p></li>
</ul>
</section>
</section>
<section id="id13">
<h3><a class="toc-backref" href="#id33" role="doc-backlink">軸</a><a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h3>
<p>XML 文書は単一ノードを根とする木構造であるから、特定のノードを基点として他のノードを指定するのに、両者の関係でそれを実現する仕組みがある。XPath の仕様はそれを
axis と呼んでいる。日本語なら「軸」であるが、英語では祖先、子孫、親、子、兄弟、等々の関係を総称して軸と呼ぶのだろうか。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">child::</span></code></p></td>
<td><p>子ノード</p></td>
<td><p>既定の軸</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">descendant::</span></code></p></td>
<td><p>子孫ノード</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">attribute::</span></code></p></td>
<td><p>属性ノード</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">self::</span></code></p></td>
<td><p>自身</p></td>
<td><p>明示的に指定する場合があるのでこれがある</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">descendant-or-self::</span></code></p></td>
<td><p>子孫または自身</p></td>
<td><p>和集合</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">following-sibling::</span></code></p></td>
<td><p>弟ノード</p></td>
<td><p>便宜上そう呼ぶことにする</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">following::</span></code></p></td>
<td><p>後続ノード</p></td>
<td><p>自身の子孫を除外</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">namespace::</span></code></p></td>
<td><p>名前空間ノード</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ancestor::</span></code></p></td>
<td><p>祖先ノード</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">preceding-sibling::</span></code></p></td>
<td><p>兄ノード</p></td>
<td><p>便宜上そう呼ぶことにする</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">preceding::</span></code></p></td>
<td><p>先行ノード</p></td>
<td><p>自身の祖先を除外</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ancestor-or-self::</span></code></p></td>
<td><p>祖先または自身</p></td>
<td><p>和集合</p></td>
</tr>
</tbody>
</table>
<section id="child">
<h4><a class="toc-backref" href="#id34" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">child::</span></code></a><a class="headerlink" href="#child" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">child::</span></code> はコンテキストノードの子すべてを含む。軸 <code class="docutils literal notranslate"><span class="pre">child::</span></code> は既定の軸なので省略することができる。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/AAA
/child::AAA
/AAA/BBB
/child::AAA/child::BBB
/child::AAA/BBB
</pre></div>
</div>
<p>例の最初と二番目の XPath 式は同じであり、「ルートの子要素である <code class="docutils literal notranslate"><span class="pre">AAA</span></code> すべて」の意味となる。また、三番目と四番目と五番目が同じものを表現する。</p>
<p>どうやら軸の名称はすべて英語単数形らしいが、実際に表現されるものが複数あることは普通だ。</p>
</section>
<section id="descendant">
<h4><a class="toc-backref" href="#id35" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">descendant::</span></code></a><a class="headerlink" href="#descendant" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">descendant::</span></code> はコンテキストノードの子、あるいはさらにその子、等々、を含む。結果的に <code class="docutils literal notranslate"><span class="pre">descendant::</span></code> は属性や名前空間を含むことはない。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/descendant::*
/AAA/BBB/descendant::*
//CCC/descendant::*
//CCC/descendant::DDD
</pre></div>
</div>
<ul class="simple">
<li><p>最初の式はルートの子孫要素すべてを、したがってすべての要素を意味する。</p></li>
<li><p>二番目は <code class="docutils literal notranslate"><span class="pre">/AAA/BBB</span></code> の子孫要素のすべてを表す。書き忘れたがコンテキストノード自身は式の表現するものに含まれない。</p></li>
<li><p>三番目は「文書内の要素 <code class="docutils literal notranslate"><span class="pre">CCC</span></code> それぞれに対する子孫ノードすべて」を表す。</p></li>
<li><p>四番目は「文書内の要素 <code class="docutils literal notranslate"><span class="pre">CCC</span></code> それぞれに対する子孫ノードであるような要素
<code class="docutils literal notranslate"><span class="pre">DDD</span></code> すべて」を表す。 「すべて」が二度出ることに注意する。</p></li>
</ul>
</section>
<section id="attribute">
<h4><a class="toc-backref" href="#id36" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">attribute::</span></code></a><a class="headerlink" href="#attribute" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">attribute::</span></code> はノードの属性を意味する。ふつうは略記法の <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> を用いる。</p>
</section>
<section id="self">
<h4><a class="toc-backref" href="#id37" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">self::</span></code></a><a class="headerlink" href="#self" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">self::</span></code> はコンテキストノード自身を表す。</p>
</section>
<section id="parent">
<h4><a class="toc-backref" href="#id38" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">parent::</span></code></a><a class="headerlink" href="#parent" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">parent::</span></code> はコンテキストノードの親ノードを表す。親ノードは高々一つ存在する。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>//DDD/parent::*
</pre></div>
</div>
</section>
<section id="ancestor">
<h4><a class="toc-backref" href="#id39" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">ancestor::</span></code></a><a class="headerlink" href="#ancestor" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">ancestor::</span></code> はコンテキストノードの親、あるいはその親、等々、を表す。コンテキストノードがルートでない限りは常にルートノードを含む。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/AAA/BBB/DDD/CCC/EEE/ancestor::*
//FFF/ancestor::*
</pre></div>
</div>
<p>最初の例では <code class="docutils literal notranslate"><span class="pre">/</span></code>, <code class="docutils literal notranslate"><span class="pre">/AAA</span></code>, <code class="docutils literal notranslate"><span class="pre">/AAA/BBB</span></code>, … などが得られることに注意。</p>
</section>
<section id="following-sibling">
<h4><a class="toc-backref" href="#id40" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">following-sibling::</span></code></a><a class="headerlink" href="#following-sibling" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">following-sibling::</span></code> はコンテキストノードの「後続（文書のより後方にある）の兄弟ノードすべて」を含む。便宜上、これを「弟」と呼ぶことにする。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/AAA/BBB/following-sibling::*
//CCC/following-sibling::*
</pre></div>
</div>
</section>
<section id="preceding-sibling">
<h4><a class="toc-backref" href="#id41" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">preceding-sibling::</span></code></a><a class="headerlink" href="#preceding-sibling" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">preceding-sibling::</span></code> はコンテキストノードの「先行（文書のより前方にある）兄弟ノードすべて」を含む。便宜上、これを「兄」と呼ぶことにする。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/AAA/XXX/preceding-sibling::*
//CCC/preceding-sibling::*
</pre></div>
</div>
</section>
<section id="following">
<h4><a class="toc-backref" href="#id42" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">following::</span></code></a><a class="headerlink" href="#following" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">following::</span></code> はコンテキストノードの「文書内にあるより後方のノードすべて」を含む。ただしコンテキストノード自身の子孫ノード、属性ノード、名前空間ノードを含まない。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/AAA/XXX/following::*
//ZZZ/following::*
</pre></div>
</div>
</section>
<section id="namespace">
<h4><a class="toc-backref" href="#id43" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">namespace::</span></code></a><a class="headerlink" href="#namespace" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">namespace::</span></code> はコンテキストノードの名前空間を表す。これは使わない。</p>
</section>
<section id="preceding">
<h4><a class="toc-backref" href="#id44" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">preceding::</span></code></a><a class="headerlink" href="#preceding" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">preceding::</span></code> はコンテキストノードの「文書内にあるより前方のノードすべて」を含む。ただしコンテキストノード自身の祖先ノード、属性ノード、名前空間ノードを含まない。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/AAA/XXX/preceding::*
//GGG/preceding::*
</pre></div>
</div>
</section>
<section id="descendant-or-self">
<h4><a class="toc-backref" href="#id45" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">descendant-or-self::</span></code></a><a class="headerlink" href="#descendant-or-self" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">descendant-or-self::</span></code> は軸 <code class="docutils literal notranslate"><span class="pre">descendant::</span></code> およびコンテキストノード自身を含む。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/AAA/XXX/descendant-or-self::*
//CCC/descendant-or-self::*
</pre></div>
</div>
</section>
<section id="ancestor-or-self">
<h4><a class="toc-backref" href="#id46" role="doc-backlink">軸 <code class="docutils literal notranslate"><span class="pre">ancestor-or-self::</span></code></a><a class="headerlink" href="#ancestor-or-self" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">ancestor-or-self::</span></code> は軸 <code class="docutils literal notranslate"><span class="pre">ancestor::</span></code> およびコンテキストノード自身を含む。それゆえ常にルートノードを含む。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>/AAA/XXX/DDD/EEE/ancestor-or-self::*
//GGG/ancestor-or-self::*
</pre></div>
</div>
</section>
<section id="id14">
<h4><a class="toc-backref" href="#id47" role="doc-backlink">文書中の要素ノードを類別する</a><a class="headerlink" href="#id14" title="Permalink to this heading">¶</a></h4>
<p>軸 <code class="docutils literal notranslate"><span class="pre">ancestor::</span></code>, <code class="docutils literal notranslate"><span class="pre">descendant::</span></code>, <code class="docutils literal notranslate"><span class="pre">following::</span></code>, <code class="docutils literal notranslate"><span class="pre">preceding::</span></code>, <code class="docutils literal notranslate"><span class="pre">self::</span></code>
は属性と名前空間を無視すれば文書中のノード全体を類別する。この事実は XPath の設計の基本のはずなので、よく憶えておくことだ。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>//GGG/ancestor::*
//GGG/descendant::*
//GGG/following::*
//GGG/preceding::*
//GGG/self::*
//GGG/ancestor::* | //GGG/descendant::* | //GGG/following::* | //GGG/preceding::* | //GGG/self::*
</pre></div>
</div>
</section>
</section>
<section id="id15">
<h3><a class="toc-backref" href="#id48" role="doc-backlink">関数</a><a class="headerlink" href="#id15" title="Permalink to this heading">¶</a></h3>
<p>関数一覧を表にしておく。引数リストは省略。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">boolean()</span></code></p></td>
<td><p>XPath 式を true または false に評価する</p></td>
<td><p>明示的に真偽値に変換する必要があるときに使う</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ceiling()</span></code></p></td>
<td><p>C/C++ の <code class="docutils literal notranslate"><span class="pre">ceil()</span></code> と同様</p></td>
<td><p>使いそうにない</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">concat()</span></code></p></td>
<td><p>複数の文字列を <code class="docutils literal notranslate"><span class="pre">cat</span></code> する</p></td>
<td><p>任意の個数の文字列を与えて構わない</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">contains()</span></code></p></td>
<td><p>第一引数の文字列が第二引数の文字列を部分として含むか</p></td>
<td><p>頻出</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">count()</span></code></p></td>
<td><p>ノード集合の個数を返す</p></td>
<td><p>頻出</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">false()</span></code></p></td>
<td><p>UNIX の <code class="docutils literal notranslate"><span class="pre">false</span></code> と同様</p></td>
<td><p>リテラルの false が存在しないのでこれがある</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">floor()</span></code></p></td>
<td><p>C/C++ のそれと同様</p></td>
<td><p>使いそうにない</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">id()</span></code></p></td>
<td><p>与えられた何かにマッチするノードを検索して、それを含むノードを返す</p></td>
<td><p>微妙にわかりにくい</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lang()</span></code></p></td>
<td><p>略</p></td>
<td><p>略</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">last()</span></code></p></td>
<td><p>式評価コンテキストから決まるサイズの値を返す</p></td>
<td><p>頻出</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">local-name()</span></code></p></td>
<td><p>ノードセットの最初のノードのローカル名を返す</p></td>
<td><p>ローカル名とは何か</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">name()</span></code></p></td>
<td><p>ノードセットの最初のノードの完全修飾名を返す</p></td>
<td><p>頻出</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">namespace-uri()</span></code></p></td>
<td><p>ノードセットの最初のノードの名前空間 URI を返す</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">http://www.w3.org/1999/xhtml</span></code> のような文字列</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">normalize-space()</span></code></p></td>
<td><p>空白文字を適宜トリムする</p></td>
<td><p>前回のノート参照</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">not()</span></code></p></td>
<td><p>与えられた真偽値の否定値を返す</p></td>
<td><p>頻出</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">number()</span></code></p></td>
<td><p>引数を数値に変換して返す</p></td>
<td><p>ここで言う変換とは？</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">position()</span></code></p></td>
<td><p>式評価コンテキストから決まる位置を返す</p></td>
<td><p>配列の添字であると考える</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">round()</span></code></p></td>
<td><p>C/C++ のそれと同様</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">starts-with()</span></code></p></td>
<td><p>第一引数の文字列が第二引数の文字列から始まるか</p></td>
<td><p>頻出</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">string()</span></code></p></td>
<td><p>文字列に変換する</p></td>
<td><p>頻出</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">string-length()</span></code></p></td>
<td><p>文字列を構成する文字の個数を返す</p></td>
<td><p>引数なしのときは文書全体の文字数を返すようだ</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">substring()</span></code></p></td>
<td><p>部分文字列を返す</p></td>
<td><p>start/length 方式</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">substring-after()</span></code></p></td>
<td><p>第一引数文字列のうち、第二引数文字列以降の部分文字列を返す</p></td>
<td><p>返り値は第二引数文字列を含まない</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">substring-before()</span></code></p></td>
<td><p>第一引数文字列のうち、第二引数文字列以前の部分文字列を返す</p></td>
<td><p>返り値は第二引数文字列を含まない</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sum()</span></code></p></td>
<td><p>各ノードの数値の和を返す</p></td>
<td><p>詳細不明</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">translate()</span></code></p></td>
<td><p>Python の <code class="docutils literal notranslate"><span class="pre">str.translate()</span></code> と同様</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">true()</span></code></p></td>
<td><p>UNIX の <code class="docutils literal notranslate"><span class="pre">true</span></code> と同様</p></td>
<td><p>リテラルの true が存在しないのでこれがある</p></td>
</tr>
</tbody>
</table>
<p>ちなみにこの図表のインデックス列はブラウザーの開発ツールのコンソールで XPath から生成、ソートした：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nx">$x</span><span class="p">(</span><span class="s1">&#39;//a[starts-with(@name, &quot;function-&quot;)]/b[2]/text()&#39;</span><span class="p">)){</span>
<span class="w">     </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>以下、有用な関数に絞って記す。</p>
<section id="count">
<h4><a class="toc-backref" href="#id49" role="doc-backlink">関数 <code class="docutils literal notranslate"><span class="pre">count()</span></code></a><a class="headerlink" href="#count" title="Permalink to this heading">¶</a></h4>
<p>関数 <code class="docutils literal notranslate"><span class="pre">count()</span></code> は選択要素の個数を返す。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>//*[count(BBB)=2]
//*[count(*)=2]
//*[count(*)=3]
</pre></div>
</div>
<ul class="simple">
<li><p>最初の式は「子要素 <code class="docutils literal notranslate"><span class="pre">BBB</span></code> がちょうど 2 個あるような要素すべて」か。</p></li>
<li><p>残りの式も <code class="docutils literal notranslate"><span class="pre">*</span></code> が二回ずつでてきて意味をつかめない。</p></li>
</ul>
</section>
<section id="name-contains-starts-with">
<h4><a class="toc-backref" href="#id50" role="doc-backlink">関数 <code class="docutils literal notranslate"><span class="pre">name()</span></code>, <code class="docutils literal notranslate"><span class="pre">contains()</span></code>, <code class="docutils literal notranslate"><span class="pre">starts-with()</span></code></a><a class="headerlink" href="#name-contains-starts-with" title="Permalink to this heading">¶</a></h4>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>//*[name()=&#39;BBB&#39;]
//*[starts-with(name(),&#39;B&#39;)]
//*[contains(name(),&#39;C&#39;)]
</pre></div>
</div>
<ul class="simple">
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">name()</span></code> は要素の名前を返す。</p></li>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">starts-with()</span></code> は引数を二つとる。最初の引数の文字列が次の引数の文字列で始まるような文字列であれば真を返す。</p></li>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">contains()</span></code> は最初の引数の文字列が次の引数の文字列を部分に含むならば真を返す。</p></li>
<li><p>角括弧は Boolean を受けるという性質があることを意識すること。</p></li>
<li><p>最初の式はもっと自然な表現がある。</p></li>
</ul>
</section>
<section id="string-length">
<h4><a class="toc-backref" href="#id51" role="doc-backlink">関数 <code class="docutils literal notranslate"><span class="pre">string-length()</span></code></a><a class="headerlink" href="#string-length" title="Permalink to this heading">¶</a></h4>
<p>関数 <code class="docutils literal notranslate"><span class="pre">string-length()</span></code> は文字列を構成する文字の個数を返す。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>//*[string-length(name()) = 3]
//*[string-length(name()) &lt; 3]
//*[string-length(name()) &gt; 3]
</pre></div>
</div>
</section>
</section>
<section id="id16">
<h3><a class="toc-backref" href="#id52" role="doc-backlink">演算子</a><a class="headerlink" href="#id16" title="Permalink to this heading">¶</a></h3>
<p>以下の表に挙げる演算子は基本的には二項演算子だ。演算子の記号の両辺にオペランドをとると解釈する。演算子 <code class="docutils literal notranslate"><span class="pre">//</span></code> だけは左辺に何も置かないで記述することができる。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>operator</p></th>
<th class="head"><p>description</p></th>
<th class="head"><p>comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">and</span></code></p></td>
<td><p>logical and</p></td>
<td><p>Python の <code class="docutils literal notranslate"><span class="pre">and</span></code> と同じ</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">or</span></code></p></td>
<td><p>logical or</p></td>
<td><p>Python の <code class="docutils literal notranslate"><span class="pre">or</span></code> と同じ</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mod</span></code></p></td>
<td><p>remainder</p></td>
<td><p>JavaScript の <code class="docutils literal notranslate"><span class="pre">%</span></code> のそれと同じ（特に符号のあるオペランドに対して）</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">div</span></code></p></td>
<td><p>division</p></td>
<td><p>浮動小数点演算</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
<td><p>multiplicaion</p></td>
<td><p>仕様書に説明がない？</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">/</span></code></p></td>
<td><p>path-compose</p></td>
<td><p>除算ではない</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">//</span></code></p></td>
<td><p>path-abbreviate</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">/descendant-or-self::node()/</span></code> を意味する記号</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">|</span></code></p></td>
<td><p>set-union</p></td>
<td><p>オペランドはノード集合</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">+</span></code></p></td>
<td><p>addition</p></td>
<td><p>C/C++ と同じ</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td><p>subtraction</p></td>
<td><p>C/C++ と同じ</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">=</span></code></p></td>
<td><p>equality</p></td>
<td><p>C/C++ の <code class="docutils literal notranslate"><span class="pre">==</span></code> と同じ</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">!=</span></code></p></td>
<td><p>inequality</p></td>
<td><p>C/C++ と同じ</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code></p></td>
<td><p>less than</p></td>
<td><p>C/C++ と同じ</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code></p></td>
<td><p>less than or equal</p></td>
<td><p>C/C++ と同じ</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></td>
<td><p>greater</p></td>
<td><p>C/C++ と同じ</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></p></td>
<td><p>greater than or equal</p></td>
<td><p>C/C++ と同じ</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>論理演算子は一般のプログラミング言語同様の短絡評価をする。</p></li>
<li><p>一部の演算子はパス式の記号と混同されないように、前後に空白を入れるなどの配慮を必要とする。</p></li>
</ul>
<section id="id17">
<h4><a class="toc-backref" href="#id53" role="doc-backlink">演算子 <code class="docutils literal notranslate"><span class="pre">|</span></code></a><a class="headerlink" href="#id17" title="Permalink to this heading">¶</a></h4>
<p>パイプ記号 <code class="docutils literal notranslate"><span class="pre">|</span></code> を使って複数のパスを結合することができる。というよりは、複数の XPath 式の和集合を得ると考えられる。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>//CCC | //BBB
/AAA/EEE | //BBB
/AAA/EEE | //DDD/CCC | /AAA | //BBB
</pre></div>
</div>
<p>この例だと最初のものは「文書内の要素 <code class="docutils literal notranslate"><span class="pre">CCC</span></code> すべてまたは文書内の要素 <code class="docutils literal notranslate"><span class="pre">BBB</span></code> すべて」を意味する。</p>
</section>
<section id="id18">
<h4><a class="toc-backref" href="#id54" role="doc-backlink">論理演算</a><a class="headerlink" href="#id18" title="Permalink to this heading">¶</a></h4>
<p>XPath 式は真偽値に対する二項演算の形式で論理演算をすることができる。演算の優先順位は次のリストに示す順番どおりになっている：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">or</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">and</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">=</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></li>
</ul>
</section>
<section id="id19">
<h4><a class="toc-backref" href="#id55" role="doc-backlink">算術演算</a><a class="headerlink" href="#id19" title="Permalink to this heading">¶</a></h4>
<p>演算の優先順位は一般のプログラミング言語と同様のようだ。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>//BBB[position() mod 2 = 0]
//BBB[position() = floor(last() div 2 + 0.5) or position() = ceiling(last() div 2 + 0.5)]
//CCC[position() = floor(last() div 2 + 0.5) or position() = ceiling(last() div 2 + 0.5)]
</pre></div>
</div>
</section>
</section>
</section>
<section id="id20">
<h2><a class="toc-backref" href="#id56" role="doc-backlink">関連リンク</a><a class="headerlink" href="#id20" title="Permalink to this heading">¶</a></h2>
<p>仕様書や参考になる文書のリンクをまとめる。</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.w3.org/TR/1999/REC-xpath-19991116/">XML Path Language (XPath)</a></p></li>
<li><p><a class="reference external" href="https://triple-underscore.github.io/XML/xpath10-ja.html">XML パス言語 (XPath) 1.0</a></p></li>
<li><p><a class="reference external" href="http://www.zvon.org/comp/r/tut-XPath_1.html#intro">List of XPaths [XPath 1.0 Tutorial &#64; Zvon.org]</a></p></li>
<li><p><a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/XSLT/Transforming_XML_with_XSLT/The_Netscape_XSLT_XPath_Reference">The Netscape XSLT/XPath Reference - XSLT: Extensible Stylesheet Language Transformations</a></p></li>
</ul>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="css-selector.html" title="Previous document">CSS セレクター学習ノート</a>
        </li>
        <li>
          <a href="hxutils.html" title="Next document">HTML-XML-utils 利用ノート</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">読書ノート</a></h1>



<p class="blurb">個人的な読書、学習、研究ノート。</p>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="mathseminar72.html">数学 100 の発見 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="gamma95/index.html">オブジェクト指向における再利用のためのデザインパターン改訂版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="hunt00/index.html">達人プログラマー 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="sutter00.html">Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="alexandrescu01/index.html">Modern C++ Design 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="meyers01.html">Effective STL 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="sutter02.html">More Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="joel04/index.html">Joel on Software 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="graham04.html">ハッカーと画家 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="angel05/index.html">OpenGL: A Primer Second Edition 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="yamamoto05/index.html">入門 xyzzy 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="newham05/index.html">入門 bash 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsuboi05/index.html">幾何学 I 多様体入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="subramaniam06.html">アジャイルプラクティス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="asaoka06.html">SE・製造技術者・理工系学生のための技術文書の作り方・書き方 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="levin06/index.html">Shaping Functions 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="tsuboi08/index.html">幾何学 III 微分形式 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="loeliger09.html">実用 Git 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="griffiths10.html">プログラミング C# 第 6 版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="onodera10.html">ORACLE MASTER Bronze 11g SQL 基礎 I 必修教本 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="hosoda10/index.html">Python 入門［２＆３対応］読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="nishiyama12/index.html">幾何学と不変量 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="omg15/index.html">Unified Modeling Language 2.5 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="gorelick14.html">ハイパフォーマンス Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="stroustrup14.html">C++ のエッセンス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="stepanov15.html">その数式、プログラムできますか？ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="khronos15/index.html">WebGL Specification 1.0 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="vivo15/index.html">The Book of Shaders 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="saha16.html">Python からはじめる数学入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="slatkin16.html">Effective Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="guntheroth16.html">Optimized C++ 下読みノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="speinellis17.html">Effective Debugging 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="bancila18.html">Modern C++ チャレンジ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="haverbeke18/index.html">Eloquent JavaScript 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="khronos18/index.html">OpenGL Shading Language 4.60 Specification 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="kantor22/index.html">The Modern JavaScript Tutorial 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="ou23/index.html">Modern C++ Tutorial: C++ 11/14/17/20 On the Fly 読書ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="preliminary2014.html">ノート準備中書籍群 2014 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="preliminary2015.html">ノート準備中書籍群 2015 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="preliminary2016.html">ノート準備中書籍群 2016 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="preliminary2017.html">ノート準備中書籍群 2017 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="preliminary2018.html">ノート準備中書籍群 2018 年編</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="bash-v2.html">What’s New In Bash 2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="bash-v3.html">What’s New In Bash 3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="bash-v4.html">What’s New In Bash 4 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="bash-v5.html">What’s New In Bash 5 ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cpp11/index.html">What’s New In C++11 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp14/index.html">What’s New In C++14 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="cpp17/index.html">What’s New In C++17 ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="python-3.0.html">What’s New In Python 3.0 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-3.1.html">What’s New In Python 3.1 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-3.2.html">What’s New In Python 3.2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-3.3.html">What’s New In Python 3.3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-3.4.html">What’s New In Python 3.4 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-3.5.html">What’s New In Python 3.5 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-3.6.html">What’s New In Python 3.6 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-3.7.html">What’s New In Python 3.7 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-3.8.html">What’s New In Python 3.8 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-3.9.html">What’s New In Python 3.9 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-3.10.html">What’s New In Python 3.10 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-pip.html">pip 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-pylint.html">Pylint 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-docutils/index.html">Docutils 解読ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-restview.html">Restview 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-nose.html">Nose 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-ipython.html">IPython 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-jupyter.html">Jupyter 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-numpy/index.html">NumPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-scipy/index.html">SciPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-sympy/index.html">SymPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-apgl.html">Another Python Graph Library (APGL) 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-pil.html">PIL 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-pillow.html">Pillow 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-matplotlib/index.html">Matplotlib 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-networkx/index.html">NetworkX 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-quaternion.html">Quaternion 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-jinja2.html">Jinja2 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-pygments.html">Pygments 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-bs4.html">BeautifulSoup4 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-selenium.html">Selenium 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-scrapy.html">Scrapy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-twitter/index.html">Python Twitter Tools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-isbn-hyphenate.html">isbn-hyphenate 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-pyopengl/index.html">PyOpenGL 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-pyqt4.html">PyQt4 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-pyqt5.html">PyQt5 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-pandas/index.html">Pandas 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-pygame.html">Pygame 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-pytube.html">Pytube 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="youtube-dl.html">youtube-dl 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-py2exe.html">Py2exe 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-upgrade.html">Python 移行ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="python-miniconda.html">Miniconda 利用ノート</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="freeware.html">Windows 用フリーウェア 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="google-ime.html">Google 日本語入力利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="deepl-translator.html">DeepL Translator 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="winget.html">Windows Package Manager CLI 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="powertoys/index.html">Microsoft PowerToys 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="windows-terminal.html">Windows Terminal 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="wsl.html">Windows Subsystem for Linux 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="wslg.html">Windows Subsystem for Linux GUI 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="vscode/index.html">Visual Studio Code 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="cygwin.html">Cygwin 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="chrome.html">Chrome DevTools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="git/index.html">Git 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="oh-my-posh.html">Oh My Posh 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="twitter.html">Twitter 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="inkscape/index.html">Inkscape 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="ffmpeg/index.html">FFmpeg 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="mathjax.html">MathJax 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="javascript-mermaid/index.html">Mermaid 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="css-selector.html">CSS セレクター学習ノート</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">XPath 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="hxutils.html">HTML-XML-utils 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="webgl.html">WebGL 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="pandoc.html">Pandoc 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="zoom.html">Zoom Cloud Meetings 利用ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="milestone09/index.html">ラジルギノア プレイノート</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="css-selector.html" title="previous chapter">CSS セレクター学習ノート</a></li>
      <li>Next: <a href="hxutils.html" title="next chapter">HTML-XML-utils 利用ノート</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="_static/logos.png"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2023, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>