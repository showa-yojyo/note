<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SciPy 利用ノート</title>
    
    <link rel="stylesheet" href="_static/prefab.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="top" title="読書ノート" href="index.html" />
    <link rel="next" title="Another Python Graph Library (APGL) 利用ノート" href="python-apgl.html" />
    <link rel="prev" title="NumPy 利用ノート" href="python-numpy.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html">読書ノート</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="scipy">
<h1><a class="toc-backref" href="#id12">SciPy 利用ノート</a><a class="headerlink" href="#scipy" title="Permalink to this headline">¶</a></h1>
<p>特に目的も定めずに <a class="reference external" href="http://www.scipy.org/">SciPy</a> を利用してみよう。
何か便利なものが見つかるかもしれない。</p>
<div class="contents topic" id="id1">
<p class="topic-title first">ノート目次</p>
<ul class="simple">
<li><a class="reference internal" href="#scipy" id="id12">SciPy 利用ノート</a><ul>
<li><a class="reference internal" href="#id2" id="id13">関連リンク</a></li>
<li><a class="reference internal" href="#id3" id="id14">関連ノート</a></li>
<li><a class="reference internal" href="#id4" id="id15">インストール</a></li>
<li><a class="reference internal" href="#id5" id="id16">ドキュメントを読む</a><ul>
<li><a class="reference internal" href="#getting-started" id="id17">Getting Started</a></li>
<li><a class="reference internal" href="#cookbook" id="id18">Cookbook</a></li>
<li><a class="reference internal" href="#scipy-reference-guide" id="id19">SciPy Reference Guide</a><ul>
<li><a class="reference internal" href="#introduction" id="id20">Introduction</a></li>
<li><a class="reference internal" href="#basic-functions-in-numpy-and-top-level-scipy" id="id21">Basic functions in Numpy (and top-level scipy)</a></li>
<li><a class="reference internal" href="#special-functions-scipy-special" id="id22">Special functions (scipy.special)</a></li>
<li><a class="reference internal" href="#integration-scipy-integrate" id="id23">Integration (scipy.integrate)</a></li>
<li><a class="reference internal" href="#optimization-scipy-optimize" id="id24">Optimization (scipy.optimize)</a></li>
<li><a class="reference internal" href="#interpolation-scipy-interpolate" id="id25">Interpolation (scipy.interpolate)</a></li>
<li><a class="reference internal" href="#fourier-transforms-scipy-fftpack" id="id26">Fourier Transforms (scipy.fftpack)</a></li>
<li><a class="reference internal" href="#signal-processing-scipy-signal" id="id27">Signal Processing (scipy.signal)</a></li>
<li><a class="reference internal" href="#linear-algebra-scipy-linalg" id="id28">Linear Algebra (scipy.linalg)</a></li>
<li><a class="reference internal" href="#sparse-eigenvalue-problems-with-arpack" id="id29">Sparse Eigenvalue Problems with ARPACK</a></li>
<li><a class="reference internal" href="#statistics-scipy-stats" id="id30">Statistics (scipy.stats)</a></li>
<li><a class="reference internal" href="#multi-dimensional-image-processing-scipy-ndimage" id="id31">Multi-dimensional image processing (scipy.ndimage)</a></li>
<li><a class="reference internal" href="#file-io-scipy-io" id="id32">File IO (scipy.io)</a></li>
<li><a class="reference internal" href="#weave-scipy-weave" id="id33">Weave (scipy.weave)</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id6" id="id34">コードを書く</a><ul>
<li><a class="reference internal" href="#id7" id="id35">ヘルプ</a><ul>
<li><a class="reference internal" href="#id8" id="id36">SciPy のバージョンを知る</a></li>
<li><a class="reference internal" href="#id9" id="id37">関数のヘルプを見る</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10" id="id38">定義済み定数を利用する</a></li>
<li><a class="reference internal" href="#kdtree" id="id39">KDTree を使う</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>OS<ul>
<li>Windows XP Home Edition SP 3</li>
<li>Windows 7 Home Premium SP 1</li>
</ul>
</li>
<li>本稿において、利用した各パッケージのバージョンは次のとおり。<ul>
<li><a class="reference external" href="http://www.python.org/">Python</a>: 2.6.6, 2.7.3, 3.4.1</li>
<li><a class="reference external" href="http://www.scipy.org/">SciPy</a>: 0.10.1, 0.14.0</li>
<li><a class="reference external" href="http://scipy.org/NumPy/">NumPy</a>: 1.6.1, 1.6.2, 1.8.2</li>
<li><a class="reference external" href="http://matplotlib.sourceforge.net/">Matplotlib</a>: 1.1.0, 1.1.1, 1.3.1</li>
<li><a class="reference external" href="http://somethingaboutorange.com/mrl/projects/nose/">Nose</a>: 1.1.2, 1.3.3</li>
</ul>
</li>
</ul>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>SciPy Reference Guide に倣い、以降のコード片においては、
あらかじめ各種 <tt class="docutils literal"><span class="pre">import</span></tt> を次のようにしたものとする。</p>
<div class="last highlight-python3"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">scipy</span> <span class="k">as</span> <span class="nn">sp</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id13">関連リンク</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt><a class="reference external" href="http://www.scipy.org/">SciPy</a></dt>
<dd>SciPy 総本山ウェブサイト。
ドキュメント、ダウンロード、コードレシピ等。</dd>
</dl>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id14">関連ノート</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="python-numpy.html"><em>NumPy 利用ノート</em></a></li>
<li><a class="reference internal" href="python-matplotlib.html"><em>Matplotlib 利用ノート</em></a></li>
<li><a class="reference internal" href="python-nose.html"><em>Nose 利用ノート</em></a></li>
</ul>
</div>
<div class="section" id="id4">
<h2><a class="toc-backref" href="#id15">インストール</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>自分の <a class="reference external" href="http://www.python.org/">Python</a> 環境 (Windows XP) に <a class="reference external" href="http://www.scipy.org/">SciPy</a> をインストールする方法を記す。
単体テストが走るところまで確認できたら、インストール成功とみなす。</p>
<ul>
<li><p class="first">&lt;The SciPy library depends on NumPy, which provides convenient and
fast N-dimensional array manipulation&gt; (SciPy.org) とあるので、
本ノートではあらかじめ <a class="reference external" href="http://scipy.org/NumPy/">NumPy</a> をインストールしてあることを前提とする。</p>
</li>
<li><p class="first">各種計算結果の出力（表示）に <a class="reference external" href="http://matplotlib.sourceforge.net/">Matplotlib</a> を多用しているので、
そちらもインストール済みであるとする。</p>
</li>
<li><p class="first"><a class="reference external" href="http://www.scipy.org/">SciPy</a> は単体テストに <a class="reference external" href="http://somethingaboutorange.com/mrl/projects/nose/">Nose</a> を利用している。
<a class="reference external" href="http://scipy.org/NumPy/">NumPy</a> インストール時に併せてインストールしてあるハズ。</p>
</li>
<li><p class="first">Windows 環境ではインストーラーからインストールするのが吉。
<tt class="file docutils literal"><span class="pre">scipy-x.y.z-win32-superpack-python2.6.exe</span></tt> みたいな名前のインストーラーを
<a class="reference external" href="http://www.scipy.org/">SciPy</a> のサイトから検索して入手しておけばよい。</p>
<p>Python 3.x 系や 64 ビット環境の場合は公式サイトではなく、
<a class="reference external" href="http://www.lfd.uci.edu/~gohlke/pythonlibs/">Python Extension Packages for Windows - Christoph Gohlke</a> を利用させてもらう。
<tt class="file docutils literal"><span class="pre">scipy-x.y.z.win-amd64-py3.4</span></tt> のような名前のインストーラーをダウンロードすることができる。</p>
</li>
<li><p class="first">インストールを終了したら、何はさておき
<tt class="file docutils literal"><span class="pre">README.txt</span></tt> と <tt class="file docutils literal"><span class="pre">INSTALL.txt</span></tt> を一読すること。
<a class="reference external" href="http://scipy.org/NumPy/">NumPy</a> のときと同様、
<a class="reference external" href="http://somethingaboutorange.com/mrl/projects/nose/">Nose</a> が環境にあれば単体テストが実行できる。
例によって実行時間は決して短くない。</p>
<div class="highlight-pycon"><div class="highlight"><pre>&gt;&gt;&gt; import scipy
&gt;&gt;&gt; scipy.test()
Running unit tests for scipy
NumPy version 1.8.2
NumPy is installed in D:\Python34\lib\site-packages\numpy
SciPy version 0.14.0
SciPy is installed in D:\Python34\lib\site-packages\scipy
Python version 3.4.1 (v3.4.1:c0e311e010fc, May 18 2014, 10:45:13) [MSC v.1600 64 bit (AMD64)]
nose version 1.3.3
... ドットの列 ...
----------------------------------------------------------------------
Ran 16418 tests in 770.217s

OK (KNOWNFAIL=277, SKIP=1171)
&lt;nose.result.TextTestResult run=16418 errors=0 failures=0&gt;
&gt;&gt;&gt;
</pre></div>
</div>
</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">SciPy のインストールだけが目的ならば、ここから先はもう読まなくてよい。</p>
</div>
</div>
<div class="section" id="id5">
<h2><a class="toc-backref" href="#id16">ドキュメントを読む</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://www.scipy.org/">SciPy</a> サイト内のリンクを辿っていき、次のように攻略する予定。
ドキュメントを読みながら、コードを書いてその都度走らせる、
というやり方で何となく学習した気になる。</p>
<div class="section" id="getting-started">
<h3><a class="toc-backref" href="#id17">Getting Started</a><a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">&lt;accessing numpy arrays is faster than accessing Python lists&gt;</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">range</span></tt> と <tt class="docutils literal"><span class="pre">np.arange</span></tt> ならば、後者のほうが圧倒的に速い。</p>
</li>
<li><p class="first">&lt;Using ipython makes interactive work easy&gt;</p>
</li>
<li><p class="first">&lt;Neither scipy nor numpy provide, by default, plotting functions.
They are just numerical tools. The recommended plotting package is matplotlib&gt;</p>
</li>
<li><p class="first">次のドキュメントがおすすめらしい。</p>
<ul>
<li><p class="first"><a class="reference external" href="http://www.scipy.org/Additional_Documentation/Astronomy_Tutorial">http://www.scipy.org/Additional_Documentation/Astronomy_Tutorial</a></p>
<p>リンクの PDF ファイル &#8220;Using Python for Interactive Data Analysis&#8221;
(by Perry Greenfield and Robert Jedrzejewski)
が言わば教科書になっている。SciPy の使い方を説明することが目的の文書ではない。
もっと包括的な内容の本だ。</p>
</li>
<li><p class="first"><a class="reference external" href="http://www.rexx.com/~dkuhlman/scipy_course_01.html">http://www.rexx.com/~dkuhlman/scipy_course_01.html</a>:
&#8220;SciPy Course Outline&#8221; (by Dave Kuhlman)</p>
<p>これは NumPy, SciPy の利用法の概要を説明したテキストだ。
PyTables と <a class="reference external" href="http://matplotlib.sourceforge.net/">Matplotlib</a> についても説明がある。
概略なので、紹介する内容を array の取り扱い程度にとどめている。</p>
</li>
</ul>
</li>
<li><p class="first">An Example Session 以降、IPython を使いながらの説明となる。
フーリエ変換のグラフをプロットする例だ。
IPython が環境になくても、コードの動作確認は工夫次第で可能だ。
例えば次のように IDLE 上で入力していけばよい。</p>
<div class="highlight-pycon"><div class="highlight"><pre><span class="go">&gt;&gt; a = np.zeros(1000)</span>
<span class="go">&gt;&gt; a[:100] = 1</span>
<span class="go">&gt;&gt; b = sp.fft(a)</span>
<span class="go">&gt;&gt; plt.plot(np.abs(b))</span>
<span class="go">[&lt;matplotlib.lines.Line2D instance at 0xb7b9144c&gt;]</span>
<span class="go">&gt;&gt; plt.show()</span>
<span class="go">ウィンドウが表示される。</span>

<span class="go">x 軸が [0, 1000] まで表示されていて、山がちょうど両端に位置している。</span>
<span class="go">x = 500 で切って左右の曲線を入れ替えて、x = 0 まで平行移動させれば、</span>
<span class="go">美しい絵が得られる。</span>

<span class="go">以下、plot の引数を微調整することを試みる。</span>

<span class="go">&gt;&gt; help(np.concatenate)</span>
<span class="go">説明文がダラダラ出力される</span>

<span class="go">&gt;&gt; f = np.arange(-500, 500, 1)</span>
<span class="go">&gt;&gt; plt.grid(True)</span>
<span class="go">&gt;&gt; plt.plot(f,abs(concatenate((b[500:],b[:500]))))</span>
<span class="go">[&lt;matplotlib.lines.Line2D instance at 0xb360ca4c&gt;]</span>
<span class="go">&gt;&gt; plt.show()</span>
<span class="go">ウィンドウが表示される</span>
</pre></div>
</div>
<p>タイプ量を削減できる IPython を導入したほうが便利であることは想像に難くない。</p>
</li>
<li><p class="first">最後に <tt class="docutils literal"><span class="pre">import</span></tt> 文のコツについて説明している。
内容は SciPy に限らず、他の Python パッケージ利用時についても言えることだ。</p>
</li>
</ul>
</div>
<div class="section" id="cookbook">
<h3><a class="toc-backref" href="#id18">Cookbook</a><a class="headerlink" href="#cookbook" title="Permalink to this headline">¶</a></h3>
<p>まずは &#8220;NumPy / SciPy&#8221; を見ていく。</p>
<ul class="simple">
<li>BuildingArrays は NumPy の基本中の基本である array インスタンスの
作り方について説明している。コードを一通り手で打って実行して結果を見るべし。<ul>
<li><tt class="docutils literal"><span class="pre">dtype</span></tt> の結果が異なるかもしれない。</li>
<li>bool-array で array の要素群にアクセスできるのは初耳。</li>
<li>多次元スライスに早く慣れること。</li>
<li><tt class="docutils literal"><span class="pre">linspace</span></tt>, <tt class="docutils literal"><span class="pre">mgrid</span></tt>, <tt class="docutils literal"><span class="pre">ogrid</span></tt>, <tt class="docutils literal"><span class="pre">zeros</span></tt>, <tt class="docutils literal"><span class="pre">ones</span></tt> が便利なことがある。</li>
<li>組み込み関数 <tt class="docutils literal"><span class="pre">reduce</span></tt> を利用した <tt class="docutils literal"><span class="pre">mdot</span></tt> の実装例。</li>
</ul>
</li>
<li>Rank and nullspace: 行列の階数を二種類のトレランスを指定して計算する例。</li>
<li>Interpolation: 指定点列を通過するスプライン曲線を得る例と、
フィッティングの例を説明。</li>
<li>Optimization は専門外なのでわからない。</li>
<li>Linear Regression: <tt class="docutils literal"><span class="pre">scipy.stats.linregress</span></tt></li>
<li>A coupled spring-mass system: 微分方程式を解く例に、
ばねと重りのペア 2 つを摩擦のある床の上に置いて引っ張る状況を出している。</li>
<li>Intersection of functions: <tt class="docutils literal"><span class="pre">scipy.optimize.fsolve</span></tt> で 2 曲線の交点が求められる。</li>
<li>KDTree: <tt class="docutils literal"><span class="pre">scipy.spatial.kdtree.KDTree</span></tt> 本稿の後半を参照。</li>
</ul>
<p>Graphics は何か色々あるが、
<a class="reference external" href="http://matplotlib.sourceforge.net/">Matplotlib</a> と PIL の <tt class="docutils literal"><span class="pre">Image</span></tt> データ作成方法しか用がない。</p>
<p>あとは SWIG 関連か。</p>
</div>
<div class="section" id="scipy-reference-guide">
<h3><a class="toc-backref" href="#id19">SciPy Reference Guide</a><a class="headerlink" href="#scipy-reference-guide" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/">http://docs.scipy.org/doc/scipy/reference/</a></p>
<p>このガイドブックのチュートリアル &#8220;SciPy Tutorial&#8221; こそが言わば公式チュートリアル。
SciPy の機能を厳選して構成されたと思われるので、一通り読んでみたくなる。
しかし、各章かなりの分量がある。
テキストおよび画像がふんだんにあり、重い。
自分の興味のあるトピックに絞ってまずは学習を進めたい。</p>
<p>正直な所、わからないところの方がずっと多い。</p>
<div class="section" id="introduction">
<h4><a class="toc-backref" href="#id20">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">help</span></tt>, <tt class="docutils literal"><span class="pre">sp.info</span></tt>, <tt class="docutils literal"><span class="pre">sp.source</span></tt> がヘルプ三種の神器。<ul>
<li><tt class="docutils literal"><span class="pre">info</span></tt> はキーワード引数でテキストの書式を細かくコントロールできる。</li>
<li><tt class="docutils literal"><span class="pre">source</span></tt> はちょっと珍しい機能なので、
初めて使う <tt class="docutils literal"><span class="pre">scipy</span></tt> 配下の関数に対して、一度は試してみる価値あり。</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="basic-functions-in-numpy-and-top-level-scipy">
<h4><a class="toc-backref" href="#id21">Basic functions in Numpy (and top-level scipy)</a><a class="headerlink" href="#basic-functions-in-numpy-and-top-level-scipy" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">sp.isnan</span></tt>, <tt class="docutils literal"><span class="pre">sp.isfinite</span></tt>, <tt class="docutils literal"><span class="pre">sp.isinf</span></tt> を浮動小数点数のエラー検知に利用できる。</li>
<li>array インスタンスを素早く作成するために、
<tt class="docutils literal"><span class="pre">sp.mgrid</span></tt>, <tt class="docutils literal"><span class="pre">sp.ogrid</span></tt>, <tt class="docutils literal"><span class="pre">sp.r_</span></tt>, <tt class="docutils literal"><span class="pre">sp.c_</span></tt> の使い方を習得する。<ul>
<li>これらは相当な修練が必要そうに思える。</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">poly1d</span></tt> で一変数多項式を定義することができる。<ul>
<li><tt class="docutils literal"><span class="pre">p.integ</span></tt> で原始関数取得。キーワード引数 <tt class="docutils literal"><span class="pre">k</span></tt> が定数項。</li>
<li><tt class="docutils literal"><span class="pre">p.derive</span></tt> で導関数取得。</li>
<li><tt class="docutils literal"><span class="pre">p(arraylike)</span></tt> で評価。</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">vectorize</span></tt> 関数を使うと、スカラー引数を取りスカラー値を戻す関数 <tt class="docutils literal"><span class="pre">func</span></tt> から、
array-like 版 <tt class="docutils literal"><span class="pre">func</span></tt> を新たに定義することができる。</li>
<li><tt class="docutils literal"><span class="pre">mod(x,</span> <span class="pre">y)</span></tt> vs <tt class="docutils literal"><span class="pre">x</span> <span class="pre">%</span> <span class="pre">y</span></tt></li>
<li><tt class="docutils literal"><span class="pre">fix</span></tt> は「ゼロに近い方の整数」を返す（型は float のままのようだが）。</li>
<li>角度モノを取り扱うときは <tt class="docutils literal"><span class="pre">angle</span></tt>, <tt class="docutils literal"><span class="pre">unwrap</span></tt> を当たってみる。</li>
<li><tt class="docutils literal"><span class="pre">linspace</span></tt> だけでなく <tt class="docutils literal"><span class="pre">logspace</span></tt> もある。</li>
<li>関数 <tt class="docutils literal"><span class="pre">select</span></tt> は「複数版 if 文」みたいなもの。</li>
<li>n の階乗は <tt class="docutils literal"><span class="pre">scipy.misc.factorial(n)</span></tt> で求まる。
ちなみにガンマ関数で実装されている。</li>
<li>n 個から k 個を選ぶ (N choose k) 組み合わせは <tt class="docutils literal"><span class="pre">scipy.misc.comb(n,</span> <span class="pre">k)</span></tt> で求まる。</li>
</ul>
</div>
<div class="section" id="special-functions-scipy-special">
<h4><a class="toc-backref" href="#id22">Special functions (scipy.special)</a><a class="headerlink" href="#special-functions-scipy-special" title="Permalink to this headline">¶</a></h4>
<p>TBW</p>
</div>
<div class="section" id="integration-scipy-integrate">
<h4><a class="toc-backref" href="#id23">Integration (scipy.integrate)</a><a class="headerlink" href="#integration-scipy-integrate" title="Permalink to this headline">¶</a></h4>
<p>TBW</p>
</div>
<div class="section" id="optimization-scipy-optimize">
<h4><a class="toc-backref" href="#id24">Optimization (scipy.optimize)</a><a class="headerlink" href="#optimization-scipy-optimize" title="Permalink to this headline">¶</a></h4>
<p>TBW</p>
</div>
<div class="section" id="interpolation-scipy-interpolate">
<h4><a class="toc-backref" href="#id25">Interpolation (scipy.interpolate)</a><a class="headerlink" href="#interpolation-scipy-interpolate" title="Permalink to this headline">¶</a></h4>
<p>TBW</p>
</div>
<div class="section" id="fourier-transforms-scipy-fftpack">
<h4><a class="toc-backref" href="#id26">Fourier Transforms (scipy.fftpack)</a><a class="headerlink" href="#fourier-transforms-scipy-fftpack" title="Permalink to this headline">¶</a></h4>
<p>まだ書きかけのようだ。</p>
</div>
<div class="section" id="signal-processing-scipy-signal">
<h4><a class="toc-backref" href="#id27">Signal Processing (scipy.signal)</a><a class="headerlink" href="#signal-processing-scipy-signal" title="Permalink to this headline">¶</a></h4>
<p>画像処理か。</p>
</div>
<div class="section" id="linear-algebra-scipy-linalg">
<h4><a class="toc-backref" href="#id28">Linear Algebra (scipy.linalg)</a><a class="headerlink" href="#linear-algebra-scipy-linalg" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">sci.mat</span></tt> を利用すると MATLAB 風表記で行列インスタンスを定義できる。</li>
<li>行列 <tt class="docutils literal"><span class="pre">A</span></tt> に対して、もし存在すれば逆行列は <tt class="docutils literal"><span class="pre">linalg.inv(A)</span></tt> または <tt class="docutils literal"><span class="pre">A.I</span></tt> で得られる。</li>
<li>1 次方程式 Ax = b を <tt class="docutils literal"><span class="pre">linalg.solve(A,</span> <span class="pre">b)</span></tt> で解くことができる（解が存在すれば）。</li>
<li><tt class="docutils literal"><span class="pre">A</span></tt> の行列式は <tt class="docutils literal"><span class="pre">linalg.det</span></tt> で求める。</li>
<li>ノルムには関数 <tt class="docutils literal"><span class="pre">linalg.norm</span></tt> を用いる。ノルムの種類を引数で指示する。</li>
<li>最小二乗法には <tt class="docutils literal"><span class="pre">linalg.lstsq</span></tt> を用いる。</li>
<li>固有値・固有ベクトル、各種分解も可能。</li>
<li>行列のテイラー展開による各種関数もサポート。</li>
<li>その他いろいろ。</li>
</ul>
</div>
<div class="section" id="sparse-eigenvalue-problems-with-arpack">
<h4><a class="toc-backref" href="#id29">Sparse Eigenvalue Problems with ARPACK</a><a class="headerlink" href="#sparse-eigenvalue-problems-with-arpack" title="Permalink to this headline">¶</a></h4>
<p>TBW</p>
</div>
<div class="section" id="statistics-scipy-stats">
<h4><a class="toc-backref" href="#id30">Statistics (scipy.stats)</a><a class="headerlink" href="#statistics-scipy-stats" title="Permalink to this headline">¶</a></h4>
<p>TBW</p>
</div>
<div class="section" id="multi-dimensional-image-processing-scipy-ndimage">
<h4><a class="toc-backref" href="#id31">Multi-dimensional image processing (scipy.ndimage)</a><a class="headerlink" href="#multi-dimensional-image-processing-scipy-ndimage" title="Permalink to this headline">¶</a></h4>
<p>ここも画像処理か。</p>
</div>
<div class="section" id="file-io-scipy-io">
<h4><a class="toc-backref" href="#id32">File IO (scipy.io)</a><a class="headerlink" href="#file-io-scipy-io" title="Permalink to this headline">¶</a></h4>
<p>SciPy はある種のファイルフォーマットを操作できるということがわかる。
MATLAB ファイルやら WAV ファイルやら。</p>
</div>
<div class="section" id="weave-scipy-weave">
<h4><a class="toc-backref" href="#id33">Weave (scipy.weave)</a><a class="headerlink" href="#weave-scipy-weave" title="Permalink to this headline">¶</a></h4>
<p>Python コードの内部に C/C++ のコードを含めるためのパッケージだそうだ。
今は読む必要はない。</p>
</div>
</div>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id34">コードを書く</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id35">ヘルプ</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id8">
<h4><a class="toc-backref" href="#id36">SciPy のバージョンを知る</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<p><tt class="file docutils literal"><span class="pre">version.py</span></tt> の変数 <tt class="docutils literal"><span class="pre">version</span></tt> を参照する。</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">sp</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">version</span>
<span class="go">&#39;0.14.0&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h4><a class="toc-backref" href="#id37">関数のヘルプを見る</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p>Python 組み込みの関数 <tt class="docutils literal"><span class="pre">help</span></tt> よりも、
キーワード引数 <tt class="docutils literal"><span class="pre">maxwidth</span></tt> で一行の文字数を制限することができる
<tt class="docutils literal"><span class="pre">scipy.info</span></tt> のほうが見やすい可能性がある。</p>
</div>
</div>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id38">定義済み定数を利用する</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>Python なので「定数」ではないのだが、
色々便利なものが <tt class="docutils literal"><span class="pre">scipy.constances</span></tt> にある。</p>
<ul class="simple">
<li>円周率、黄金比、真空中の光速、プランク定数、地球の重力加速度、等々。</li>
<li>SI 基本単位</li>
<li>SI 接頭辞（キロ、メガ等）</li>
</ul>
<p>便利なのでリンクをはっておく。
<a class="reference external" href="http://docs.scipy.org/doc/scipy/reference/constants.html">http://docs.scipy.org/doc/scipy/reference/constants.html</a></p>
</div>
<div class="section" id="kdtree">
<h3><a class="toc-backref" href="#id39">KDTree を使う</a><a class="headerlink" href="#kdtree" title="Permalink to this headline">¶</a></h3>
<p>空間上のある点とある点群に対して、最も近い距離にあるものを探索するには
<tt class="docutils literal"><span class="pre">scipy.spatial.KDTree</span></tt> を利用するのがよい。</p>
<p>Reference Guide の例を一部改変したものを記す。
ある点とある点群をそれぞれ <tt class="docutils literal"><span class="pre">target</span></tt>, <tt class="docutils literal"><span class="pre">points</span></tt> としてある。</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="c"># -*- coding: utf-8 -*-</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy.spatial</span> <span class="k">import</span> <span class="n">KDTree</span>

<span class="c"># Genrate 3D points: (0, 0, 0), (0, 0, 10), (0, 0, 20), ...</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mgrid</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">:</span><span class="mi">100</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">y</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),</span> <span class="n">z</span><span class="o">.</span><span class="n">ravel</span><span class="p">()))</span>

<span class="c"># Construct a KDTree.</span>
<span class="n">tree</span> <span class="o">=</span> <span class="n">KDTree</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>

<span class="c"># A target point included in [0, 100) * [0, 100) * [0, 100).</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random_sample</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mf">100.</span>
<span class="nb">print</span><span class="p">(</span><span class="s">&quot;Target: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">target</span><span class="p">))</span>

<span class="c"># Query for the closest point.</span>
<span class="n">dist</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">eps</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s">&quot;Closest: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tree</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">index</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s">&quot;Distance: {0}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dist</span><span class="p">))</span>
</pre></div>
</div>
<p>実行結果。乱数を使っているので、結果は毎回異なる。</p>
<div class="highlight-text"><div class="highlight"><pre>Target:  [ 43.83186046  54.76244808  83.13057483]
Closest:  [40 50 80]
Distance:  6.8676462584
</pre></div>
</div>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html">読書ノート</a> &raquo;</li> 
      </ul>
    </div>
    <div id="footer">
      <div id="footer_logo">
        <a class="imga" href="http://www.geocities.jp/showa_yojyo/" title="プレハブ小屋 Since 1999"><img src="_static/logos.png" width="88" height="31"/></a>
      </div>
      <div id="footer_copyright">
        Since 1999<br/>
        Copyright &copy; 1999-2014,
        <a href="about.html#about.feedback" title="問い合わせ先">プレハブ小屋</a>
        All rights reserved.
      </div>
      <div id="footer_spacer">
        <p>
          Last updated on 2014/08/24 (Sun) 00:14:18.
        </p>
      </div>
    </div>
  </body>
</html>