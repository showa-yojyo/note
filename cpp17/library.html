<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>What’s New In C++17 標準ライブラリー &#8212; 読書ノート 1.6dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=1a9a5cd9" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=5a6f99c4"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/mermaid.js?v=578dbed1"></script>
    <link rel="next" title="What’s New In Python 3.0 ノート" href="../python-3.0.html" />
    <link rel="prev" title="What’s New In C++17 言語仕様" href="language.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="language.html" title="Previous document">What’s New In C++17 言語仕様</a>
        </li>
        <li>
          <a href="../python-3.0.html" title="Next document">What’s New In Python 3.0 ノート</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="what-s-new-in-c-17">
<h1><a class="toc-backref" href="#id16" role="doc-backlink">What’s New In C++17 標準ライブラリー</a><a class="headerlink" href="#what-s-new-in-c-17" title="Permalink to this heading">¶</a></h1>
<p>このノートでは C++17 で注目すべき標準ライブラリーの機能を学習する。例によって
<a class="reference external" href="https://cpprefjp.github.io/site">cpprefjp</a> を利用して、読みながら急所を記していくことにする。興味のないもの、知らなくて良いものは積極的に無視する。</p>
<p>以下、断っても断らなくても名前空間 <code class="docutils literal notranslate"><span class="pre">std</span></code> またはその部分空間にライブラリー要素があるものとする。</p>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#what-s-new-in-c-17" id="id16">What’s New In C++17 標準ライブラリー</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id17">新ライブラリー</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id18">コンテナー</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id19">アルゴリズム</a></p>
<ul>
<li><p><a class="reference internal" href="#algorithm" id="id20">ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;algorithm&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#numeric" id="id21">ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;numeric&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#functional" id="id22">ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;functional&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#memory" id="id23">ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;memory&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#utility" id="id24">ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;utility&gt;</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id4" id="id25">文字列</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id26">並行処理</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id27">スマートポインター</a></p></li>
<li><p><a class="reference internal" href="#id7" id="id28">数学</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id29">タプル</a></p></li>
<li><p><a class="reference internal" href="#id9" id="id30">型特性</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id31">時間演算</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id32">乱数</a></p></li>
<li><p><a class="reference internal" href="#id12" id="id33">エラーハンドリング</a></p></li>
<li><p><a class="reference internal" href="#id13" id="id34">予約済み名前空間</a></p></li>
<li><p><a class="reference internal" href="#id14" id="id35">廃止</a></p></li>
<li><p><a class="reference internal" href="#id15" id="id36">非推奨</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="id1">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">新ライブラリー</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>ヘッダーファイル追加</p>
<ul>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;filesystem&gt;</span></code> 追加。そういえば今までなかった。</p></li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;algorithm&gt;</span></code> や <code class="docutils literal notranslate"><span class="pre">&lt;numeric&gt;</span></code> の関数に並列実行機能オプション追加。</p></li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;optional&gt;</span></code> 追加。Boost 出身と思われる。</p></li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;variant&gt;</span></code> 追加。Boost 出身と思われる。</p></li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;any&gt;</span></code> 追加。Boost 出身と思われる。</p></li>
</ul>
</li>
<li><p>標準ライブラリーの参照を C11 に更新。これは C++ というより C なので割愛。</p></li>
</ul>
</section>
<section id="id2">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">コンテナー</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>コンテナーのコピー、ムーブ、および <code class="docutils literal notranslate"><span class="pre">swap()</span></code> に例外仕様 <code class="docutils literal notranslate"><span class="pre">noexcept</span></code> が追加。</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">vector</span><span class="o">::</span><span class="n">vector</span><span class="p">(</span><span class="n">vector</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">noexcept</span><span class="p">;</span>

<span class="c1">// xxxx 部分は複雑なので仕様書を確認すること</span>
<span class="c1">// もちろん bool 値に評価される</span>
<span class="n">vector</span><span class="o">&amp;</span><span class="w"> </span><span class="n">vector</span><span class="o">::</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">vector</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">noexcept</span><span class="p">(</span><span class="n">xxxx</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">vector::swap</span><span class="p">(</span><span class="n">vector</span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">noexcept</span><span class="p">(</span><span class="n">xxxx</span><span class="p">);</span>
<span class="c1">// etc.</span>
</pre></div>
</div>
</li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;iterator&gt;</span></code> に次のフリー関数が追加：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">std::size()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::empty()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::data()</span></code></p></li>
</ul>
</li>
<li><p>コンテナーに「不完全型の最小サポート」が追加。メンバー関数を呼び出すまでに要素型が完全型になっていれば OK になった。</p></li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;memory_resource&gt;</span></code> が追加。よくわからない。</p></li>
<li><p>標準反復子全般およびクラステンプレート <code class="docutils literal notranslate"><span class="pre">std::array</span></code> の変更操作が
<code class="docutils literal notranslate"><span class="pre">constexpr</span></code> 化。</p></li>
<li><p>コンテナーのメンバー関数 <code class="docutils literal notranslate"><span class="pre">.emplace_front()</span></code>, <code class="docutils literal notranslate"><span class="pre">.emplace_back()</span></code> が生成した値を返すようになった。</p>
<ul class="simple">
<li><p>この仕様変更はどうだろう。それなら自分でコンストラクターを呼び出して
<code class="docutils literal notranslate"><span class="pre">.push_front()</span></code>, <code class="docutils literal notranslate"><span class="pre">.push_back()</span></code> でいいのでは？</p></li>
</ul>
</li>
<li><p>連想コンテナーに次のメンバー関数が追加：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.extract()</span></code>: 要素を他のコンテナーに移すためのノードと呼ばれるオブジェクトを返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.insert(node_type&amp;&amp;)</span></code>: よそから引き出したノードをこのコンテナーに挿し込む。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.merge()</span></code>: 重複しないキーの要素をこのコンテナーに取り込む。</p></li>
</ul>
</li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::map</span></code>, <code class="docutils literal notranslate"><span class="pre">std::unordered_map</span></code> それぞれに次のメンバー関数が追加：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.try_emplace()</span></code>: 指定キーが不在の場合に限り emplace する（そうでなければ何もしない）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.insert_or_assign()</span></code>: Python の <code class="docutils literal notranslate"><span class="pre">dict</span></code> における <code class="docutils literal notranslate"><span class="pre">m[key]</span> <span class="pre">=</span> <span class="pre">value</span></code> のように振る舞う。</p></li>
</ul>
</li>
<li><p>反復子の分類 <em>contiguous iterator</em> が追加。組み込み配列のように、要素同士がメモリー上で隣接しているようなコンテナーに対する反復子であることを意味する。次のコンテナーの反復子は contiguous iterator であるとする：</p>
<ul class="simple">
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::basic_string</span></code></p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::array</span></code></p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::vector</span></code>: ただし特殊化 <code class="docutils literal notranslate"><span class="pre">std::vector&lt;bool&gt;</span></code> を除く。</p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::valarray</span></code>: フリー関数 <code class="docutils literal notranslate"><span class="pre">std::begin()</span></code>,
<code class="docutils literal notranslate"><span class="pre">std::end()</span></code> により反復子が得られることに注意。</p></li>
</ul>
</li>
</ul>
</section>
<section id="id3">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">アルゴリズム</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h2>
<section id="algorithm">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;algorithm&gt;</span></code></a><a class="headerlink" href="#algorithm" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::sample()</span></code> が追加。後述。</p></li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::for_each_n()</span></code> が追加。</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">InputIterator</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Size</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Function</span><span class="o">&gt;</span>
<span class="n">InputIterator</span><span class="w"> </span><span class="n">for_each_n</span><span class="p">(</span>
<span class="w">    </span><span class="n">InputIterator</span><span class="w"> </span><span class="n">first</span><span class="p">,</span>
<span class="w">    </span><span class="n">Size</span><span class="w"> </span><span class="n">n</span><span class="p">,</span>
<span class="w">    </span><span class="n">Function</span><span class="w"> </span><span class="n">f</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>範囲 <code class="docutils literal notranslate"><span class="pre">[first,</span> <span class="pre">first</span> <span class="pre">+</span> <span class="pre">n)</span></code> を指す反復子 <code class="docutils literal notranslate"><span class="pre">i</span></code> に対して <code class="docutils literal notranslate"><span class="pre">f(*i)</span></code> を呼び出す。</p></li>
<li><p>なお、関数 <code class="docutils literal notranslate"><span class="pre">f()</span></code> では <code class="docutils literal notranslate"><span class="pre">*i</span></code> を変更することが許される。</p></li>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">f()</span></code> の戻り値は使われない。</p></li>
<li><p>戻り値は反復子 <code class="docutils literal notranslate"><span class="pre">first</span> <span class="pre">+</span> <span class="pre">n</span></code> とする。</p></li>
<li><p>さらに並列バージョンがある。割愛。</p></li>
</ul>
</li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::clamp()</span></code> が追加。</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">clamp</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">low</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">high</span><span class="p">);</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Compare</span><span class="o">&gt;</span>
<span class="k">constexpr</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">clamp</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">low</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">high</span><span class="p">,</span><span class="w"> </span><span class="n">Compare</span><span class="w"> </span><span class="n">comp</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>意味は OpenGL のそれと同じ。第一引数 <code class="docutils literal notranslate"><span class="pre">v</span></code> が clamp される。</p></li>
</ul>
</li>
</ul>
</section>
<section id="numeric">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;numeric&gt;</span></code></a><a class="headerlink" href="#numeric" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::reduce()</span></code> が追加。</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">InputIterator</span><span class="o">&gt;</span>
<span class="k">typename</span><span class="w"> </span><span class="nc">iterator_traits</span><span class="o">&lt;</span><span class="n">InputIterator</span><span class="o">&gt;::</span><span class="n">value_type</span>
<span class="n">reduce</span><span class="p">(</span><span class="n">InputIterator</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">InputIterator</span><span class="w"> </span><span class="n">last</span><span class="p">);</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">InputIterator</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="n">T</span><span class="w"> </span><span class="n">reduce</span><span class="p">(</span><span class="n">InputIterator</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">InputIterator</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">init</span><span class="p">);</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">InputIterator</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">BinaryOperation</span><span class="o">&gt;</span>
<span class="n">T</span><span class="w"> </span><span class="n">reduce</span><span class="p">(</span><span class="n">InputIterator</span><span class="w"> </span><span class="n">first</span><span class="p">,</span><span class="w"> </span><span class="n">InputIterator</span><span class="w"> </span><span class="n">last</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">init</span><span class="p">,</span>
<span class="w">         </span><span class="n">BinaryOperation</span><span class="w"> </span><span class="n">binary_op</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li><p>機能は他のプログラミング言語に見られるものと同じ。</p></li>
<li><p>演算を引数に取らないものは <code class="docutils literal notranslate"><span class="pre">operator+()</span></code> による集計を行う。</p></li>
<li><p>さらに並列バージョンがある。割愛。</p></li>
</ul>
</li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::inclusive_scan()</span></code> が追加。部分和を順次計算する。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">init</span> <span class="pre">+</span> <span class="pre">*first</span></code>,
<code class="docutils literal notranslate"><span class="pre">init</span> <span class="pre">+</span> <span class="pre">*first</span> <span class="pre">+</span> <span class="pre">*(first</span> <span class="pre">+</span> <span class="pre">1)</span></code>,
<code class="docutils literal notranslate"><span class="pre">init</span> <span class="pre">+</span> <span class="pre">*first</span> <span class="pre">+</span> <span class="pre">*(first</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">+</span> <span class="pre">*(first</span> <span class="pre">+</span> <span class="pre">2)</span></code>, … を返す。</p></li>
</ul>
</li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::exclusive_scan()</span></code> が追加。こちらも部分和を順次計算する。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">init</span></code>, <code class="docutils literal notranslate"><span class="pre">init</span> <span class="pre">+</span> <span class="pre">*first</span></code>, <code class="docutils literal notranslate"><span class="pre">init</span> <span class="pre">+</span> <span class="pre">*first</span> <span class="pre">+</span> <span class="pre">*(first</span> <span class="pre">+</span> <span class="pre">1)</span></code>, … を返す。</p></li>
</ul>
</li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::transform_reduce()</span></code> が追加。</p>
<ul class="simple">
<li><p>意味は上述の <code class="docutils literal notranslate"><span class="pre">std::reduce()</span></code> をしながら <code class="docutils literal notranslate"><span class="pre">std::transform()</span></code> するというようなものだ。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::transform()</span></code> のように、入力範囲が一つのものと二つのものがある。</p></li>
</ul>
</li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::transform_inclusive_scan()</span></code> が追加。詳細割愛。</p></li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::transform_exclusive_scan()</span></code> が追加。詳細割愛。</p></li>
</ul>
</section>
<section id="functional">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;functional&gt;</span></code></a><a class="headerlink" href="#functional" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">std::not_fn()</span></code> 追加。指定された述語の意味を否定するような述語を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::invoke()</span></code> 追加。これは意味がわからない。</p></li>
</ul>
</section>
<section id="memory">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;memory&gt;</span></code></a><a class="headerlink" href="#memory" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::destroy_at()</span></code> が追加。</p>
<ul class="simple">
<li><p>与えられたポインターに対してデストラクターを明示的に呼び出す。</p></li>
<li><p>通常は placement new により生成されたオブジェクトに対して適用する。</p></li>
</ul>
</li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::destroy()</span></code> が追加。上記 <code class="docutils literal notranslate"><span class="pre">std::destroy_at()</span></code> の始点と終点による範囲バージョン。</p></li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::destroy_n()</span></code> が追加。これも上記 <code class="docutils literal notranslate"><span class="pre">std::destroy_at()</span></code>
の始点と長さによる範囲バージョン。</p></li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::uninitialized_move()</span></code> が追加。</p>
<ul class="simple">
<li><p>未初期化記憶域である入力範囲を placement new により初期化して出力範囲に
<code class="docutils literal notranslate"><span class="pre">std::move()</span></code> する。</p></li>
<li><p>入力範囲の指定は始点と終点による。</p></li>
</ul>
</li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::uninitialized_move_n()</span></code> が追加。</p>
<ul class="simple">
<li><p>上述の <code class="docutils literal notranslate"><span class="pre">std::uninitialized_move()</span></code> の入力範囲の指定が始点と長さによるもの。</p></li>
</ul>
</li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::uninitialized_value_construct()</span></code> が追加。</p>
<ul class="simple">
<li><p>未初期化記憶域である入力範囲を placement new により初期化して出力範囲に出力する。その際、ゼロ初期化をともなう。</p></li>
<li><p>上記の入力範囲の指定は始点と終点による。</p></li>
</ul>
</li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::uninitialized_value_construct_n()</span></code> が追加。</p>
<ul class="simple">
<li><p>上述の <code class="docutils literal notranslate"><span class="pre">std::uninitialized_value_construct()</span></code> の入力範囲の指定が始点と長さによるもの。</p></li>
</ul>
</li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::uninitialized_default_construct()</span></code> が追加。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">std::uninitialized_value_construct()</span></code> の「ゼロで初期化しない」バージョン。次のような構造体のオブジェクトを大量に扱う際には初期化しないほうがいいだろう：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">struct</span> <span class="n">Point3D</span>
<span class="p">{</span>
    <span class="n">double</span> <span class="n">x</span><span class="p">;</span>
    <span class="n">double</span> <span class="n">y</span><span class="p">;</span>
    <span class="n">double</span> <span class="n">z</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::uninitialized_default_construct_n()</span></code> が追加。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">std::uninitialized_value_construct_n()</span></code> の「ゼロで初期化しない」バージョン。</p></li>
</ul>
</li>
</ul>
</section>
<section id="utility">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;utility&gt;</span></code></a><a class="headerlink" href="#utility" title="Permalink to this heading">¶</a></h3>
<p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::as_const()</span></code> が追加。左辺値参照を <code class="docutils literal notranslate"><span class="pre">const</span></code> 左辺値参照に変換する。ユースケース不明。</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="k">constexpr</span><span class="w"> </span><span class="n">add_const_t</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">as_const</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span><span class="w"> </span><span class="k">noexcept</span><span class="p">;</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="kt">void</span><span class="w"> </span><span class="n">as_const</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">delete</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="id4">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">文字列</a><a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;string_view&gt;</span></code> が追加。クラステンプレート
<code class="docutils literal notranslate"><span class="pre">std::basic_string_view</span></code> を提供。</p>
<ul class="simple">
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::basic_string_view</span></code> は生文字列の所有権を持つのではなく、既存の文字列を参照して、何らかの情報を与えるというものだ。これを参照先の文字列の先頭と、文字列の長さしか管理していないクラスと考えていい。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.remove_prefix()</span></code> や <code class="docutils literal notranslate"><span class="pre">.remove_suffix()</span></code> などというメンバー関数もある。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::string_view_literals::operator&quot;&quot;</span> <span class="pre">sv()</span></code> でオブジェクトを生成することもできる。</p></li>
</ul>
</li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::basic_string</span></code> のメンバー関数 <code class="docutils literal notranslate"><span class="pre">.data()</span></code> に非
<code class="docutils literal notranslate"><span class="pre">const</span></code> 版が追加。生文字列を直接変更するのに用いるのだろうか。</p></li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;functional&gt;</span></code> に次の二つの関数オブジェクトが追加。部分文字列を検索するためのものだ。これらはそれぞれ単体でも検索できるし、アルゴリズム
<code class="docutils literal notranslate"><span class="pre">std::search()</span></code> の引数として与えることもできる。</p>
<ul class="simple">
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::boyer_moore_searcher</span></code></p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::boyer_moore_horspool_searcher</span></code></p></li>
</ul>
</li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;charconv&gt;</span></code> に次の関数が追加。〈ロケール依存なし、フォーマット解析なし〉で文字列と数値とを変換する。</p>
<ul class="simple">
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">std::to_chars()</span></code></p></li>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">std::from_chars()</span></code></p></li>
</ul>
</li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::char_traits</span></code> の静的メンバー関数の一部に対する
<code class="docutils literal notranslate"><span class="pre">constexpr</span></code> 対応が追加。</p>
<ul class="simple">
<li><p>メンバー関数 <code class="docutils literal notranslate"><span class="pre">.compare()</span></code></p></li>
<li><p>メンバー関数 <code class="docutils literal notranslate"><span class="pre">.find()</span></code></p></li>
<li><p>メンバー関数 <code class="docutils literal notranslate"><span class="pre">.length()</span></code></p></li>
</ul>
</li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;cstddef&gt;</span></code> の型 <code class="docutils literal notranslate"><span class="pre">std::byte</span></code> が追加。次のコードがこの型の定義そのものを正確に表すはずだ：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">enum</span> <span class="k">class</span> <span class="nc">byte</span> <span class="p">:</span> <span class="n">unsigned</span> <span class="n">char</span> <span class="p">{};</span>
</pre></div>
</div>
<ul class="simple">
<li><p>フリー関数の形式で各種ビット演算機能および整数への変換機能が提供される。</p></li>
</ul>
</li>
</ul>
</section>
<section id="id5">
<h2><a class="toc-backref" href="#id26" role="doc-backlink">並行処理</a><a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;shared_mutex&gt;</span></code> およびクラス <code class="docutils literal notranslate"><span class="pre">std::shared_mutex</span></code> 追加。</p>
<ul>
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">std::shared_mutex</span></code> は readers-writer lock の mutex を表し、タイムアウトすることがない。</p></li>
<li><p>このクラスを直接使うよりも、ふつうは RAII 用のクラステンプレート
<code class="docutils literal notranslate"><span class="pre">std::lock_guard()</span></code> もしくは <code class="docutils literal notranslate"><span class="pre">std::shared_lock()</span></code> を用いる。書くか読むかで使う関数を使い分ける。</p></li>
</ul>
</li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;mutex&gt;</span></code> にクラステンプレート <code class="docutils literal notranslate"><span class="pre">std::scoped_lock</span></code> 追加。</p>
<ul>
<li><p>複数の mutex を管理するための RAII 用クラス。ロックとアンロックの順序に整合性を持たせるために使う。</p></li>
</ul>
</li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::atomic</span></code> に定数 <code class="docutils literal notranslate"><span class="pre">is_always_lock_free</span></code> が追加。テンプレート型に対するアトミック操作が常にロックフリーで動作するかどうかを表す
<code class="docutils literal notranslate"><span class="pre">bool</span></code> 値だ。</p></li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;new&gt;</span></code> に次のインライン定数が追加。並行処理に関する知識がないと理解できない概念。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">std::hardware_constructive_interference_size</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::hardware_destructive_interference_size</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="id6">
<h2><a class="toc-backref" href="#id27" role="doc-backlink">スマートポインター</a><a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::shared_ptr</span></code></p>
<ul>
<li><p>配列に対応</p></li>
<li><p>メンバー型 <code class="docutils literal notranslate"><span class="pre">weak_type</span></code> 追加。指定された要素型の <code class="docutils literal notranslate"><span class="pre">weak_ptr</span></code> に等しい。</p></li>
<li><p>メンバー関数 <code class="docutils literal notranslate"><span class="pre">use_count()</span></code> 文書化。</p></li>
</ul>
</li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::enable_shared_from_this</span></code> の使用法が規定された。</p>
<ul>
<li><p>TODO: <code class="docutils literal notranslate"><span class="pre">std::enable_shared_from_this</span></code> 自体は利用法が限定的なので、ほんとうに使えるか確認すること。</p></li>
</ul>
</li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::unique_ptr</span></code></p>
<ul>
<li><p>配列版の型変換が不当に不適格とされていた不具合を解消するべく、変換コンストラクターと変換代入演算子が追加。</p></li>
<li><p>テンプレート代入演算子が修正。</p></li>
</ul>
</li>
<li><p>その他</p></li>
</ul>
</section>
<section id="id7">
<h2><a class="toc-backref" href="#id28" role="doc-backlink">数学</a><a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;cmath&gt;</span></code> に物理学で利用されそうな関数が追加。一部を挙げると：</p>
<ul class="simple">
<li><p>ベータ関数 <code class="docutils literal notranslate"><span class="pre">std::beta(x,</span> <span class="pre">y)</span></code></p>
<ul>
<li><p>ちなみにガンマ関数は <code class="docutils literal notranslate"><span class="pre">std::tgamma(x)</span></code> という。</p></li>
</ul>
</li>
<li><p>Hermite 多項式 <code class="docutils literal notranslate"><span class="pre">std::hermite(n,</span> <span class="pre">x)</span></code></p></li>
<li><p>Legendre 多項式 <code class="docutils literal notranslate"><span class="pre">std::legendre(l,</span> <span class="pre">x)</span></code></p></li>
</ul>
<p>C でも使われるので「オーバーロード」は関数名が異なる。</p>
</li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;cmath&gt;</span></code> の関数 <code class="docutils literal notranslate"><span class="pre">std::hypot(x,</span> <span class="pre">y)</span></code> のオーバーロード
<code class="docutils literal notranslate"><span class="pre">std::hypot(x,</span> <span class="pre">y,</span> <span class="pre">z)</span></code> 追加。</p>
<ul class="simple">
<li><p>C でも使われるので可変数引数版はないのだろう。</p></li>
</ul>
</li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;numeric&gt;</span></code> に関数 <code class="docutils literal notranslate"><span class="pre">std::gcd()</span></code> と <code class="docutils literal notranslate"><span class="pre">std::lcm()</span></code> が追加。</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">M</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">N</span><span class="o">&gt;</span>
<span class="k">constexpr</span><span class="w"> </span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="n">M</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">gcd</span><span class="p">(</span><span class="n">M</span><span class="w"> </span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>

<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">M</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">N</span><span class="o">&gt;</span>
<span class="k">constexpr</span><span class="w"> </span><span class="n">common_type_t</span><span class="o">&lt;</span><span class="n">M</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lcm</span><span class="p">(</span><span class="n">M</span><span class="w"> </span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="w"> </span><span class="n">n</span><span class="p">);</span>
</pre></div>
</div>
<p>見るからに引数 <code class="docutils literal notranslate"><span class="pre">m</span></code> と <code class="docutils literal notranslate"><span class="pre">n</span></code> に要件があるが、常識的に使えば問題ないはずなので深く立ち入らない。</p>
</li>
</ul>
</section>
<section id="id8">
<h2><a class="toc-backref" href="#id29" role="doc-backlink">タプル</a><a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::apply()</span></code> 追加。</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">F</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Tuple</span><span class="o">&gt;</span>
<span class="k">constexpr</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="k">auto</span><span class="p">)</span><span class="w"> </span><span class="n">apply</span><span class="p">(</span><span class="n">F</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">f</span><span class="p">,</span><span class="w"> </span><span class="n">Tuple</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
</pre></div>
</div>
<p>意味は <code class="docutils literal notranslate"><span class="pre">f(t.get&lt;0&gt;(),</span> <span class="pre">t.get&lt;1&gt;(),</span> <span class="pre">...)</span></code> だろう。</p>
</li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::make_from_tuple()</span></code> 追加。</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">Tuple</span><span class="o">&gt;</span>
<span class="k">constexpr</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">make_from_tuple</span><span class="p">(</span><span class="n">Tuple</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">t</span><span class="p">);</span>
</pre></div>
</div>
<p>型 <code class="docutils literal notranslate"><span class="pre">T</span></code> のオブジェクトを <code class="docutils literal notranslate"><span class="pre">T</span></code> のコンストラクターなどにより生成することになるだろう。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::pair</span></code> および <code class="docutils literal notranslate"><span class="pre">std::tuple</span></code> を初期化子リストから生成しやすくなった。</p></li>
</ul>
</section>
<section id="id9">
<h2><a class="toc-backref" href="#id30" role="doc-backlink">型特性</a><a class="headerlink" href="#id9" title="Permalink to this heading">¶</a></h2>
<p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;type_traits&gt;</span></code> に次の機能が追加。</p>
<ul>
<li><p>値を返す type traits クラステンプレートそれぞれに対応する変数テンプレート版が追加。例えばクラステンプレート <code class="docutils literal notranslate"><span class="pre">std::is_integral</span></code> に対応する変数テンプレートは <code class="docutils literal notranslate"><span class="pre">std::is_integral_v</span></code> といい、次のように宣言される：</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<span class="kr">inline</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">is_integral_v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">is_integral</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;::</span><span class="n">value</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::void_t</span></code> 追加。次のような仕組みであり、SFINAE と組み合わせるというライブラリー設計の手筋があるようだ。</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="p">...</span><span class="o">&gt;</span>
<span class="k">using</span><span class="w"> </span><span class="n">void_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">void</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::bool_constant</span></code> 追加。</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">bool</span><span class="w"> </span><span class="n">B</span><span class="o">&gt;</span>
<span class="k">using</span><span class="w"> </span><span class="n">bool_constant</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">integral_constant</span><span class="o">&lt;</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="n">B</span><span class="o">&gt;</span><span class="p">;</span>
</pre></div>
</div>
</li>
<li><p>論理演算用のクラステンプレートおよびその変数テンプレート版追加。</p>
<ul class="simple">
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::conjunction</span></code></p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::disjunction</span></code></p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::negation</span></code></p></li>
</ul>
</li>
<li><p>スワップ操作の可能性を決定する次の機能が追加。それぞれ対応する変数テンプレート版もあわせて追加。</p>
<ul class="simple">
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::is_swappable</span></code> 追加。型の値が <code class="docutils literal notranslate"><span class="pre">std::swap()</span></code> により交換可能か。</p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::is_swappable_with</span></code> 追加。二つの型の値が
<code class="docutils literal notranslate"><span class="pre">std::is_swappable</span></code> であるかどうか。</p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::is_nothrow_swappable</span></code> 追加。
<code class="docutils literal notranslate"><span class="pre">std::is_swappable</span></code> かつスワップ操作が例外を送出しない保証があるかどうか。</p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">is_nothrow_swappable_with</span></code> 追加。
<code class="docutils literal notranslate"><span class="pre">std::is_nothrow_swappable</span></code> かつスワップ操作が例外を送出しない保証があるかどうか。</p></li>
</ul>
</li>
<li><p>呼び出し可能性を決定する次の機能が追加。それぞれ対応する変数テンプレート版もあわせて追加。</p>
<ul class="simple">
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::is_invocable</span></code> 追加。ある与えられた型が、別の与えられた型の引数で関数呼び出し可能であるか。</p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::is_invocable_r</span></code> 追加。<code class="docutils literal notranslate"><span class="pre">std::is_invocable</span></code> かつまた別の与えられた型の戻り値とするかどうか。</p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::is_nothrow_invocable</span></code>. <code class="docutils literal notranslate"><span class="pre">std::is_invocable</span></code> かつ呼び出しが例外を送出しない保証があるかどうか。</p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::is_nothrow_invocable_r</span></code>. <code class="docutils literal notranslate"><span class="pre">std::is_invocable_r</span></code>
かつ呼び出しが例外を送出しない保証があるかどうか。</p></li>
</ul>
</li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::has_unique_object_representations</span></code> およびその変数テンプレート版追加。</p>
<p><a class="reference external" href="https://cpprefjp.github.io/site">cpprefjp</a> によると〈簡易にハッシュを求めることを将来サポートする前準備として、ある型のバイト列をそのままその型のハッシュとして利用できるかを判定するために追加された〉そうだ。この記述は実態をよく説明していると思う。</p>
</li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::invoke_result</span></code> 追加。<code class="docutils literal notranslate"><span class="pre">std::invokable</span></code> のような使い方で関数の戻り値型を取得する。cf. <code class="docutils literal notranslate"><span class="pre">std::result_of</span></code>.</p></li>
</ul>
<p>上で私が「クラステンプレート」と書いたところを <a class="reference external" href="https://cpprefjp.github.io/site">cpprefjp</a> では「メタ関数」と書いていることに注意。</p>
</section>
<section id="id10">
<h2><a class="toc-backref" href="#id31" role="doc-backlink">時間演算</a><a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h2>
<ul>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::chrono:duration</span></code> に対する次の操作が追加：</p>
<ul class="simple">
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::chrono::floor()</span></code> 追加</p></li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::chrono::ceil()</span></code> 追加</p></li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::chrono::round()</span></code> 追加</p></li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::chrono::abs()</span></code> 追加</p></li>
</ul>
</li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::chrono:time_point</span></code> に対する次の操作が追加：</p>
<ul class="simple">
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::chrono::floor()</span></code> 追加</p></li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::chrono::ceil()</span></code> 追加</p></li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::chrono::round()</span></code> 追加</p></li>
</ul>
</li>
<li><p>上記二つのクラステンプレートの変更操作を <code class="docutils literal notranslate"><span class="pre">constexpr</span></code> に対応。
<code class="docutils literal notranslate"><span class="pre">std::chrono::duration</span></code> のほうを次に示す：</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">++</span><span class="p">();</span>
<span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">--</span><span class="p">();</span>
<span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">+=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&amp;</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">-=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&amp;</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">*=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">::</span><span class="n">rep</span><span class="o">&amp;</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">/=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">::</span><span class="n">rep</span><span class="o">&amp;</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">%=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">::</span><span class="n">rep</span><span class="o">&amp;</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&amp;</span><span class="w"> </span><span class="k">operator</span><span class="o">%=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&amp;</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="id11">
<h2><a class="toc-backref" href="#id32" role="doc-backlink">乱数</a><a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h2>
<p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;algorithm&gt;</span></code> に関数テンプレート <code class="docutils literal notranslate"><span class="pre">sample()</span></code> 追加。</p>
<ul class="simple">
<li><p>反復子が指定する範囲から指定個数の要素を無作為抽出する。</p></li>
<li><p>出力も反復子で指定する。</p></li>
<li><p>いつものように乱数エンジンを仕込むコードを書くのが面倒そうだ。</p></li>
</ul>
</section>
<section id="id12">
<h2><a class="toc-backref" href="#id33" role="doc-backlink">エラーハンドリング</a><a class="headerlink" href="#id12" title="Permalink to this heading">¶</a></h2>
<p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;exception&gt;</span></code> に関数 <code class="docutils literal notranslate"><span class="pre">std::uncaught_exceptions()</span></code> 追加。</p>
<ul class="simple">
<li><p>この関数は現在発生している例外の数を返す。</p></li>
<li><p>複数形であることに注意。単数形の関数は C++17 にて廃止。</p></li>
</ul>
</section>
<section id="id13">
<h2><a class="toc-backref" href="#id34" role="doc-backlink">予約済み名前空間</a><a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h2>
<p>次の名前の名前空間が標準ライブラリーのために予約される。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">std</span></code> + 数字</p></li>
</ul>
</section>
<section id="id14">
<h2><a class="toc-backref" href="#id35" role="doc-backlink">廃止</a><a class="headerlink" href="#id14" title="Permalink to this heading">¶</a></h2>
<p>C++11 や C++14 で廃止予定機能と宣告されたライブラリー要素が C++17 で削られる。</p>
<ul class="simple">
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::auto_ptr</span></code> 削除。<code class="docutils literal notranslate"><span class="pre">std::unique_ptr</span></code> などに移行すること。</p></li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::random_shuffle()</span></code> 削除。<code class="docutils literal notranslate"><span class="pre">std::shuffle()</span></code> に移行すること。</p></li>
<li><p>旧例外仕様に関連する次の要素：</p>
<ul>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">std::unexpected()</span></code>, <code class="docutils literal notranslate"><span class="pre">std::set_unexpected()</span></code>,
<code class="docutils literal notranslate"><span class="pre">std::get_unexpected()</span></code></p></li>
<li><p>型 <code class="docutils literal notranslate"><span class="pre">std::unexpected_handler</span></code></p></li>
</ul>
</li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;functional&gt;</span></code> における以下の要素</p>
<ul>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">std::bind1st()</span></code>, <code class="docutils literal notranslate"><span class="pre">std::bind2nd()</span></code></p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::binder1st</span></code>, <code class="docutils literal notranslate"><span class="pre">std::binder2nd</span></code></p></li>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">std::ptr_fun()</span></code>, クラス <code class="docutils literal notranslate"><span class="pre">std::pointer_to_unary_function</span></code>,
<code class="docutils literal notranslate"><span class="pre">std::pointer_to_binary_function</span></code></p></li>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">std::mem_fun()</span></code>, <code class="docutils literal notranslate"><span class="pre">std::mem_fun_ref()</span></code>,クラステンプレート
<code class="docutils literal notranslate"><span class="pre">std::mem_fun_t</span></code>, <code class="docutils literal notranslate"><span class="pre">std::mem_fun1_t</span></code>, <code class="docutils literal notranslate"><span class="pre">std::mem_fun_ref_t</span></code>,
<code class="docutils literal notranslate"><span class="pre">std::mem_fun1_ref_t</span></code>, <code class="docutils literal notranslate"><span class="pre">std::const_mem_fun_t</span></code>,
<code class="docutils literal notranslate"><span class="pre">std::const_mem_fun1_t</span></code>, <code class="docutils literal notranslate"><span class="pre">std::const_mem_fun_ref_t</span></code>,
<code class="docutils literal notranslate"><span class="pre">std::const_mem_fun1_ref_t</span></code></p></li>
<li><p>テンプレートクラス <code class="docutils literal notranslate"><span class="pre">std::function</span></code> における <code class="docutils literal notranslate"><span class="pre">uses_allocator</span></code> 周り。</p></li>
</ul>
</li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;iostream&gt;</span></code> の各種別名定義</p></li>
</ul>
</section>
<section id="id15">
<h2><a class="toc-backref" href="#id36" role="doc-backlink">非推奨</a><a class="headerlink" href="#id15" title="Permalink to this heading">¶</a></h2>
<p>C++03 までに提供された機能で廃止予定機能とされるものをここでは列挙する。最近の機能については今のところ習得が不十分なのでここに書くまでもない。</p>
<ul class="simple">
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;iterator&gt;</span></code> のクラステンプレート <code class="docutils literal notranslate"><span class="pre">std::iterator</span></code> を廃止予定機能とする。</p></li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;memory&gt;</span></code> のうち次の要素を廃止予定機能とする。</p>
<ul>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::allocator</span></code> の次のメンバーを廃止予定機能とする：</p>
<ul>
<li><p>型 <code class="docutils literal notranslate"><span class="pre">size_type</span></code>, <code class="docutils literal notranslate"><span class="pre">difference_type</span></code>, <code class="docutils literal notranslate"><span class="pre">pointer</span></code>, <code class="docutils literal notranslate"><span class="pre">const_pointer</span></code>,
<code class="docutils literal notranslate"><span class="pre">reference</span></code>, <code class="docutils literal notranslate"><span class="pre">const_reference</span></code></p></li>
<li><p>型 <code class="docutils literal notranslate"><span class="pre">rebind</span></code></p></li>
<li><p>メンバー関数 <code class="docutils literal notranslate"><span class="pre">address()</span></code>, <code class="docutils literal notranslate"><span class="pre">max_size()</span></code>, <code class="docutils literal notranslate"><span class="pre">construct()</span></code>, <code class="docutils literal notranslate"><span class="pre">destroy()</span></code></p></li>
<li><p>メンバー関数 <code class="docutils literal notranslate"><span class="pre">allocate()</span></code> の引数 <code class="docutils literal notranslate"><span class="pre">hint</span></code></p></li>
</ul>
</li>
<li><p>特殊化 <code class="docutils literal notranslate"><span class="pre">std::allocator&lt;void&gt;</span></code></p></li>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::get_temporary_buffer()</span></code>,
<code class="docutils literal notranslate"><span class="pre">std::return_temporary_buffer()</span></code></p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::raw_storage_iterator</span></code></p></li>
</ul>
</li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;functional&gt;</span></code> のうち次の要素を廃止予定機能とする。</p>
<ul>
<li><p>関数テンプレート <code class="docutils literal notranslate"><span class="pre">std::not1()</span></code>, <code class="docutils literal notranslate"><span class="pre">std::not2()</span></code></p></li>
<li><p>クラステンプレート <code class="docutils literal notranslate"><span class="pre">std::unary_negate</span></code>, <code class="docutils literal notranslate"><span class="pre">std::binary_nagate</span></code></p></li>
<li><p>関数オブジェクト各種の型 <code class="docutils literal notranslate"><span class="pre">result_type</span></code>, <code class="docutils literal notranslate"><span class="pre">argument_type</span></code>,
<code class="docutils literal notranslate"><span class="pre">first_argument_type</span></code>, <code class="docutils literal notranslate"><span class="pre">second_argument_type</span></code></p></li>
</ul>
</li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;codecvt&gt;</span></code> を廃止予定機能とする。</p></li>
<li><p>ヘッダーファイル <code class="docutils literal notranslate"><span class="pre">&lt;exception&gt;</span></code> の関数 <code class="docutils literal notranslate"><span class="pre">std::uncaught_exception()</span></code> を廃止予定機能とする。代わりに複数形のほうを用いること。</p></li>
</ul>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="language.html" title="Previous document">What’s New In C++17 言語仕様</a>
        </li>
        <li>
          <a href="../python-3.0.html" title="Next document">What’s New In Python 3.0 ノート</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="../_static/logos.png"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2024, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>