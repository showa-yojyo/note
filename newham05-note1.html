<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>入門 bash 読書ノート 1/3 &mdash; 読書ノート v1.2.0</title>
    
    <link rel="stylesheet" href="_static/prefab.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/twitter-button.js"></script>
    <link rel="top" title="読書ノート v1.2.0" href="index.html" />
    <link rel="up" title="入門 bash 読書ノート" href="newham05.html" />
    <link rel="next" title="入門 bash 読書ノート 2/3" href="newham05-note2.html" />
    <link rel="prev" title="入門 bash 読書ノート" href="newham05.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html">読書ノート v1.2.0</a> &raquo;</li>
          <li><a href="newham05.html" accesskey="U">入門 bash 読書ノート</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="bash-1-3">
<h1><a class="toc-backref" href="#id35">入門 bash 読書ノート 1/3</a><a class="headerlink" href="#bash-1-3" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">著者:</th><td class="field-body">Cameron Newham, Bill Rosenblatt</td>
</tr>
<tr class="field-even field"><th class="field-name">訳者:</th><td class="field-body">株式会社クイープ</td>
</tr>
<tr class="field-odd field"><th class="field-name">出版社:</th><td class="field-body">オライリー・ジャパン</td>
</tr>
<tr class="field-even field"><th class="field-name">ISBN:</th><td class="field-body">4-87311-254-0</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="id1">
<p class="topic-title first">ノートの目次</p>
<ul class="simple">
<li><a class="reference internal" href="#bash-1-3" id="id35">入門 bash 読書ノート 1/3</a><ul>
<li><a class="reference internal" href="#id2" id="id36">まえがき</a></li>
<li><a class="reference internal" href="#bash" id="id37">1 章 bash の基礎</a><ul>
<li><a class="reference internal" href="#unix" id="id38">1.3 UNIX シェルの歴史</a><ul>
<li><a class="reference internal" href="#id3" id="id39">1.3.1 bash</a></li>
<li><a class="reference internal" href="#id4" id="id40">1.3.2 bash の特徴</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id5" id="id41">1.4 bash の入手</a></li>
<li><a class="reference internal" href="#id6" id="id42">1.6 ファイル</a><ul>
<li><a class="reference internal" href="#id7" id="id43">1.6.1 ディレクトリ</a></li>
<li><a class="reference internal" href="#id8" id="id44">1.6.2 ファイル名、ワイルドカード、パス名の展開</a></li>
<li><a class="reference internal" href="#id9" id="id45">1.6.3 ブレース展開</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10" id="id46">1.7 入力と出力</a><ul>
<li><a class="reference internal" href="#id11" id="id47">1.7.1 標準入出力</a></li>
<li><a class="reference internal" href="#id12" id="id48">1.7.3 パイプライン</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id13" id="id49">1.8 バックグラウンドジョブ</a></li>
<li><a class="reference internal" href="#id14" id="id50">1.9 特殊記号とクォーティング</a><ul>
<li><a class="reference internal" href="#id15" id="id51">1.9.1 クォーティング</a></li>
<li><a class="reference internal" href="#id16" id="id52">1.9.2 バックスラッシュエスケープ</a></li>
<li><a class="reference internal" href="#id17" id="id53">1.9.5 コントロールキー</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id18" id="id54">2 章 コマンドライン編集</a><ul>
<li><a class="reference internal" href="#emacs" id="id55">2.3 emacs モード</a><ul>
<li><a class="reference internal" href="#id19" id="id56">2.3.1 基本コマンド</a></li>
<li><a class="reference internal" href="#id20" id="id57">2.3.4 履歴ファイル内での移動</a></li>
<li><a class="reference internal" href="#id21" id="id58">2.3.5 テキスト補完</a></li>
<li><a class="reference internal" href="#id22" id="id59">2.3.6 その他のコマンド</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id23" id="id60">2.6 履歴の展開</a></li>
<li><a class="reference internal" href="#readline" id="id61">2.7 readline</a><ul>
<li><a class="reference internal" href="#id24" id="id62">2.7.1 readline の起動ファイル</a></li>
<li><a class="reference internal" href="#bind" id="id63">2.7.2 bind を使ったキーバインド</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id25" id="id64">2.8 キー入力の習慣</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id26" id="id65">3 章 環境のカスタマイズ</a><ul>
<li><a class="reference internal" href="#bash-profile-bash-logout-bashrc" id="id66">3.1 .bash_profile, .bash_logout, .bashrc</a></li>
<li><a class="reference internal" href="#id27" id="id67">3.2 エイリアス</a></li>
<li><a class="reference internal" href="#id28" id="id68">3.3 オプション</a><ul>
<li><a class="reference internal" href="#shopt" id="id69">3.3.1 shopt</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id29" id="id70">3.4 シェル変数</a><ul>
<li><a class="reference internal" href="#id30" id="id71">3.4.1 変数とクォーティング</a></li>
<li><a class="reference internal" href="#id31" id="id72">3.4.2 組み込み変数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id32" id="id73">3.5 カスタマイズとサブプロセス</a><ul>
<li><a class="reference internal" href="#id33" id="id74">3.5.1 環境変数</a></li>
<li><a class="reference internal" href="#id34" id="id75">3.5.2 環境定義ファイル</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id36">まえがき</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">echo</span> <span class="pre">$BASH_VERSION</span></tt> で使用している <tt class="docutils literal"><span class="pre">bash</span></tt> のバージョンを確認できる。 (p. v)<ul>
<li>今手許の環境を調べたら <tt class="docutils literal"><span class="pre">3.2.48(21)-release</span></tt> と出た。</li>
</ul>
</li>
<li>本書の想定読者は「初心者」の次の段階に位置する一般的な UNIX/Linux ユーザー。(p. vi)</li>
<li>本書の狙いは、実用的なシェルプログラムを作成するためにコンピュータの学位を取得する必要はないことを示すことにある。 (p. vii)</li>
<li>RUBOUT: rub out を辞書で調べると、「すり消す」とある。</li>
<li>&lt;本書では、UNIX を「UNIX と Linux」の略語と捉えている&gt; (p. x)</li>
</ul>
</div>
<div class="section" id="bash">
<h2><a class="toc-backref" href="#id37">1 章 bash の基礎</a><a class="headerlink" href="#bash" title="Permalink to this headline">¶</a></h2>
<div class="section" id="unix">
<h3><a class="toc-backref" href="#id38">1.3 UNIX シェルの歴史</a><a class="headerlink" href="#unix" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>歴史的な説明から。<ul>
<li>Bourne シェル (<tt class="docutils literal"><span class="pre">sh</span></tt>)<ul>
<li>作成者 Steven Bourne</li>
<li>1979 年に登場した最初の普及版 UNIX である Version 7 に搭載されていた</li>
</ul>
</li>
<li>C シェル (<tt class="docutils literal"><span class="pre">csh</span></tt>)<ul>
<li>作者はカリフォルニア州立大学バークレー校の Bill Joy</li>
<li>Berkley Software Disribution UNIX (BSD UNIX) の一部として書かれた</li>
</ul>
</li>
<li>Korn シェル (<tt class="docutils literal"><span class="pre">ksh</span></tt>)<ul>
<li><tt class="docutils literal"><span class="pre">sh</span></tt> と <tt class="docutils literal"><span class="pre">csh</span></tt> の優れた機能プラス多数の独自機能から構成</li>
<li>商用製品</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="section" id="id3">
<h4><a class="toc-backref" href="#id39">1.3.1 bash</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">bash</span></tt> の名前は Bourne Again Shell から来ている。
<tt class="docutils literal"><span class="pre">sh</span></tt> へのリスペクトが込められている。</li>
<li>GNU プロジェクトのために作成されたシェルなので、無償で配布されている。</li>
<li>&lt;<tt class="docutils literal"><span class="pre">bash</span></tt> は、GNU システム用の標準のシェルとして、
公式には 1988 年 1 月 10 日の日曜日に産声をあげた&gt; (p. 4)</li>
</ul>
</div>
<div class="section" id="id4">
<h4><a class="toc-backref" href="#id40">1.3.2 bash の特徴</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>以下の三点を指摘している。</p>
<ul class="simple">
<li>コマンドライン編集モード</li>
<li>ジョブ制御</li>
<li>主にシェルをカスタマイズしたりプログラミングしたりするための機能</li>
</ul>
</div>
</div>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id41">1.4 bash の入手</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">echo</span> <span class="pre">$SHELL</span></tt> で使用しているシェルを確認できる。<ul>
<li>手許の環境で試した結果、 <tt class="docutils literal"><span class="pre">/bin/bash</span></tt> と出た。</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id6">
<h3><a class="toc-backref" href="#id42">1.6 ファイル</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id7">
<h4><a class="toc-backref" href="#id43">1.6.1 ディレクトリ</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>チルダ展開について。<ul>
<li>ユーザー名の前に <tt class="docutils literal"><span class="pre">~</span></tt> を付けると、それはそのユーザーのホームディレクトリの絶対パスとなる。</li>
<li><tt class="docutils literal"><span class="pre">~</span></tt> はユーザー自身のホームディレクトリを参照する。</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id8">
<h4><a class="toc-backref" href="#id44">1.6.2 ファイル名、ワイルドカード、パス名の展開</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>ワイルドカードとは記号だと思えばよい。
すべてのファイルの名前がわからなくても、パターンで指定できる機能を利用するときに使う特殊な記号。</li>
<li><tt class="docutils literal"><span class="pre">?</span></tt>, <tt class="docutils literal"><span class="pre">*</span></tt>, <tt class="docutils literal"><span class="pre">[set]</span></tt>, <tt class="docutils literal"><span class="pre">[!set]</span></tt></li>
<li>セット構造は初めて知った。</li>
<li>&lt;開きかっこ (<tt class="docutils literal"><span class="pre">[</span></tt>) の後に感嘆符 (<tt class="docutils literal"><span class="pre">!</span></tt>) を入れると、セットを「否定」することができる&gt; (p. 12)</li>
</ul>
</div>
<div class="section" id="id9">
<h4><a class="toc-backref" href="#id45">1.6.3 ブレース展開</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">後で以下の入力を試してみる。</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">echo </span>b<span class="o">{</span>ed,olt,ar<span class="o">}</span>s
<span class="nb">echo </span>b<span class="o">{</span>ar<span class="o">{</span>d,n,k<span class="o">}</span>,ed<span class="o">}</span>s
<span class="nb">echo</span> <span class="o">{</span>d..h<span class="o">}</span>
ls *.<span class="o">{</span>c,h,o<span class="o">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="id10">
<h3><a class="toc-backref" href="#id46">1.7 入力と出力</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id11">
<h4><a class="toc-backref" href="#id47">1.7.1 標準入出力</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>標準入力を利用してのコマンド入力終了を告げるために CTRL+D を押す。</li>
</ul>
</div>
<div class="section" id="id12">
<h4><a class="toc-backref" href="#id48">1.7.3 パイプライン</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>&lt;入出力リダイレクトとパイプラインが UNIX のブロック構造原理をどのように支援しているかが理解できたと思う。
表記は実に簡単で強力である。
特に重要なのは、パイプの概念によってコマンドの出力をほかのコマンドに渡すための見苦しい一時ファイルが要らなくなったことである&gt; (p. 18)</li>
</ul>
</div>
</div>
<div class="section" id="id13">
<h3><a class="toc-backref" href="#id49">1.8 バックグラウンドジョブ</a><a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>バックグラウンドジョブの基本は<ol class="arabic">
<li>コマンド <tt class="docutils literal"><span class="pre">&amp;</span></tt></li>
<li><tt class="docutils literal"><span class="pre">jobs</span></tt> でバックグラウンドジョブを確認することができる。</li>
</ol>
</li>
</ul>
</div>
<div class="section" id="id14">
<h3><a class="toc-backref" href="#id50">1.9 特殊記号とクォーティング</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>p. 21 表 1-6 に特殊記号がまとまっている。</li>
</ul>
<div class="section" id="id15">
<h4><a class="toc-backref" href="#id51">1.9.1 クォーティング</a><a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>特殊記号をリテラルで使用したいときは、それらを単一引用符で囲むことで OK だ。</li>
</ul>
</div>
<div class="section" id="id16">
<h4><a class="toc-backref" href="#id52">1.9.2 バックスラッシュエスケープ</a><a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">find</span> <span class="pre">.</span> <span class="pre">-name</span></tt> <em>string</em> などと入力する場合、
<em>string</em> の部分にはワイルドカードを検索対象ファイル名として指示できるが、
これを引用符で囲むこと。</li>
</ul>
</div>
<div class="section" id="id17">
<h4><a class="toc-backref" href="#id53">1.9.5 コントロールキー</a><a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">stty</span></tt> コマンドを使用すると、コントロールキーの設定を確認できる。
また必要に応じて変更できる。
<tt class="docutils literal"><span class="pre">stty</span> <span class="pre">all</span></tt> か <tt class="docutils literal"><span class="pre">stty</span> <span class="pre">-a</span></tt> と入力してみること。</li>
<li>うっかり CTRL+S を押すと画面が止まる。
もしだしぬけに画面が止まったら、CTRL+Q を試すこと。
&lt;CTRL+S キーと CTRL+Q キーは基本的に迷惑な存在になっている&gt; (p. 26)</li>
</ul>
</div>
</div>
</div>
<div class="section" id="id18">
<h2><a class="toc-backref" href="#id54">2 章 コマンドライン編集</a><a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>&lt;<tt class="docutils literal"><span class="pre">bash</span></tt> の編集モードでは、UNIX エディタとして最も有名な <tt class="docutils literal"><span class="pre">vi</span></tt> と <tt class="docutils literal"><span class="pre">emacs</span></tt> と同様の編集コマンドを使って、
コマンドラインを編集することができる&gt; (p. 29)</li>
<li>&lt;とにかく編集モードを 1 つは覚えておきたいという場合は、 <tt class="docutils literal"><span class="pre">emacs</span></tt> モードをお勧めする。
<tt class="docutils literal"><span class="pre">emacs</span></tt> モードのほうが、シェルそのものが提供する基本的な編集機能をより自然な形で拡張しているからだ&gt; (pp. 29-30)</li>
</ul>
<div class="section" id="emacs">
<h3><a class="toc-backref" href="#id55">2.3 emacs モード</a><a class="headerlink" href="#emacs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>コマンドライン入力を &lt;1 行のウィンドウからなる手軽な <tt class="docutils literal"><span class="pre">emacs</span></tt>&gt; (p. 31) と考えればよい。</li>
</ul>
<div class="section" id="id19">
<h4><a class="toc-backref" href="#id56">2.3.1 基本コマンド</a><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">emacs</span></tt> を知らないユーザーにとっては、
&lt;基本的なキー操作は覚えやすいが、 <tt class="docutils literal"><span class="pre">emacs</span></tt> 特有の概念をひととおり身につけることが要求される&gt; (p. 31)</li>
</ul>
</div>
<div class="section" id="id20">
<h4><a class="toc-backref" href="#id57">2.3.4 履歴ファイル内での移動</a><a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">emacs</span></tt> での行単位での上下方向の移動を、コマンド履歴の移動に流用している。</li>
<li>CTRL+R は <tt class="docutils literal"><span class="pre">reverse-i-search</span></tt> になる。<ul>
<li>目当てのコマンドラインが見つかったら、Enter ではなく CTRL+E を押すのがよさそう。</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id21">
<h4><a class="toc-backref" href="#id58">2.3.5 テキスト補完</a><a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>&lt;<tt class="docutils literal"><span class="pre">emacs</span></tt> モードの最も強力な（そして一般に使用されている）機能の 1 つは、
<strong>テキスト補完</strong> 機能である&gt; (p. 35)</li>
<li>最も重要なのは TAB である。</li>
<li>p. 37 の表 2-5 を見ると、いろいろな補完コマンドがあることがわかるが、
やっぱり TAB 一丁で何とかなる。</li>
</ul>
</div>
<div class="section" id="id22">
<h4><a class="toc-backref" href="#id59">2.3.6 その他のコマンド</a><a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li>CTRL+L は <tt class="docutils literal"><span class="pre">clear</span></tt> と同じ。</li>
<li>CTRL+V は <tt class="docutils literal"><span class="pre">quote-char</span></tt> と同じ。</li>
<li>ESC+. および ESC+_ が便利で、前のコマンドラインの最後のワードをポイント位置に挿入する。</li>
</ol>
</div>
</div>
<div class="section" id="id23">
<h3><a class="toc-backref" href="#id60">2.6 履歴の展開</a><a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>イベント指示記号<ul>
<li>タイプミス直後に <tt class="docutils literal"><span class="pre">^string1^string2</span></tt> を活用できる。</li>
</ul>
</li>
<li>ワード指示記号<ul>
<li>&lt;<tt class="docutils literal"><span class="pre">!!:0</span></tt> に続いて新しい引数を入力すれば、最後のコマンドを別の引数で実行することができる&gt; (p. 51)</li>
</ul>
</li>
<li>修飾子</li>
</ul>
<p>このセクション、もう少し実用的な具体例が欲しい。
と思っていたら、最後にこんなことが書いてあった。
&lt;履歴の展開は、コマンドをすばやく再実行するのに便利だが、
前述のコマンドライン編集メカニズムでは無効になってしまう&gt; (p. 52)</p>
</div>
<div class="section" id="readline">
<h3><a class="toc-backref" href="#id61">2.7 readline</a><a class="headerlink" href="#readline" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">bash</span></tt> のコマンドライン編集インターフェイス</li>
<li>テキストベースのインターフェースを有するアプリケーションが
<tt class="docutils literal"><span class="pre">readline</span></tt> を利用している場合がある。</li>
<li>キーバインドをカスタマイズすることができる。</li>
</ul>
<div class="section" id="id24">
<h4><a class="toc-backref" href="#id62">2.7.1 readline の起動ファイル</a><a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">&lt;デフォルトの起動ファイルは <tt class="docutils literal"><span class="pre">.inputrc</span></tt> である&gt; (p. 52)</p>
</li>
<li><p class="first">&lt;<tt class="docutils literal"><span class="pre">readline</span></tt> を使用するアプリケーションが別にある場合は、
<tt class="docutils literal"><span class="pre">bash</span></tt> 専用のキーバインドを別にしておいたほうがよいだろう。
これには、（略） <tt class="docutils literal"><span class="pre">.inputrc</span></tt> ファイルに <tt class="docutils literal"><span class="pre">$if</span> <span class="pre">bash</span></tt> という条件文を挿入する&gt; (p. 54)</p>
</li>
<li><p class="first">&lt;変数を設定するには、 <tt class="docutils literal"><span class="pre">.inputrc</span></tt> ファイルで <tt class="docutils literal"><span class="pre">set</span></tt> コマンドを使用する&gt; (p. 55)</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># bash を vi モードで起動するようにする</span>
<span class="nb">set </span>editing-mode vi
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="bind">
<h4><a class="toc-backref" href="#id63">2.7.2 bind を使ったキーバインド</a><a class="headerlink" href="#bind" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">&lt;<tt class="docutils literal"><span class="pre">bind</span> <span class="pre">-P</span></tt> と入力すれば、現在のキーバインドを表示することができる&gt; (p. 55)
そうなので、今手許の Cygwin で試したら大量に出力された。</p>
</li>
<li><p class="first">&lt;キー配列にシェルコマンドをバインドしたい場合には、
<tt class="docutils literal"><span class="pre">bind</span> <span class="pre">-x</span></tt> が便利である&gt;</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># CTRL+L を ls コマンドにバインドする</span>
<span class="nb">bind</span> -x <span class="s1">&#39;&quot;\C-l&quot;:ls&#39;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="id25">
<h3><a class="toc-backref" href="#id64">2.8 キー入力の習慣</a><a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">vi</span></tt> や <tt class="docutils literal"><span class="pre">emacs</span></tt> のエディタを使った経験がなければ、
<tt class="docutils literal"><span class="pre">emacs</span></tt> モードのキー入力を憶えることを著者は推奨している。また、
<tt class="docutils literal"><span class="pre">emacs</span></tt> のコマンド構造がミニバージョンを作成するのに向いていることも指摘している。</li>
</ul>
</div>
</div>
<div class="section" id="id26">
<h2><a class="toc-backref" href="#id65">3 章 環境のカスタマイズ</a><a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h2>
<p>冒頭で、環境という概念を、職場の机の例を挙げてわかりやすく説明している。
文房具や電話機を個人の趣向に合わせて配置することは、環境のカスタマイズの一例だ。</p>
<div class="section" id="bash-profile-bash-logout-bashrc">
<h3><a class="toc-backref" href="#id66">3.1 .bash_profile, .bash_logout, .bashrc</a><a class="headerlink" href="#bash-profile-bash-logout-bashrc" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">.bash_profile</span></tt> はシステムにログインする度に読み込まれ、そこに書いてあるものを実行する。</li>
<li><tt class="docutils literal"><span class="pre">.bash_profile</span></tt> に類似するファイルとして、 <tt class="docutils literal"><span class="pre">.bash_login</span></tt> と <tt class="docutils literal"><span class="pre">.profile</span></tt> がある。<ul>
<li><tt class="docutils literal"><span class="pre">.bash_login</span></tt> は C シェルの <tt class="docutils literal"><span class="pre">.login</span></tt> に由来している。</li>
<li><tt class="docutils literal"><span class="pre">.profile</span></tt> は Bourne シェルと Korn シェルの同名の設定ファイルに由来している。</li>
<li>ログイン時には、これらのいずれか 1 つだけが読み込まれる。
優先度は <tt class="docutils literal"><span class="pre">.bash_profile</span></tt>, <tt class="docutils literal"><span class="pre">.bash_login</span></tt>, <tt class="docutils literal"><span class="pre">.profile</span></tt> の順。</li>
</ul>
</li>
<li>コマンドラインから <tt class="docutils literal"><span class="pre">bash</span></tt> を起動した場合（サブシェル）、
<tt class="docutils literal"><span class="pre">.bashrc</span></tt> からコマンドを読み込もうとする。</li>
</ul>
</div>
<div class="section" id="id27">
<h3><a class="toc-backref" href="#id67">3.2 エイリアス</a><a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">構文は以下の通り。等号記号の前後に空白文字を入れてはならない。</p>
<div class="highlight-python"><div class="highlight"><pre>alias &lt;名前&gt;=&lt;コマンド&gt;
</pre></div>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">bash</span></tt> はエイリアスの対象となるものにテキスト置換を実行する。
例えば <tt class="docutils literal"><span class="pre">alias</span> <span class="pre">printall='pr</span> <span class="pre">*</span> <span class="pre">|</span> <span class="pre">lpr'</span></tt> というエイリアスに対して、
<tt class="docutils literal"><span class="pre">*</span></tt> をワイルドカード展開する。</p>
</li>
<li><p class="first">エイリアスは再帰的であるが、無限ループに陥らないようにできている。</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="c"># 無限ループにならない</span>
<span class="nb">alias </span><span class="nv">ls</span><span class="o">=</span><span class="s1">&#39;ls -l&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">等号なしで <tt class="docutils literal"><span class="pre">alias</span> <span class="pre">XXXX</span></tt> を実行すると <tt class="docutils literal"><span class="pre">XXXX</span></tt> の値が表示される。</p>
</li>
<li><p class="first">引数なしで <tt class="docutils literal"><span class="pre">alias</span></tt> を実行すると、定義済みのエイリアスの一覧が表示される。</p>
</li>
<li><p class="first">エイリアルは、&lt;シェルのスクリプトや関数では基本的に無効となる&gt; (p. 64)</p>
</li>
</ul>
</div>
<div class="section" id="id28">
<h3><a class="toc-backref" href="#id68">3.3 オプション</a><a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">set</span> <span class="pre">-o</span> <span class="pre">&lt;オプション名&gt;</span></tt> と <tt class="docutils literal"><span class="pre">set</span> <span class="pre">+o</span> <span class="pre">&lt;オプション名&gt;</span></tt> が基本。
前者はオプションを ON にし、後者は OFF にする。</li>
<li><tt class="docutils literal"><span class="pre">ignoreeof</span></tt> と <tt class="docutils literal"><span class="pre">nounset</span></tt> が面白そう。</li>
<li>オプションの状態を確認するには、単に <tt class="docutils literal"><span class="pre">set</span> <span class="pre">-o</span></tt> とだけ入力する。<ul>
<li>今試してみたら、ほとんどのオプションが値が off だった。</li>
</ul>
</li>
</ul>
<div class="section" id="shopt">
<h4><a class="toc-backref" href="#id69">3.3.1 shopt</a><a class="headerlink" href="#shopt" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>bash 2.0 で追加されたコマンドで、環境変数や <tt class="docutils literal"><span class="pre">set</span></tt> コマンドで行われていた設定に代わるもの。</li>
<li><tt class="docutils literal"><span class="pre">shopt</span> <span class="pre">-p</span></tt> で一覧を見てみよう。</li>
</ul>
</div>
</div>
<div class="section" id="id29">
<h3><a class="toc-backref" href="#id70">3.4 シェル変数</a><a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>変数を定義する構文は <tt class="docutils literal"><span class="pre">&lt;変数名&gt;=&lt;値&gt;</span></tt> であり、等号記号の左右に空白文字は入らない。</li>
<li>変数を削除するには <tt class="docutils literal"><span class="pre">unset</span> <span class="pre">&lt;変数名&gt;</span></tt> とする。
別に便利ではないようだ。</li>
<li>&lt;変数の値を確認する最も簡単な方法は <tt class="docutils literal"><span class="pre">echo</span></tt> コマンドを使用することだ&gt; (p. 67)</li>
</ul>
<div class="section" id="id30">
<h4><a class="toc-backref" href="#id71">3.4.1 変数とクォーティング</a><a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>&lt;引用符で囲まれている文字列を 1 つのワードをシェルに思い込ませる&gt; (p. 68)</li>
</ul>
</div>
<div class="section" id="id31">
<h4><a class="toc-backref" href="#id72">3.4.2 組み込み変数</a><a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>最初にコマンドライン履歴関連の変数を紹介している。
よく使っているのは <tt class="docutils literal"><span class="pre">HISTFILESIZE</span></tt>, <tt class="docutils literal"><span class="pre">HISTSIZE</span></tt>, <tt class="docutils literal"><span class="pre">HISTTIMEFORMAT</span></tt> の三つ。<ul>
<li><tt class="docutils literal"><span class="pre">HISTCONTROL</span></tt> 変数をうまく設定すると、重複するコマンドラインが履歴リストに追加されなくなる。
例えば <tt class="docutils literal"><span class="pre">HISTCONTROL=ignoredups</span></tt> とする。</li>
</ul>
</li>
<li>プロンプト変数 (<tt class="docutils literal"><span class="pre">PS1</span></tt>, <tt class="docutils literal"><span class="pre">PS2</span></tt>, <tt class="docutils literal"><span class="pre">PS3</span></tt>, <tt class="docutils literal"><span class="pre">PS4</span></tt>) により、プロンプトをカスタマイズできる。<ul>
<li>&lt;Bash は 4 種類のプロンプト文を使い分ける&gt; (p. 73)</li>
<li>&lt;プロンプト文を設定する最も効果的な方法は、常にカレントディレクトリが表示されるようにすることだろう&gt; (p. 74)
たとえば <tt class="docutils literal"><span class="pre">PS1=&quot;\u</span> <span class="pre">\!--&gt;</span> <span class="pre">&quot;</span></tt> のようにする。</li>
<li>&lt;セカンダリプロンプト文は、コマンドラインを入力して RETURN キーを押したときに、
コマンドが未完成であることを示すために使用される&gt; (p. 75)</li>
</ul>
</li>
<li>コマンド検索パス <tt class="docutils literal"><span class="pre">PATH</span></tt><ul>
<li>この記法をおさえる。
<tt class="docutils literal"><span class="pre">PATH=$PATH:&quot;/home/user-name/bin&quot;</span></tt></li>
<li>セキュリティ上 <tt class="docutils literal"><span class="pre">PATH</span></tt> を自分のディレクトリをほかのよりも優先されるように設定してはいけない。</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">bash</span></tt> はコマンドハッシュなるものを管理している。
<tt class="docutils literal"><span class="pre">hash</span></tt> コマンドでそれを確認できる。<ul>
<li>&lt;<tt class="docutils literal"><span class="pre">hash</span></tt> の詳細について頭を悩ませる必要はない&gt; (p. 77)</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">CDPATH</span></tt> の紹介。「Cygwin へ送る」ユーザーである私は使わない。</li>
</ul>
</div>
</div>
<div class="section" id="id32">
<h3><a class="toc-backref" href="#id73">3.5 カスタマイズとサブプロセス</a><a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>&lt;ユーザーがコマンドを入力するたびに、シェルがそのコマンドをサブプロセスで実行することを思い出そう。
複雑なプログラムになると、サブプロセスを独自に生成することもある&gt; (p. 79)</li>
</ul>
<div class="section" id="id33">
<h4><a class="toc-backref" href="#id74">3.5.1 環境変数</a><a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">環境変数は、すべてのサブプロセスが参照できる特殊なシェル変数だ。</p>
</li>
<li><p class="first">以下のように処理した変数は、環境変数として使用することができる。</p>
<div class="highlight-python"><div class="highlight"><pre>export &lt;変数名&gt;
# or
export &lt;変数名&gt;=&lt;値&gt;
</pre></div>
</div>
</li>
<li><p class="first">特定のサブプロセス環境だけで使用する環境変数を定義することもできる。</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">TERM</span><span class="o">=</span>trythisone emacs file-name
</pre></div>
</div>
</li>
<li><p class="first">環境変数をリストするには <tt class="docutils literal"><span class="pre">export</span></tt> を引数なしで実行する。</p>
<ul class="simple">
<li>実行してみたら <tt class="docutils literal"><span class="pre">declare</span> <span class="pre">-x</span></tt> の嵐となった。</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id34">
<h4><a class="toc-backref" href="#id75">3.5.2 環境定義ファイル</a><a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">&lt;原則としては、 <tt class="docutils literal"><span class="pre">.bash_profile</span></tt> 内の定義をできるだけ減らし、
環境定義ファイル (<tt class="docutils literal"><span class="pre">.bashrc</span></tt>) の定義をできるだけ増やす&gt; (p. 84)</p>
<div class="highlight-bash"><div class="highlight"><pre>stty stop ^S intr ^C erase ^?
date
<span class="nb">source</span> .bashrc
</pre></div>
</div>
</li>
</ul>
<hr class="docutils" />
<p><a class="reference internal" href="newham05-note2.html"><em>入門 bash 読書ノート 2/3</em></a> へ。</p>
</div>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html">読書ノート v1.2.0</a> &raquo;</li>
          <li><a href="newham05.html" >入門 bash 読書ノート</a> &raquo;</li> 
      </ul>
    </div>
    <div id="footer">
      <div id="footer_logo">
        <a class="imga" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="_static/logos.png" width="88" height="31" /></a>
      </div>
      <div id="footer_share">
        <a href="https://twitter.com/share" class="twitter-share-button" data-size="large">Tweet</a>
        <script type="text/javascript">render_twitter_button(document, 'script', 'twitter-wjs')</script>
      </div>
      <div id="footer_copyright">
        Since 1999<br />
        Copyright &copy; 1999-2014, プレハブ小屋 All rights reserved.
      </div>
      <div id="footer_spacer">
        <p>
          Last updated at 2014/11/06 (Thu) 23:22:09.
        </p>
      </div>
    </div>
  </body>
</html>