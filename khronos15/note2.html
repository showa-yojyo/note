
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WebGL Specification 1.0 読書ノート 2 of 4 &#8212; 読書ノート 1.5dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script async="async" src="../_static/mathjax-v3.js"></script>
    <script src="../_static/mermaid.js"></script>
    <link rel="next" title="WebGL Specification 1.0 読書ノート 3 of 4" href="note3.html" />
    <link rel="prev" title="WebGL Specification 1.0 読書ノート 1 of 4" href="note1.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="note1.html" title="Previous document">WebGL Specification 1.0 読書ノート 1 of 4</a>
        </li>
        <li>
          <a href="note3.html" title="Next document">WebGL Specification 1.0 読書ノート 3 of 4</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <div class="section" id="webgl-specification-1-0-2-of-4">
<h1><a class="toc-backref" href="#id11">WebGL Specification 1.0 読書ノート 2 of 4</a><a class="headerlink" href="#webgl-specification-1-0-2-of-4" title="Permalink to this heading">¶</a></h1>
<p><a class="reference external" href="https://www.khronos.org/registry/webgl/specs/latest/1.0/">WebGL Specification</a>
を読んでいく。</p>
<div class="contents topic" id="id1">
<p class="topic-title">ノート目次</p>
<ul class="simple">
<li><p><a class="reference internal" href="#webgl-specification-1-0-2-of-4" id="id11">WebGL Specification 1.0 読書ノート 2 of 4</a></p>
<ul>
<li><p><a class="reference internal" href="#dom-interfaces" id="id12">5 DOM Interfaces</a></p>
<ul>
<li><p><a class="reference internal" href="#types" id="id13">5.1 Types</a></p></li>
<li><p><a class="reference internal" href="#webglcontextattributes" id="id14">5.2 WebGLContextAttributes</a></p>
<ul>
<li><p><a class="reference internal" href="#context-creation-parameters" id="id15">5.2.1 Context creation parameters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#webglobject" id="id16">5.3 WebGLObject</a></p></li>
<li><p><a class="reference internal" href="#webglbuffer" id="id17">5.4 WebGLBuffer</a></p></li>
<li><p><a class="reference internal" href="#webglframebuffer" id="id18">5.5 WebGLFramebuffer</a></p></li>
<li><p><a class="reference internal" href="#webglprogram" id="id19">5.6 WebGLProgram</a></p></li>
<li><p><a class="reference internal" href="#webglrenderbuffer" id="id20">5.7 WebGLRenderbuffer</a></p></li>
<li><p><a class="reference internal" href="#webglshader" id="id21">5.8 WebGLShader</a></p></li>
<li><p><a class="reference internal" href="#webgltexture" id="id22">5.9 WebGLTexture</a></p></li>
<li><p><a class="reference internal" href="#webgluniformlocation" id="id23">5.10 WebGLUniformLocation</a></p></li>
<li><p><a class="reference internal" href="#webglactiveinfo" id="id24">5.11 WebGLActiveInfo</a></p>
<ul>
<li><p><a class="reference internal" href="#attributes" id="id25">5.11.1 Attributes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#webglshaderprecisionformat" id="id26">5.12 WebGLShaderPrecisionFormat</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id27">5.12.1 Attributes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#arraybuffer-and-typed-arrays" id="id28">5.13 ArrayBuffer and Typed Arrays</a></p></li>
<li><p><a class="reference internal" href="#the-webgl-context" id="id29">5.14 The WebGL context</a></p>
<ul>
<li><p><a class="reference internal" href="#id5" id="id30">5.14.1 Attributes</a></p></li>
<li><p><a class="reference internal" href="#getting-information-about-the-context" id="id31">5.14.2 Getting information about the context</a></p></li>
<li><p><a class="reference internal" href="#setting-and-getting-state" id="id32">5.14.3 Setting and getting state</a></p></li>
<li><p><a class="reference internal" href="#viewing-and-clipping" id="id33">5.14.4 Viewing and clipping</a></p></li>
<li><p><a class="reference internal" href="#buffer-objects" id="id34">5.14.5 Buffer objects</a></p></li>
<li><p><a class="reference internal" href="#framebuffer-objects" id="id35">5.14.6 Framebuffer objects</a></p></li>
<li><p><a class="reference internal" href="#renderbuffer-objects" id="id36">5.14.7 Renderbuffer objects</a></p></li>
<li><p><a class="reference internal" href="#texture-objects" id="id37">5.14.8 Texture objects</a></p></li>
<li><p><a class="reference internal" href="#programs-and-shaders" id="id38">5.14.9 Programs and Shaders</a></p></li>
<li><p><a class="reference internal" href="#uniforms-and-attributes" id="id39">5.14.10 Uniforms and attributes</a></p></li>
<li><p><a class="reference internal" href="#writing-to-the-drawing-buffer" id="id40">5.14.11 Writing to the drawing buffer</a></p></li>
<li><p><a class="reference internal" href="#reading-back-pixels" id="id41">5.14.12 Reading back pixels</a></p></li>
<li><p><a class="reference internal" href="#detecting-context-lost-events" id="id42">5.14.13 Detecting context lost events</a></p></li>
<li><p><a class="reference internal" href="#detecting-and-enabling-extensions" id="id43">5.14.14 Detecting and enabling extensions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#webglcontextevent" id="id44">5.15 WebGLContextEvent</a></p>
<ul>
<li><p><a class="reference internal" href="#id10" id="id45">5.15.1 Attributes</a></p></li>
<li><p><a class="reference internal" href="#the-context-lost-event" id="id46">5.15.2 The Context Lost Event</a></p></li>
<li><p><a class="reference internal" href="#the-context-restored-event" id="id47">5.15.3 The Context Restored Event</a></p></li>
<li><p><a class="reference internal" href="#the-context-creation-error-event" id="id48">5.15.4 The Context Creation Error Event</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="dom-interfaces">
<h2><a class="toc-backref" href="#id12">5 DOM Interfaces</a><a class="headerlink" href="#dom-interfaces" title="Permalink to this heading">¶</a></h2>
<p>本章では、上述の機能へのランタイムアクセスをサポートするために DOM に追加されたインターフェイスと機能について述べられている。</p>
<div class="section" id="types">
<h3><a class="toc-backref" href="#id13">5.1 Types</a><a class="headerlink" href="#types" title="Permalink to this heading">¶</a></h3>
<p>本文中の表に列挙された型が以降の節すべてのインターフェイスで用いられるとある。
JavaScript ではなく C 言語のコードで書かれているのが気になる。</p>
</div>
<div class="section" id="webglcontextattributes">
<h3><a class="toc-backref" href="#id14">5.2 WebGLContextAttributes</a><a class="headerlink" href="#webglcontextattributes" title="Permalink to this heading">¶</a></h3>
<p>WebGLContextAttributes 辞書には描画面の属性が含まれており、
<code class="docutils literal notranslate"><span class="pre">getContext</span></code> の二番目の引数として渡される。</p>
<hr class="docutils" />
<p>有用なので既定値を JavaScript の形式で転載する：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">alpha</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">depth</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">stencil</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">antialias</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">premultipliedAlpha</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">preserveDrawingBuffer</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">powerPreference</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;default&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">failIfMajorPerformanceCaveat</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="nx">desynchronized</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p>後述の例と併せて眺めると良い。</p></li>
</ul>
<div class="section" id="context-creation-parameters">
<h4><a class="toc-backref" href="#id15">5.2.1 Context creation parameters</a><a class="headerlink" href="#context-creation-parameters" title="Permalink to this heading">¶</a></h4>
<p>ここにある一覧に WebGLContextAttributes オブジェクトの各属性とその用途について説明がある。</p>
<ul class="simple">
<li><p>既定値は <code class="docutils literal notranslate"><span class="pre">getContext</span></code> に二番目の引数が渡されなかった場合、または指定された名前の属性を持たないユーザーオブジェクトが渡された場合に採用される。</p></li>
</ul>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">alpha</span></code></dt><dd><p>この値が <code class="docutils literal notranslate"><span class="pre">true</span></code> である場合、描画バッファーにアルファーチャンネルがある。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">depth</span></code></dt><dd><p>この値が <code class="docutils literal notranslate"><span class="pre">true</span></code> の場合、描画バッファーは少なくとも 16 ビットの奥行きバッファーを持つ。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">stencil</span></code></dt><dd><p>この値が <code class="docutils literal notranslate"><span class="pre">true</span></code> の場合、描画バッファーは少なくとも 8 ビットのステンシルバッファーを持つ。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">antialias</span></code></dt><dd><p>この値が <code class="docutils literal notranslate"><span class="pre">true</span></code> で、かつ実装が antialiasing をサポートしている場合、描画バッファーは選択した手法と品質を使用してそれを実行する。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">premultipliedAlpha</span></code></dt><dd><p>この値が <code class="docutils literal notranslate"><span class="pre">true</span></code> の場合、ページ合成器は描画バッファーにアルファー値があらかじめ乗算された色が含まれているとみなす。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">alpha</span> <span class="pre">=</span> <span class="pre">false</span></code> の場合、このフラグは無視される。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">premultipliedAlpha</span></code> フラグの効果の詳細については
<a class="reference internal" href="note1.html#premultiplied-alpha-canvas-apis-and-teximage2d"><span class="std std-ref">2.4 Premultiplied Alpha, Canvas APIs and texImage2D</span></a> を参照。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">preserveDrawingBuffer</span></code></dt><dd><p>この値が <code class="docutils literal notranslate"><span class="pre">false</span></code> の場合、<a class="reference internal" href="note1.html#the-drawing-buffer"><span class="std std-ref">2.2 The Drawing Buffer</span></a> にあるように描画バッファーが提示されると、描画バッファーの内容は既定値に消去される。描画バッファーのすべての要素（色、奥行き、ステンシル）が消去される。</p>
<p>この値が <code class="docutils literal notranslate"><span class="pre">true</span></code> の場合、バッファーは消去されず、オーナーが消去するか上書きするまで、その値が保持される。
<code class="docutils literal notranslate"><span class="pre">preserveDrawingBuffer</span></code> フラグを <code class="docutils literal notranslate"><span class="pre">true</span></code> に設定すると、一部のハードウェアではパフォーマンスに大きな影響を与えることがある。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">powerPreference</span></code></dt><dd><p>この WebGL コンテキストに適した GPU の構成を示すヒントをブラウザーに提供する。この値は、複数の GPU を備えたシステムでどの GPU を使用するかに影響を与える可能性がある。たとえば、デュアル GPU システムでは、レンダリング性能を犠牲にして消費電力の少ない GPU を使用する場合があり得る。このプロパティーはヒントに過ぎず、WebGL の実装がこれを無視しても構わない。</p>
<p>WebGL の実装では、この属性の値にかかわらず、コンテキストの消滅および復元イベントを使用して、電力とメモリーの消費を調整する。</p>
<p>この属性が取り得る値は次のどれかだ：</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;default&quot;</span></code></dt><dd><p>どの GPU 構成が最も適しているかをブラウザーに判断させる。これが既定値だ。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;high-performance&quot;</span></code></dt><dd><p>消費電力よりもレンダリング性能を優先した GPU 構成を要求する。この値を指定すると、モバイル機器のバッテリー駆動時間が大幅に短くなる可能性がある。実装では、最初はこの要求を尊重し、しばらくするとコンテキストを失い、要求を無視して新しいコンテキストを復元することにしてもかまわない。</p>
<div class="admonition-non-normative admonition">
<p class="admonition-title">Non-normative</p>
<p>バックグラウンドの高性能コンテキストを失うことをブラウザーが決定するということがひじょうにありがちなので、このオプションを要求するアプリケーションは、堅牢なコンテキスト消失処理を試験し、維持する必要がある。</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&quot;low-power&quot;</span></code></dt><dd><p>レンダリング性能よりも省電力を優先した GPU 設定を要求する。一般的に、内容が描画パフォーマンスに制約される可能性が低い場合にこの値を使用するべきだ。たとえば、</p>
<ul class="simple">
<li><p>一秒間にワンフレームしかレンダリングしない場合、</p></li>
<li><p>単純なシェーダーで比較的単純なジオメトリーのみを描画する場合、</p></li>
<li><p>小さな HTML <code class="docutils literal notranslate"><span class="pre">canvas</span></code> 要素を使用する場合</p></li>
</ul>
<p>などだ。</p>
<p>モバイル機器のバッテリー駆動時間が著しく改善される可能性があるので、このオプションを推奨。</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">failIfMajorPerformanceCaveat</span></code></dt><dd><p>この値が <code class="docutils literal notranslate"><span class="pre">true</span></code> の場合、作成された WebGL コンテキストのパフォーマンスが、同等の OpenGL 呼び出しを行うネイティブアプリケーションのパフォーマンスよりも劇的に低下すると実装が判断した場合、コンテキストの作成を失敗させる。</p>
<p>これには次のような理由がある：</p>
<ul class="simple">
<li><p>ある実装では、ユーザーの GPU ドライバーが不安定であることがわかっている場合、ソフトウェアラスタライザーに切り替わることがある。</p></li>
<li><p>ある実装では、フレームバッファーを残りのページと合成する前に、
GPU メモリーからシステムメモリーに読み戻す必要があり、パフォーマンスが著しく低下する可能性がある。</p></li>
</ul>
<p>高いパフォーマンスを必要としないアプリケーションでは、この引数を既定値の <code class="docutils literal notranslate"><span class="pre">false</span></code> のままにしておく。</p>
<p>高いパフォーマンスを必要とするアプリケーションでは、この引数を <code class="docutils literal notranslate"><span class="pre">true</span></code> に設定し、コンテキストの作成に失敗した場合は、
2D canvas コンテキストなどの予備のレンダリングパスを使用することを勧める。</p>
<p>また、この引数を <code class="docutils literal notranslate"><span class="pre">false</span></code> に設定した状態で WebGL コンテキストの作成を再試行し、パフォーマンスを向上させるために忠実度の低いレンダリングモードを使用するということもできる。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">desynchronized</span></code></dt><dd><p>この値が <code class="docutils literal notranslate"><span class="pre">true</span></code> の場合、ブラウザーはキャンバスの描画を最適化して、入力イベントからラスタライズまでの待ち時間を短縮することができる。そのためには、キャンバスの描画周期をイベントループから非同期化するか、通常のブラウザーの描画アルゴリズムを迂回するか、またはその両方を行う必要がある。このモードでは、通常の描画の仕組み、ラスタライズ、またはその両方が迂回されるため、目に見える tearing artifacts が発生する可能性がある。</p>
<div class="admonition-non-normative admonition">
<p class="admonition-title">Non-normative</p>
<p>ブラウザーは、通常、表示されていないバッファーでレンダリングを行い、表示のためにスキャンされているバッファーと素早く交換する。この技術は tearing artifacts を引き起こす可能性があるという代償を払って遅延を削減する。</p>
<p>この真偽値の属性 <code class="docutils literal notranslate"><span class="pre">desynchronized</span></code> は、入力からラスタライズまでの待ち時間の遅延が急所となる描画アプリケーションなど、特定の種類のアプリケーションを実装する際に役立つ。<a class="reference internal" href="note4.html#multiplebuffering" id="id2"><span>[MULTIPLEBUFFERING]</span></a></p>
</div>
</dd>
</dl>
<div class="admonition-example-iii admonition">
<p class="admonition-title">Example III</p>
<p>WebGLContextAttributes 引数を <code class="docutils literal notranslate"><span class="pre">getContext</span></code> に渡すコード例。この例では、ページ上に <code class="docutils literal notranslate"><span class="pre">canvas1</span></code> という名前の <code class="docutils literal notranslate"><span class="pre">canvas</span></code> 要素が存在することを仮定している。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">canvas</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;canvas1&#39;</span><span class="p">);</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">gl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s1">&#39;webgl&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">                             </span><span class="p">{</span><span class="w"> </span><span class="nx">antialias</span><span class="o">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<span class="w">                               </span><span class="nx">stencil</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">});</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="webglobject">
<h3><a class="toc-backref" href="#id16">5.3 WebGLObject</a><a class="headerlink" href="#webglobject" title="Permalink to this heading">¶</a></h3>
<p>WebGLObject インターフェイスはすべての GL オブジェクトの親となるインターフェイスだ。各 WebGLObject は <code class="docutils literal notranslate"><span class="pre">invalidated</span></code> フラグを持っており、これは最初はセットされていない。</p>
</div>
<div class="section" id="webglbuffer">
<h3><a class="toc-backref" href="#id17">5.4 WebGLBuffer</a><a class="headerlink" href="#webglbuffer" title="Permalink to this heading">¶</a></h3>
<p>WebGLBuffer インターフェイスは OpenGL バッファーオブジェクトを表現する。内包されているオブジェクトは</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">glGenBuffers</span></code> を呼び出して作成され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glBindBuffer</span></code> を呼び出して束縛され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glDeleteBuffers</span></code> を呼び出して削除される。</p></li>
</ul>
</div>
<div class="section" id="webglframebuffer">
<h3><a class="toc-backref" href="#id18">5.5 WebGLFramebuffer</a><a class="headerlink" href="#webglframebuffer" title="Permalink to this heading">¶</a></h3>
<p>WebGLFramebuffer インターフェイスは OpenGL フレームバッファーオブジェクトを表現する。内包されているオブジェクトは、</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">glGenFramebuffer</span></code> を呼び出すことで作成され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glBindFramebuffer</span></code> を呼び出すことで束縛され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glDeleteFramebuffer</span></code> を呼び出すことで削除される。</p></li>
</ul>
</div>
<div class="section" id="webglprogram">
<h3><a class="toc-backref" href="#id19">5.6 WebGLProgram</a><a class="headerlink" href="#webglprogram" title="Permalink to this heading">¶</a></h3>
<p>WebGLProgram インターフェイスは OpenGL プログラムオブジェクトを表現する。内包されているオブジェクトは、</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">glCreateProgram</span></code> を呼び出すことで作成され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glUseProgram</span></code> を呼び出すことで使用され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glDeleteProgram</span></code> を呼び出すことで削除される。</p></li>
</ul>
</div>
<div class="section" id="webglrenderbuffer">
<h3><a class="toc-backref" href="#id20">5.7 WebGLRenderbuffer</a><a class="headerlink" href="#webglrenderbuffer" title="Permalink to this heading">¶</a></h3>
<p>WebGLRenderbuffer インターフェイスは OpenGL レンダーバッファーオブジェクトを表現する。内包されているオブジェクトは、</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">glGenRenderbuffers</span></code> を呼び出すことで作成され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glBindRenderbuffer</span></code> を呼び出すことで束縛され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glDeleteRenderbuffers</span></code> を呼び出すことで削除マークが付く。</p></li>
</ul>
</div>
<div class="section" id="webglshader">
<h3><a class="toc-backref" href="#id21">5.8 WebGLShader</a><a class="headerlink" href="#webglshader" title="Permalink to this heading">¶</a></h3>
<p>WebGLShader インターフェイスは OpenGL シェーダーオブジェクトを表現する。このオブジェクトは、</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">glCreateShader</span></code> で作成され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glAttachShader</span></code> でプログラムに取り付けられ、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glDeleteShader</span></code> で削除される。</p></li>
</ul>
</div>
<div class="section" id="webgltexture">
<h3><a class="toc-backref" href="#id22">5.9 WebGLTexture</a><a class="headerlink" href="#webgltexture" title="Permalink to this heading">¶</a></h3>
<p>WebGLTexture インターフェイスは OpenGL テクスチャーオブジェクトを表現する。内包されているオブジェクトは、</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">glGenTextures</span></code> を呼び出すことで作成され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glBindTexture</span></code> を呼び出すことで束縛され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glDeleteTextures</span></code> を呼び出すことで削除される。</p></li>
</ul>
</div>
<div class="section" id="webgluniformlocation">
<h3><a class="toc-backref" href="#id23">5.10 WebGLUniformLocation</a><a class="headerlink" href="#webgluniformlocation" title="Permalink to this heading">¶</a></h3>
<p>WebGLUniformLocation インターフェイスはシェーダープログラムにおける <code class="docutils literal notranslate"><span class="pre">uniform</span></code> 変数の位置を表現する。</p>
</div>
<div class="section" id="webglactiveinfo">
<h3><a class="toc-backref" href="#id24">5.11 WebGLActiveInfo</a><a class="headerlink" href="#webglactiveinfo" title="Permalink to this heading">¶</a></h3>
<p>WebGLActiveInfo インターフェイスは
<code class="docutils literal notranslate"><span class="pre">getActiveAttrib</span></code> および <code class="docutils literal notranslate"><span class="pre">getActiveUniform</span></code> の呼び出しが返す情報を表現する。</p>
<div class="section" id="attributes">
<h4><a class="toc-backref" href="#id25">5.11.1 Attributes</a><a class="headerlink" href="#attributes" title="Permalink to this heading">¶</a></h4>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code></dt><dd><p>要求された変数のサイズ</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>要求された変数のデータ型</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>要求された変数の名前</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="webglshaderprecisionformat">
<h3><a class="toc-backref" href="#id26">5.12 WebGLShaderPrecisionFormat</a><a class="headerlink" href="#webglshaderprecisionformat" title="Permalink to this heading">¶</a></h3>
<p>WebGLShaderPrecisionFormat インターフェイスは
<code class="docutils literal notranslate"><span class="pre">getShaderPrecisionFormat</span></code> 呼び出しが返す情報を表現する。</p>
<div class="section" id="id3">
<h4><a class="toc-backref" href="#id27">5.12.1 Attributes</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h4>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">rangeMin</span></code></dt><dd><p>表現可能な最小値の絶対値の、底を 2 とする対数の値。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rangeMax</span></code></dt><dd><p>表現可能な最大値の絶対値の、底を 2 とする対数の値。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">precision</span></code></dt><dd><p>表現可能な精度のビット数。整数フォーマットではこの値は常に 0 とする。</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="arraybuffer-and-typed-arrays">
<h3><a class="toc-backref" href="#id28">5.13 ArrayBuffer and Typed Arrays</a><a class="headerlink" href="#arraybuffer-and-typed-arrays" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>頂点、インデックス、テクスチャ、その他のデータは、ECMAScript <a class="reference internal" href="note4.html#ecmascript" id="id4"><span>[ECMASCRIPT]</span></a> で定義されている
ArrayBuffer, <em>Typed Array</em>, DataView を使用して WebGL 実装に転送される。</p></li>
<li><p><em>Typed Array</em> は、インターリーブされた異種の頂点データを作成したり、大規模な頂点バッファーオブジェクトへデータの個別ブロックをアップロードしたり、その他 OpenGL プログラムが必要としたりする用例のほとんどをサポートする。</p></li>
</ul>
<div class="admonition-example-iv admonition">
<p class="admonition-title">Example IV</p>
<p>異なる型の配列を使用して同じ ArrayBuffer にアクセスするコードの例がある。バッファーには浮動小数点の頂点位置 <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y,</span> <span class="pre">z)</span></code> と、それに続く四つの
unsigned byte の色 <code class="docutils literal notranslate"><span class="pre">(r,</span> <span class="pre">g,</span> <span class="pre">b,</span> <span class="pre">a)</span></code> を含む：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span><span class="w"> </span><span class="nx">numVertices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">;</span><span class="w"> </span><span class="c1">// for example</span><span class="w"></span>

<span class="c1">// Compute the size needed for the buffer, in bytes and floats</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">vertexSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Float32Array</span><span class="p">.</span><span class="nx">BYTES_PER_ELEMENT</span><span class="w"> </span><span class="o">+</span><span class="w"></span>
<span class="w">      </span><span class="mf">4</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Uint8Array</span><span class="p">.</span><span class="nx">BYTES_PER_ELEMENT</span><span class="p">;</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">vertexSizeInFloats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">vertexSize</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nb">Float32Array</span><span class="p">.</span><span class="nx">BYTES_PER_ELEMENT</span><span class="p">;</span><span class="w"></span>

<span class="c1">// Allocate the buffer</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">ArrayBuffer</span><span class="p">(</span><span class="nx">numVertices</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">vertexSize</span><span class="p">);</span><span class="w"></span>

<span class="c1">// Map this buffer to a Float32Array to access the positions</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">positionArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Float32Array</span><span class="p">(</span><span class="nx">buf</span><span class="p">);</span><span class="w"></span>

<span class="c1">// Map the same buffer to a Uint8Array to access the color</span><span class="w"></span>
<span class="kd">const</span><span class="w"> </span><span class="nx">colorArray</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Uint8Array</span><span class="p">(</span><span class="nx">buf</span><span class="p">);</span><span class="w"></span>

<span class="c1">// Set up the initial offset of the vertices and colors within the buffer</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">positionIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="nx">colorIdx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nb">Float32Array</span><span class="p">.</span><span class="nx">BYTES_PER_ELEMENT</span><span class="p">;</span><span class="w"></span>

<span class="c1">// Initialize the buffer</span><span class="w"></span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="nx">numVertices</span><span class="p">;</span><span class="w"> </span><span class="nx">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">positionArray</span><span class="p">[</span><span class="nx">positionIdx</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span><span class="w"></span>
<span class="w">    </span><span class="nx">positionArray</span><span class="p">[</span><span class="nx">positionIdx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span><span class="w"></span>
<span class="w">    </span><span class="nx">positionArray</span><span class="p">[</span><span class="nx">positionIdx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span><span class="w"></span>
<span class="w">    </span><span class="nx">colorArray</span><span class="p">[</span><span class="nx">colorIdx</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span><span class="w"></span>
<span class="w">    </span><span class="nx">colorArray</span><span class="p">[</span><span class="nx">colorIdx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span><span class="w"></span>
<span class="w">    </span><span class="nx">colorArray</span><span class="p">[</span><span class="nx">colorIdx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span><span class="w"></span>
<span class="w">    </span><span class="nx">colorArray</span><span class="p">[</span><span class="nx">colorIdx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span><span class="w"></span>
<span class="w">    </span><span class="nx">positionIdx</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">vertexSizeInFloats</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">colorIdx</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="nx">vertexSize</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<ul class="simple">
<li><p>C/C++ でいう <code class="docutils literal notranslate"><span class="pre">sizeof</span> <span class="pre">X</span></code> に相当する値の参照方法に注目。各 <em>TypedArray</em> の <code class="docutils literal notranslate"><span class="pre">BYTES_PER_ELEMENT</span></code> を用いる。</p></li>
<li><p>また、上記コードと同様の処理を DataView を用いても実現できる。</p></li>
</ul>
</div>
<div class="section" id="the-webgl-context">
<h3><a class="toc-backref" href="#id29">5.14 The WebGL context</a><a class="headerlink" href="#the-webgl-context" title="Permalink to this heading">¶</a></h3>
<p>WebGLRenderingContext は、OpenGL ES 2.0 様式のレンダリングを <code class="docutils literal notranslate"><span class="pre">canvas</span></code> 要素に許可する API を表現する。</p>
<p>WebGLRenderingContext インターフェイスのメソッド、または
<code class="docutils literal notranslate"><span class="pre">getExtension</span></code> メソッドが返すインターフェースのどのメソッドの実装をも行う前に、以下の手順を実行する必要がある：</p>
<ol class="arabic simple">
<li><p>呼び出されたメソッドに WebGLHandlesContextLoss 拡張属性が現れる場合は、呼び出されたメソッドの実装を行い、その結果を返して、ここの手順を終了する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use</span></code> の既定の戻り値を <code class="docutils literal notranslate"><span class="pre">false</span></code> にする。</p></li>
<li><p><a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">webgl context lost</span></a> フラグが設定されている場合は、
<code class="docutils literal notranslate"><span class="pre">use</span></code> の既定の戻り値を <code class="docutils literal notranslate"><span class="pre">true</span></code> にする。</p>
<ul class="simple">
<li><p>3.1 そうでない場合、メソッドの引数に <a class="reference internal" href="#webglobject"><span class="std std-ref">invalidate</span></a>
フラグが設定された WebGLObject があれば、
<code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーを生成し、 <code class="docutils literal notranslate"><span class="pre">use</span></code> の既定の戻り値を <code class="docutils literal notranslate"><span class="pre">true</span></code> にする。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">use</span></code> の既定の戻り値を <code class="docutils literal notranslate"><span class="pre">true</span></code> の場合、以下の手順を実行する：</p>
<ul class="simple">
<li><p>4.1. 呼び出されたメソッドの戻り値の型が <code class="docutils literal notranslate"><span class="pre">any</span></code> または <code class="docutils literal notranslate"><span class="pre">nullable</span></code> 型の場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
<li><p>4.2. メソッドの実装を呼び出すことなしにこのアルゴリズムを終了する。</p></li>
</ul>
</li>
<li><p>そうでない場合は、呼び出されたメソッドの実装を実行し、その結果を返す。</p></li>
</ol>
<p>詳細は <a class="reference internal" href="#the-context-lost-event"><span class="std std-ref">5.15.2 The Context Lost Event</span></a> にある。</p>
<hr class="docutils" />
<p>インターフェイスの仕様を読み解いていく：</p>
<ul class="simple">
<li><p>仕様中に TexImageSource とある箇所は、次の実際の型のどれでもよい：</p>
<ul>
<li><p>ImageBitmap</p></li>
<li><p>ImageData</p></li>
<li><p>HTMLImageElement</p></li>
<li><p>HTMLCanvasElement</p></li>
<li><p>HTMLVideoElement</p></li>
<li><p>OffscreenCanvas</p></li>
</ul>
</li>
<li><p>仕様中に Float32List とある箇所は Float32Array または浮動小数点型数値の列のどれでもよい。</p></li>
<li><p>仕様中に Int32List とある箇所は Int32Array または整数型数値の列のどれでもよい。</p></li>
<li><p>WebGLRenderingContext インターフェイスは次の二つに分割されて定義されている：</p>
<ul>
<li><p>WebGLRenderingContextBase: OpenGL で馴染みの定数、関数の WebGL における対応物と
WebGL 固有の定数、属性、関数からなる。</p></li>
<li><p>WebGLRenderingContextOverloads: 引数リストのオーバーロードが複数必要な関数群からなると見られる。</p></li>
</ul>
</li>
</ul>
<hr class="docutils" />
<p>長いインターフェイス定義が掲載されている。</p>
<div class="section" id="id5">
<h4><a class="toc-backref" href="#id30">5.14.1 Attributes</a><a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h4>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">canvas</span></code></dt><dd><p>このコンテキストを作成したキャンバスへの参照。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">drawingBufferWidth</span></code></dt><dd><p>描画バッファーの実際の幅。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">drawingBufferHeight</span></code></dt><dd><p>描画バッファーの実際の高さ。</p>
</dd>
</dl>
<p>最後の二つは要求された幅や高さを満たすことができない実装の場合、キャンバスの属性 <code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">height</span></code> とはそれぞれ異なることがある。</p>
</div>
<div class="section" id="getting-information-about-the-context">
<h4><a class="toc-backref" href="#id31">5.14.2 Getting information about the context</a><a class="headerlink" href="#getting-information-about-the-context" title="Permalink to this heading">¶</a></h4>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">getContextAttributes()</span></code></dt><dd><p>フラグ <strong>webgl context lost</strong> が設定されている場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。そうでなければ <strong>actual context parameters</strong> のコピーを返す。</p>
<ul class="simple">
<li><p>これらの値については <a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">2.1 Context Creation</span></a> に記述あり。</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="setting-and-getting-state">
<h4><a class="toc-backref" href="#id32">5.14.3 Setting and getting state</a><a class="headerlink" href="#setting-and-getting-state" title="Permalink to this heading">¶</a></h4>
<p>OpenGL ES 2.0 ではレンダリングに使用するための状態を維持する。ここに記されているグループの呼び出しすべては、特に断りのない限り OpenGL の対応物に対する呼び出しと同じ動作をする。</p>
<dl class="glossary">
<dt id="term-activeTexture-texture"><code class="docutils literal notranslate"><span class="pre">activeTexture(texture)</span></code><a class="headerlink" href="#term-activeTexture-texture" title="Permalink to this term">¶</a></dt><dt id="term-blendColor-red-green-blue-alpha"><code class="docutils literal notranslate"><span class="pre">blendColor(red,</span> <span class="pre">green,</span> <span class="pre">blue,</span> <span class="pre">alpha)</span></code><a class="headerlink" href="#term-blendColor-red-green-blue-alpha" title="Permalink to this term">¶</a></dt><dt id="term-blendEquation-mode"><code class="docutils literal notranslate"><span class="pre">blendEquation(mode)</span></code><a class="headerlink" href="#term-blendEquation-mode" title="Permalink to this term">¶</a></dt><dt id="term-blendEquationSeparate-modeRGB-modeAlpha"><code class="docutils literal notranslate"><span class="pre">blendEquationSeparate(modeRGB,</span> <span class="pre">modeAlpha)</span></code><a class="headerlink" href="#term-blendEquationSeparate-modeRGB-modeAlpha" title="Permalink to this term">¶</a></dt><dd><p>（これらにコメントなし）</p>
</dd>
<dt id="term-blendFunc-sfactor-dfactor"><code class="docutils literal notranslate"><span class="pre">blendFunc(sfactor,</span> <span class="pre">dfactor)</span></code><a class="headerlink" href="#term-blendFunc-sfactor-dfactor" title="Permalink to this term">¶</a></dt><dt id="term-blendFuncSeparate-srcRGB-dstRGB-srcAlpha-dstAlpha"><code class="docutils literal notranslate"><span class="pre">blendFuncSeparate(srcRGB,</span> <span class="pre">dstRGB,</span> <span class="pre">srcAlpha,</span> <span class="pre">dstAlpha)</span></code><a class="headerlink" href="#term-blendFuncSeparate-srcRGB-dstRGB-srcAlpha-dstAlpha" title="Permalink to this term">¶</a></dt><dd><p>WebGL が課す制約については
ref:<cite>6.15 Blending With Constant Color</cite> の記述を参照しろ。</p>
</dd>
<dt id="term-clearColor-red-green-blue-alpha"><code class="docutils literal notranslate"><span class="pre">clearColor(red,</span> <span class="pre">green,</span> <span class="pre">blue,</span> <span class="pre">alpha)</span></code><a class="headerlink" href="#term-clearColor-red-green-blue-alpha" title="Permalink to this term">¶</a></dt><dd><p>（コメントなし）</p>
</dd>
<dt id="term-clearDepth"><code class="docutils literal notranslate"><span class="pre">clearDepth</span></code><a class="headerlink" href="#term-clearDepth" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">depth</span></code> は <span class="math notranslate nohighlight">\({[0, 1]}\)</span> に収まるように丸められる。</p>
</dd>
<dt id="term-clearStencil-s"><code class="docutils literal notranslate"><span class="pre">clearStencil(s)</span></code><a class="headerlink" href="#term-clearStencil-s" title="Permalink to this term">¶</a></dt><dt id="term-colorMask-red-green-blue-alpha"><code class="docutils literal notranslate"><span class="pre">colorMask(red,</span> <span class="pre">green,</span> <span class="pre">blue,</span> <span class="pre">alpha)</span></code><a class="headerlink" href="#term-colorMask-red-green-blue-alpha" title="Permalink to this term">¶</a></dt><dt id="term-cullFace-mode"><code class="docutils literal notranslate"><span class="pre">cullFace(mode)</span></code><a class="headerlink" href="#term-cullFace-mode" title="Permalink to this term">¶</a></dt><dt id="term-depthFunc-func"><code class="docutils literal notranslate"><span class="pre">depthFunc(func)</span></code><a class="headerlink" href="#term-depthFunc-func" title="Permalink to this term">¶</a></dt><dt id="term-depthMask-flag"><code class="docutils literal notranslate"><span class="pre">depthMask(flag)</span></code><a class="headerlink" href="#term-depthMask-flag" title="Permalink to this term">¶</a></dt><dd><p>（これらにコメントなし）</p>
</dd>
<dt id="term-depthRange-zNear-zFar"><code class="docutils literal notranslate"><span class="pre">depthRange(zNear,</span> <span class="pre">zFar)</span></code><a class="headerlink" href="#term-depthRange-zNear-zFar" title="Permalink to this term">¶</a></dt><dd><p>引数 <code class="docutils literal notranslate"><span class="pre">zNear</span></code> と <code class="docutils literal notranslate"><span class="pre">zFar</span></code> の値も同様に丸められる。かつ <code class="docutils literal notranslate"><span class="pre">zNear</span> <span class="pre">&lt;=</span> <span class="pre">zFar</span></code> でなければならない。
<a class="reference internal" href="note3.html#viewport-depth-range"><span class="std std-ref">6.14 Viewport Depth Range</span></a> 参照。</p>
</dd>
<dt id="term-disable-cap"><code class="docutils literal notranslate"><span class="pre">disable(cap)</span></code><a class="headerlink" href="#term-disable-cap" title="Permalink to this term">¶</a></dt><dt id="term-enable-cap"><code class="docutils literal notranslate"><span class="pre">enable(cap)</span></code><a class="headerlink" href="#term-enable-cap" title="Permalink to this term">¶</a></dt><dt id="term-frontFace-mode"><code class="docutils literal notranslate"><span class="pre">frontFace(mode)</span></code><a class="headerlink" href="#term-frontFace-mode" title="Permalink to this term">¶</a></dt><dd><p>（これらにコメントなし）</p>
</dd>
<dt id="term-getParameter-pname"><code class="docutils literal notranslate"><span class="pre">getParameter(pname)</span></code><a class="headerlink" href="#term-getParameter-pname" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGet</span></code>, <code class="docutils literal notranslate"><span class="pre">glGetString</span></code> の対応物。</p>
<ul>
<li><p>戻り値の型は JavaScript において自然なものとする。</p></li>
<li><p>列や <em>TypedArray</em> を返す問い合わせのすべてが、毎回新しいオブジェクトを返す。</p></li>
<li><p>不適切な問い合わせに対しては <code class="docutils literal notranslate"><span class="pre">INVALID_ENUM</span></code> エラーを生成し <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IMPLEMENTATION_COLOR_READ_FORMAT</span></code> または <code class="docutils literal notranslate"><span class="pre">IMPLEMENTATION_COLOR_READ_TYPE</span></code> で、現在束縛されているフレームバッファーが完全でない場合、
<code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーを生成し <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
<li><p>次の実引数は、現在の WebGL 実装の何らかの性質を記述する文字列を返す：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">VERSION</span></code></dt><dd><p>“WebGL 1.0 xxxx” のようなバージョンまたはリリース番号を返す。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">SHADING_LANGUAGE_VERSION</span></code></dt><dd><p>“WebGL GLSL ES 1.0 xxxx” のようなバージョンまたはリリース番号を返す。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">VENDOR</span></code></dt><dd><p>この WebGL の実装を担当している会社を返す。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">RENDERER</span></code></dt><dd><p>レンダラーの名前を返す。この名前はふつうはハードウェアプラットフォームの特定の構成に固有のものだ。</p>
</dd>
</dl>
<p>次章に関連情報アリ。</p>
</li>
</ul>
</dd>
<dt id="term-getError"><code class="docutils literal notranslate"><span class="pre">getError()</span></code><a class="headerlink" href="#term-getError" title="Permalink to this term">¶</a></dt><dd><p>コンテキストの <a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">webgl context lost</span></a> フラグが設定されている場合、このメソッドが最初に呼び出されたときに <code class="docutils literal notranslate"><span class="pre">CONTEXT_LOST_WEBGL</span></code> を返す。その後、コンテキストが回復されるまで <code class="docutils literal notranslate"><span class="pre">NO_ERROR</span></code> を返す。</p>
</dd>
<dt id="term-hint-target-mode"><code class="docutils literal notranslate"><span class="pre">hint(target,</span> <span class="pre">mode)</span></code><a class="headerlink" href="#term-hint-target-mode" title="Permalink to this term">¶</a></dt><dd><p>（コメントなし）</p>
</dd>
<dt id="term-isEnabled-cap"><code class="docutils literal notranslate"><span class="pre">isEnabled(cap)</span></code><a class="headerlink" href="#term-isEnabled-cap" title="Permalink to this term">¶</a></dt><dd><p>どの <code class="docutils literal notranslate"><span class="pre">isEnabled</span></code> による問い合わせに対しても、同じ戻り値を <code class="docutils literal notranslate"><span class="pre">getParameter</span></code> で得ることができる。</p>
<ul class="simple">
<li><p>コンテキストの <a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">webgl context lost</span></a>
フラグが設定されている場合は <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
</ul>
</dd>
<dt id="term-lineWidth-width"><code class="docutils literal notranslate"><span class="pre">lineWidth(width)</span></code><a class="headerlink" href="#term-lineWidth-width" title="Permalink to this term">¶</a></dt><dd><p>WebGL での制限があり、<a class="reference internal" href="note3.html#nan-line-width"><span class="std std-ref">6.30 NaN Line Width</span></a> で述べられている。</p>
</dd>
<dt id="term-pixelStorei-pname-param"><code class="docutils literal notranslate"><span class="pre">pixelStorei(pname,</span> <span class="pre">param)</span></code><a class="headerlink" href="#term-pixelStorei-pname-param" title="Permalink to this term">¶</a></dt><dd><p>OpenGL ES 2.0 仕様のパラメーターに加えて、次のものも受け付ける。これらについては <a class="reference internal" href="note3.html#pixel-storage-parameters"><span class="std std-ref">6.10 Pixel Storage Parameters</span></a> で述べられる。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">UNPACK_FLIP_Y_WEBGL</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UNPACK_PREMULTIPLY_ALPHA_WEBGL</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UNPACK_COLORSPACE_CONVERSION_WEBGL</span></code></p></li>
</ul>
</dd>
<dt id="term-polygonOffset-factor-units"><code class="docutils literal notranslate"><span class="pre">polygonOffset(factor,</span> <span class="pre">units)</span></code><a class="headerlink" href="#term-polygonOffset-factor-units" title="Permalink to this term">¶</a></dt><dt id="term-sampleCoverage-value-invert"><code class="docutils literal notranslate"><span class="pre">sampleCoverage(value,</span> <span class="pre">invert)</span></code><a class="headerlink" href="#term-sampleCoverage-value-invert" title="Permalink to this term">¶</a></dt><dt id="term-stencilFunc-func-ref-mask"><code class="docutils literal notranslate"><span class="pre">stencilFunc(func,</span> <span class="pre">ref,</span> <span class="pre">mask)</span></code><a class="headerlink" href="#term-stencilFunc-func-ref-mask" title="Permalink to this term">¶</a></dt><dd><p>（これらにコメントなし）</p>
</dd>
<dt id="term-stencilFuncSeparate-face-func-ref-mask"><code class="docutils literal notranslate"><span class="pre">stencilFuncSeparate(face,</span> <span class="pre">func,</span> <span class="pre">ref,</span> <span class="pre">mask)</span></code><a class="headerlink" href="#term-stencilFuncSeparate-face-func-ref-mask" title="Permalink to this term">¶</a></dt><dt id="term-stencilMask-mask"><code class="docutils literal notranslate"><span class="pre">stencilMask(mask)</span></code><a class="headerlink" href="#term-stencilMask-mask" title="Permalink to this term">¶</a></dt><dd><p><a class="reference internal" href="note3.html#stencil-separate-mask-and-reference-value"><span class="std std-ref">WebGL 固有の制限</span></a> がある。</p>
</dd>
<dt id="term-stencilMaskSeparate-face-mask"><code class="docutils literal notranslate"><span class="pre">stencilMaskSeparate(face,</span> <span class="pre">mask)</span></code><a class="headerlink" href="#term-stencilMaskSeparate-face-mask" title="Permalink to this term">¶</a></dt><dt id="term-stencilOp-fail-zfail-zpass"><code class="docutils literal notranslate"><span class="pre">stencilOp(fail,</span> <span class="pre">zfail,</span> <span class="pre">zpass)</span></code><a class="headerlink" href="#term-stencilOp-fail-zfail-zpass" title="Permalink to this term">¶</a></dt><dt id="term-stencilOpSeparate-face-fail-zfail-zpass"><code class="docutils literal notranslate"><span class="pre">stencilOpSeparate(face,</span> <span class="pre">fail,</span> <span class="pre">zfail,</span> <span class="pre">zpass)</span></code><a class="headerlink" href="#term-stencilOpSeparate-face-fail-zfail-zpass" title="Permalink to this term">¶</a></dt><dd><p>（これらにコメントなし）</p>
</dd>
</dl>
</div>
<div class="section" id="viewing-and-clipping">
<h4><a class="toc-backref" href="#id33">5.14.4 Viewing and clipping</a><a class="headerlink" href="#viewing-and-clipping" title="Permalink to this heading">¶</a></h4>
<p>描画コマンドは、現在束縛されているフレームバッファー内のピクセルしか変更できない。また、ビューポートとシザーボックスも描画に影響する。</p>
<ul class="simple">
<li><p>ビューポートは正規化されたデバイス座標からウィンドウ座標への x と y のアフィン変換を指定する。</p>
<ul>
<li><p>ビューポートのサイズは <a class="reference internal" href="note1.html#the-webgl-viewport"><span class="std std-ref">2.3 The WebGL Viewport</span></a> のように初期設定される。</p></li>
</ul>
</li>
<li><p>シザーボックスは、描画を制限する矩形を定義する。</p>
<ul>
<li><p>シザーテストが有効な場合、<code class="docutils literal notranslate"><span class="pre">clear</span></code> などの描画コマンドで変更できるのはシザーボックス内にあるピクセルだけだ。プリミティブの描画は、ビューポート、現在束縛されているフレームバッファー、そしてシザーボックスの交点内でしか可能でない。</p></li>
<li><p>シザーテストが有効でない場合、プリミティブはビューポートと現在束縛されているフレームバッファーの共通部分の内側にしか描画されない。</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="buffer-objects">
<h4><a class="toc-backref" href="#id34">5.14.5 Buffer objects</a><a class="headerlink" href="#buffer-objects" title="Permalink to this heading">¶</a></h4>
<p>バッファーオブジェクトは、GLSL シェーダーの頂点属性データを保持する。重要な概念なので丁寧に理解したい。</p>
<hr class="docutils" />
<p>バッファーオブジェクトのことを VBO と略記することが普通にある。</p>
<hr class="docutils" />
<dl class="glossary">
<dt id="term-bindBuffer-target-buffer"><code class="docutils literal notranslate"><span class="pre">bindBuffer(target,</span> <span class="pre">buffer)</span></code><a class="headerlink" href="#term-bindBuffer-target-buffer" title="Permalink to this term">¶</a></dt><dd><p>与えられた WebGLBuffer オブジェクトを <code class="docutils literal notranslate"><span class="pre">ARRAY_BUFFER</span></code> または <code class="docutils literal notranslate"><span class="pre">ELEMENT_ARRAY_BUFFER</span></code> のいずれかの与えられた対象に束縛する。</p>
<ul class="simple">
<li><p>バッファーがこのものとは異なる WebGLRenderingContext によって生成された場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーを生成する。</p></li>
<li><p>バッファーが <code class="docutils literal notranslate"><span class="pre">null</span></code> の場合、現在この対象に束縛されているすべてのバッファーの束縛を解除する。</p></li>
<li><p>与えられた WebGLBuffer オブジェクトはその寿命において
<code class="docutils literal notranslate"><span class="pre">ARRAY_BUFFER</span></code> または <code class="docutils literal notranslate"><span class="pre">ELEMENT_ARRAY_BUFFER</span></code> のいずれかの対象にしか束縛されない。</p></li>
<li><p>バッファーオブジェクトを他の対象にバインドしようとすると
<code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーが発生し、現在の束縛はそのまま維持される。</p></li>
<li><p>削除マークのついたオブジェクトを束縛しようとすると
<code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーが発生し、現在の束縛はそのまま維持される。</p></li>
</ul>
</dd>
<dt id="term-bufferData-target-size-usage"><code class="docutils literal notranslate"><span class="pre">bufferData(target,</span> <span class="pre">size,</span> <span class="pre">usage)</span></code><a class="headerlink" href="#term-bufferData-target-size-usage" title="Permalink to this term">¶</a></dt><dt id="term-bufferData-target-data-usage"><code class="docutils literal notranslate"><span class="pre">bufferData(target,</span> <span class="pre">data,</span> <span class="pre">usage)</span></code><a class="headerlink" href="#term-bufferData-target-data-usage" title="Permalink to this term">¶</a></dt><dd><p>最初のものは、現在束縛されている WebGLBuffer オブジェクトのサイズを、渡された対象に設定する。バッファーの中身は 0 に初期化される。</p>
<p>二番目のものは、渡された対象に対して、現在束縛されている WebGLBuffer オブジェクトのサイズを渡されたデータのサイズに設定し、データの内容をバッファーオブジェクトに書き込む。</p>
<ul class="simple">
<li><p>渡されたデータが <code class="docutils literal notranslate"><span class="pre">null</span></code> の場合は <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラーが発生する。</p></li>
</ul>
</dd>
<dt id="term-bufferSubData-target-offset-data"><code class="docutils literal notranslate"><span class="pre">bufferSubData(target,</span> <span class="pre">offset,</span> <span class="pre">data)</span></code><a class="headerlink" href="#term-bufferSubData-target-offset-data" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">target</span></code> に束縛された WebGLBuffer オブジェクトに対して、位置 <code class="docutils literal notranslate"><span class="pre">offset</span></code> から始まる <code class="docutils literal notranslate"><span class="pre">data</span></code> を書き込む。</p>
<ul class="simple">
<li><p>バッファーオブジェクトの終端を越えてデータが書き込まれる場合は <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> の場合も <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p></li>
</ul>
</dd>
<dt id="term-createBuffer"><code class="docutils literal notranslate"><span class="pre">createBuffer()</span></code><a class="headerlink" href="#term-createBuffer" title="Permalink to this term">¶</a></dt><dd><p>Create a WebGLBuffer object and initialize it with a buffer object name as if by calling glGenBuffers.
WebGLBuffer オブジェクトを生成し、<code class="docutils literal notranslate"><span class="pre">glGenBuffers</span></code> を呼び出したかのようにバッファーオブジェクト名で初期化する。</p>
</dd>
<dt id="term-deleteBuffer-buffer"><code class="docutils literal notranslate"><span class="pre">deleteBuffer(buffer)</span></code><a class="headerlink" href="#term-deleteBuffer-buffer" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glDeleteBuffers</span></code> の呼び出しのごとく、渡された WebGLBuffer が含むバッファーオブジェクトに削除マークを付ける。</p>
<ul class="simple">
<li><p>すでに削除マークが付けられている場合、この呼び出しは効果が特にない。</p></li>
<li><p>内包されている GL オブジェクトは JavaScript オブジェクトが破壊されるときに自動的に削除マークが付けられるが、このメソッドを使用することでオブジェクトに対して削除マークを早期に付けることができる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buffer</span></code> がこれとは異なる WebGLRenderingContext によって生成されたものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
</ul>
</dd>
<dt id="term-getBufferParameter-target-pname"><code class="docutils literal notranslate"><span class="pre">getBufferParameter(target,</span> <span class="pre">pname)</span></code><a class="headerlink" href="#term-getBufferParameter-target-pname" title="Permalink to this term">¶</a></dt><dd><p>OpenGL の <code class="docutils literal notranslate"><span class="pre">glGetBufferParameteriv</span></code> の対応物。<code class="docutils literal notranslate"><span class="pre">pname</span></code> の値を返す。</p>
<ul class="simple">
<li><p>戻り値の型は要求された <code class="docutils literal notranslate"><span class="pre">pname</span></code> にとって自然な型とする。例えば <code class="docutils literal notranslate"><span class="pre">BUFFER_SIZE</span></code> なら整数を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pname</span></code> がサポートされていない名前のときには <code class="docutils literal notranslate"><span class="pre">INVALID_ENUM</span></code> エラー。</p></li>
<li><p>OpenGL エラーが発生した場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt id="term-isBuffer-buffer"><code class="docutils literal notranslate"><span class="pre">isBuffer(buffer)</span></code><a class="headerlink" href="#term-isBuffer-buffer" title="Permalink to this term">¶</a></dt><dd><p>渡された WebGLBuffer が有効かどうかを返す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">buffer</span></code> がこれとは異なる WebGLRenderingContext によって生成された場合は <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buffer</span></code> の <a class="reference internal" href="#webglobject"><span class="std std-ref">invalidated</span></a> フラグが設定されている場合は <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="framebuffer-objects">
<h4><a class="toc-backref" href="#id35">5.14.6 Framebuffer objects</a><a class="headerlink" href="#framebuffer-objects" title="Permalink to this heading">¶</a></h4>
<p>フレームバッファーオブジェクトとは、描画バッファーに代わるレンダリング先を提供するものだ。色、アルファー、奥行き、ステンシルバッファーの集合体であり、のちにテクスチャーとして使用される画像のレンダリングとしてよく用いられる。</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">bindFramebuffer(target,</span> <span class="pre">framebuffer)</span></code></dt><dd><p>与えられた WebGLFramebuffer オブジェクトを、
<code class="docutils literal notranslate"><span class="pre">FRAMEBUFFER</span></code> でなければならない与えられた束縛ポイント <code class="docutils literal notranslate"><span class="pre">target</span></code> に束縛する。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framebuffer</span></code> がこのものとは異なる WebGLRenderingContext によって生成されたものである場合には <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framebuffer</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> ならば、コンテキストが与える既定のフレームバッファーを束縛し、
<code class="docutils literal notranslate"><span class="pre">target</span></code> の <code class="docutils literal notranslate"><span class="pre">FRAMEBUFFER</span></code> の状態を変更または問い合わせるようとする試みは <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーとなる。</p></li>
<li><p>削除マークのついたオブジェクトを束縛しようとすると <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。現在の束縛はそのまま残る。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">checkFramebufferStatus(target)</span></code></dt><dd><p>コンテキストの <a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">webgl context lost</span></a> フラグが設定されている場合は <code class="docutils literal notranslate"><span class="pre">FRAMEBUFFER_UNSUPPORTED</span></code> を返す。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">createFramebuffer()</span></code></dt><dd><p>WebGLFramebuffer オブジェクトを作成し、
<code class="docutils literal notranslate"><span class="pre">glGenFramebuffer</span></code> を呼び出したかのようにフレームバッファーオブジェクトに名前を与えて初期化する。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">deleteFramebuffer(buffer)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glDeleteFramebuffers</span></code> の対応物。</p>
<ul class="simple">
<li><p>すでに削除マークが付けられている場合、この呼び出しは効果が特にない。</p></li>
<li><p>内包されている GL オブジェクトは JavaScript オブジェクトが破壊されるときに自動的に削除マークが付けられるが、このメソッドを使用することでオブジェクトに対して削除マークを早期に付けることができる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">buffer</span></code> がこのものとは異なる WebGLRenderingContext によって生成されたものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">framebufferRenderbuffer(target,</span> <span class="pre">attachment,</span> <span class="pre">renderbuffertarget,</span> <span class="pre">renderbuffer)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glFramebufferRenderbuffer</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">renderbuffer</span></code> がこのものとは異なる WebGLRenderingContext によって生成されたものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">framebufferTexture2D(target,</span> <span class="pre">attachment,</span> <span class="pre">textarget,</span> <span class="pre">texture,</span> <span class="pre">level)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glFramebufferTexture2D</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">texture</span></code> がこのものとは異なる WebGLRenderingContext によって生成されたものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getFramebufferAttachmentParameter(target,</span> <span class="pre">attachment,</span> <span class="pre">pname)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGetFramebufferAttachmentParameteriv</span></code> の対応物。</p>
<p>戻り値の型は要求された <code class="docutils literal notranslate"><span class="pre">pname</span></code> に自然な型とする。例えば <code class="docutils literal notranslate"><span class="pre">FRAMEBUFFER_ATTACHMENT_OBJECT_NAME</span></code> を求めると</p>
<ul class="simple">
<li><p>無効な <code class="docutils literal notranslate"><span class="pre">pname</span></code> に対しては <code class="docutils literal notranslate"><span class="pre">INVALID_ENUM</span></code> エラー。</p></li>
<li><p>OpenGL エラーが起こった場合には <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">isFramebuffer(framebuffer)</span></code></dt><dd><p>渡された <code class="docutils literal notranslate"><span class="pre">framebuffer</span></code> が有効な WebGLFramebuffer であるかどうかを返す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">framebuffer</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合は <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">framebuffer</span></code> の <a class="reference internal" href="#webglobject"><span class="std std-ref">invalidated</span></a> フラグが設定されている場合は <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="renderbuffer-objects">
<h4><a class="toc-backref" href="#id36">5.14.7 Renderbuffer objects</a><a class="headerlink" href="#renderbuffer-objects" title="Permalink to this heading">¶</a></h4>
<p>描画バッファーオブジェクトは、フレームバッファーオブジェクトで使用される個々のバッファーのストレージとされるものだ。</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">bindRenderbuffer(target,</span> <span class="pre">renderbuffer)</span></code></dt><dd><p>与えられた WebGLRenderbuffer オブジェクトを、
<code class="docutils literal notranslate"><span class="pre">RENDERBUFFER</span></code> でなければならない与えられた束縛ポイント <code class="docutils literal notranslate"><span class="pre">target</span></code> に束縛する。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">renderbuffer</span></code> がこのものとは異なる WebGLRenderingContext によって生成されたものである場合には <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span> <span class="pre">エラー</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">renderbuffer</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> ならば、この <code class="docutils literal notranslate"><span class="pre">taget</span></code> に現在束縛されている描画バッファーオブジェクトの束縛は解かれる。</p></li>
<li><p>削除マークのついたオブジェクトを束縛しようとすると
<code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーが発生する。現在の束縛はそのままになる。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">createRenderbuffer()</span></code></dt><dd><p>WebGLRenderbuffer オブジェクトを生成し、
<code class="docutils literal notranslate"><span class="pre">glGenRenderbuffers</span></code> を呼び出したかのように描画バッファーオブジェクトに名前をつけて初期化する。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">deleteRenderbuffer(renderbuffer)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glDeleteRenderbuffers</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">renderbuffer</span></code> がこのものとは異なる WebGLRenderingContext によって生成されたものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>内包されている GL オブジェクトは JavaScript オブジェクトが破壊されるときに自動的に削除マークが付けられるが、このメソッドを使用することでオブジェクトに対して削除マークを早期に付けることができる。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getRenderbufferParameter(target,</span> <span class="pre">pname)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGetRenderbufferParameteriv</span></code> の対応物。</p>
<p>戻り値の型は要求された <code class="docutils literal notranslate"><span class="pre">pname</span></code> に自然な型とする。だいたい整数。</p>
<ul class="simple">
<li><p>無効な <code class="docutils literal notranslate"><span class="pre">pname</span></code> に対しては <code class="docutils literal notranslate"><span class="pre">INVALID_ENUM</span></code> エラー。</p></li>
<li><p>OpenGL エラーが起こった場合には <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">isRenderbuffer(renderbuffer)</span></code></dt><dd><p>渡された <code class="docutils literal notranslate"><span class="pre">renderbuffer</span></code> が有効な WebGLRenderbuffer であるかどうかを返す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">renderbuffer</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合は <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">renderbuffer</span></code> の <a class="reference internal" href="#webglobject"><span class="std std-ref">invalidated</span></a> フラグが設定されている場合は <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">renderbufferStorage(target,</span> <span class="pre">internalformat,</span> <span class="pre">width,</span> <span class="pre">height)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glRenderBufferStorage</span></code> の対応物。</p>
</dd>
</dl>
</div>
<div class="section" id="texture-objects">
<h4><a class="toc-backref" href="#id37">5.14.8 Texture objects</a><a class="headerlink" href="#texture-objects" title="Permalink to this heading">¶</a></h4>
<p>テクスチャーオブジェクトは、テクスチャーを操作するためのストレージと状態を与える。
WebGLTexture が束縛されていない場合、テクスチャーオブジェクトへの変更または問い合わせは
<code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーが発生する。</p>
<dl class="glossary">
<dt id="term-bindTexture-target-texture"><code class="docutils literal notranslate"><span class="pre">bindTexture(target,</span> <span class="pre">texture)</span></code><a class="headerlink" href="#term-bindTexture-target-texture" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glBindTexure</span></code> の対応物。</p>
<ul class="simple">
<li><p>エラー発生は <code class="docutils literal notranslate"><span class="pre">bindFramebuffer</span></code> や <code class="docutils literal notranslate"><span class="pre">bindRenderbuffer</span></code> に準じる。</p></li>
</ul>
</dd>
<dt id="term-compressedTexImage2D-target-level-internalformat-width-height-border-pixels"><code class="docutils literal notranslate"><span class="pre">compressedTexImage2D(target,</span> <span class="pre">level,</span> <span class="pre">internalformat,</span> <span class="pre">width,</span> <span class="pre">height,</span> <span class="pre">border,</span> <span class="pre">pixels)</span></code><a class="headerlink" href="#term-compressedTexImage2D-target-level-internalformat-width-height-border-pixels" title="Permalink to this term">¶</a></dt><dt id="term-compressedTexSubImage2D-target-level-xoffset-yoffset-width-height-format-pixels"><code class="docutils literal notranslate"><span class="pre">compressedTexSubImage2D(target,</span> <span class="pre">level,</span> <span class="pre">xoffset,</span> <span class="pre">yoffset,</span> <span class="pre">width,</span> <span class="pre">height,</span> <span class="pre">format,</span> <span class="pre">pixels)</span></code><a class="headerlink" href="#term-compressedTexSubImage2D-target-level-xoffset-yoffset-width-height-format-pixels" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glCompressedTexImage2D</span></code>, <code class="docutils literal notranslate"><span class="pre">glCompressedTexSubImage2D</span></code> の対応物。</p>
<ul class="simple">
<li><p>コア WebGL 仕様では、サポートされる圧縮テクスチャーフォーマットを何も定義していない。</p></li>
<li><p>デフォルトでは、これらのメソッドは <code class="docutils literal notranslate"><span class="pre">INVALID_ENUM</span></code> エラーを生成し、直ちに戻る。詳しくは <a class="reference internal" href="note3.html#compressed-texture-support"><span class="std std-ref">6.19 Compressed Texture Support</span></a> で述べられる。</p></li>
</ul>
</dd>
<dt id="term-copyTexImage2D-target-level-internalformat-x-y-width-height-border"><code class="docutils literal notranslate"><span class="pre">copyTexImage2D(target,</span> <span class="pre">level,</span> <span class="pre">internalformat,</span> <span class="pre">x,</span> <span class="pre">y,</span> <span class="pre">width,</span> <span class="pre">height,</span> <span class="pre">border)</span></code><a class="headerlink" href="#term-copyTexImage2D-target-level-internalformat-x-y-width-height-border" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glCopyTexImage2D</span></code> の対応物。</p>
<p>この関数は、<code class="docutils literal notranslate"><span class="pre">texImage2D</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> データで呼び出され、続いて <code class="docutils literal notranslate"><span class="pre">copyTexSubImage2D</span></code> が呼び出されたかのように振る舞う。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">copyTexSubImage2D</span></code> と同様に、フレームバッファーの外側にある
source ピクセルについては、対応する destination テクセルはそのまま残されるので、まるで <code class="docutils literal notranslate"><span class="pre">texImage2D</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> データで呼び出されたかのようにゼロ初期化された内容を保持する。これにより、フレームバッファーの外側にある source ピクセルに対応する
destination ピクセルは、関連するテクセルのチャンネルすべてが
0 に初期化されるという効果もある。</p>
<p><a class="reference internal" href="note3.html#reading-pixels-outside-the-framebuffer"><span class="std std-ref">6.11 Reading Pixels Outside the Framebuffer</span></a> を参照。</p>
</li>
<li><p>この関数が attachment のない完全なフレームバッファーから読み取ろうとした場合、
<code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーが発生する。</p>
<p><a class="reference internal" href="note3.html#reading-from-a-missing-attachment"><span class="std std-ref">6.28 Reading From a Missing Attachment</span></a> を参照。</p>
</li>
</ul>
</dd>
<dt id="term-copyTexSubImage2D-target-level-xoffset-yoffset-x-y-width-height"><code class="docutils literal notranslate"><span class="pre">copyTexSubImage2D(target,</span> <span class="pre">level,</span> <span class="pre">xoffset,</span> <span class="pre">yoffset,</span> <span class="pre">x,</span> <span class="pre">y,</span> <span class="pre">width,</span> <span class="pre">height)</span></code><a class="headerlink" href="#term-copyTexSubImage2D-target-level-xoffset-yoffset-x-y-width-height" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glCopyTexSubImage2D</span></code> の対応物。</p>
<ul class="simple">
<li><p>フレームバッファーの外側にあるどんなピクセルも、対応する destination ピクセルはそのまま変わらない。</p></li>
<li><p>この関数が attachment のない完全なフレームバッファーから読み取ろうとした場合、
<code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーが発生する。</p></li>
</ul>
</dd>
<dt id="term-createTexture"><code class="docutils literal notranslate"><span class="pre">createTexture()</span></code><a class="headerlink" href="#term-createTexture" title="Permalink to this term">¶</a></dt><dd><p>WebGLTexture オブジェクトを生成し、<code class="docutils literal notranslate"><span class="pre">glGenTextures</span></code> を呼び出したかのようにテクスチャオブジェクトに名前をつけて初期化する。</p>
</dd>
<dt id="term-deleteTexture-texture"><code class="docutils literal notranslate"><span class="pre">deleteTexture(texture)</span></code><a class="headerlink" href="#term-deleteTexture-texture" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glDeleteTextures</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">texture</span></code> がこのものとは異なる WebGLRenderingContext によって生成されたものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>内包されている GL オブジェクトは JavaScript オブジェクトが破壊されるときに自動的に削除マークが付けられるが、このメソッドを使用することでオブジェクトに対して削除マークを早期に付けることができる。</p></li>
</ul>
</dd>
<dt id="term-generateMipmap-target"><code class="docutils literal notranslate"><span class="pre">generateMipmap(target)</span></code><a class="headerlink" href="#term-generateMipmap-target" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGenerateMipmap</span></code> の対応物。</p>
</dd>
<dt id="term-getTexParameter-target-pname"><code class="docutils literal notranslate"><span class="pre">getTexParameter(target,</span> <span class="pre">pname)</span></code><a class="headerlink" href="#term-getTexParameter-target-pname" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGetTexParameter*</span></code> の対応物。</p>
<p>戻り値の型は要求された <code class="docutils literal notranslate"><span class="pre">pname</span></code> に自然な型とする。</p>
<ul class="simple">
<li><p>無効な <code class="docutils literal notranslate"><span class="pre">pname</span></code> に対しては <code class="docutils literal notranslate"><span class="pre">INVALID_ENUM</span></code> エラー。</p></li>
<li><p>OpenGL エラーが起こった場合には <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt id="term-isTexture-texture"><code class="docutils literal notranslate"><span class="pre">isTexture(texture)</span></code><a class="headerlink" href="#term-isTexture-texture" title="Permalink to this term">¶</a></dt><dd><p>渡された <code class="docutils literal notranslate"><span class="pre">texture</span></code> が有効な WebGLTexture であるかどうかを返す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">texture</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合は <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">texture</span></code> の <a class="reference internal" href="#webglobject"><span class="std std-ref">invalidated</span></a> フラグが設定されている場合は <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
</ul>
</dd>
<dt id="term-texImage2D-target-level-internalformat-width-height-border-format-type-pixels"><code class="docutils literal notranslate"><span class="pre">texImage2D(target,</span> <span class="pre">level,</span> <span class="pre">internalformat,</span> <span class="pre">width,</span> <span class="pre">height,</span> <span class="pre">border,</span> <span class="pre">format,</span> <span class="pre">type,</span> <span class="pre">pixels)</span></code><a class="headerlink" href="#term-texImage2D-target-level-internalformat-width-height-border-format-type-pixels" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glTexImage2D</span></code> の対応物で、最後の引数が ArrayBufferView のオーバーロード。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">pixels</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> の場合は、ゼロクリアされた十分なサイズのバッファーが渡される。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pixels</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> 以外の場合、<code class="docutils literal notranslate"><span class="pre">pixels</span></code> の型は読み込まれるデータのそれと一致しなければならない。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">UNSIGNED_BYTE</span></code> であれば Uint8Array または Uint8ClampedArray が、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UNSIGNED_SHORT_5_6_5</span></code>, <code class="docutils literal notranslate"><span class="pre">UNSIGNED_SHORT_4_4</span></code>,
<code class="docutils literal notranslate"><span class="pre">UNSIGNED_SHORT_5_5_5_1</span></code> であれば Uint16Array が</p></li>
</ul>
<p>渡されなければならない。型が一致しない場合は <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">pixels</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> ではなくても、そのサイズが指定された
<code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">height</span></code>, <code class="docutils literal notranslate"><span class="pre">format</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code>,
ピクセル貯蔵パラメーターが必要とするサイズよりも小さい場合は
<code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーが起こる。</p></li>
<li><p>この関数の動作に影響する WebGL 固有のピクセル貯蔵パラメーターについては、
<a class="reference internal" href="note3.html#pixel-storage-parameters"><span class="std std-ref">6.10 Pixel Storage Parameters</span></a> で述べられる。</p></li>
</ul>
</dd>
<dt id="term-texImage2D-target-level-internalformat-format-type-source"><code class="docutils literal notranslate"><span class="pre">texImage2D(target,</span> <span class="pre">level,</span> <span class="pre">internalformat,</span> <span class="pre">format,</span> <span class="pre">type,</span> <span class="pre">source)</span></code><a class="headerlink" href="#term-texImage2D-target-level-internalformat-format-type-source" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glTexImage2D</span></code> の対応物で、最後の引数が TexSourceImage のどれかであるオーバーロード。</p>
<blockquote>
<div><ul class="simple">
<li><p>指定された要素や画像データを、現在束縛されている WebGLTexture にアップロードする。</p></li>
<li><p>テクスチャーの幅と高さは、<a class="reference internal" href="note3.html#texture-upload-width-and-height"><span class="std std-ref">6.9 Texture Upload Width and Height</span></a> が指定するように設定される。</p></li>
<li><p>画像データ <code class="docutils literal notranslate"><span class="pre">source</span></code> は概念的にはまず <code class="docutils literal notranslate"><span class="pre">format</span></code> および <code class="docutils literal notranslate"><span class="pre">type</span></code> 引数で指定されたデータ型とフォーマットに変換されてから WebGL 実装に転送される。</p>
<ul>
<li><p>フォーマットの変換表アリ。</p></li>
<li><p>画像データのビット精度が失われるようなパックピクセルフォーマットが指定された場合、この精度の損失が必ず起こる。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code> から WebGL 実装に転送される最初のピクセルは <code class="docutils literal notranslate"><span class="pre">source</span></code> の左上隅のものだ。この動作は、ImageBitmap である場合を除き、
<code class="docutils literal notranslate"><span class="pre">UNPACK_FLIP_Y_WEBGL</span></code> ピクセル貯蔵パラメータによって変更される。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code> が各チャンネル 8 ビットの RGB または RGBA のロスレス画像を含む
HTMLImageElement または ImageBitmap の場合、ブラウザーはチャンネルすべての完全な精度が保持されることを保証する。</p></li>
<li><p>元の HTMLImageElement がアルファーチャンネルを含み、
<code class="docutils literal notranslate"><span class="pre">UNPACK_PREMULTIPLY_ALPHA_WEBGL</span></code> ピクセル貯蔵パラメーターが <code class="docutils literal notranslate"><span class="pre">false</span></code> の場合、
RGB 値が元のファイルフォーマットから直接得られたものであろうと、他のカラーフォーマットから変換されたものであろうと、アルファーチャンネルによって決して事前に乗算しないことが保証する。</p></li>
</ul>
<div class="admonition-non-normative admonition">
<p class="admonition-title">Non-normative</p>
<p>HTMLCanvasElement や OffscreenCanvas の
CanvasRenderingContext2D の実装によっては、色の値が内部的に前乗算形式で保存される。このようなキャンバスを <code class="docutils literal notranslate"><span class="pre">UNPACK_PREMULTIPLY_ALPHA_WEBGL</span></code> ピクセル貯蔵パラメーターを
<code class="docutils literal notranslate"><span class="pre">false</span></code> に設定した状態で WebGL テクスチャにアップロードすると、カラーチャンネルにアルファーチャンネルを乗算し直す必要があるが、これは損失の大きい処理だ。したがって、WebGL の実装では <code class="docutils literal notranslate"><span class="pre">UNPACK_PREMULTIPLY_ALPHA_WEBGL</span></code> ピクセル貯蔵パラメーターが
<code class="docutils literal notranslate"><span class="pre">false</span></code> に設定されているときに、
CanvasRenderingContext2D を介してキャンバスに最初に描画され、その後 WebGL テクスチャーにアップロードされたときに、アルファー値が 1.0 に満たない色を損失なしに保存することを保証できない。</p>
</div>
<ul class="simple">
<li><p>属性 <code class="docutils literal notranslate"><span class="pre">data</span></code> が中立化した ImageData でこの関数を呼び出すと <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p></li>
<li><p>中立化した ImageData でこの関数が呼ばれた場合 <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p></li>
<li><p>中立化した ImageBitmap でこの関数が呼ばれた場合 <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p></li>
<li><p>Document の <code class="docutils literal notranslate"><span class="pre">origin</span></code> と異なる HTMLImageElement または HTMLVideoElement でこの関数が呼び出された場合、または Bitmap の <code class="docutils literal notranslate"><span class="pre">origin-clean</span></code> フラグが <code class="docutils literal notranslate"><span class="pre">false</span></code> に設定されている
HTMLCanvasElement, ImageBitmap, OffscreenCanvas でこの関数が呼び出された場合には
<code class="docutils literal notranslate"><span class="pre">SECURITY_ERR</span></code> 例外が送出されなければならない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> の場合は <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p></li>
</ul>
</div></blockquote>
</dd>
<dt id="term-texParameterf-target-pname-param"><code class="docutils literal notranslate"><span class="pre">texParameterf(target,</span> <span class="pre">pname,</span> <span class="pre">param)</span></code><a class="headerlink" href="#term-texParameterf-target-pname-param" title="Permalink to this term">¶</a></dt><dt id="term-texParameteri-target-pname-param"><code class="docutils literal notranslate"><span class="pre">texParameteri(target,</span> <span class="pre">pname,</span> <span class="pre">param)</span></code><a class="headerlink" href="#term-texParameteri-target-pname-param" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glTexParameter{fi}</span></code> の対応物。</p>
</dd>
<dt id="term-texSubImage2D-target-level-xoffset-yoffset-width-height-format-type-pixels"><code class="docutils literal notranslate"><span class="pre">texSubImage2D(target,</span> <span class="pre">level,</span> <span class="pre">xoffset,</span> <span class="pre">yoffset,</span> <span class="pre">width,</span> <span class="pre">height,</span> <span class="pre">format,</span> <span class="pre">type,</span> <span class="pre">pixels)</span></code><a class="headerlink" href="#term-texSubImage2D-target-level-xoffset-yoffset-width-height-format-type-pixels" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glTexSubImage2D</span></code> の対応物で、最後の引数が ArrayBufferView のオーバーロード。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">format</span></code> および <code class="docutils literal notranslate"><span class="pre">pixels</span></code> 引数の制限については <code class="docutils literal notranslate"><span class="pre">texImage2D</span></code> と同じ。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> がテクスチャーの定義に元々使われていた型と一致しない場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーが発生。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pixels</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> の場合 <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pixels</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> でなくでも、そのサイズが、指定された
<code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">height</span></code>, <code class="docutils literal notranslate"><span class="pre">format</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code>,
およびピクセル貯蔵パラメーターが必要とするサイズよりも小さい場合は <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
</ul>
</dd>
<dt id="term-texSubImage2D-target-level-xoffset-yoffset-format-type-source"><code class="docutils literal notranslate"><span class="pre">texSubImage2D(target,</span> <span class="pre">level,</span> <span class="pre">xoffset,</span> <span class="pre">yoffset,</span> <span class="pre">format,</span> <span class="pre">type,</span> <span class="pre">source)</span></code><a class="headerlink" href="#term-texSubImage2D-target-level-xoffset-yoffset-format-type-source" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glTexSubImage2D</span></code> の対応物で、最後の引数が TexSourceImage のオーバーロード。</p>
<ul class="simple">
<li><p>現在束縛されている WebGLTexture の部分矩形を与えられた要素や画像データの内容で更新する。</p></li>
<li><p>更新された部分矩形の幅と高さは、別項で指定されるとおりに決定される。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format</span></code> および <code class="docutils literal notranslate"><span class="pre">type</span></code> 引数の解釈、および
<code class="docutils literal notranslate"><span class="pre">UNPACK_PREMULTIPLY_ALPHA_WEBGL</span></code> ピクセル貯蔵パラメーターに関する注意点については
<code class="docutils literal notranslate"><span class="pre">texImage2D</span></code> を参照すること。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code> から WebGL 実装に転送される最初のピクセルは <code class="docutils literal notranslate"><span class="pre">source</span></code> の左上隅のものだ。この動作は、ImageBitmap である場合を除き、
<code class="docutils literal notranslate"><span class="pre">UNPACK_FLIP_Y_WEBGL</span></code> ピクセル貯蔵パラメータによって変更される。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> がテクスチャーの定義に元々使われていた型と一致しない場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーが発生。</p></li>
<li><p>属性 <code class="docutils literal notranslate"><span class="pre">data</span></code> が中立化した ImageData でこの関数を呼び出すと <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p></li>
<li><p>中立化した ImageBitmap でこの関数が呼ばれた場合 <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p></li>
<li><p>Document の <code class="docutils literal notranslate"><span class="pre">origin</span></code> と異なる HTMLImageElement または HTMLVideoElement でこの関数が呼び出された場合、または Bitmap の <code class="docutils literal notranslate"><span class="pre">origin-clean</span></code> フラグが <code class="docutils literal notranslate"><span class="pre">false</span></code> に設定されている
HTMLCanvasElement, ImageBitmap, OffscreenCanvas でこの関数が呼び出された場合には
<code class="docutils literal notranslate"><span class="pre">SECURITY_ERR</span></code> 例外が送出されなければならない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> の場合は <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="programs-and-shaders">
<h4><a class="toc-backref" href="#id38">5.14.9 Programs and Shaders</a><a class="headerlink" href="#programs-and-shaders" title="Permalink to this heading">¶</a></h4>
<p>WebGL でもレンダリングには OpenGL ES のシェーディング言語である
GLSL ES で記述されたシェーダーを使用する必要がある。シェーダーは、</p>
<ol class="arabic simple">
<li><p>ソースコード文字列を <code class="docutils literal notranslate"><span class="pre">shaderSource</span></code> で読み込み、</p></li>
<li><p>それを <code class="docutils literal notranslate"><span class="pre">compileShader</span></code> でコンパイルして</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">attachShader</span></code> でプログラムに添付し、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">linkProgram</span></code> でリンクしてから</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">useProgram</span></code> で使用する必要がある。</p></li>
</ol>
<hr class="docutils" />
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">attachShader(program,</span> <span class="pre">shader)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glAttachShader</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> または <code class="docutils literal notranslate"><span class="pre">shader</span></code> シェーダーのいずれかが、このものとは異なる
WebGLRenderingContext によって生成されたものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bindAttribLocation(program,</span> <span class="pre">index,</span> <span class="pre">name)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glBindAttribLocation</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code> が定義された制限よりも長い場合、<code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</dt><dd><p><a class="reference internal" href="note3.html#maximum-uniform-and-attribute-location-lengths"><span class="std std-ref">6.23 Maximum Uniform and Attribute Location Lengths</span></a> 参照。</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code> が予約されている WebGL 接頭辞のいずれかで始まる場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</dt><dd><p><a class="reference internal" href="note3.html#glsl-constructs"><span class="std std-ref">6.17 GLSL Constructs</span></a> 参照。</p>
</dd>
</dl>
</li>
<li><p>WebGL の実装で行われる追加の検証については
<a class="reference internal" href="note3.html#characters-outside-the-glsl-source-character-set"><span class="std std-ref">6.21 Characters Outside the GLSL Source Character Set</span></a> を参照。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compileShader(shader)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glCompileShader</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">shader</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>WebGL の実装であることによる追加的な制約、サポートされる構造、検証については、関連する記述を参照すること：</p>
<ul>
<li><p><a class="reference internal" href="note1.html#supported-glsl-constructs"><span class="std std-ref">4.3 Supported GLSL Constructs</span></a></p></li>
<li><p><a class="reference internal" href="note3.html#maximum-glsl-token-size"><span class="std std-ref">6.20 Maximum GLSL Token Size</span></a></p></li>
<li><p><a class="reference internal" href="note3.html#characters-outside-the-glsl-source-character-set"><span class="std std-ref">6.21 Characters Outside the GLSL Source Character Set</span></a></p></li>
<li><p><a class="reference internal" href="note3.html#maximum-nesting-of-structures-in-glsl-shaders"><span class="std std-ref">6.22 Maximum Nesting of Structures in GLSL Shaders</span></a></p></li>
<li><p><a class="reference internal" href="note3.html#packing-restrictions-for-uniforms-and-varyings"><span class="std std-ref">6.26 Packing Restrictions for Uniforms and Varyings</span></a></p></li>
</ul>
</li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">createProgram()</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glCreateProgram</span></code> の対応物。</p>
<p>WebGLProgram オブジェクトを生成し、<code class="docutils literal notranslate"><span class="pre">glCreateProgram</span></code> を呼び出したかのようにプログラムオブジェクトに名前を付けて初期化する。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">createShader(type)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glCreateShader</span></code> の対応物。</p>
<ul class="simple">
<li><p>WebGLShader オブジェクトを生成し、まるで
<code class="docutils literal notranslate"><span class="pre">glCreateShader</span></code> を呼び出したかのようにシェーダーオブジェクト名を付けて初期化する。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">deleteProgram(program)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glDeleteProgram</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> または <code class="docutils literal notranslate"><span class="pre">shader</span></code> シェーダーのいずれかが、このものとは異なる
WebGLRenderingContext によって生成されたものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>まるで <code class="docutils literal notranslate"><span class="pre">glDeleteProgram</span></code> を呼び出すかのように、<code class="docutils literal notranslate"><span class="pre">program</span></code> に含まれるプログラムオブジェクトを削除するようにマークする。</p></li>
<li><p>内包されている GL オブジェクトには JavaScript オブジェクトが破棄されたときに自動的に削除マークが付けられるが、このメソッドを呼び出すことで、オブジェクトに早期に削除マークを付けることができる。</p></li>
<li><p>内包された GL オブジェクトは、JS オブジェクトが破棄されたときに自動的に削除マークが付けられるが、このメソッドを使用すると、オブジェクトを早期に削除マークすることができる。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">deleteShader(shader)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glDeleteShader</span></code> の対応物。</p>
<ul class="simple">
<li><p>まるで <code class="docutils literal notranslate"><span class="pre">glDeleteShader</span></code> を呼び出すかのように <code class="docutils literal notranslate"><span class="pre">shader</span></code> に含まれるシェーダーオブジェクトを削除するようにマークする。</p></li>
<li><p>内包されている GL オブジェクトには JavaScript オブジェクトが破棄されたときに自動的に削除マークが付けられるが、このメソッドを呼び出すことで、オブジェクトに早期に削除マークを付けることができる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shader</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">detachShader(program,</span> <span class="pre">shader)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glDetachShader</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> または <code class="docutils literal notranslate"><span class="pre">shader</span></code> シェーダーのいずれかが、このものとは異なる
WebGLRenderingContext によって生成されたものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getAttachedShaders(program)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGetAttachedShaders</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> に取り付けたれたシェーダーのリストを返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>この関数の実行中に OpenGL エラーが発生した場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getProgramParameter(program,</span> <span class="pre">pname)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGetProgramParameter</span></code> の対応物。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> に応じた <code class="docutils literal notranslate"><span class="pre">pname</span></code> の値を返す。戻り値の型は要求された名前に対して自然な型とする。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pname</span></code> の値は次のいずれかとする：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DELETE_STATUS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LINK_STATUS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VALIDATE_STATUS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ATTACHED_SHADERS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ACTIVE_ATTRIBUTES</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ACTIVE_UNIFORMS</span></code></p></li>
</ul>
<p>これ以外の値は <code class="docutils literal notranslate"><span class="pre">INVALID_ENUM</span></code> エラーとし <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p>
</li>
<li><p>この関数の実行中に OpenGL エラーが発生した場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getProgramInfoLog(program)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGetProgramInfoLog</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>この関数の実行中に OpenGL エラーが発生した場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getShaderParameter(shader,</span> <span class="pre">pname)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGetShaderParameter</span></code> の対応物。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">shader</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shader</span></code> に応じた <code class="docutils literal notranslate"><span class="pre">pname</span></code> の値を返す。戻り値の型は要求された名前に対して自然な型とする。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pname</span></code> の値は次のいずれかとする：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SHADER_TYPE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DELETE_STATUS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">COMPILE_STATUS</span></code></p></li>
</ul>
<p>これ以外の値は <code class="docutils literal notranslate"><span class="pre">INVALID_ENUM</span></code> エラーとし <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p>
</li>
<li><p>この関数の実行中に OpenGL エラーが発生した場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getShaderPrecisionFormat(shadertype,</span> <span class="pre">precisiontype)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGetShaderPrecisionFormat</span></code> の対応物。</p>
<p>指定されたシェーダーの数値フォーマットの範囲と精度を記述した WebGLShaderPrecisionFormat を返す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">shadertype</span></code> の値は <code class="docutils literal notranslate"><span class="pre">FRAGMENT_SHADER</span></code> または <code class="docutils literal notranslate"><span class="pre">VERTEX_SHADER</span></code> だ。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">precisiontype</span></code> の値は次のいずれかとする：</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LOW_FLOAT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIUM_FLOAT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HIGH_FLOAT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LOW_INT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MEDIUM_INT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HIGH_INT</span></code></p></li>
</ul>
</li>
<li><p>この関数の実行中に OpenGL エラーが発生した場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getShaderInfoLog(shader)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGetShaderInfoLog</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">shader</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>この関数の実行中に OpenGL エラーが発生した場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getShaderSource(shader)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGetShaderSource</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">shader</span></code> がこれとは異なる WebGLRenderingContext で生成されたものならば <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>この関数の実行中に OpenGL エラーが発生した場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">isProgram(program)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glIsProgram</span></code> の対応物。</p>
<ul class="simple">
<li><p>渡された WebGLProgram が有効かどうかを返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> がこれと異なる WebGLRenderingContext によって生成されたものならば <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> の <a class="reference internal" href="#webglobject"><span class="std std-ref">invalidated</span></a> フラグが設定されている場合は <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">isShader(shader)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glIsShader</span></code> の対応物。</p>
<ul class="simple">
<li><p>渡された WebGLShader が有効かどうかを返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shader</span></code> がこれと異なる WebGLRenderingContext によって生成されたものならば <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shader</span></code> の <a class="reference internal" href="#webglobject"><span class="std std-ref">invalidated</span></a> フラグが設定されている場合は <code class="docutils literal notranslate"><span class="pre">false</span></code> を返す。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">linkProgram(program)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glLinkProgram</span></code> の対応物。</p>
<ul class="simple">
<li><p>動作の詳細は OpenGL ES 2.0 どおりだが、以下の点が明確になっている：</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">linkProgram</span></code> は、このグループの中で、渡されたプログラムのリンク状態や、参照する内部実行コードに影響を与える唯一のAPIです。</p></li>
<li><p>プログラムからのシェーダーオブジェクトの取り付けおよび取り外し、プログラムに取り付けられたシェーダーオブジェクトの修正、およびコンパイルなどの操作は、そのプログラムのリンク状態にも、そのプログラムが参照する実行コードにも影響を与えない。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> が、これとは異なる WebGLRenderingContext が生成したものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>与えられた <code class="docutils literal notranslate"><span class="pre">program</span></code> が正常にリンクされ、<code class="docutils literal notranslate"><span class="pre">useProgram</span></code> で定義された現在使用中のプログラムオブジェクトでもある場合、生成された実行コードは現在のレンダリング状態の一部として直ちにインストールされる。それ以外の場合は、現在のレンダリング状態で参照されている実行可能コードは、
<code class="docutils literal notranslate"><span class="pre">linkProgram</span></code> の呼び出しによって変更されることはない。</p></li>
<li><p>WebGL の実装で実施される追加的な制約や実行される検証については
<a class="reference internal" href="note3.html#packing-restrictions-for-uniforms-and-varyings"><span class="std std-ref">6.26 Packing Restrictions for Uniforms and Varyings</span></a> で述べられる。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shaderSource(shader,</span> <span class="pre">source)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glShaderSource</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">shader</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>WebGL の実装であることによる追加的な制約、サポートされる構造、検証については、関連する記述を参照すること。</p>
<ul>
<li><p><a class="reference internal" href="note1.html#supported-glsl-constructs"><span class="std std-ref">4.3 Supported GLSL Constructs</span></a></p></li>
<li><p><a class="reference internal" href="note3.html#maximum-glsl-token-size"><span class="std std-ref">6.20 Maximum GLSL Token Size</span></a></p></li>
<li><p><a class="reference internal" href="note3.html#characters-outside-the-glsl-source-character-set"><span class="std std-ref">6.21 Characters Outside the GLSL Source Character Set</span></a></p></li>
<li><p><a class="reference internal" href="note3.html#maximum-nesting-of-structures-in-glsl-shaders"><span class="std std-ref">6.22 Maximum Nesting of Structures in GLSL Shaders</span></a></p></li>
<li><p><a class="reference internal" href="note3.html#packing-restrictions-for-uniforms-and-varyings"><span class="std std-ref">6.26 Packing Restrictions for Uniforms and Varyings</span></a></p></li>
</ul>
</li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">useProgram(program)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glUseProgram</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">validateProgram(program)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glValidateProgram</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="uniforms-and-attributes">
<h4><a class="toc-backref" href="#id39">5.14.10 Uniforms and attributes</a><a class="headerlink" href="#uniforms-and-attributes" title="Permalink to this heading">¶</a></h4>
<p>シェーダーで使われる値は、ユニフォームや頂点の属性として渡される。</p>
<hr class="docutils" />
<dl class="glossary">
<dt id="term-disableVertexAttribArray-index"><code class="docutils literal notranslate"><span class="pre">disableVertexAttribArray(index)</span></code><a class="headerlink" href="#term-disableVertexAttribArray-index" title="Permalink to this term">¶</a></dt><dt id="term-enableVertexAttribArray-index"><code class="docutils literal notranslate"><span class="pre">enableVertexAttribArray(index)</span></code><a class="headerlink" href="#term-enableVertexAttribArray-index" title="Permalink to this term">¶</a></dt><dd><p>インデックスの頂点属性を配列として無効・有効にする。</p>
<ul class="simple">
<li><p>WebGL では有効な頂点属性に関して OpenGL ES 2.0 以上の規則が適用される。
<a class="reference internal" href="note3.html#enabled-vertex-attributes-and-range-checking"><span class="std std-ref">6.6 Enabled Vertex Attributes and Range Checking</span></a> を見ろ。</p></li>
</ul>
</dd>
<dt id="term-getActiveAttrib-program-index"><code class="docutils literal notranslate"><span class="pre">getActiveAttrib(program,</span> <span class="pre">index)</span></code><a class="headerlink" href="#term-getActiveAttrib-program-index" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">program</span></code> の <code class="docutils literal notranslate"><span class="pre">index</span></code> の頂点属性のサイズ、型、名前を記述した WebGLActiveInfo オブジェクトを返す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> が範囲外の場合は <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラーを発生して <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合は <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>この関数の実行中に OpenGL エラーが発生した場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt id="term-getActiveUniform-program-index"><code class="docutils literal notranslate"><span class="pre">getActiveUniform(program,</span> <span class="pre">index)</span></code><a class="headerlink" href="#term-getActiveUniform-program-index" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">program</span></code> の <code class="docutils literal notranslate"><span class="pre">index</span></code> にあるユニフォームのサイズ、型、名前を記述した WebGLActiveInfo オブジェクトを返す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">index</span></code> が範囲外の場合は <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラーを発生して <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合は <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>この関数の実行中に OpenGL エラーが発生した場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt id="term-getAttribLocation-program-name"><code class="docutils literal notranslate"><span class="pre">getAttribLocation(program,</span> <span class="pre">name)</span></code><a class="headerlink" href="#term-getAttribLocation-program-name" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGetAttribLocation</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合は <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーとなり <code class="docutils literal notranslate"><span class="pre">-1</span></code> を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> が定義された制限よりも長い場合は <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラーとなり <code class="docutils literal notranslate"><span class="pre">-1</span></code> を返す。
<a class="reference internal" href="note3.html#maximum-uniform-and-attribute-location-lengths"><span class="std std-ref">6.23 Maximum Uniform and Attribute Location Lengths</span></a> 参照。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> が予約されている WebGL 接頭辞のいずれかで始まる場合は <code class="docutils literal notranslate"><span class="pre">-1</span></code> を返す。
<a class="reference internal" href="note3.html#glsl-constructs"><span class="std std-ref">6.17 GLSL Constructs</span></a> 参照。</p></li>
<li><p>コンテキストの <a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">webgl context lost</span></a> フラグが設定されている場合は <code class="docutils literal notranslate"><span class="pre">-1</span></code> を返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> の <a class="reference internal" href="#webglobject"><span class="std std-ref">invalidated</span></a> フラグが設定されている場合は
<code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーとなり <code class="docutils literal notranslate"><span class="pre">-1</span></code> を返す。</p></li>
<li><p>WebGL の実装で行われる追加の検証については、
<a class="reference internal" href="note3.html#characters-outside-the-glsl-source-character-set"><span class="std std-ref">6.21 Characters Outside the GLSL Source Character Set</span></a> を参照すること。</p></li>
</ul>
</dd>
<dt id="term-getUniform-program-location"><code class="docutils literal notranslate"><span class="pre">getUniform(program,</span> <span class="pre">location)</span></code><a class="headerlink" href="#term-getUniform-program-location" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">program</span></code> の <code class="docutils literal notranslate"><span class="pre">location</span></code> にあるユニフォームの値を返す。</p>
<ul class="simple">
<li><p>戻り値の型はユニフォーム型によって決まる。表にまとめられている。</p></li>
<li><p>列や <em>TypedArray</em> を返すすべての問い合わせは、毎回新しいオブジェクトを返す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> または <code class="docutils literal notranslate"><span class="pre">location</span></code> が、自身の WebGLRenderingContext
とは異なるコンテキストが生成したものである場合には <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>この関数の実行中に OpenGL エラーが発生した場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt id="term-getUniformLocation-program-name"><code class="docutils literal notranslate"><span class="pre">getUniformLocation(program,</span> <span class="pre">name)</span></code><a class="headerlink" href="#term-getUniformLocation-program-name" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">program</span></code> 内の特定のユニフォーム変数の位置を表す WebGLUniformLocation を返す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> が <code class="docutils literal notranslate"><span class="pre">program</span></code> 内のアクティブな <code class="docutils literal notranslate"><span class="pre">uniform</span></code> 変数に対応していない場合、戻り値は <code class="docutils literal notranslate"><span class="pre">null</span></code> となる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">program</span></code> がこれとは異なる WebGLRenderingContext が生成したものである場合は <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> が定義された制限よりも長い場合は <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラーとなり <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。
<a class="reference internal" href="note3.html#maximum-uniform-and-attribute-location-lengths"><span class="std std-ref">6.23 Maximum Uniform and Attribute Location Lengths</span></a> 参照。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code> が予約されている WebGL 接頭辞のいずれかで始まる場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。
<a class="reference internal" href="note3.html#glsl-constructs"><span class="std std-ref">6.17 GLSL Constructs</span></a> 参照。</p></li>
<li><p>WebGL の実装で行われる追加の検証については、別項を参照すること。
<a class="reference internal" href="note3.html#characters-outside-the-glsl-source-character-set"><span class="std std-ref">6.21 Characters Outside the GLSL Source Character Set</span></a> を参照すること。</p></li>
<li><p>この関数の実行中に OpenGL エラーが発生した場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt id="term-getVertexAttrib-index-pname"><code class="docutils literal notranslate"><span class="pre">getVertexAttrib(index,</span> <span class="pre">pname)</span></code><a class="headerlink" href="#term-getVertexAttrib-index-pname" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">index</span></code> の頂点属性について <code class="docutils literal notranslate"><span class="pre">pname</span></code> が要求する情報を返す。</p>
<ul class="simple">
<li><p>戻り値の型は要求された情報に応じて決まる。表にまとめられている。</p></li>
<li><p>列や <em>TypedArray</em> を返すすべての問い合わせは、毎回新しいオブジェクトを返す。</p></li>
<li><p>無効な <code class="docutils literal notranslate"><span class="pre">pname</span></code> を与えると <code class="docutils literal notranslate"><span class="pre">INVALID_ENUM</span></code> エラー。</p></li>
<li><p>OpenGL エラーが起こると <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p></li>
</ul>
</dd>
<dt id="term-getVertexAttribOffset-index-pname"><code class="docutils literal notranslate"><span class="pre">getVertexAttribOffset(index,</span> <span class="pre">pname)</span></code><a class="headerlink" href="#term-getVertexAttribOffset-index-pname" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glGetVertexAttribOffset</span></code> の対応物。</p>
<ul class="simple">
<li><p>コンテキストの <a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">webgl context lost</span></a> フラグが設定されている場合は 0 を返す。</p></li>
</ul>
</dd>
<dt id="term-uniform-1234-fi-location-..."><code class="docutils literal notranslate"><span class="pre">uniform[1234][fi](location,</span> <span class="pre">...)</span></code><a class="headerlink" href="#term-uniform-1234-fi-location-..." title="Permalink to this term">¶</a></dt><dt id="term-uniform-1234-fi-v-location-..."><code class="docutils literal notranslate"><span class="pre">uniform[1234][fi]v(location,</span> <span class="pre">...)</span></code><a class="headerlink" href="#term-uniform-1234-fi-v-location-..." title="Permalink to this term">¶</a></dt><dt id="term-uniformMatrix-234-fv-location-transpose-..."><code class="docutils literal notranslate"><span class="pre">uniformMatrix[234]fv(location,</span> <span class="pre">transpose,</span> <span class="pre">...)</span></code><a class="headerlink" href="#term-uniformMatrix-234-fv-location-transpose-..." title="Permalink to this term">¶</a></dt><dd><p>各関数は、指定された <code class="docutils literal notranslate"><span class="pre">uniform</span></code> 変数を指定された値に設定する。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> ではなく、現在使用しているプログラムから以前に
<code class="docutils literal notranslate"><span class="pre">getUniformLocation</span></code> を呼び出して取得したものでない場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーになる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> の場合、渡されたデータは静かに無視され、<code class="docutils literal notranslate"><span class="pre">uniform</span></code> 変数は変更されない。</p></li>
<li><p>ベクトル形式（名前が <code class="docutils literal notranslate"><span class="pre">v</span></code> で終わる関数）に渡された配列の長さが無効な場合 <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p>
<ul>
<li><p>長さが無効であるとは、長さが短すぎるか、割り当てられた型の整数倍でないものをいう。</p></li>
</ul>
</li>
</ul>
<div class="admonition-non-normative admonition">
<p class="admonition-title">Non-normative</p>
<p><code class="docutils literal notranslate"><span class="pre">uniform1i</span></code> を使用してサンプラーのユニフォームを更新すると、一部の実装でパフォーマンス上の問題が発生する。サンプラーユニフォームが参照するテクスチャーを変更するには、ユニフォーム自体を更新するために <code class="docutils literal notranslate"><span class="pre">uniform1i</span></code> を使用するよりも、ユニフォームが参照するテクスチャーユニットに新しいテクスチャーを束縛する方が望ましい。</p>
</div>
</dd>
<dt id="term-vertexAttrib-1234-f-index-..."><code class="docutils literal notranslate"><span class="pre">vertexAttrib[1234]f(index,</span> <span class="pre">...)</span></code><a class="headerlink" href="#term-vertexAttrib-1234-f-index-..." title="Permalink to this term">¶</a></dt><dt id="term-vertexAttrib-1234-fv-index-..."><code class="docutils literal notranslate"><span class="pre">vertexAttrib[1234]fv(index,</span> <span class="pre">...)</span></code><a class="headerlink" href="#term-vertexAttrib-1234-fv-index-..." title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">index</span></code> の頂点属性を、与えられた定数値に設定する。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vertexAttrib</span></code> で設定された値は、<code class="docutils literal notranslate"><span class="pre">drawArrays</span></code> や <code class="docutils literal notranslate"><span class="pre">drawElements</span></code> の呼び出しが間にあったとしても、
<code class="docutils literal notranslate"><span class="pre">CURRENT_VERTEX_ATTRIB</span></code> パラメーターを持つ <code class="docutils literal notranslate"><span class="pre">vertexAttrib</span></code> 関数から返されることが保証される。</p></li>
<li><p>ベクトル形式（名前が <code class="docutils literal notranslate"><span class="pre">v</span></code> で終わる関数）に渡された配列の長さが無効な場合 <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p></li>
</ul>
</dd>
<dt id="term-vertexAttribPointer-index-size-type-normalized-stride-offset"><code class="docutils literal notranslate"><span class="pre">vertexAttribPointer(index,</span> <span class="pre">size,</span> <span class="pre">type,</span> <span class="pre">normalized,</span> <span class="pre">stride,</span> <span class="pre">offset)</span></code><a class="headerlink" href="#term-vertexAttribPointer-index-size-type-normalized-stride-offset" title="Permalink to this term">¶</a></dt><dd><p><code class="docutils literal notranslate"><span class="pre">ARRAY_BUFFER</span></code> ターゲットに束縛されている WebGLBuffer オブジェクトを
<code class="docutils literal notranslate"><span class="pre">index</span></code> の頂点属性に割り当てる。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">size</span></code> は属性ごとの成分の数。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stride</span></code> および <code class="docutils literal notranslate"><span class="pre">offset</span></code> はバイト単位。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stride</span></code> および <code class="docutils literal notranslate"><span class="pre">offset</span></code> は <code class="docutils literal notranslate"><span class="pre">type</span></code> と <code class="docutils literal notranslate"><span class="pre">size</span></code> に適していなければならず、そうでなければ <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーとなる。
<a class="reference internal" href="note3.html#buffer-offset-and-stride-requirements"><span class="std std-ref">6.5 Buffer Offset and Stride Requirements</span></a> 参照。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset</span></code> が負の値の場合は <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラーとなる。</p></li>
<li><p>WebGLBuffer が <code class="docutils literal notranslate"><span class="pre">ARRAY_BUFFER</span></code> ターゲットに束縛されておらず、
<code class="docutils literal notranslate"><span class="pre">offset</span></code> が 0 以外の場合は <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーとなる。</p></li>
<li><p>WebGL では、サポートされる <code class="docutils literal notranslate"><span class="pre">stride</span></code> の最大値は 255 だ。
<a class="reference internal" href="note3.html#vertex-attribute-data-stride"><span class="std std-ref">6.13 Vertex Attribute Data Stride</span></a> 参照。</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="writing-to-the-drawing-buffer">
<h4><a class="toc-backref" href="#id40">5.14.11 Writing to the drawing buffer</a><a class="headerlink" href="#writing-to-the-drawing-buffer" title="Permalink to this heading">¶</a></h4>
<p>OpenGL ES 2.0 には、描画バッファーへのレンダリングを可能にする呼び出しが三つある：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">clear</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drawArrays</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drawElements</span></code></p></li>
</ul>
<p>さらに、レンダリングは、描画バッファーかフレームバッファーオブジェクトに対して行うことができる。描画バッファーへのレンダリングが指示された場合、三つのレンダリング呼び出しのいずれかを実行すると、次の合成操作の開始時に、描画バッファーが HTML ページ合成器に提示される。</p>
<p>これらの呼び出しのいずれかが完全なフレームバッファーの欠落した attachment に描画しようとした場合、その attachment には何も描画されず、エラーが発生することもない。</p>
<hr class="docutils" />
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">clear(mask)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glClear</span></code> の対応物。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">drawArrays(mode,</span> <span class="pre">first,</span> <span class="pre">count)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glDrawArrays</span></code> の対応物。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">first</span></code> が負の値の場合 <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラー。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CURRENT_PROGRAM</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> の場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">drawElements(mode,</span> <span class="pre">count,</span> <span class="pre">type,</span> <span class="pre">offset)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glDrawElements</span></code> の対応物。</p>
<p>現在束縛されている要素配列バッファーを使用して描画する。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">offset</span></code> はバイト単位で、<code class="docutils literal notranslate"><span class="pre">type</span></code> のサイズの有効な倍数でなければならない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">offset</span></code> は非負でなければならず、そうでなければ <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラーとなる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count</span></code> が 0 より大きい場合は <code class="docutils literal notranslate"><span class="pre">ELEMENT_ARRAY_BUFFER</span></code> バインディングポイントに非 <code class="docutils literal notranslate"><span class="pre">null</span></code> の
WebGLBuffer が束縛されていなければならず、そうでない場合は <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーとなる。
<a class="reference internal" href="note3.html#buffer-offset-and-stride-requirements"><span class="std std-ref">6.5 Buffer Offset and Stride Requirements</span></a> 参照。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CURRENT_PROGRAM</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> の場合は <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラー。</p></li>
<li><p>WebGL では <code class="docutils literal notranslate"><span class="pre">drawArays</span></code> および <code class="docutils literal notranslate"><span class="pre">drawElements</span></code> の呼び出し時に
OpenGL ES 2.0 で指定されている以上のエラーチェックを行う。
<a class="reference internal" href="note3.html#enabled-vertex-attributes-and-range-checking"><span class="std std-ref">6.6 Enabled Vertex Attributes and Range Checking</span></a> 参照。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">finish()</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glFinish</span></code> の対応物。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flush()</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">glFlush</span></code> の対応物。</p>
</dd>
</dl>
</div>
<div class="section" id="reading-back-pixels">
<h4><a class="toc-backref" href="#id41">5.14.12 Reading back pixels</a><a class="headerlink" href="#reading-back-pixels" title="Permalink to this heading">¶</a></h4>
<p>現在のフレームバッファー内のピクセルを ArrayBufferView オブジェクトに読み戻すことができる。</p>
<hr class="docutils" />
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">readPixels(x,</span> <span class="pre">y,</span> <span class="pre">width,</span> <span class="pre">height,</span> <span class="pre">format,</span> <span class="pre">type,</span> <span class="pre">pixels)</span></code></dt><dd><p>フレームバッファーの指定された矩形内のピクセルデータでピクセルを埋める。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">readPixels</span></code> が返すデータは、最後に送信された描画コマンドの時点でのものでなければならない。</p></li>
<li><p>ピクセルの <code class="docutils literal notranslate"><span class="pre">type</span></code> は読み込まれるデータのそれと一致していなければならない。例えば、</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">UNSIGNED_BYTE</span></code> であれば、Uint8Array または Uint8ClampedArray を、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UNSIGNED_SHORT_5_6_5</span></code>, <code class="docutils literal notranslate"><span class="pre">UNSIGNED_SHORT_4_4_4</span></code>, <code class="docutils literal notranslate"><span class="pre">UNSIGNED_SHORT_5_5_5_1</span></code> であれば、Uint16Array を、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code> であれば Float32Array を</p></li>
</ul>
<p>供給しなければならない。型が一致しない場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーとなる。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">format</span></code> と <code class="docutils literal notranslate"><span class="pre">type</span></code> の組み合わせは二つしかない。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">format</span> <span class="pre">=</span> <span class="pre">RGBA</span></code> で <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">=</span> <span class="pre">UNSIGNED_BYTE</span></code></p></li>
<li><p>実装で選択されたフォーマット</p></li>
</ul>
<p>このフォーマットの <code class="docutils literal notranslate"><span class="pre">format</span></code> と <code class="docutils literal notranslate"><span class="pre">type</span></code> の値は、<code class="docutils literal notranslate"><span class="pre">getParameter</span></code> に定数
<code class="docutils literal notranslate"><span class="pre">IMPLEMENTATION_COLOR_READ_FORMAT</span></code> と <code class="docutils literal notranslate"><span class="pre">IMPLEMENTATION_COLOR_READ_TYPE</span></code> を指定して呼び出すことで決定できる。</p>
<ul class="simple">
<li><p>実装で選択されるフォーマットは、現在束縛されているレンダリング面のフォーマットに応じて異なる場合がある。</p></li>
<li><p>サポートされていない <code class="docutils literal notranslate"><span class="pre">format</span></code> と <code class="docutils literal notranslate"><span class="pre">type</span></code> の組み合わせの場合 <code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーとなる。</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">IMPLEMENTATION_COLOR_READ_[FORMAT,TYPE]</span></code> の問い合わせは、他で使用されていない列挙型を返すことがあるため、これらの列挙型を <code class="docutils literal notranslate"><span class="pre">readPixels</span></code> に提供しても、必ずしも <code class="docutils literal notranslate"><span class="pre">INVALID_ENUM</span></code> エラーとなるわけではない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pixels</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> の場合 <code class="docutils literal notranslate"><span class="pre">INVALID_VALUE</span></code> エラーとなる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pixels</span></code> が <code class="docutils literal notranslate"><span class="pre">null</span></code> ではないが、ピクセル格納モードを考慮して、指定された矩形内のすべてのピクセルを取得するのに十分な大きさではない場合、
<code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーとなる。</p></li>
<li><p>フレームバッファーの外側にあるピクセルについては、対応する destination バッファーの範囲はそのままだ。
<a class="reference internal" href="note3.html#reading-pixels-outside-the-framebuffer"><span class="std std-ref">6.11 Reading Pixels Outside the Framebuffer</span></a> 参照。</p></li>
<li><p>この関数が、色 attachment がない完全なフレームバッファーから読み取ろうとすると、
<code class="docutils literal notranslate"><span class="pre">INVALID_OPERATION</span></code> エラーとなる。
<a class="reference internal" href="note3.html#reading-from-a-missing-attachment"><span class="std std-ref">6.28 Reading From a Missing Attachment</span></a> 参照。</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="detecting-context-lost-events">
<h4><a class="toc-backref" href="#id42">5.14.13 Detecting context lost events</a><a class="headerlink" href="#detecting-context-lost-events" title="Permalink to this heading">¶</a></h4>
<p>モバイル機器の電源イベントなどが発生すると WebGL レンダリングコンテキストが失われ、アプリケーションの再構築が必要になることがある。
<a class="reference internal" href="#webglcontextevent"><span class="std std-ref">5.15 WebGLContextEvent</span></a> で詳しく述べられる。</p>
<hr class="docutils" />
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">isContextLost()</span></code></dt><dd><p><a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">webgl context lost</span></a> フラグが設定されているかどうかを返す。</p>
</dd>
</dl>
</div>
<div class="section" id="detecting-and-enabling-extensions">
<h4><a class="toc-backref" href="#id43">5.14.14 Detecting and enabling extensions</a><a class="headerlink" href="#detecting-and-enabling-extensions" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>WebGL の実装は、拡張装置を最初に使って機能を有効にすることなしに、追加のパラメーター、定数、関数をサポートしてはならない。</p>
<ul>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">getSupportedExtensions</span></code> は、この実装がサポートする拡張機能の文字列の配列を返す。</p></li>
<li><p>拡張機能を有効にするには、これらの文字列のうちの一つを関数 <code class="docutils literal notranslate"><span class="pre">getExtension</span></code> に渡すことだ。</p>
<ul>
<li><p>この呼び出しは、その拡張機能で定義されているあらゆる定数と関数を含むオブジェクトを返す。</p></li>
<li><p>このオブジェクトの定義はその拡張機能に固有のものであり、拡張機能の仕様が定義せねばならないものだ。</p></li>
</ul>
</li>
</ul>
</li>
<li><p>いったん拡張が有効になると、WebGL コンテキストが失われても無効にしかならない。</p>
<ul>
<li><p>ただし <code class="docutils literal notranslate"><span class="pre">WEBGL_lose_context</span></code> 拡張は例外だ。コンテキストが失われてもアクティブな状態を維持する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getExtension</span></code> が返すオブジェクトなどの、無効である拡張機能が参照するオブジェクトは、いずれも WebGL レンダリングコンテキストに関連付けられなくなる。</p></li>
<li><p>WebGLObject から派生したすべての拡張オブジェクトのフラグ
<a class="reference internal" href="#webglobject"><span class="std std-ref">invalidated</span></a> は <code class="docutils literal notranslate"><span class="pre">true</span></code> に設定される。</p></li>
<li><p>コンテキストが失われた後の拡張機能のメソッドの動作は
<a class="reference internal" href="#the-webgl-context"><span class="std std-ref">5.14 The WebGL context</span></a> で定義した。</p></li>
</ul>
</li>
<li><p>拡張機能を無効にする仕組みは他にはない。</p></li>
<li><p>大文字小文字を区別しない比較を考慮して、同じ拡張文字列で
<code class="docutils literal notranslate"><span class="pre">getExtension</span></code> を複数回呼び出すと、その拡張が有効である限り、同一のオブジェクトが返されなければならない。</p>
<ul>
<li><p>最初に <code class="docutils literal notranslate"><span class="pre">getExtension</span></code> を呼び出して有効にすることなしに任意の拡張機能を使用しようとすると、適切な GL エラーが起こらねばならず、その機能を使用してはならない。</p></li>
</ul>
</li>
<li><p>本仕様では、どんな拡張をも定義しない。個別の WebGL 実装がサポートする拡張は、個別の WebGL 拡張レジストリーが定義する。</p></li>
</ul>
<hr class="docutils" />
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">getSupportedExtensions()</span></code></dt><dd><p>サポートされているすべての拡張文字列の一覧を返す。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getExtension(name)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">getSupportedExtensions</span></code> から返された名前の一つに対して、
<code class="docutils literal notranslate"><span class="pre">name</span></code> が ASCII の大文字と小文字を区別せずに一致する <a class="reference internal" href="note4.html#html" id="id6"><span>[HTML]</span></a> ときに、かつそのときに限りオブジェクトを返す。そうでない場合は <code class="docutils literal notranslate"><span class="pre">null</span></code> を返す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">getExtensions</span></code> から返されるオブジェクトには、その拡張機能が提供する定数や関数が含まれている。</p></li>
<li><p>拡張機能が定数や関数を定義していない場合には、返されるオブジェクトにそういうものが含まれていなくてもかまわないが、それでも一意のオブジェクトを返さなければならない。このオブジェクトは、その拡張機能が有効であることを示すために用いられる。</p></li>
</ul>
</dd>
</dl>
</div>
</div>
<div class="section" id="webglcontextevent">
<h3><a class="toc-backref" href="#id44">5.15 WebGLContextEvent</a><a class="headerlink" href="#webglcontextevent" title="Permalink to this heading">¶</a></h3>
<p>WebGL はレンダリングコンテキストの状態の重要な変更に対応して WebGLContextEvent イベントを生成する。イベントは DOM イベントシステム <a class="reference internal" href="note4.html#dom3events" id="id7"><span>[DOM3EVENTS]</span></a> を使って送信され、レンダリングコンテキストに関連付けられたキャンバスに急送される。
WebGLContextEvent イベントを発生させることができる状態変化の種類には、コンテキストの</p>
<ul class="simple">
<li><p><a class="reference internal" href="#the-context-lost-event"><span class="std std-ref">消滅</span></a></p></li>
<li><p><a class="reference internal" href="#the-context-restored-event"><span class="std std-ref">回復</span></a></p></li>
<li><p><a class="reference internal" href="#the-context-creation-error-event"><span class="std std-ref">作成不能</span></a></p></li>
</ul>
<p>がある。</p>
<p><code class="docutils literal notranslate"><span class="pre">e</span></code> という名前のコンテキストイベントが発生するということは、</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code> 属性 <a class="reference internal" href="note4.html#dom4" id="id8"><span>[DOM4]</span></a> が <code class="docutils literal notranslate"><span class="pre">e</span></code> に初期化され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cancelable</span></code> 属性が <code class="docutils literal notranslate"><span class="pre">true</span></code> に初期化され、</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isTrusted</span></code> 属性が <code class="docutils literal notranslate"><span class="pre">true</span></code> に初期化された</p></li>
</ul>
<p>WebGLContextEvent インターフェイスを使用するイベントが、指定されたオブジェクトに急送されるということだ。</p>
<hr class="docutils" />
<ul class="simple">
<li><p>WebGLContextEvent</p></li>
<li><p>WebGLContextEventInit</p></li>
</ul>
<hr class="docutils" />
<p>この節に並んでいるタスクすべて <a class="reference internal" href="note4.html#html" id="id9"><span>[HTML]</span></a> の発生源は WebGL タスク発生源だ。</p>
<div class="section" id="id10">
<h4><a class="toc-backref" href="#id45">5.15.1 Attributes</a><a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h4>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">statusMessage</span></code></dt><dd><p>追加情報を含む文字列。追加情報がない場合は空。</p>
</dd>
</dl>
</div>
<div class="section" id="the-context-lost-event">
<h4><a class="toc-backref" href="#id46">5.15.2 The Context Lost Event</a><a class="headerlink" href="#the-context-lost-event" title="Permalink to this heading">¶</a></h4>
<p>ブラウザーが WebGLRenderingContext コンテキストに関連付けられた描画バッファーが失われたことを検出すると、次の手順を実行する：</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">canvas</span></code> をコンテキストの <code class="docutils literal notranslate"><span class="pre">canvas</span></code> とする。</p></li>
<li><p>コンテキストの <a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">webgl context lost</span></a> フラグが設定されている場合は、手順をここで中止する。</p></li>
<li><p>コンテキストの <a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">webgl context lost</span></a> フラグを設定する。</p></li>
<li><p>このコンテキストで作成された各 WebGLObject インスタンスの <a class="reference internal" href="#webglobject"><span class="std std-ref">invalidated</span></a> フラグを設定する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WEBGL_lose_context</span></code> 以外のすべての拡張機能を無効にする。</p></li>
<li><p>以下の手順を実行するタスクをキューに入れる：</p>
<ul class="simple">
<li><p>6.1. <code class="docutils literal notranslate"><span class="pre">webglcontextlost</span></code> という名前のコンテキストイベントを <code class="docutils literal notranslate"><span class="pre">canvas</span></code> で発射させ、その <code class="docutils literal notranslate"><span class="pre">statusMessage</span></code> 属性を空に設定する。
<a class="reference internal" href="#webglcontextevent"><span class="std std-ref">5.15 WebGLContextEvent</span></a> 参照。</p></li>
<li><p>6.2. イベントの <code class="docutils literal notranslate"><span class="pre">canceled</span></code> フラグが設定されていない場合は、手順をここで中止する。</p></li>
<li><p>6.3. 以下の手順を非同期で実行する：</p>
<ul>
<li><p>回復可能な描画バッファーを待機する。</p></li>
<li><p><a class="reference internal" href="#webglcontextevent"><span class="std std-ref">コンテキストの描画バッファーを復元する</span></a> タスクをキューに入れる。</p></li>
</ul>
</li>
</ul>
</li>
</ol>
<div class="admonition-example-v admonition">
<p class="admonition-title">Example V</p>
<p>以下のコードは、<code class="docutils literal notranslate"><span class="pre">webglcontextlost</span></code> イベントのデフォルトの動作を防ぎ、
<code class="docutils literal notranslate"><span class="pre">webglcontextrestored</span></code> イベントの発信を可能にするものだ：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">canvas</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;webglcontextlost&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">e</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span><span class="w"></span>
<span class="p">},</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-context-restored-event">
<h4><a class="toc-backref" href="#id47">5.15.3 The Context Restored Event</a><a class="headerlink" href="#the-context-restored-event" title="Permalink to this heading">¶</a></h4>
<p>ブラウザーが WebGLRenderingContext コンテキストの描画バッファーを復元するには、次の手順を実行する必要がある：</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">canvas</span></code> をコンテキストに関連付けられた <code class="docutils literal notranslate"><span class="pre">canvas</span></code> とする。</p></li>
<li><p>コンテキストの <a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">webgl context lost</span></a> フラグが設定されていない場合は、ここで手順を中止する。</p></li>
<li><p>コンテキストの <a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">context creation parameters</span></a>
で指定された設定を使用して:ref:<cite>描画バッファーを生成し&lt;2.2 The Drawing Buffer&gt;</cite>、その描画バッファーをコンテキストに関連付け、以前の描画バッファーを破棄する。</p></li>
<li><p>コンテキストの <a class="reference internal" href="note1.html#context-creation"><span class="std std-ref">webgl context lost</span></a> フラグをクリアする。</p></li>
<li><p>コンテキストの OpenGL エラー状態をリセットする。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">webglcontextrestored</span></code> という名前の WebGL コンテキストイベントを
<code class="docutils literal notranslate"><span class="pre">canvas</span></code> で:ref:<cite>発射させ&lt;5.15 WebGLContextEvent&gt;</cite>、その <code class="docutils literal notranslate"><span class="pre">statusMessage</span></code> 属性を空にする。</p></li>
</ol>
<div class="admonition-non-normative admonition">
<p class="admonition-title">Non-normative</p>
<p>コンテキストがすると、それまでに作成されたテクスチャーやバッファーなどの WebGL リソースが無効になる。以前に有効だった拡張は復元されない。変更された状態や破棄された拡張やリソースすべてをアプリケーションが復元する必要がある。</p>
</div>
<div class="admonition-example-vi admonition">
<p class="admonition-title">Example VI</p>
<p>アプリケーションがコンテキストの消失と復元をどのように処理するかを示す擬似コード：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">initializeGame</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">initializeWorld</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="nx">initializeResources</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">initializeResources</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">initializeShaders</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="nx">initializeBuffers</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="nx">initializeTextures</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="c1">// ready to draw, start the main loop</span><span class="w"></span>
<span class="w">    </span><span class="nx">renderFrame</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">renderFrame</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">updateWorld</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="nx">drawSkyBox</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="nx">drawWalls</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="nx">drawMonsters</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="nx">requestId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">requestAnimationFrame</span><span class="p">(</span><span class="nx">renderFrame</span><span class="p">,</span><span class="w"> </span><span class="nx">canvas</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">canvas</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;webglcontextlost&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// inform WebGL that we handle context restoration</span><span class="w"></span>
<span class="w">    </span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Stop rendering</span><span class="w"></span>
<span class="w">    </span><span class="nb">window</span><span class="p">.</span><span class="nx">cancelAnimationFrame</span><span class="p">(</span><span class="nx">requestId</span><span class="p">);</span><span class="w"></span>
<span class="p">},</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span><span class="w"></span>

<span class="nx">canvas</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;webglcontextrestored&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">initializeResources</span><span class="p">();</span><span class="w"></span>
<span class="p">},</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span><span class="w"></span>

<span class="nx">initializeGame</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
</div>
<ul class="simple">
<li><p>コンテキストがなくなったときにはアニメーションをいったん止める。</p></li>
<li><p>コンテキストが復活したときにはリソース各種を自力で初期化し直す。だから、リソース初期化コードをカプセル化しておく（普通は関数の形式で）のはたいせつだ。そのあとアニメーションを再開させるのも忘れてはならない。</p></li>
</ul>
</div>
<div class="section" id="the-context-creation-error-event">
<h4><a class="toc-backref" href="#id48">5.15.4 The Context Creation Error Event</a><a class="headerlink" href="#the-context-creation-error-event" title="Permalink to this heading">¶</a></h4>
<p>ブラウザーが WebGL コンテキスト作成エラーをキャンバスで発射する場合には次の手順を実行する：</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">canvas</span></code> で <code class="docutils literal notranslate"><span class="pre">webglcontextcreationerror</span></code> という名前の WebGL コンテキストイベントを
<a class="reference internal" href="#webglcontextevent"><span class="std std-ref">発射</span></a> し、オプションで <code class="docutils literal notranslate"><span class="pre">statusMessage</span></code> 属性に失敗の性質に関するプラットフォーム依存の文字列を設定する。</p></li>
</ol>
<div class="admonition-example-vi admonition">
<p class="admonition-title">Example VI</p>
<p>次のコードは、アプリケーションがコンテキスト作成の失敗に関する情報を取得する方法を示すものだ：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">errorInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">;</span><span class="w"></span>

<span class="kd">function</span><span class="w"> </span><span class="nx">onContextCreationError</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s2">&quot;webglcontextcreationerror&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">onContextCreationError</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="nx">errorInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">e</span><span class="p">.</span><span class="nx">statusMessage</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="s2">&quot;Unknown&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nx">canvas</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;webglcontextcreationerror&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">onContextCreationError</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span><span class="w"></span>

<span class="kd">const</span><span class="w"> </span><span class="nx">gl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">canvas</span><span class="p">.</span><span class="nx">getContext</span><span class="p">(</span><span class="s2">&quot;webgl&quot;</span><span class="p">);</span><span class="w"></span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">gl</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;A WebGL context could not be created.\nReason: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">errorInfo</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="note1.html" title="Previous document">WebGL Specification 1.0 読書ノート 1 of 4</a>
        </li>
        <li>
          <a href="note3.html" title="Next document">WebGL Specification 1.0 読書ノート 3 of 4</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">読書ノート</a></h1>



<p class="blurb">個人的な読書、学習、研究ノート。</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../mathseminar72.html">数学 100 の発見 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gamma95/index.html">オブジェクト指向における再利用のためのデザインパターン改訂版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hunt00/index.html">達人プログラマー 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sutter00.html">Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alexandrescu01/index.html">Modern C++ Design 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meyers01.html">Effective STL 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sutter02.html">More Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../joel04/index.html">Joel on Software 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graham04.html">ハッカーと画家 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../angel05/index.html">OpenGL: A Primer Second Edition 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../yamamoto05/index.html">入門 xyzzy 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../newham05/index.html">入門 bash 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tsuboi05/index.html">幾何学 I 多様体入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subramaniam06.html">アジャイルプラクティス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asaoka06.html">SE・製造技術者・理工系学生のための技術文書の作り方・書き方 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../levin06/index.html">Shaping Functions 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tsuboi08/index.html">幾何学 III 微分形式 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../loeliger09.html">実用 Git 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../griffiths10.html">プログラミング C# 第 6 版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../onodera10.html">ORACLE MASTER Bronze 11g SQL 基礎 I 必修教本 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosoda10/index.html">Python 入門［２＆３対応］読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nishiyama12/index.html">幾何学と不変量 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../omg15/index.html">Unified Modeling Language 2.5 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gorelick14.html">ハイパフォーマンス Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stroustrup14.html">C++ のエッセンス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stepanov15.html">その数式、プログラムできますか？ 読書ノート</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">WebGL Specification 1.0 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vivo15/index.html">The Book of Shaders 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../saha16.html">Python からはじめる数学入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slatkin16.html">Effective Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guntheroth16.html">Optimized C++ 下読みノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speinellis17.html">Effective Debugging 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bancila18.html">Modern C++ チャレンジ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../haverbeke18/index.html">Eloquent JavaScript 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../khronos18/index.html">OpenGL Shading Language 4.60 Specification 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kantor22/index.html">The Modern JavaScript Tutorial 読書ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2014.html">ノート準備中書籍群 2014 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2015.html">ノート準備中書籍群 2015 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2016.html">ノート準備中書籍群 2016 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2017.html">ノート準備中書籍群 2017 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2018.html">ノート準備中書籍群 2018 年編</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bash-v2.html">What’s New In Bash 2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bash-v3.html">What’s New In Bash 3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bash-v4.html">What’s New In Bash 4 ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cpp11/index.html">What’s New In C++11 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp14/index.html">What’s New In C++14 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp17/index.html">What’s New In C++17 ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../python-3.0.html">What’s New In Python 3.0 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.1.html">What’s New In Python 3.1 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.2.html">What’s New In Python 3.2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.3.html">What’s New In Python 3.3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.4.html">What’s New In Python 3.4 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.5.html">What’s New In Python 3.5 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.6.html">What’s New In Python 3.6 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.7.html">What’s New In Python 3.7 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.8.html">What’s New In Python 3.8 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.9.html">What’s New In Python 3.9 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.10.html">What’s New In Python 3.10 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pip.html">pip 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pylint.html">Pylint 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-docutils/index.html">Docutils 解読ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-restview.html">Restview 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-nose.html">Nose 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-ipython.html">IPython 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-jupyter.html">Jupyter 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-numpy/index.html">NumPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-scipy/index.html">SciPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-sympy/index.html">SymPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-apgl.html">Another Python Graph Library (APGL) 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pil.html">PIL 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pillow.html">Pillow 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-matplotlib/index.html">Matplotlib 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-networkx/index.html">NetworkX 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-quaternion.html">Quaternion 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-jinja2.html">Jinja2 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pygments.html">Pygments 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-bs4.html">BeautifulSoup4 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-selenium.html">Selenium 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-scrapy.html">Scrapy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-twitter/index.html">Python Twitter Tools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-isbn-hyphenate.html">isbn-hyphenate 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pyopengl/index.html">PyOpenGL 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pyqt4.html">PyQt4 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pyqt5.html">PyQt5 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pandas/index.html">Pandas 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pygame.html">Pygame 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pytube.html">Pytube 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-py2exe.html">Py2exe 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-upgrade.html">Python 移行ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-miniconda.html">Miniconda 利用ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../freeware.html">Windows 用フリーウェア 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deepl-translator.html">DeepL Translator 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../winget.html">Windows Package Manager CLI 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../power-toys.html">Microsoft PowerToys 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../windows-terminal.html">Windows Terminal 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wsl.html">Windows Subsystem for Linux 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vscode/index.html">Visual Studio Code 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cygwin.html">Cygwin 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chrome.html">Chrome DevTools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git/index.html">Git 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter.html">Twitter 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inkscape/index.html">Inkscape 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathjax.html">MathJax 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript-mermaid/index.html">Mermaid 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../css-selector.html">CSS セレクター学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xpath.html">XPath 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hxutils.html">HTML-XML-utils 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webgl.html">WebGL 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pandoc.html">Pandoc 利用ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../milestone09/index.html">ラジルギノア プレイノート</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">WebGL Specification 1.0 読書ノート</a><ul>
      <li>Previous: <a href="note1.html" title="previous chapter">WebGL Specification 1.0 読書ノート 1 of 4</a></li>
      <li>Next: <a href="note3.html" title="next chapter">WebGL Specification 1.0 読書ノート 3 of 4</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="../_static/logos.png"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2022, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>