<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>正規表現学習ノート &#8212; 読書ノート 1.6dev documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=c9b0a06a" />
    <script src="_static/documentation_options.js?v=4354bf25"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/mermaid.js?v=578dbed1"></script>
    <link rel="next" title="Cygwin 利用ノート [obsolete]" href="cygwin.html" />
    <link rel="prev" title="ロケール" href="vscode/locale.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
    <div class="related top">
      &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="vscode/locale.html" title="Previous">ロケール</a>
        </li>
      
        <li>
          <a href="cygwin.html" title="Next">Cygwin 利用ノート [obsolete]</a>
          &rarr;
        </li>
    </ul>
  </nav>
    </div>


          <div class="body" role="main">
            
  <section id="id1">
<h1><a class="toc-backref" href="#id6" role="doc-backlink">正規表現学習ノート</a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h1>
<p>自分の正規表現技術を見直そう。勘だけで使い続けていると行き詰まるのは必至。</p>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#id1" id="id6">正規表現学習ノート</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id7">資料</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id8">教材</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id9">ツール</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id5" id="id10">メモ</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="id2">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">資料</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<dl class="simple">
<dt><a class="reference external" href="https://en.wikipedia.org/wiki/Regular_expression">Regular expression - Wikipedia</a></dt><dd><p>Wikipedia の正規表現に関する記述だ。公平性と専門性のバランスが良い。特に
Syntax の節をよく読んでおきたい。</p>
</dd>
<dt><a class="reference external" href="https://www.pcre.org/">PCRE - Perl Compatible Regular Expressions</a></dt><dd><p>PCRE 公式サイト。PCRE は Perl 5 と同じ構文、語義を使って正規表現パターンマッチを実装する機能を備えるライブラリーだ。</p>
</dd>
</dl>
<section id="id3">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">教材</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<dl class="simple">
<dt><a class="reference external" href="https://en.wikibooks.org/wiki/Regular_Expressions">Regular Expressions - Wikibooks</a></dt><dd><p>教科書。こちらは読みやすさ重視か。用語集が便利。</p>
</dd>
<dt><a class="reference external" href="https://dev.to/awwsmm/20-small-steps-to-become-a-regex-master-mpc">20 Small Steps to Become a Regex Master</a></dt><dd><p>この記事の水準の正規表現を習得しているかどうかをまず確認しろ。著者は正規表現達人の基準を lookaround 習得辺りに見据えているようだ。</p>
</dd>
<dt><a class="reference external" href="https://regexone.com/">RegexOne</a></dt><dd><p>学習する正規表現の構成物をページ右柱を見ればわかるようになっている。言語別案内もうれしい。</p>
</dd>
<dt><a class="reference external" href="https://www.rexegg.com/">Rex Egg</a></dt><dd><p>自家製単語境界の技法や、パスワード文字列の条件と lookahead それぞれの個数の関係、ゼロ幅合致の用途など、実践にも理論にも質が良い。黒帯の記事群は相当難しいところがある。</p>
</dd>
<dt><a class="reference external" href="https://www.regular-expressions.info/refflavors.html">Regular-Expressions.info</a></dt><dd><p>主要正規表現エンジン機能表が便利だ。エンジンごとに特定の機能が利用可能であるかどうかを調べるのに最適。プログラマーはブラウザーのブックマークに追加しておくのが良い。</p>
</dd>
</dl>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">ツール</a><a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<p>自分で書いた正規表現を検証するためのツールを確保しておきたい。JavaScript の正規表現エンジンで事足りるならばブラウザーの開発ツールコンソールを使えばよい。それ以外のプログラミング言語版の正規表現を検証するには、次のような便利なものを利用したい：</p>
<dl>
<dt><a class="reference external" href="https://regex101.com/">regex101: build, test, and debug regex</a></dt><dd><p>正規表現と対象テキストを入力してマッチや置換を実行するオンラインツール。
<span class="guilabel">FLAVOR</span> を所望の正規表現方言に設定して用いる。学習時は主に PCRE2で検証する。特定のエンジンを試したい時に限って Python などに変更するという使い方でいい。</p>
<p>処理時間を表示するのもうれしい。デバッガーも面白そうだ。これ一本で事足りるかもしれない。</p>
</dd>
<dt><a class="reference external" href="https://www.regexplanet.com/">RegexPlanet</a>:</dt><dd><p>正規表現検証ツールとレシピ集をふるまっている Web サイト。見出しによると Go,
Haskell, Java, JavaScript, .Net, Perl, PHP, PostgreSQL, Python, Ruby, Tcl,
XRegExp に対応している。</p>
</dd>
<dt><a class="reference external" href="https://www.powergrep.com/">PowerGREP</a></dt><dd><p>«Windows grep Software to Search (and Replace) through Files and Folders on
Your PC and Network» とのことだ。YouTube に誰かの利用時撮影ビデオがある。</p>
</dd>
</dl>
<p>上述教材各サイトにあるツール紹介記事に細かい用途に応じたツールレビューがある。</p>
</section>
</section>
<section id="id5">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">メモ</a><a class="headerlink" href="#id5" title="Link to this heading">¶</a></h2>
<p>先述の教材から気になる記述を抜き出してとりあえず列挙しておく。</p>
<ul class="simple">
<li><p>「優れた正規表現」をルール化するのは容易ではない。</p></li>
<li><p>NFA と DFA のどちらかを選べる場合、通常は NFA が最も速い。実際、現代の言語ではこれが最も一般的な実装だ。</p></li>
<li><p>式を評価するために括弧が必要だが、データを捕捉する必要がない場合は
<code class="regexp docutils literal notranslate"><span class="pre">(?:</span> <span class="pre">...</span> <span class="pre">)</span></code> 構文を使う。</p></li>
<li><p>可能な限りアンカーを指定する。バックトラックの手間が省けることもある。</p></li>
<li><p>相互排他的なトークンを連続させるのは美しい。</p></li>
<li><p>ドットを控えめに使う。</p></li>
<li><p>ドットは最も誤用されるメタ文字だ。</p></li>
<li><p><code class="regexp docutils literal notranslate"><span class="pre">\h</span></code> が使えるならば <code class="regexp docutils literal notranslate"><span class="pre">\s</span></code> に優先して使うほうがいい。</p></li>
<li><p><code class="regexp docutils literal notranslate"><span class="pre">\v</span></code> が使えるならば <code class="regexp docutils literal notranslate"><span class="pre">[\r\n]</span></code> に優先して使うほうがいい。</p></li>
<li><p>正規表現をどこまで完璧にするかは、その正規表現で何をしたいかによって決まる。ユーザーの入力を検証するのであれば、完璧でなければならない。</p></li>
<li><p>入力を検証する前に、文字列前後の空白を除去しておく。</p></li>
<li><p>Python に <code class="regexp docutils literal notranslate"><span class="pre">\z</span></code> はない。</p></li>
<li><p>正規表現エンジンに捕捉を back track させたくない場合は atomic group を使用することが可能だ。</p></li>
<li><p>正規表現によっては前方参照という概念があり得る。</p></li>
<li><p>アクセント付きのアルファベットは一文字ではない場合がある。</p></li>
<li><p>Unicode には平仮名および片仮名という区分が設けられている。それを利用した正規表現記号列がある。</p></li>
<li><p>Lookaround が絡む正規表現を組み立てることが難し過ぎる。</p></li>
<li><p>ソースコードで置換テキストを文字列定数として指定する場合、プログラミング言語によって文字列定数内で特別な扱いを受ける文字をプログラマーが知っていなければならない。</p></li>
<li><p><strong class="program">grep</strong> で複数行モードはあり得ない。</p></li>
<li><p>GNU <strong class="program">grep</strong> は Linux で最もよく使われている <strong class="program">grep</strong> の一種だ。テキスト指向エンジンと正規表現指向エンジンの両方を使う。後方参照を使用する場合は正規表現指向エンジンを使用する。それ以外の場合はより高速なテキスト指向エンジンを使用する。</p></li>
<li><p>基本正規表現つまり <abbr>BRE</abbr> は現在でも使われている最も古い正規表現だ。GNU
ユーティリティーの <strong class="program">grep</strong>, <strong class="program">ed</strong>, <strong class="program">sed</strong> がこれを使用している。</p></li>
<li><p>JavaScript のすべての実装で正規表現がまったく同じように動作する。</p></li>
<li><p>PowerShell の正規表現はそれと明示しないと大文字小文字を区別しない。</p></li>
<li><p>正規表現を作成する際には、何に合致させないかを考えることの方が重要だ。</p></li>
<li><p>Quantifiers を入れ子にする正規表現は破滅的になりがちだ。バックトラック禁止表現を身に着けておくといい。</p></li>
<li><p>境界 <code class="regexp docutils literal notranslate"><span class="pre">\b</span></code> は、その左と右の文字の性質が異なる位置と考えられる。</p></li>
<li><p>Lookaround を応用した区切りパターン正規表現の組み立て方を知っておくと便利。</p></li>
<li><p>Python <code class="docutils literal notranslate"><span class="pre">re</span></code> モジュールはゼロ幅マッチでは分割しない？</p></li>
<li><p>Python <code class="docutils literal notranslate"><span class="pre">re</span></code> は主要正規表現エンジンの中で二番目に悪い。</p></li>
<li><p>主要な正規表現エンジンの中で JavaScript は最悪であり、その差は歴然としている。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">++</span></code> は諦めない。</p></li>
<li><p><code class="regexp docutils literal notranslate"><span class="pre">.*?</span></code> は高く付く。</p></li>
<li><p><code class="regexp docutils literal notranslate"><span class="pre">(?R)</span></code> は「正規表現全体をここに貼り付け、元の <code class="regexp docutils literal notranslate"><span class="pre">(?R)</span></code> を置き換える」だ。例えば <code class="regexp docutils literal notranslate"><span class="pre">A(?R)?Z</span></code> は <code class="docutils literal notranslate"><span class="pre">AZ</span></code>, <code class="docutils literal notranslate"><span class="pre">AAZZ</span></code>, <code class="docutils literal notranslate"><span class="pre">AAAZZZ</span></code>, … のすべてを表す。</p></li>
<li><p>再帰正規表現には出口パターンを含めろ。</p></li>
<li><p>必ず失敗するパターンを知っていると便利。</p></li>
<li><p>条件式で lookbehind を使うのは、マッチの前に何らかのテキストがあることを確認したい場合に便利だ。</p></li>
</ul>
</section>
</section>


          </div>
    <div class="related bottom">
      &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="vscode/locale.html" title="Previous">ロケール</a>
        </li>
      
        <li>
          <a href="cygwin.html" title="Next">Cygwin 利用ノート [obsolete]</a>
          &rarr;
        </li>
    </ul>
  </nav>
    </div>

      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="index.html" title="読書ノート Home"><img src="_images/logo.svg"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2024, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>