======================================================================
Screen Ruler
======================================================================

Screen Ruler はマウス操作で画面上の寸法を測るユーティリティーだ。
画像のエッジ検出に基づいてピクセルを素早く計測するようだ。

.. admonition:: 利用者ノート

   ウィンドウのサイズを測るのに利用するのが自然だと思うが、本機能は「線」を検出
   できる箇所同士ならばどこでも長さを測る。何か面白い用途があるかもしれない。

.. attention::

   :doc:`./index` 冒頭の前提条件に留意すること。

.. contents::

稼働方法
======================================================================

まずは設定画面で :guilabel:`スクリーンルーラーを有効にする` スイッチがオンになっ
ていることを確認する。

ショートカットキー :kbd:`Win` + :kbd:`Shift` + :kbd:`M` で起動する。簡単なツール
バーが出現する。そこから計測ツールを選択する。

終了するには :kbd:`Esc` キーを押すか、ツールバーのバツボタンをクリックする。

利用方法
======================================================================

ツールバーの GUI について述べる。ボタンをマウスオーバーするとツールチップが出るので、
そのラベルで説明する：

:guilabel:`Bounds`
    矩形範囲選択をする。マウスクリックしドラッグする。
    :guilabel:`Shift` キーを押しながらドラッグすると、このセッションを終了するま
    で寸法描画が画面から消えなくなる。
:guilabel:`Spacing`
    水平方向と垂直方向の間隔を同時に計測する。基準位置をクリックして、マウスを目
    的場所に移動して使う。
:guilabel:`Horizontal`
    上記計測の水平方向のみ版。
:guilabel:`Vertical`
    上記計測の垂直方向のみ版。
バツボタン
    計測を終了する。:kbd:`Esc` キーを押すか、画面上でクリックするかでも終了する。
    クリック終了すると計測値がクリップボードにコピーされる。

ツールバーのボタンをクリックする代わりに、次のそれぞれのキーバインドでも操作方法
を指定可能だ：
:kbd:`Ctrl` + :kbd:`1`/:kbd:`2`/:kbd:`3`/:kbd:`4`

マウスホイールで上にスクロールすると、ピクセル差の閾値がホイール目盛りあたり 15
単位ずつ増える。測定線を長くすることが実質的にできる。下にスクロールするのはその
逆だ。

設定
======================================================================

.. admonition:: 利用者ノート

   UI のローカライズがいまいちだと思ったら開発に参加しよう。

:guilabel:`アクティブ化のショートカット`
    ツールバーのオンオフを切り替えるキーバインド。
:guilabel:`測定中に画面を継続的に連続キャプチャーする`
    オフならば画面のスナップショットを一枚取得する。
    オンにするとリアルタイム検出を試みる。使用中はシステム資源を大量消費する。
:guilabel:`カラーチャンネルごとのエッジ検出`
    オンにするとカラーチャンネルすべてが互いに許容範囲内の距離にあるかどうかを検
    査する。オフならばカラーチャンネルすべての差の和が許容範囲より小さいかどうか
    を検査する。
:guilabel:`エッジ検出のピクセル許容値`
    0 から 255 までの値。値が高いほどばらつきが増すので、グラデーションや影のよ
    うなものに寛容になる。
:guilabel:`交線上に足を描く`
    セリフのような小さな「足」を追加して視覚的に認識しやすくするかどうか。
:guilabel:`線の色`
    計測を行う線の色を指定する。
