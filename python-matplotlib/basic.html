
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>基本テク &#8212; 読書ノート 1.5dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script async="async" src="../_static/mathjax-v3.js"></script>
    <script src="../_static/mermaid.js"></script>
    <link rel="next" title="応用テク" href="advanced.html" />
    <link rel="prev" title="インストール" href="setup.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="setup.html" title="Previous document">インストール</a>
        </li>
        <li>
          <a href="advanced.html" title="Next document">応用テク</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="id1">
<h1><a class="toc-backref" href="#id12" role="doc-backlink">基本テク</a><a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h1>
<p>本稿では <a class="reference external" href="https://matplotlib.org/">Matplotlib</a> インストール直後にでも実現可能な基本的な操作について記す。基本の手順は、<a class="reference external" href="https://www.numpy.org/">NumPy</a>/<a class="reference external" href="https://www.scipy.org/">SciPy</a> の機能でデータを生成し、その 2D プロットを
Matplotlib を用いて描画することだ。</p>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#id1" id="id12">基本テク</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id13">基本的な関数・メソッドを押さえる</a></p></li>
<li><p><a class="reference internal" href="#figure-axes" id="id14">Figure と Axes の概念を理解する</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id15">テキストを使う</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id16">テキストプロパティ</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id17">日本語のテキストを描画する</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#artists" id="id18">Artists 関連</a></p>
<ul>
<li><p><a class="reference internal" href="#figure-matplotlib-figure-figure" id="id19"><code class="docutils literal notranslate"><span class="pre">Figure</span></code> (<code class="docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code>)</a></p></li>
<li><p><a class="reference internal" href="#axes-matplotlib-axes-axes" id="id20"><code class="docutils literal notranslate"><span class="pre">Axes</span></code> (<code class="docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code>)</a></p></li>
<li><p><a class="reference internal" href="#axis-matplotlib-axis-axis" id="id21"><code class="docutils literal notranslate"><span class="pre">Axis</span></code> (<code class="docutils literal notranslate"><span class="pre">matplotlib.axis.Axis</span></code>)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id6" id="id22">バックエンド</a></p>
<ul>
<li><p><a class="reference internal" href="#id7" id="id23">ユーザーインターフェイスバックエンド</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id24">ハードコピーバックエンド</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id9" id="id25">ヒストグラムを描く</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id26">曲線を描く</a></p>
<ul>
<li><p><a class="reference internal" href="#id11" id="id27">多項式</a></p></li>
<li><p><a class="reference internal" href="#bezier" id="id28">Bézier 曲線</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>特に断らない限り、以降のテキストおよびコード片においては、各種 <code class="docutils literal notranslate"><span class="pre">import</span></code>
を次のようにしたものと仮定している。</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">scipy</span> <span class="k">as</span> <span class="nn">sp</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pylab</span><span class="p">,</span> <span class="n">mlab</span>
</pre></div>
</div>
</div>
<section id="id2">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">基本的な関数・メソッドを押さえる</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<p>下の表を見てからヘルプを当たる。</p>
<p>後で見るように、モジュール <code class="docutils literal notranslate"><span class="pre">matplotlib.pyplot</span></code> の関数の機能は、ある種の「アクティブな」オブジェクトのメソッド呼び出しをするだけに過ぎない。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>関数</p></th>
<th class="head"><p>機能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">plt.plot(...)</span></code></p></td>
<td><p>グラフを描く</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">plt.hist(...)</span></code></p></td>
<td><p>ヒストグラムを描く</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">plt.show(...)</span></code></p></td>
<td><p>イメージを一気に表示</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">plt.savefig(...)</span></code></p></td>
<td><p>イメージをファイルに保存</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">plt.setp(...)</span></code></p></td>
<td><p>プロット線の属性等、描画パラメーターの取得・指定</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">plt.axis(...)</span></code></p></td>
<td><p>ビューポート範囲指定</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">plt.grid(...)</span></code></p></td>
<td><p>グリッド描画をするかしないか指定</p></td>
</tr>
</tbody>
</table>
<p><a class="reference external" href="https://ipython.org/">IPython</a> を利用している場合はおもむろに <code class="docutils literal notranslate"><span class="pre">plt?</span></code> とタイプするのもお勧めだ。
Matplotlib の概要がサインカーブのプロットを表示する簡素な例とともにコンソールに出力する。</p>
</section>
<section id="figure-axes">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Figure と Axes の概念を理解する</a><a class="headerlink" href="#figure-axes" title="Permalink to this heading">¶</a></h2>
<p>Matplotlib には current figure と current axes という概念がある。これを利用して、複数個のグラフをワンシーンに定義できるようだ。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>関数</p></th>
<th class="head"><p>機能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">plt.figure(...)</span></code></p></td>
<td><p>指定の figure をカレントにする</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">plt.subplot(...)</span></code></p></td>
<td><p>指定の axes をカレントにする</p></td>
</tr>
</tbody>
</table>
<dl>
<dt>Figure</dt><dd><p>大抵の本にはいくつかの図がしばしばキャプション付きで載っている。Figure という語は、それに対応するクラスだと解釈したい。図の一つ一つが Figure のオブジェクトになると思えば、個人的にはコードが理解できる。</p>
</dd>
<dt>Axes</dt><dd><p>普通は一つの図にグラフ一つを載せるわけだが、同じようなグラフを並べたものを一つの図としたい場合もある。 Axes という語が意味するのが、そのグラフだと解釈すればよいか。</p>
<p>余談だが MS Word のグラフ API にも Axes というコンセプトがあったと記憶している。</p>
</dd>
</dl>
<p>次の図にふたつの Axes を持たせたひとつの Figure を示す。</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/mpl-axes.png"><img alt="Axes デモ" src="../_images/mpl-axes.png" style="width: 407.5px; height: 307.5px;" /></a>
</figure>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">plt.figure(n)</span></code> で current figure を指定する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plt.subplot(n0n1n2)</span></code> で current axes を指定する。<code class="docutils literal notranslate"><span class="pre">n0</span></code>, <code class="docutils literal notranslate"><span class="pre">n1</span></code>, <code class="docutils literal notranslate"><span class="pre">n2</span></code> がそれぞれ縦方向の区画数、横方向の区画数、「どの区画か」を意味する。</p>
<p><code class="docutils literal notranslate"><span class="pre">n2</span></code> は 1 以上 <code class="docutils literal notranslate"><span class="pre">n1</span> <span class="pre">*</span> <span class="pre">n2</span></code> 以下の値でなければならない。</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">plt</span></code> のプロットコマンドはすべて current axes に作用する。</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="c1"># Make figure-1 active and get it.</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Split the active figure into 2x1 (2 rows and 1 column)</span>
<span class="c1"># and make axes-1 active.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span>

<span class="c1"># ...</span>
<span class="c1"># All plotting commands here are applied to axes-1.</span>

<span class="c1"># Split the active figure into 2x1</span>
<span class="c1"># and make axes-2 active.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">)</span>

<span class="c1"># ...</span>
<span class="c1"># All plotting commands here are applied to axes-2.</span>
</pre></div>
</div>
</li>
<li><p>Matplotlib は figure/axes を扱うスタイルを二つ提供している。</p>
<ul>
<li><p>古典的なステートマシン様式</p>
<p>ユーザーコードがカレントな figure/axes が何であるかを常に意識して、プロットコマンドを呼び出す。コマンドはカレントな figure/axes に対して適用されることになる。</p>
</li>
<li><p>状態とオブジェクトとを関連付けて取り扱うオブジェクト指向プログラミング様式</p>
<p>figure/axes がオブジェクトになっていて、メソッドでプロットコマンドを呼び出す。コマンドは対象となるオブジェクトの管理する figure/axes に対して適用されることになる。</p>
</li>
</ul>
</li>
</ul>
</section>
<section id="id3">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">テキストを使う</a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h2>
<p>当ノートの目的のひとつに、「数式を含むテキストを表示する」ことがある。そのためには、事前に単純ななテキスト描画の方法を学習する必要があるだろう。モジュール
<code class="docutils literal notranslate"><span class="pre">plt</span></code> からテキストに強く関連していそうな機能を表にしてみよう。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>関数</p></th>
<th class="head"><p>機能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">plt.text(...)</span></code></p></td>
<td><p>ビューポート内にテキストを描く</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">plt.xlabel(...)</span></code></p></td>
<td><p>X 軸用キャプション</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">plt.ylabel(...)</span></code></p></td>
<td><p>Y 軸用キャプション</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">plt.title(...)</span></code></p></td>
<td><p>グラフ全体のキャプション</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">plt.text()</span></code> は指定位置にテキストを描画するコマンドと考える。</p></li>
</ul>
<section id="id4">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">テキストプロパティ</a><a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<p>個人的によく使うテキストプロパティを表にまとめておく。各種テキストコマンド関数・メソッドのキーワード引数として指定するのが一つのやり方。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>キーワード</p></th>
<th class="head"><p>意味</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">color</span></code></p></td>
<td><p>テキストの色。</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">family</span></code></p></td>
<td><p>テキストのフォント名。フォント名を直接指定するか <code class="docutils literal notranslate"><span class="pre">&quot;sans-serif&quot;</span></code> 等の予約名を指定する。</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">rotation</span></code></p></td>
<td><p>テキストの流し込む角度。度単位で直接指定する。</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">size</span></code></p></td>
<td><p>フォントサイズをポイントで指定するか <code class="docutils literal notranslate"><span class="pre">&quot;x-large&quot;</span></code> 等の予約名を指定する。</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">stretch</span></code></p></td>
<td><p>0 から 1000 までの値を指定するか <code class="docutils literal notranslate"><span class="pre">&quot;condensed&quot;</span></code> 等の予約名を指定する。</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">style</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;normal&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;italic&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;oblique&quot;</span></code> から選択。</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">weight</span></code></p></td>
<td><p>0 から 1000 までの値を指定するか <code class="docutils literal notranslate"><span class="pre">&quot;bold&quot;</span></code> 等の予約名を指定する。</p></td>
</tr>
</tbody>
</table>
<ul>
<li><p>テキストの基準位置は <code class="docutils literal notranslate"><span class="pre">horizontalalignment</span></code>, <code class="docutils literal notranslate"><span class="pre">verticalalignment</span></code> キーワード引数で指示できる。例えば <cite>x</cite>, <cite>y</cite> 引数をテキストの右下位置としたい場合には次のようにする：</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="s1">&#39;aaaa&#39;</span><span class="p">,</span> <span class="n">verticalalignment</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>複数行テキストの左揃え・中央揃え・右寄せを指定する場合は <code class="docutils literal notranslate"><span class="pre">multialignment</span></code>
キーワードを使用する。</p></li>
</ul>
</section>
<section id="id5">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">日本語のテキストを描画する</a><a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">matplotlib.font_manager.FontProperties</span></code> を明示的に利用する手段を見つけた。</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;japanese_text.py: Demonstrate how to draw Japanese text.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.font_manager</span> <span class="kn">import</span> <span class="n">FontProperties</span>

<span class="n">FONT_PROP</span> <span class="o">=</span> <span class="n">FontProperties</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="sa">r</span><span class="s1">&#39;C:\WINDOWS\Fonts\HGRME.TTC&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;御無礼</span><span class="se">\n</span><span class="s1">一発です&#39;</span><span class="p">,</span>
         <span class="n">fontproperties</span><span class="o">=</span><span class="n">FONT_PROP</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>結果のスクリーンショットは次のようなものだ。</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/mpl-fontprop.png"><img alt="御無礼一発です" src="../_images/mpl-fontprop.png" style="width: 407.5px; height: 307.5px;" /></a>
</figure>
<p>ただしフォントパスをハードコードするような手法は可搬性がない。上記の技法を本番で用いぬことだ。日本語の文字を恒常的に描画させるには、ユーザー設定ファイルでフォントを指定するのが自然だ。</p>
<ul class="simple">
<li><p>Cygwin ならファイル <code class="file docutils literal notranslate"><span class="pre">$HOME/.matplotlib/matplotlib</span></code> を、</p></li>
<li><p>Linux ならファイル <code class="file docutils literal notranslate"><span class="pre">$HOME/.cache/matplotlib/matplotlib</span></code></p></li>
</ul>
<p>を開いて次の項目に日本語に対応したフォントを指定することだ：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">font.family</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">font.sans-serif</span></code>: 先頭に加える。</p></li>
</ul>
<p>なお、設定ファイルのパスは環境設定のノートで述べるような仕組みで決定されるものだ。それは関数 <code class="docutils literal notranslate"><span class="pre">mpl.matplotlib_fname</span></code> に対する <code class="docutils literal notranslate"><span class="pre">help</span></code> で確認できる。</p>
</section>
</section>
<section id="artists">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Artists 関連</a><a class="headerlink" href="#artists" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>primitives: <code class="docutils literal notranslate"><span class="pre">Line2D</span></code>, <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code>, <code class="docutils literal notranslate"><span class="pre">Text</span></code>, <code class="docutils literal notranslate"><span class="pre">AxesImage</span></code>, etc.</p></li>
<li><p>containers: <code class="docutils literal notranslate"><span class="pre">Axis</span></code>, <code class="docutils literal notranslate"><span class="pre">Axes</span></code>, <code class="docutils literal notranslate"><span class="pre">Figure</span></code>, etc.</p></li>
</ul>
<p>コンテナーを攻略していく。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Axes</span></code> はプロッティングエリア。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Subplot</span></code> は <code class="docutils literal notranslate"><span class="pre">Axes</span></code> の特別なもの。コード的にもサブクラスで表現されている。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Patch</span></code> というクラス名は MATLAB から受け継いだ。</p></li>
<li><p>プロパティー一覧は <code class="docutils literal notranslate"><span class="pre">matplotlib.artist.getp</span></code> 関数で確認できる。</p></li>
</ul>
<section id="figure-matplotlib-figure-figure">
<h3><a class="toc-backref" href="#id19" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">Figure</span></code> (<code class="docutils literal notranslate"><span class="pre">matplotlib.figure.Figure</span></code>)</a><a class="headerlink" href="#figure-matplotlib-figure-figure" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Figure</span></code> オブジェクトが “current axes” を管理している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Figure</span></code> は（グラフのものではない）自身の座標系を持っていて、矩形の左下と右上がそれぞれ <code class="docutils literal notranslate"><span class="pre">(0,</span> <span class="pre">0)</span></code>, <code class="docutils literal notranslate"><span class="pre">(1,</span> <span class="pre">1)</span></code> となっている。</p>
<p>変な例だが、画像全体に対角線を一本引くにはこうする。キーワード引数
<code class="docutils literal notranslate"><span class="pre">transform</span></code> の値がいかにもな感じがするだろう。</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;diagonal.py: Demonstrate how to draw a diagonal line which joins</span>
<span class="sd">two opposite corners of the figure.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>

<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">])</span>

<span class="n">line</span> <span class="o">=</span> <span class="n">mpl</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">Line2D</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                        <span class="n">transform</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">transFigure</span><span class="p">,</span> <span class="n">figure</span><span class="o">=</span><span class="n">fig</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">lines</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">line</span><span class="p">])</span>
<span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>結果は次のスクリーンショットのようなものとなる：</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/mpl-figcs.png"><img alt="対角線" src="../_images/mpl-figcs.png" style="width: 407.5px; height: 307.5px;" /></a>
</figure>
</li>
</ul>
</section>
<section id="axes-matplotlib-axes-axes">
<h3><a class="toc-backref" href="#id20" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">Axes</span></code> (<code class="docutils literal notranslate"><span class="pre">matplotlib.axes.Axes</span></code>)</a><a class="headerlink" href="#axes-matplotlib-axes-axes" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Axes</span></code> オブジェクトが図形・テキスト・目盛・グリッド・ラベル各オブジェクトを管理する。まずコンテナーメンバーのうち、馴染みのあるものだけ表にまとめておく。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>メンバー名</p></th>
<th class="head"><p>内容物</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">lines</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">plot</span></code> 等で作成した <code class="docutils literal notranslate"><span class="pre">Line2D</span></code> オブジェクト。</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">patches</span></code></p></td>
<td><p>各種 <code class="docutils literal notranslate"><span class="pre">Patch</span></code> オブジェクト。<code class="docutils literal notranslate"><span class="pre">Ellipse</span></code>, <code class="docutils literal notranslate"><span class="pre">Polygon</span></code>, etc.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">texts</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">text</span></code> や <code class="docutils literal notranslate"><span class="pre">annotate</span></code> で作成した各種テキスト。</p></td>
</tr>
</tbody>
</table>
<p>非コンテナーメンバーも少しだけ押さえておく。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>メンバー名</p></th>
<th class="head"><p>オブジェクト</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">patch</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Axes</span></code> の背景用 <code class="docutils literal notranslate"><span class="pre">Rectangle</span></code> オブジェクト。</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">xaxis</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">XAxis</span></code> オブジェクト。</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">yaxis</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">YAxis</span></code> オブジェクト。</p></td>
</tr>
</tbody>
</table>
</section>
<section id="axis-matplotlib-axis-axis">
<h3><a class="toc-backref" href="#id21" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">Axis</span></code> (<code class="docutils literal notranslate"><span class="pre">matplotlib.axis.Axis</span></code>)</a><a class="headerlink" href="#axis-matplotlib-axis-axis" title="Permalink to this heading">¶</a></h3>
<p>グラフの目盛、グリッド、目盛に付けるラベル等を管理する。<code class="docutils literal notranslate"><span class="pre">Axes</span></code> オブジェクトの
<code class="docutils literal notranslate"><span class="pre">xaxis</span></code> および <code class="docutils literal notranslate"><span class="pre">yaxis</span></code> メンバーでアクセスできる。</p>
<p>使用頻度の高いものだけ表にしておく。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>メソッド</p></th>
<th class="head"><p>機能</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">get_major_ticks</span></code></p></td>
<td><p>目盛 (<code class="docutils literal notranslate"><span class="pre">matplotlib.ticker.Ticker</span></code>) オブジェクトを返す。</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">grid</span></code></p></td>
<td><p>グリッド線を描画するしないを指示。</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>

<span class="c1"># Modify the tickers for Y axis.</span>
<span class="k">for</span> <span class="n">tick</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_ticks</span><span class="p">():</span>
    <span class="n">tick</span><span class="o">.</span><span class="n">tick1On</span> <span class="o">=</span> <span class="kc">False</span>   <span class="c1"># Hide tickers on left side.</span>
    <span class="n">tick</span><span class="o">.</span><span class="n">tick2On</span> <span class="o">=</span> <span class="kc">True</span>    <span class="c1"># Show tickers on right side.</span>
    <span class="n">tick</span><span class="o">.</span><span class="n">label1On</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Hide labels on left side.</span>
    <span class="n">tick</span><span class="o">.</span><span class="n">label2On</span> <span class="o">=</span> <span class="kc">True</span>   <span class="c1"># Show labels on right side.</span>
</pre></div>
</div>
</section>
</section>
<section id="id6">
<h2><a class="toc-backref" href="#id22" role="doc-backlink">バックエンド</a><a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h2>
<p>バックエンドとは、グラフを何が何へ出力するのかを指す概念であると思う。これは公式のドキュメントの記述が完璧なので、何か気になることができたら、素直にそちらを当たるのがよい。</p>
<p>ユーザーインターフェイスバックエンドとハードコピーバックエンドの二種類があり、前者はウィンドウ、後者はファイル形式とおおまかに考えられる。それぞれ
<code class="docutils literal notranslate"><span class="pre">plt.show()</span></code> と <code class="docutils literal notranslate"><span class="pre">plt.savefig()</span></code> の振る舞いに影響する。</p>
<p>ここではコードでのバックエンド設定方法を述べる。設定ファイルによる設定方法は
<a class="reference internal" href="config.html"><span class="doc">環境設定</span></a> を参照。</p>
<section id="id7">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">ユーザーインターフェイスバックエンド</a><a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h3>
<p>例えば PyQt5 の UI でグラフをウィンドウに表示する場合、次のようにするとそうなる。</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;Qt5Agg&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>なお <code class="docutils literal notranslate"><span class="pre">mpl.use</span></code> 関数を呼び出すタイミングは、最初の <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">matplotlib</span></code> の直後がベストのようだ。<a class="reference external" href="https://ipython.org/">IPython</a> のセッションであらかじめ <code class="docutils literal notranslate"><span class="pre">matplotlib.plt</span></code> 等がインポートされていて、同関数が呼び出せない状況に陥っているというのがありがちだ。</p>
<p>上記のコードが機能するには、環境に PyQt5 がインストール済みである必要がある。
<a class="reference internal" href="../python-pyqt5.html"><span class="doc">PyQt5 利用ノート</span></a> 参照。</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/mpl-qt5agg.png"><img alt="Qt5Agg" src="../_images/mpl-qt5agg.png" style="width: 324.0px; height: 279.5px;" /></a>
</figure>
</section>
<section id="id8">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">ハードコピーバックエンド</a><a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h3>
<p>ハードコピーバックエンドのカスタマイズはこのノートの目的の一つ。<code class="docutils literal notranslate"><span class="pre">backend</span></code> の値を <code class="docutils literal notranslate"><span class="pre">PS</span></code>, <code class="docutils literal notranslate"><span class="pre">PDF</span></code>, <code class="docutils literal notranslate"><span class="pre">PNG</span></code>, <code class="docutils literal notranslate"><span class="pre">SVG</span></code> のどれかにしておくと、その名前の形式のファイルを作成することができる。コードで実現するには、次のような手順にしておけばよい。</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;PDF&#39;</span><span class="p">)</span>  <span class="c1"># We want the image as PDF file.</span>

<span class="c1"># ... Here come plotting commands.</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">)</span>  <span class="c1"># File output.pdf will be saved.</span>
</pre></div>
</div>
</section>
</section>
<section id="id9">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">ヒストグラムを描く</a><a class="headerlink" href="#id9" title="Permalink to this heading">¶</a></h2>
<p>ノートを整理していたら未使用のスクリプトを発見したので、説明なしにここにコードを記す。</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;histogram.py: Demonstrate how to show a histogram.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">randn</span>

<span class="n">cur_axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span>
<span class="n">_</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">rects</span> <span class="o">=</span> <span class="n">cur_axes</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">randn</span><span class="p">(</span><span class="mi">1000</span><span class="p">),</span> <span class="mi">50</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">tick</span> <span class="ow">in</span> <span class="n">cur_axes</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_minor_ticks</span><span class="p">():</span>
    <span class="n">tick</span><span class="o">.</span><span class="n">tick1On</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">for</span> <span class="n">tick</span> <span class="ow">in</span> <span class="n">cur_axes</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_ticks</span><span class="p">():</span>
    <span class="n">tick</span><span class="o">.</span><span class="n">gridOn</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">tick</span><span class="o">.</span><span class="n">tick1On</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">tick</span><span class="o">.</span><span class="n">tick2On</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">tick</span><span class="o">.</span><span class="n">label1On</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">tick</span><span class="o">.</span><span class="n">label2On</span> <span class="o">=</span> <span class="kc">True</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>最終的な描画結果は次のようなものとなる。乱数次第で分布が変化するので注意。</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/mpl-histogram.png"><img alt="ヒストグラム" src="../_images/mpl-histogram.png" style="width: 407.5px; height: 307.5px;" /></a>
</figure>
</section>
<section id="id10">
<h2><a class="toc-backref" href="#id26" role="doc-backlink">曲線を描く</a><a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h2>
<p>曲線とは言っても実際は折れ線だ。</p>
<section id="id11">
<h3><a class="toc-backref" href="#id27" role="doc-backlink">多項式</a><a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h3>
<p>実数 <span class="math notranslate nohighlight">\(x\)</span> の多項式 <span class="math notranslate nohighlight">\(f(x)\)</span> について <span class="math notranslate nohighlight">\(y = f(x)\)</span> のグラフを描きたい。次の容量で曲線を定義する。</p>
<ol class="arabic simple">
<li><p>プロットする <span class="math notranslate nohighlight">\(x\)</span> のサンプル点を関数 <code class="docutils literal notranslate"><span class="pre">numpy.arange</span></code> で適宜準備する。やり方を忘れていたら <a class="reference internal" href="../python-numpy/index.html"><span class="doc">NumPy 利用ノート</span></a> を参照。</p></li>
<li><p>多項式 <span class="math notranslate nohighlight">\(f\)</span> を関数 <code class="docutils literal notranslate"><span class="pre">numpy.poly1d</span></code> の戻り値で表現する。</p></li>
<li><p>評価する変数を関数 <code class="docutils literal notranslate"><span class="pre">np.linspace</span></code> で用意する。</p></li>
<li><p>プロットする値を <code class="docutils literal notranslate"><span class="pre">np.array</span></code> オブジェクトに対する broadcasting を利用して一気に得る。</p></li>
</ol>
<p>なお、サンプルコードではさらに曲線に対して接線を引いた。<code class="docutils literal notranslate"><span class="pre">f</span></code> の一次導関数を
<code class="docutils literal notranslate"><span class="pre">f.deriv()</span></code> で得られることを利用する。</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;polynomial.py: Demonstrate how to draw a polynomial curve.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="p">(</span><span class="n">linspace</span><span class="p">,</span> <span class="n">poly1d</span><span class="p">)</span>

<span class="n">cur_fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">cur_axes</span> <span class="o">=</span> <span class="n">cur_fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>

<span class="c1"># pylint: disable=invalid-name</span>
<span class="c1"># Let f be the polynomial whose roots are 0, 1, and 3.</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">poly1d</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">50</span><span class="p">)</span>

<span class="c1"># Draw the curve of y = f(x).</span>
<span class="n">cur_axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

<span class="c1"># Draw tangent lines at x = -1, 0, .., 3.</span>
<span class="n">slope</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">deriv</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>
    <span class="n">cur_axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">slope</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="n">f</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>描画結果は次のようなものとなる。</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/mpl-polynomial.png"><img alt="多項式をプロット" src="../_images/mpl-polynomial.png" style="width: 407.5px; height: 307.5px;" /></a>
</figure>
</section>
<section id="bezier">
<h3><a class="toc-backref" href="#id28" role="doc-backlink">Bézier 曲線</a><a class="headerlink" href="#bezier" title="Permalink to this heading">¶</a></h3>
<p>本当は B-Spline 曲線を描画したいのだが、調べてみると Matplotlib では Bézier 曲線が限界のようだ。</p>
<p>手順はこういう感じのようだ：</p>
<ol class="arabic simple">
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">matplotlib.path.Path</span></code> のオブジェクトを作成する。この引数として、Bézier 曲線の制御点リストと「打点命令」のリストを渡す。</p></li>
<li><p>そのパスオブジェクトを引数として、クラス <code class="docutils literal notranslate"><span class="pre">matplotlib.patches.PathPatch</span></code> のオブジェクトを作成する。</p></li>
<li><p>そのパッチオブジェクトを対象の <code class="docutils literal notranslate"><span class="pre">axes</span></code> オブジェクトに <code class="docutils literal notranslate"><span class="pre">add_patch</span></code> する。</p></li>
</ol>
<p>Matplotlib は制御点列を与えて Bézier 曲線を定義する流儀のようだ。</p>
<p>まずは簡単な例を。最小の手間で二次の Bézier 曲線（単なる放物線）を定義することを考える。<code class="docutils literal notranslate"><span class="pre">CURVE3</span></code> というタイプの曲線は、制御点を三つ与えることで二次の Bézier
曲線を表現できる。<code class="docutils literal notranslate"><span class="pre">CURVE3</span></code> ベースの Bézier 曲線の特徴は次のとおり：</p>
<ul class="simple">
<li><p>最初と最後の制御点は、放物線の始点と終点にそれぞれ一致する。</p></li>
<li><p>中間の制御点は、放物線の両端点それぞれの接線の交点と一致する。</p></li>
<li><p>よって、出来上がりの曲線形状が把握できる。</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Path</span></code> オブジェクト構築は次のようになる：</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
<span class="sd">&quot;&quot;&quot;bezier.py: Demonstrate how to draw Bezier curves.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="k">as</span> <span class="nn">mpl</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.path</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">patches</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># Unset the face color.</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;patch.facecolor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>

<span class="c1"># Define a quadric Bezier curve as path1.</span>
<span class="n">verts1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">],</span> <span class="p">[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">],</span> <span class="p">[</span><span class="mf">4.</span><span class="p">,</span> <span class="mf">0.</span><span class="p">]])</span>
<span class="n">codes1</span> <span class="o">=</span> <span class="p">[</span><span class="n">Path</span><span class="o">.</span><span class="n">MOVETO</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">CURVE3</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">CURVE3</span><span class="p">]</span>

<span class="n">path1</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">verts1</span><span class="p">,</span> <span class="n">codes1</span><span class="p">)</span>
<span class="n">patch1</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">PathPatch</span><span class="p">(</span><span class="n">path1</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch1</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">verts1</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">verts1</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># Define a cubic Bezier curve as path2.</span>
</pre></div>
</div>
<p>もうひとつ例を。ドロー系アプリでもよく見かける 3 次の Bézier 曲線を定義する。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CURVE4</span></code> 命令で制御点を指示する。</p></li>
<li><p>最初と最後の制御点は、曲線の始点と終点にそれぞれ一致する。</p></li>
<li><p>最初の制御点とその次の制御点を結ぶ直線が、曲線の始点での接線に一致する。また、最後の制御点とその前の制御点を結ぶ直線が、曲線の終点での接線に一致する。</p></li>
<li><p>曲線全体は、制御点列からなる多角形の内部に位置する。</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">Path</span></code> オブジェクト構築は次のようになる：</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">codes2</span> <span class="o">=</span> <span class="p">[</span><span class="n">Path</span><span class="o">.</span><span class="n">MOVETO</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">CURVE4</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">CURVE4</span><span class="p">,</span> <span class="n">Path</span><span class="o">.</span><span class="n">CURVE4</span><span class="p">,]</span>

<span class="n">path2</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">verts2</span><span class="p">,</span> <span class="n">codes2</span><span class="p">)</span>
<span class="n">patch2</span> <span class="o">=</span> <span class="n">patches</span><span class="o">.</span><span class="n">PathPatch</span><span class="p">(</span><span class="n">path2</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">add_patch</span><span class="p">(</span><span class="n">patch2</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">verts2</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">verts2</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">4.</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>最終的な描画結果は次のようなものとなる：</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/mpl-bezier.png"><img alt="Bézier 曲線をプロット" src="../_images/mpl-bezier.png" style="width: 407.5px; height: 307.5px;" /></a>
</figure>
</section>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="setup.html" title="Previous document">インストール</a>
        </li>
        <li>
          <a href="advanced.html" title="Next document">応用テク</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">読書ノート</a></h1>



<p class="blurb">個人的な読書、学習、研究ノート。</p>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mathseminar72.html">数学 100 の発見 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gamma95/index.html">オブジェクト指向における再利用のためのデザインパターン改訂版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hunt00/index.html">達人プログラマー 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sutter00.html">Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alexandrescu01/index.html">Modern C++ Design 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meyers01.html">Effective STL 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sutter02.html">More Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../joel04/index.html">Joel on Software 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graham04.html">ハッカーと画家 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../angel05/index.html">OpenGL: A Primer Second Edition 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../yamamoto05/index.html">入門 xyzzy 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../newham05/index.html">入門 bash 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tsuboi05/index.html">幾何学 I 多様体入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subramaniam06.html">アジャイルプラクティス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asaoka06.html">SE・製造技術者・理工系学生のための技術文書の作り方・書き方 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../levin06/index.html">Shaping Functions 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tsuboi08/index.html">幾何学 III 微分形式 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../loeliger09.html">実用 Git 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../griffiths10.html">プログラミング C# 第 6 版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../onodera10.html">ORACLE MASTER Bronze 11g SQL 基礎 I 必修教本 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosoda10/index.html">Python 入門［２＆３対応］読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nishiyama12/index.html">幾何学と不変量 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../omg15/index.html">Unified Modeling Language 2.5 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gorelick14.html">ハイパフォーマンス Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stroustrup14.html">C++ のエッセンス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stepanov15.html">その数式、プログラムできますか？ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../khronos15/index.html">WebGL Specification 1.0 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vivo15/index.html">The Book of Shaders 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../saha16.html">Python からはじめる数学入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slatkin16.html">Effective Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guntheroth16.html">Optimized C++ 下読みノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speinellis17.html">Effective Debugging 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bancila18.html">Modern C++ チャレンジ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../haverbeke18/index.html">Eloquent JavaScript 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../khronos18/index.html">OpenGL Shading Language 4.60 Specification 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kantor22/index.html">The Modern JavaScript Tutorial 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ou23/index.html">Modern C++ Tutorial: C++ 11/14/17/20 On the Fly 読書ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2014.html">ノート準備中書籍群 2014 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2015.html">ノート準備中書籍群 2015 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2016.html">ノート準備中書籍群 2016 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2017.html">ノート準備中書籍群 2017 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2018.html">ノート準備中書籍群 2018 年編</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bash-v2.html">What’s New In Bash 2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bash-v3.html">What’s New In Bash 3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bash-v4.html">What’s New In Bash 4 ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cpp11/index.html">What’s New In C++11 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp14/index.html">What’s New In C++14 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp17/index.html">What’s New In C++17 ノート</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../python-3.0.html">What’s New In Python 3.0 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.1.html">What’s New In Python 3.1 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.2.html">What’s New In Python 3.2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.3.html">What’s New In Python 3.3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.4.html">What’s New In Python 3.4 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.5.html">What’s New In Python 3.5 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.6.html">What’s New In Python 3.6 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.7.html">What’s New In Python 3.7 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.8.html">What’s New In Python 3.8 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.9.html">What’s New In Python 3.9 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.10.html">What’s New In Python 3.10 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pip.html">pip 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pylint.html">Pylint 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-docutils/index.html">Docutils 解読ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-restview.html">Restview 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-nose.html">Nose 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-ipython.html">IPython 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-jupyter.html">Jupyter 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-numpy/index.html">NumPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-scipy/index.html">SciPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-sympy/index.html">SymPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-apgl.html">Another Python Graph Library (APGL) 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pil.html">PIL 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pillow.html">Pillow 利用ノート</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Matplotlib 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-networkx/index.html">NetworkX 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-quaternion.html">Quaternion 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-jinja2.html">Jinja2 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pygments.html">Pygments 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-bs4.html">BeautifulSoup4 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-selenium.html">Selenium 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-scrapy.html">Scrapy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-twitter/index.html">Python Twitter Tools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-isbn-hyphenate.html">isbn-hyphenate 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pyopengl/index.html">PyOpenGL 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pyqt4.html">PyQt4 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pyqt5.html">PyQt5 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pandas/index.html">Pandas 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pygame.html">Pygame 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pytube.html">Pytube 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../youtube-dl.html">youtube-dl 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-py2exe.html">Py2exe 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-upgrade.html">Python 移行ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-miniconda.html">Miniconda 利用ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../freeware.html">Windows 用フリーウェア 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../google-ime.html">Google 日本語入力利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deepl-translator.html">DeepL Translator 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../winget.html">Windows Package Manager CLI 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powertoys/index.html">Microsoft PowerToys 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../windows-terminal.html">Windows Terminal 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wsl.html">Windows Subsystem for Linux 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vscode/index.html">Visual Studio Code 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cygwin.html">Cygwin 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chrome.html">Chrome DevTools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git/index.html">Git 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter.html">Twitter 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inkscape/index.html">Inkscape 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ffmpeg/index.html">FFmpeg 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathjax.html">MathJax 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../javascript-mermaid/index.html">Mermaid 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../css-selector.html">CSS セレクター学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xpath.html">XPath 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hxutils.html">HTML-XML-utils 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webgl.html">WebGL 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pandoc.html">Pandoc 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zoom.html">Zoom Cloud Meetings 利用ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../milestone09/index.html">ラジルギノア プレイノート</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Matplotlib 利用ノート</a><ul>
      <li>Previous: <a href="setup.html" title="previous chapter">インストール</a></li>
      <li>Next: <a href="advanced.html" title="next chapter">応用テク</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="../_static/logos.png"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2023, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>