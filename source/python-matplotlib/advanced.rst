======================================================================
応用テク
======================================================================
本稿では TeX 表記の実現や 3D プロット等、比較的高度な Matplotlib_ の機能を利用する。

.. contents::

.. todo::

   3D プロットの覚え書きを持ってくる。

TeX 表現
======================================================================
Matplotlib のプロットに TeX 書式の画像化を埋め込む方法を説明する。

Matplotlib のすべてのテキスト API は TeX の数式を受け付けてくれる。
文字列内の ``$`` で囲まれた部分が TeX 表現と認識されるようだ。
何も工夫しないでいると文字列がバックスラッシュの嵐になるので、
Python のコードで raw string 形式で数式を含む文字列を定義するのが吉だろう。

次のスクリプトは Matplotlib のサンプルコードを一部改変したものである。

.. literalinclude:: /_sample/mpl/tex.py
   :language: python3

実行結果は次のような画像の表示となる（良いグラフとはとても言えない）。
乱数を利用しているヒストグラム部分は毎回絵が変わる。
図の凡例およびキャプション後半に注意して欲しい。ギリシア文字を含む数式が見える。

* 凡例内の数式は関数 ``plt.plot`` のキーワード引数 ``label`` の値の TeX と対応している。
* 図のキャプションのギリシア文字は、関数 ``plt.title`` に渡す値の TeX と対応している。

.. image:: /_static/mpl-tex.png
   :scale: 50%

.. include:: /_include/python-refs-sci.txt
