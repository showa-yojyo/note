======================================================================
What's New In Python 3.5 ノート
======================================================================
What's New In Python 3.5 を読んで、個人的に関心のある項目に注釈を付けていく。

.. contents:: ノート目次

新規機能
======================================================================

* コルーチン関数。これは一から学ばないとダメだ。
* 行列乗算演算子 ``@`` が追加。NumPy 利用者がうれしい。
* 関数呼び出しにおける unpacking が複数の引数で行えるようになった。

新規モジュール
======================================================================
興味をそそるものがないので省略する。

変更モジュール
======================================================================
* ``argparse``: ``ArgumentParser`` に ``allow_abbrev`` オプションが追加。
  長い名前のオプションを省略指定することを認めるかどうか。

* ``asyncio``: 変更点をいちいち見ていくよりも、このモジュールを一から学ぶのが筋だろう。

* ``collections``

  * ``OrderedDict`` のビューが ``reserved()`` に対応した。
  * ``deque`` にいくつかのメソッド、演算子が追加されたことにより、
    シーケンスとしての操作性が ``list`` 程度に向上した。

* ``concurrent.futures``: 変更があったが、今からモジュールを一から学ぶつもり。

* ``configparser``: ``ConfigParser`` に ``converter`` 引数が追加された。
  これは構成項目の文字列の解析をする関数の ``dict`` を指定するために利用する。

* ``contextlib``: ``redirect_stderr()`` 追加。
  ``redirect_stdout()`` は既に提供済み。

* ``csv``: ``writerows()`` が iterator 一般を入力として受け取れるようになった。

* ``enum``: ``Enum`` が引数 ``start`` を追加。最初の列挙項目に対応する整数値を指定するのに用いる。

* ``glob``: サブディレクトリーの再帰的検索を実装した。
  これを ``**`` を指定することで実現する。

* ``heapq``: ``merge()`` 内の要素比較のための ``key`` 引数が追加。
* ``json``

  * ``tool`` CUI が入力 JSON オブジェクトのキーの順番を維持するようになった。
  * デコーダーの送出する例外が ``ValueError`` から ``JSONDecodeError`` に変更となった。

* ``logging``: すべてのログ出力関数が ``exc_info`` 引数を追加した。
  例外ハンドル時に捕捉した例外オブジェクトを引数として入力するのが自然な使い方だ。

* ``math``

  * ``inf``, ``nun`` が追加。
  * ``isclose()`` が追加。浮動小数点数同士を比較する関数。NumPy のそれの簡易版か。
  * ``gcd()`` が追加。引数に 0 を渡したときの戻り値が 0 になることに注意したい。

* ``operator``: ``matmul``, ``imatmul`` が追加。行列乗算演算子に対応する。

* ``os``

  * ``scandir()`` 関数が追加。ファイルタイプや属性情報も必要とする状況では
    ``listdir()`` 関数を使うよりも効率的。

  * ``path.commonpath()`` 関数が追加。
    指定した複数のファイルパスに関する最長共通部分ファイルパスを求める。

* ``pathlib``

  * ``Path.samefile()`` は二つのファイルパスが等価かどうかを返す。
  * ``Path.mkdir()`` に引数 ``exists_ok`` が追加。UNIX の ``mkdir -p`` に相当する。 
  * ``Path.expanduser()`` が追加。``~`` をユーザー名に置換する。
  * ``Path.home()`` が追加。静的メソッドだ。

* ``re``

  * 固定長のグループに対する参照と条件付き参照が後読み宣言の中でも指定できるようになった。
  * 正規表現パターン中のキャプチャーグループ数の上限が撤廃された。
  * ``sub()``, ``subs()`` でマッチしないグループは例外を送出するのではなく、
    空文字列で置換されるようになった。
  * ``error`` オブジェクトの属性が増えた。正規表現のどこがおかしいのかを検討するのに役立つ。

* ``subprocess``: ``run()`` 追加。

非推奨
======================================================================
* ``async``, ``await`` が予約語になる予定があるので、識別子として使わない。
* ``StopIteration`` を generator 内で送出すること。いずれ ``RuntimeError`` になる。

削除
======================================================================
* pyo ファイル廃止

変更点
======================================================================
* ``re.split()`` に空文字列にマッチするパターンを渡すと警告。
* ``str.startswith()``, ``str.endswith()`` に変なモノを渡したときに
  ``True`` を返していたが、そうではなくなった。
