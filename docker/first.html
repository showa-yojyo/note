<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Docker 導入時手順 &#8212; 読書ノート 1.6dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=c9b0a06a" />
    <script src="../_static/documentation_options.js?v=4354bf25"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/mermaid.js?v=578dbed1"></script>
    <link rel="next" title="Docker Docs 読書ノート" href="docs.html" />
    <link rel="prev" title="Docker 利用ノート" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
    <div class="related top">
      &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="index.html" title="Previous">Docker 利用ノート</a>
        </li>
      
        <li>
          <a href="docs.html" title="Next">Docker Docs 読書ノート</a>
          &rarr;
        </li>
    </ul>
  </nav>
    </div>


          <div class="body" role="main">
            
  <section id="docker">
<h1>Docker 導入時手順<a class="headerlink" href="#docker" title="Link to this heading">¶</a></h1>
<p>遅ればせながら Docker を習う。WSL2 Ubuntu 22.04.4 LTS に Docker Engine をインストールして学習を進める。Docker Desktop は当面の間導入しないでおく。今のところ、その選択による不都合は <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">init</span></code> が使えないことと、Kubernetes との連携が実現できなくなることくらいしかない。</p>
<nav class="contents local" id="id1">
<p class="topic-title">本章見出し</p>
<ul class="simple">
<li><p><a class="reference internal" href="#id2" id="id7">以前の Docker 環境の残滓を一掃する</a></p></li>
<li><p><a class="reference internal" href="#docker-engine" id="id8">Docker Engine をインストールする</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id9">Docker Hub のアカウントを開設する</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id10">チュートリアル実施を中心に Docker Docs を読む</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id11">さらに修行する</a></p></li>
</ul>
</nav>
<section id="id2">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">以前の Docker 環境の残滓を一掃する</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p>環境が完全にクリーンである場合にはここを飛ばしてインストール工程を読め。以前、何かの Docker チュートリアルをやって上手くいかなかった場合にはこの工程が外せない。</p>
<p><a class="reference external" href="https://docs.docker.com/engine/install/ubuntu/">Install Docker Engine on Ubuntu</a> 文書内の Uninstall old
versions 節および Uninstall Docker Engine 節の記述に従い、ゴミを掃除する。</p>
<ul class="simple">
<li><p>列挙されている非公式パッケージを <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">remove</span></code> でアンインストールする。</p></li>
<li><p>それ以外は <code class="docutils literal notranslate"><span class="pre">suto</span> <span class="pre">apt</span> <span class="pre">purge</span></code> でアンインストールする。</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">/var/lib/docker/</span></code> および <code class="file docutils literal notranslate"><span class="pre">/var/lib/containerd</span></code> をディレクトリーごと削除する。</p></li>
</ul>
<p>さらにユーザー設定ファイルも削除するべきだと考えられる。ディレクトリー
<code class="file docutils literal notranslate"><span class="pre">~/.docker</span></code> があれば、丸ごと削除する。後ほど XDG Base Directory 対応と同時に設定ファイルを作り直す想定だ。</p>
</section>
<section id="docker-engine">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Docker Engine をインストールする</a><a class="headerlink" href="#docker-engine" title="Link to this heading">¶</a></h2>
<p>同ページ内 Install using the <strong class="command">apt</strong> repository 節の記述に従う。</p>
<p>初めて Docker Engine をインストールする前に Docker リポジトリーを仕掛ける必要がある。著名なデータベース等のインストール手順と共通するコマンドが含まれており、慌てることはない。急所は次の二つのファイルを準備することだ：</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">/etc/apt/keyrings/docker.asc</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">/etc/apt/sources.list.d/docker.list</span></code></p></li>
</ul>
<p>それが済んだら <code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">apt</span> <span class="pre">install</span> <span class="pre">docker-ce</span></code> を実行。関連パッケージも同時にインストール。</p>
<p>Docker の世界における Hello world は次のコマンドを実行することのようだ：</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">Docker Engine 動作確認コマンド</span><a class="headerlink" href="#id6" title="Link to this code">¶</a></div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sudo<span class="w"> </span>docker<span class="w"> </span>run<span class="w"> </span>hello-world
</pre></div>
</div>
</div>
<p>以上が完了すれば、チュートリアルをひたすら消化して Docker を体で覚える段階だ。</p>
<p class="rubric">もう一工夫</p>
<p><a class="reference external" href="https://docs.docker.com/engine/install/linux-postinstall/">Linux post-installation steps for Docker Engine</a> に記述されていることをいくつか実施しておくとよい。</p>
<ul class="simple">
<li><p><strong class="command">sudo</strong> なしで Docker コマンドを実行可能にする</p></li>
<li><p><strong class="command">systemd</strong> を使って Docker を起動するように構成する</p></li>
<li><p>ストレージを無駄にせぬようにログファイル出力を構成する（このノートで後述）</p></li>
</ul>
</section>
<section id="id3">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Docker Hub のアカウントを開設する</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h2>
<p>すぐ後に述べる <a class="reference internal" href="docs.html#anchor-docker-started"><span class="std std-ref">Getting started</span></a> で初めて必要になるのが普通だと考えられる。GitHub と同様に、</p>
<ul class="simple">
<li><p>無料アカウントを作成する</p></li>
<li><p>二因子認証を構成する</p></li>
</ul>
<p>ところまで行えば十分だ。</p>
</section>
<section id="id4">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">チュートリアル実施を中心に Docker Docs を読む</a><a class="headerlink" href="#id4" title="Link to this heading">¶</a></h2>
<p><a class="reference internal" href="docs.html"><span class="doc">Docker Docs 読書ノート</span></a></p>
</section>
<section id="id5">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">さらに修行する</a><a class="headerlink" href="#id5" title="Link to this heading">¶</a></h2>
<p>チュートリアルをやり続けたい場合は <a class="reference internal" href="reference.html"><span class="doc">資料一覧</span></a> にある記事に行くといい。</p>
</section>
</section>


          </div>
    <div class="related bottom">
      &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="index.html" title="Previous">Docker 利用ノート</a>
        </li>
      
        <li>
          <a href="docs.html" title="Next">Docker Docs 読書ノート</a>
          &rarr;
        </li>
    </ul>
  </nav>
    </div>

      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="../index.html" title="読書ノート Home"><img src="../_images/logo.svg"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2024, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>