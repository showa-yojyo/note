<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Deployment &#8212; 読書ノート 1.5dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/mermaid.js"></script>
    <link rel="next" title="Flowcharts - Basic Syntax" href="flowchart.html" />
    <link rel="prev" title="Mermaid 利用ノート" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="index.html" title="Previous document">Mermaid 利用ノート</a>
        </li>
        <li>
          <a href="flowchart.html" title="Next document">Flowcharts - Basic Syntax</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="deployment">
<h1><a class="toc-backref" href="#id1" role="doc-backlink">Deployment</a><a class="headerlink" href="#deployment" title="Permalink to this heading">¶</a></h1>
<p>Mermaid v10 でモジュールのインポートと初期化を一気に行えるようになったようだ。ノートを少しでも更新しておく。</p>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#deployment" id="id1">Deployment</a></p>
<ul>
<li><p><a class="reference internal" href="#four-ways-of-using-mermaid" id="id2">Four ways of using mermaid</a></p></li>
<li><p><a class="reference internal" href="#using-the-live-editor" id="id3">1. Using the Live Editor</a></p></li>
<li><p><a class="reference internal" href="#using-mermaid-plugins" id="id4">2. Using Mermaid Plugins</a></p></li>
<li><p><a class="reference internal" href="#calling-the-javascript-api" id="id5">3. Calling the Javascript API</a></p></li>
<li><p><a class="reference internal" href="#adding-mermaid-as-a-dependency" id="id6">4. Adding Mermaid as a dependency</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="four-ways-of-using-mermaid">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Four ways of using mermaid</a><a class="headerlink" href="#four-ways-of-using-mermaid" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><p>Using the Mermaid Live Editor at <a class="reference external" href="https://mermaid.live">mermaid.live</a>.</p></li>
<li><p>Using <a class="reference external" href="https://mermaid.js.org/ecosystem/integrations.html">mermaid plugins</a>
with programs you are familiar with.</p></li>
<li><p>Calling the Mermaid Javascript API.</p></li>
<li><p>Deploying Mermaid as a dependency.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is our recommendation that you review all approaches, and choose the one
that is best for your project.</p>
</div>
</div></blockquote>
<p>この方法群のうち、2. と 3. を習得したい。1. だけでは自作の HTML ページに図式を表示させることができない。4. の重要度がよくわからない。</p>
</section>
<section id="using-the-live-editor">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">1. Using the Live Editor</a><a class="headerlink" href="#using-the-live-editor" title="Permalink to this heading">¶</a></h2>
<p>この節ではライブエディターの特徴が述べられている。</p>
<blockquote>
<div><p>Available at <a class="reference external" href="https://mermaid.live">mermaid.live</a></p>
</div></blockquote>
<p><span class="guilabel">Code</span> セクションでは、生の Mermaid コードを書いたり編集したりすることができ、その横にあるパネル <span class="guilabel">Preview</span> で描画結果を即座に確認できる。それから <span class="guilabel">Configuration</span> セクションは、図式の外観や動作を変更するためにある。手許に Mermaid コードをチェックする環境がまったくない場合には上記ウェブページが有用だ。キーワード補完機能はここにしかないかもしれない。</p>
<div class="mermaid">
            graph TB
    A[Enter Chart Definition]
    B[Preview]
    C{Decide}
    D[Keep]
    E[Edit Definition]
    F[Save Image and Code]

    A --&gt; B --&gt; C
    C --&gt; D --&gt; F --&gt; B
    C --&gt; E --&gt; B
        </div><section id="editing-history">
<h3>Editing History<a class="headerlink" href="#editing-history" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p>Your code will be autosaved every minute into the Timeline tab of History which
shows the most recent 30 items.</p>
<p>You can manually save code by clicking the Save icon in the History section. It
can also be accessed in the Saved tab. This is stored in the browser storage
only.</p>
</div></blockquote>
<p>実際にグラフを編集してから <span class="guilabel">Timeline</span> を確認すると、今実行したばかりのコマンド名がよくわからない。</p>
</section>
<section id="saving-a-diagram">
<h3>Saving a Diagram<a class="headerlink" href="#saving-a-diagram" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p>You may choose any of the methods below, to save it</p>
<p>We recommend that you save your diagram code on top of any method you choose,
in order to make edits and modifications further down the line.</p>
</div></blockquote>
<p>開発陣の言うことは正しい。出力結果よりも入力であるテキストのほうが重要だ。</p>
</section>
<section id="editing-your-diagrams">
<h3>Editing your diagrams<a class="headerlink" href="#editing-your-diagrams" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p>Editing is as easy as pasting your Diagram code, into the <span class="guilabel">code</span>
section of the <code class="docutils literal notranslate"><span class="pre">Live</span> <span class="pre">Editor</span></code>.</p>
</div></blockquote>
</section>
<section id="loading-from-gists">
<h3>Loading from Gists<a class="headerlink" href="#loading-from-gists" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p>The Gist you create should have a code.mmd file and optionally a
<code class="file docutils literal notranslate"><span class="pre">config.json</span></code>.</p>
</div></blockquote>
<p>まずは Gist に新しくページ（実体はリポジトリー）を追加して、<a class="reference external" href="https://gist.github.com/sidharthv96/6268a23e673a533dcb198f241fd7012a">例</a> のような構成にする。Mermaid 書式のテキストファイルと、必要ならば <code class="file docutils literal notranslate"><span class="pre">config.json</span></code>
を添える。あとは Live Editor の UI を見れば指定方法は理解できる。</p>
</section>
</section>
<section id="using-mermaid-plugins">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">2. Using Mermaid Plugins</a><a class="headerlink" href="#using-mermaid-plugins" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p>You can generate mermaid diagrams from within popular applications using
plug-ins. It can be done in the same way, you would use the Live Editor.</p>
</div></blockquote>
<p>個人的に注目しているのは次のものだ：</p>
<dl class="simple">
<dt>VS Code <a class="reference external" href="https://marketplace.visualstudio.com/items?itemName=bierner.markdown-mermaid">Markdown Preview Mermaid Support</a></dt><dd><p>当ノートもこれを利用して編集している。</p>
</dd>
<dt>Sphinx <a class="reference external" href="https://github.com/mgaitan/sphinxcontrib-mermaid">sphinxcontrib-mermaid</a></dt><dd><p>読者ノート用に確認する。</p>
</dd>
</dl>
<p>なお、Jekyll ブログの Markdown ファイルから Mermaid を利用するにはプラグインではなく、HTML テンプレートを上書きして次の節の手法に帰着させることにする。</p>
</section>
<section id="calling-the-javascript-api">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">3. Calling the Javascript API</a><a class="headerlink" href="#calling-the-javascript-api" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><p>You will also need a text editing tool like Notepad++ to generate a .html file.
It is then deployed by a web browser (such as Firefox, Chrome, Safari, but not
Internet Explorer).</p>
<p>The API works by pulling rendering instructions from the source
<code class="file docutils literal notranslate"><span class="pre">mermaid.js</span></code> in order to render diagrams on the page.</p>
</div></blockquote>
<p>テキストエディターで HTML ファイルを編集する能力と JavaScript の取り扱いを理解していれば十分だろう。</p>
<section id="requirements-for-the-mermaid-api">
<h3>Requirements for the Mermaid API<a class="headerlink" href="#requirements-for-the-mermaid-api" title="Permalink to this heading">¶</a></h3>
<p>自分の HTML ファイルに Mermaid を組み込むために必要な事項が何であるかを見ていく。</p>
<blockquote>
<div><p>When writing the .html file, we give two instructions inside the html code to
the web browser:</p>
<ol class="loweralpha simple">
<li><p>The mermaid code for the diagram we want to create.</p></li>
<li><p>The importing of mermaid library through the <code class="file docutils literal notranslate"><span class="pre">mermaid.esm.mjs</span></code> or
<code class="file docutils literal notranslate"><span class="pre">mermaid.esm.min.mjs</span></code> and the <code class="docutils literal notranslate"><span class="pre">mermaid.initialize()</span></code> call, which
dictates the appearance of diagrams and also starts the rendering process.</p></li>
</ol>
</div></blockquote>
<p>これは Mermaid v10.1.0 での記載だ。図式の記述と描画の初期化を与えるのだ。</p>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>The embedded mermaid diagram definition inside a <code class="docutils literal notranslate"><span class="pre">&lt;pre</span> <span class="pre">class=&quot;mermaid&quot;&gt;</span></code>:</p></li>
</ol>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  Here is a mermaid diagram:
  <span class="p">&lt;</span><span class="nt">pre</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mermaid&quot;</span><span class="p">&gt;</span>
        graph TD
        A[Client] --&gt; B[Load Balancer]
        B --&gt; C[Server01]
        B --&gt; D[Server02]
  <span class="p">&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>Notes: Every Mermaid chart/graph/diagram definition, should have separate
<code class="docutils literal notranslate"><span class="pre">&lt;pre&gt;</span></code> tags.</p>
</div></blockquote>
<p>Mermaid 図式オブジェクト一つに対して <code class="docutils literal notranslate"><span class="pre">&lt;pre&gt;</span></code> タグ一つを対応させるように HTML
を記述する。</p>
<blockquote>
<div><ol class="loweralpha simple" start="2">
<li><p>The import of mermaid and the <code class="docutils literal notranslate"><span class="pre">mermaid.initialize()</span></code> call.</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">mermaid.initialize()</span></code> call takes all the definitions contained in all the
<code class="docutils literal notranslate"><span class="pre">&lt;pre</span> <span class="pre">class=&quot;mermaid&quot;&gt;</span></code> tags that it finds in the html body and renders them
into diagrams. Example:</p>
</div></blockquote>
<p>Jekyll で Markdown の三重バッククオートによる <code class="docutils literal notranslate"><span class="pre">mermaid</span></code> ブロックを定義すると、
Jekyll がこのブロックコードをクラスが <code class="docutils literal notranslate"><span class="pre">mermaid</span></code> である <code class="docutils literal notranslate"><span class="pre">div</span></code> タグに変換するものと期待する。Sphinx のプラグインでも同様の挙動をする。</p>
<blockquote>
<div><ol class="loweralpha simple" start="3">
<li><p>The <code class="docutils literal notranslate"><span class="pre">mermaid.initialize()</span></code> call.</p></li>
</ol>
<p><code class="docutils literal notranslate"><span class="pre">mermaid.initialize()</span></code> call takes all the definitions contained in all the
<code class="docutils literal notranslate"><span class="pre">&lt;div</span> <span class="pre">class=&quot;mermaid&quot;&gt;</span></code> tags that it finds in the html body and renders them
into diagrams. Example:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;module&quot;</span><span class="p">&gt;</span>
<span class="w">    </span><span class="k">import</span><span class="w"> </span><span class="nx">mermaid</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">mermaid</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span><span class="w"> </span><span class="nx">startOnLoad</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">});</span>
<span class="w">  </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Rendering in Mermaid is initialized by <code class="docutils literal notranslate"><span class="pre">mermaid.initialize()</span></code> call.
However, doing the opposite lets you control when it starts looking for
<code class="docutils literal notranslate"><span class="pre">&lt;pre&gt;</span></code> tags inside the web page with <code class="docutils literal notranslate"><span class="pre">mermaid.initialize()</span></code>. This is
useful when you think that not all <code class="docutils literal notranslate"><span class="pre">&lt;pre&gt;</span></code> tags may have loaded on the
execution of <code class="file docutils literal notranslate"><span class="pre">mermaid.esm.min.mjs</span></code> file.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">startOnLoad</span></code> is one of the parameters that can be defined by
<code class="docutils literal notranslate"><span class="pre">mermaid.initialize()</span></code></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>startOnLoad</p></td>
<td><p>Toggle for Rendering upon loading</p></td>
<td><p>Boolean</p></td>
<td><p>true, false</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>おそらく <code class="docutils literal notranslate"><span class="pre">windows.onload</span></code> のイベントハンドラーに Mermaid ブロックを図式化する処理を追加するような指示を表している。</p>
<div class="admonition- admonition">
<p class="admonition-title">学習者ノート</p>
<p>Sphinx で sphinxcontrib-mermaid プラグインを有効にする場合の例をここに示す。</p>
<p><code class="file docutils literal notranslate"><span class="pre">conf.py</span></code> で例えばこのように定義する：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">mermaid_version</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="n">mermaid_init_js</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
<span class="n">html_js_files</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;mermaid.js&#39;</span><span class="p">,</span>
    <span class="c1"># etc.</span>
<span class="p">]</span>
</pre></div>
</div>
<p><code class="file docutils literal notranslate"><span class="pre">_static</span></code> ディレクトリーにスクリプトファイル <code class="file docutils literal notranslate"><span class="pre">mermaid.js</span></code> を次のような内容で保存する（よりスマートなコードにしたい）：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;load&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">MERMAID_CLASS_NAME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;.mermaid&#39;</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">MERMAID_CLASS_NAME</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">js</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;script&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="nx">js</span><span class="p">.</span><span class="nx">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js&quot;</span><span class="p">;</span>
<span class="w">    </span><span class="nx">js</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">mermaid</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span>
<span class="w">            </span><span class="nx">startOnLoad</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="nx">theme</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;base&#39;</span><span class="p">,</span>
<span class="w">            </span><span class="nx">themeVariables</span><span class="o">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nx">primaryColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;white&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="nx">lineColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="nx">textColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="nx">primaryBorderColor</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;black&#39;</span><span class="p">,</span>
<span class="w">                </span><span class="c1">// etc.</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">        </span><span class="nx">mermaid</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="kc">undefined</span><span class="p">,</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">MERMAID_CLASS_NAME</span><span class="p">));</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">js</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>こうすると、rst ファイルに <code class="docutils literal notranslate"><span class="pre">mermaid</span></code> ディレクティブのあった HTML だけが上記
URL から Mermaid のメインスクリプトをダウンロードして、図式を描くはずだ。</p>
</div>
</section>
<section id="working-examples">
<h3>Working Examples<a class="headerlink" href="#working-examples" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><p>Here is a full working example of the mermaidAPI being called through the CDN:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    Here is one mermaid diagram:
    <span class="p">&lt;</span><span class="nt">pre</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mermaid&quot;</span><span class="p">&gt;</span>
            graph TD
            A[Client] --&gt; B[Load Balancer]
            B --&gt; C[Server1]
            B --&gt; D[Server2]
    <span class="p">&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>

    And here is another:
    <span class="p">&lt;</span><span class="nt">pre</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mermaid&quot;</span><span class="p">&gt;</span>
            graph TD
            A[Client] --&gt;|tcp_123| B
            B(Load Balancer)
            B --&gt;|tcp_456| C[Server1]
            B --&gt;|tcp_456| D[Server2]
    <span class="p">&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>

    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;module&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="k">import</span><span class="w"> </span><span class="nx">mermaid</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs&#39;</span><span class="p">;</span>
<span class="w">      </span><span class="nx">mermaid</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span><span class="w"> </span><span class="nx">startOnLoad</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>CDN からロードするモジュールを取り込む <code class="docutils literal notranslate"><span class="pre">script</span></code> タグを <code class="docutils literal notranslate"><span class="pre">body</span></code> 終了直前に置いていることに注意する。初期化もこのタグ内で行う。</p>
<blockquote>
<div><p><strong>Another Option:</strong> In this example mermaid.js is referenced in <code class="docutils literal notranslate"><span class="pre">src</span></code> as a
separate JavaScript file, in an example Path.</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&quot;en&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span> <span class="p">/&gt;</span>
  <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">pre</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mermaid&quot;</span><span class="p">&gt;</span>
            graph LR
            A --- B
            B--&gt;C[fa:fa-ban forbidden]
            B--&gt;D(fa:fa-spinner);
    <span class="p">&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">pre</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;mermaid&quot;</span><span class="p">&gt;</span>
            graph TD
            A[Client] --&gt; B[Load Balancer]
            B --&gt; C[Server1]
            B --&gt; D[Server2]
    <span class="p">&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;module&quot;</span><span class="p">&gt;</span>
<span class="w">      </span><span class="k">import</span><span class="w"> </span><span class="nx">mermaid</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;The/Path/In/Your/Package/mermaid.esm.mjs&#39;</span><span class="p">;</span>
<span class="w">      </span><span class="nx">mermaid</span><span class="p">.</span><span class="nx">initialize</span><span class="p">({</span><span class="w"> </span><span class="nx">startOnLoad</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">});</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>インポートするモジュールの場所しか違いがない。</p>
</section>
</section>
<section id="adding-mermaid-as-a-dependency">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">4. Adding Mermaid as a dependency</a><a class="headerlink" href="#adding-mermaid-as-a-dependency" title="Permalink to this heading">¶</a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><p>install node v16, which would have <strong class="program">npm</strong></p></li>
<li><p>download <strong class="program">yarn</strong> using <strong class="program">npm</strong> by entering the command below:
<strong class="command">npm install -g yarn</strong></p></li>
<li><p>After <strong class="program">yarn</strong> installs, enter the following command: <strong class="command">yarn
add mermaid</strong></p></li>
<li><p>To add Mermaid as a Dev Dependency <strong class="command">yarn add -dev mermaid</strong></p></li>
</ol>
</div></blockquote>
<p>NPM だけではなく、もう一つのツール <strong class="program">yarn</strong> をインストールして Mermaid への依存関係を定義すると読める。パッケージ管理ツールが二つあるということか。あと、Node のバージョンはより新しくても通じるだろうか。</p>
<blockquote>
<div><p>Comments from Knut Sveidqvist, creator of mermaid:</p>
<ul class="simple">
<li><p>In early versions of mermaid, the <code class="docutils literal notranslate"><span class="pre">&lt;script</span> <span class="pre">src&gt;</span></code> tag was invoked in the
<code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code> part of the web page. Nowadays we can place it in the <code class="docutils literal notranslate"><span class="pre">&lt;body&gt;</span></code> as
seen above. Older parts of the documentation frequently reflects the previous
way which still works.</p></li>
</ul>
</div></blockquote>
<p>開発者は Mermaid を準備するための <code class="docutils literal notranslate"><span class="pre">script</span></code> タグを HTML の <code class="docutils literal notranslate"><span class="pre">head</span></code> 部分に置いて欲しくないと考えているように取れる。</p>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="index.html" title="Previous document">Mermaid 利用ノート</a>
        </li>
        <li>
          <a href="flowchart.html" title="Next document">Flowcharts - Basic Syntax</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">読書ノート</a></h1>



<p class="blurb">個人的な読書、学習、研究ノート。</p>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../mathseminar72.html">数学 100 の発見 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gamma95/index.html">オブジェクト指向における再利用のためのデザインパターン改訂版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hunt00/index.html">達人プログラマー 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sutter00.html">Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alexandrescu01/index.html">Modern C++ Design 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meyers01.html">Effective STL 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sutter02.html">More Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../joel04/index.html">Joel on Software 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../graham04.html">ハッカーと画家 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../angel05/index.html">OpenGL: A Primer Second Edition 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../yamamoto05/index.html">入門 xyzzy 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../newham05/index.html">入門 bash 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tsuboi05/index.html">幾何学 I 多様体入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subramaniam06.html">アジャイルプラクティス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../asaoka06.html">SE・製造技術者・理工系学生のための技術文書の作り方・書き方 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../levin06/index.html">Shaping Functions 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tsuboi08/index.html">幾何学 III 微分形式 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../loeliger09.html">実用 Git 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../griffiths10.html">プログラミング C# 第 6 版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../onodera10.html">ORACLE MASTER Bronze 11g SQL 基礎 I 必修教本 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hosoda10/index.html">Python 入門［２＆３対応］読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../nishiyama12/index.html">幾何学と不変量 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../omg15/index.html">Unified Modeling Language 2.5 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gorelick14.html">ハイパフォーマンス Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stroustrup14.html">C++ のエッセンス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stepanov15.html">その数式、プログラムできますか？ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../khronos15/index.html">WebGL Specification 1.0 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vivo15/index.html">The Book of Shaders 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../saha16.html">Python からはじめる数学入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../slatkin16.html">Effective Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guntheroth16.html">Optimized C++ 下読みノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../speinellis17.html">Effective Debugging 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bancila18.html">Modern C++ チャレンジ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../haverbeke18/index.html">Eloquent JavaScript 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../khronos18/index.html">OpenGL Shading Language 4.60 Specification 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kantor22/index.html">The Modern JavaScript Tutorial 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ou23/index.html">Modern C++ Tutorial: C++ 11/14/17/20 On the Fly 読書ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2014.html">ノート準備中書籍群 2014 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2015.html">ノート準備中書籍群 2015 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2016.html">ノート準備中書籍群 2016 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2017.html">ノート準備中書籍群 2017 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../preliminary2018.html">ノート準備中書籍群 2018 年編</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bash-v2.html">What’s New In Bash 2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bash-v3.html">What’s New In Bash 3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bash-v4.html">What’s New In Bash 4 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bash-v5.html">What’s New In Bash 5 ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cpp11/index.html">What’s New In C++11 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp14/index.html">What’s New In C++14 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cpp17/index.html">What’s New In C++17 ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../python-3.0.html">What’s New In Python 3.0 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.1.html">What’s New In Python 3.1 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.2.html">What’s New In Python 3.2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.3.html">What’s New In Python 3.3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.4.html">What’s New In Python 3.4 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.5.html">What’s New In Python 3.5 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.6.html">What’s New In Python 3.6 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.7.html">What’s New In Python 3.7 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.8.html">What’s New In Python 3.8 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.9.html">What’s New In Python 3.9 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-3.10.html">What’s New In Python 3.10 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pip.html">pip 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pylint.html">Pylint 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-docutils/index.html">Docutils 解読ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-restview.html">Restview 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-nose.html">Nose 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-ipython.html">IPython 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-jupyter.html">Jupyter 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-numpy/index.html">NumPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-scipy/index.html">SciPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-sympy/index.html">SymPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-apgl.html">Another Python Graph Library (APGL) 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pil.html">PIL 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pillow.html">Pillow 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-matplotlib/index.html">Matplotlib 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-networkx/index.html">NetworkX 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-quaternion.html">Quaternion 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-jinja2.html">Jinja2 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pygments.html">Pygments 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-bs4.html">BeautifulSoup4 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-selenium.html">Selenium 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-scrapy.html">Scrapy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-twitter/index.html">Python Twitter Tools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-isbn-hyphenate.html">isbn-hyphenate 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pyopengl/index.html">PyOpenGL 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pyqt4.html">PyQt4 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pyqt5.html">PyQt5 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pandas/index.html">Pandas 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pygame.html">Pygame 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-pytube.html">Pytube 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../youtube-dl.html">youtube-dl 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-py2exe.html">Py2exe 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-upgrade.html">Python 移行ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python-miniconda.html">Miniconda 利用ノート</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../freeware.html">Windows 用フリーウェア 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../google-ime.html">Google 日本語入力利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deepl-translator.html">DeepL Translator 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../winget.html">Windows Package Manager CLI 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../powertoys/index.html">Microsoft PowerToys 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../windows-terminal.html">Windows Terminal 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wsl.html">Windows Subsystem for Linux 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../wslg.html">Windows Subsystem for Linux GUI 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vscode/index.html">Visual Studio Code 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cygwin.html">Cygwin 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chrome.html">Chrome DevTools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../git/index.html">Git 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../oh-my-posh.html">Oh My Posh 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../twitter.html">Twitter 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../inkscape/index.html">Inkscape 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ffmpeg/index.html">FFmpeg 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mathjax.html">MathJax 利用ノート</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Mermaid 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../css-selector.html">CSS セレクター学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../xpath.html">XPath 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hxutils.html">HTML-XML-utils 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webgl.html">WebGL 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pandoc.html">Pandoc 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zoom.html">Zoom Cloud Meetings 利用ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../milestone09/index.html">ラジルギノア プレイノート</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Mermaid 利用ノート</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Mermaid 利用ノート</a></li>
      <li>Next: <a href="flowchart.html" title="next chapter">Flowcharts - Basic Syntax</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="../_static/logos.png"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2023, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>