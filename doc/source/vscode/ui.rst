======================================================================
ユーザーインターフェイス
======================================================================

VS Code の UI について記す。メインウィンドウの構成は本家 Visual Studio と同様で、
大まかに言えば、左側にワークスペースで扱うファイルとフォルダーを表示する Explorer,
その右側に開いたファイルの内容を表示する Editor という配置を採用している。

.. attention::

   :doc:`./index` 冒頭の前提条件に留意すること。

.. contents::

基本レイアウト
======================================================================

まずは `Visual Studio Code User Interface <https://code.visualstudio.com/docs/getstarted/userinterface>`__
の最初の画像に用いられている用語を頭に叩き込むこと。VS Code の画面全体を次の五つ
に区分して理解する：

Activity Bar
    左端にある柱状の領域。アイコンをクリックしてビューを切り替えられるほか、Git
    が有効な場合に保留中のファイル数など、現況に応じてアイコン右下にバッヂが表示
    されることもある。
(Primary) Side Bar
    Activity Bar のすぐ右側の縦長領域。:guilabel:`EXPLORER` などのビュー各種を搭
    載する。
Editor/Editor Groups
    メイン領域。縦にも横にもいくつでも Editor を並べられる。各 Editor Group に
    Editor が一つ以上含まれ、各グループでタブをクリックするなどして現在の Editor
    を切り替える。開いているファイルは、Editor 領域の上部にタブで表示される。
Panels
    初期設定かつ表示されていれば Editor/Editor Groups 領域の下にある領域。
    出力、デバッグ情報、エラーや警告、端末など、さまざまなパネルを表示できる。
    テキスト編集領域をなるべく縦方向に確保したければ非表示にしたり、メインウィン
    ドウ右側に移動したりできる。
Status Bar
    床下にある領域。ワークスペースや現在の Editor に関する情報各種を表示する。

VS Code を開始するたびに、上記 UI 要素は前回終了時と同じ状態で配置される。レイア
ウトだけでなく、開いていたフォルダー、ファイルも Editor 領域に復元される。

.. admonition:: 利用者ノート

   各パーツに対して表示・非表示の切り替えコマンドが存在する。特に、Activity Bar,
   Side Bar, Panel のそれのショートカットキーがもし設定されていれば、覚えておく
   と編集をより快適に編集できる。

Editor Groups の配置
======================================================================

既存の Editor Group の横に別の Editor Group を横または縦に追加的に開くことが可能
だ。方法は複数ある：

* :kbd:`Ctrl` + :kbd:`\` を押して、アクティブ Editor を二分割する。
* :guilabel:`EXPLORER` ビューで対象ファイルを :kbd:`Alt` キーを押しながらクリッ
  クする。
* :guilabel:`EXPLORER` ビューで対象ファイルにフォーカスを与えて次のいずれかを行
  う：

  * :kbd:`Ctrl` + :kbd:`Enter` を押す。
  * コンテキストメニューの :menuselection:`Open to the Side` を選択する。

* Editor 右上のアイコン :guilabel:`Split Editor Right` を押す。
* ファイルまたは Editor タブを Editor 領域に（どこでもいい）ドラッグ＆ドロップす
  る。
* Quick Open 一覧からファイルを選択するときに :kbd:`Ctrl` + :kbd:`Enter` を押
  す。

他のファイルを開くときはいつでも、アクティブになっている Editor がその内容を表示
する。例えば Editor が二つが並んでいて、ファイル ``foo.cs`` を右側の Editor で開
きたい場合、そちら側がアクティブであることを確実にしてから開くことだ。

初期設定では Editor はアクティブ Editor の右側に開かれる。設定項目
``workbench.editor.openSideBySideDirection`` の値がこの動作を変更する。
新しい Editor をアクティブ Editor の下に開くように設定することも可能だ：

.. code:: json

   {
       "workbench.editor.openSideBySideDirection": "down"
   }

複数の Editor Groups を開いている場合、:kbd:`Ctrl` キーを押しながら :kbd:`1`,
:kbd:`2`, :kbd:`3`, ... を押すことで Editor を素早く切り替えることができる。

.. todo::

   この事項は :doc:`./basics` で述べる程度に基本的である可能性が高い。本節の移転
   を検討する。

ミニマップ
======================================================================

ミニマップは、ソースコードの概要を表現するものだ。ミニマップは Editor の右側に表
示される。陰影のついた部分をクリックまたはドラッグすることで、当該部分にジャンプ
できる。

設定ファイル :file:`settings.json` でミニマップ表示位置を左側に変更したり、完全
に無効にすることも可能だ：

.. code:: json

   {
       "editor.minimap.side": "left",
       "editor.minimap.enabled": false
   }

パンクズ
======================================================================

Editor それぞれの上部にパンクズと呼ばれるナビゲーションバーがある。これは現在の
場所を表示し、フォルダー、ファイル、シンボル間を素早く移動することができる。

パンクズは次のように、現在キャレットがあるシンボルをルートから階層的に表現したパ
スのように表現している：

.. code:: text

   path > to > file > path > to > symbol

カスタマイズについては :doc:`./navigation` 内パンクズの節を参照。

EXPLORER
======================================================================


OPEN EDITORS
----------------------------------------------------------------------

:guilabel:`EXPLORER` の上部には :guilabel:`OPEN EDITORS` と表示されたビューがあ
る。アクティブなファイルまたはプレビューの一覧だ。これらは最近 VS Code で開いた
作業中のファイルだ。例えば、次のような場合、:guilabel:`OPEN EDITORS` の一覧に
ファイルが現れる：

* ファイルに変更を加える
* ファイルのヘッダをダブルクリックする
* エクスプローラでファイルをダブルクリックする
* 現在のフォルダにないファイルを開く

このビューの項目をクリックすると、そのファイルを内容とする Editor がアクティブに
なる。

作業が完了したら、:guilabel:`OPEN EDITORS` からファイルを個別に削除するか、次の
いずれかのコマンドを実行してすべてのファイルを削除する：

* :guilabel:`View: Close All Editors`
* :guilabel:`View: Close All Editors in Group`

このビューを表示したくない場合は設定を編集する：

.. code:: json

   {
       "explorer.openEditors.visible": 0
   }

ビュー
======================================================================

コマンドパレット
======================================================================

タブ
======================================================================

プレビューモード（殺す）
----------------------------------------------------------------------

グループ
======================================================================

フレームウィンドウ全体
======================================================================

