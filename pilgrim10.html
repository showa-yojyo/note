<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>入門 HTML5 読書ノート &#8212; 読書ノート 1.6dev documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=c9b0a06a" />
    <script src="_static/documentation_options.js?v=4354bf25"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/mermaid.js?v=578dbed1"></script>
    <link rel="next" title="プログラミング C# 第 6 版 読書ノート" href="griffiths10.html" />
    <link rel="prev" title="実用 Git 読書ノート" href="loeliger09.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
    <div class="related top">
      &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="loeliger09.html" title="Previous">実用 Git 読書ノート</a>
        </li>
      
        <li>
          <a href="griffiths10.html" title="Next">プログラミング C# 第 6 版 読書ノート</a>
          &rarr;
        </li>
    </ul>
  </nav>
    </div>


          <div class="body" role="main">
            
  <section id="html5">
<h1><a class="toc-backref" href="#id9" role="doc-backlink">入門 HTML5 読書ノート</a><a class="headerlink" href="#html5" title="Link to this heading">¶</a></h1>
<div class="admonition- admonition">
<p class="admonition-title">読者ノート</p>
<p>なにぶん古い図書なので、</p>
<ul class="simple">
<li><p>リンク切れの URL は可能な範囲で更新する（無意味かもしれない）。</p></li>
<li><p>Internet Explorer に関する記述は無視する。</p></li>
</ul>
</div>
<dl class="field-list simple">
<dt class="field-odd">著者<span class="colon">:</span></dt>
<dd class="field-odd"><p>Mark Pilgrim</p>
</dd>
<dt class="field-even">訳者<span class="colon">:</span></dt>
<dd class="field-even"><p>水原文</p>
</dd>
<dt class="field-odd">監訳者<span class="colon">:</span></dt>
<dd class="field-odd"><p>矢倉眞隆</p>
</dd>
<dt class="field-even">出版社<span class="colon">:</span></dt>
<dd class="field-even"><p>オライリー・ジャパン</p>
</dd>
<dt class="field-odd">発行年<span class="colon">:</span></dt>
<dd class="field-odd"><p>2011 年</p>
</dd>
<dt class="field-even">ISBN<span class="colon">:</span></dt>
<dd class="field-even"><p>978-4-87311-482-8</p>
</dd>
</dl>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#html5" id="id9">入門 HTML5 読書ノート</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id10">監訳者まえがき</a></p></li>
<li><p><a class="reference internal" href="#id2" id="id11">まえがき</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id12">1 章 ここまでの道のり</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id13">2 章 HTML5 の機能を検出する</a></p></li>
<li><p><a class="reference internal" href="#html" id="id14">3 章 HTML 文書の構造と意味付け</a></p></li>
<li><p><a class="reference internal" href="#canvas" id="id15">4 章 Canvas による描画</a></p></li>
<li><p><a class="reference internal" href="#web" id="id16">5 章 Web のビデオ</a></p></li>
<li><p><a class="reference internal" href="#geolocation-api" id="id17">6 章 Geolocation API による位置情報通知</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id18">7 章 Web アプリケーションのローカルストレージ：その過去・現在・未来</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id19">8 章 オフライン状態での動作</a></p></li>
<li><p><a class="reference internal" href="#id7" id="id20">9 章 Web フォーム</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id21">10 章 マイクロデータによるマークアップの拡張</a></p></li>
<li><p><a class="reference internal" href="#a-html5" id="id22">付録 A （ほぼ）アルファベット順の HTML5 機能機能方法</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="id1">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">監訳者まえがき</a><a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<p>この書籍の概要は次のとおり：</p>
<blockquote>
<div><p>本書『入門 HTML5』は、Google で Developer Advocate を務める Mark Pilgrim による HTML5 と周辺技術の書籍『HTML5: Up and Runing』の日本語訳になります。</p>
</div></blockquote>
<p><a class="reference external" href="https://cloud.google.com/developers/advocates">Developer Center</a> で
Developer Advocate なる役職の一覧が確認できる。役割の詳細もそこに述べられている。</p>
<blockquote>
<div><p>この原著、その原稿やデモすべてが Creative Commons の Attribution ライセンスのもと、<a class="reference external" href="http://diveintohtml5.info">Dive Into HTML5</a> というサイトで公開されています。</p>
</div></blockquote>
<p>ということは、紙の本から読書ノートを綴らなくとも、つねに最新版である原稿を公開している上記サイトを読めば良かったかもしれない。</p>
</section>
<section id="id2">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">まえがき</a><a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<p>本書で焦点が当たるトピックが箇条書きになっている。本ノートの見通しをよくするためにも控えておく：</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;header&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;footer&gt;</span></code>, そして <code class="docutils literal notranslate"><span class="pre">&lt;section&gt;</span></code> などの新たな意味要素 (3
章)</p></li>
<li><p>JavaScript でプログラム可能な二次元の図形描画機能、Canvas (4 章)</p></li>
<li><p>サードパーティ製プラグインの助けを借りずに Web へ埋め込み可能なビデオ (5
章)</p></li>
<li><p>Web アプリケーションへ、自分の居る位置を通知できる位置情報通知機能 (6 章)</p></li>
<li><p>サードパーティ製プラグインを必要としない永続的ローカルストレージ (7 章)</p></li>
<li><p>ネットワークアクセスが切断された後でも動作可能なオフライン Web アプリケーション (8 章)</p></li>
<li><p>改良された HTML フォーム (9 章)</p></li>
<li><p>HTML5 にはない語彙を作成し、Web ページに独自の意味づけが可能なマイクロデータ</p></li>
</ul>
</div></blockquote>
<p>個人的に興味があるのは第 3, 4, 9 章だ。ビデオ編集する習慣があることから第 5 章も参考になる。</p>
</section>
<section id="id3">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">1 章 ここまでの道のり</a><a class="headerlink" href="#id3" title="Link to this heading">¶</a></h2>
<p>著者が《心の片隅に留めておいて欲しい》という言葉をほぼ引用しておく：</p>
<blockquote>
<div><p>実装と詳細の間には、微妙な関係を保つ必要がある。使用が完成する前に実装が行われることは望ましくない。なぜならば、既存の実装の詳細に引きずられ、仕様が制約されてしまうからだ。しかし、実装されたものが利用されないまま仕様が完成することもまた望ましくない。なぜならば、利用者からのフィードバックが必要だからだ。</p>
</div></blockquote>
<p>実装と詳細は、一方が「主」で他方が「従」ということではないということか。</p>
<p>この後は読み物のようなテキストが続く。<abbr title="Web Hypertext Application Technology Working Group">WHATWG</abbr> の誕生くらいまで読み流す感じでいい。</p>
<blockquote>
<div><p>十年に及ぶ HTML への投資を無駄にし、また既存 Web ページの 99 パーセントを使えなくする代わりに、WHATWG は別のアプローチを取ることにした。ブラウザが実際に利用している「寛大な」エラー処理アルゴリズムを文書化することだ。</p>
</div></blockquote>
<p>これは解析だ。</p>
<blockquote>
<div><p>そして、2006 年 10 月、ついに W3C の創設者である Tim Berners-Lee が、HTML の進化のために W3C が WHATWG と経堂で作業を進めることを発表した。</p>
</div></blockquote>
<p>和解のようなものと考えられる。なお、<abbr title="World Wide Web Consortium">W3C</abbr> という用語は、私の読み抜けがなければ、何の説明もなしに本文に登場した。</p>
<blockquote>
<div><p>再設立され、生まれ変わった W3C HTML ワーキンググループが最初に行った決定のひとつは、「Web Application 1.0」を「HTML5」と改名することだった。</p>
</div></blockquote>
<p>引用しなかったが、Web Application 1.0 とは解析作業と並行して進行していたキャンバス、ビデオサポート等のドラフトだ。</p>
</section>
<section id="id4">
<h2><a class="toc-backref" href="#id13" role="doc-backlink">2 章 HTML5 の機能を検出する</a><a class="headerlink" href="#id4" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p>HTML5 はひとつの大きなものではなく、個別の機能が集まったものなのだ。</p>
</div></blockquote>
<p>したがって、例えば「キャンバスは対応済みか？」「ビデオは対応済みか？」などを調べることをこの章では検討していく。</p>
<blockquote>
<div><p>ブラウザが特定の機能をサポートしているかどうかを検出するための、基本的なテクニックは 4 つある。</p>
</div></blockquote>
<p>本文の技法一覧を単純化して列挙しておく：</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">window</span></code> や <code class="docutils literal notranslate"><span class="pre">navigator</span></code> グローバルオブジェクトに対して、特定のプロパティーが存在するかを調べる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new</span></code> した要素に対して特定のプロパティーが存在するかを調べる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new</span></code> した要素に対して特定のメソッドが存在するかを調べる。それを呼び出して戻り値を調べる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new</span></code> した要素に対してプロパティーを特定の値に設定し、それが値を保持しているかを調べる。</p></li>
</ol>
<p>以上は、当然ながら JavaScript コードを走らせて検出する。</p>
<blockquote>
<div><p><a class="reference external" href="https://modernizr.com/">Modernzir</a> は、オープンソースで MIT ライセンスの、数多くの HTML5 と CSS3 機能のサポートを検出してくれる JavaScript ライブラリだ。</p>
</div></blockquote>
<p>この JS ファイルをローカルに用意して <code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code> 内から <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> で読み込ませれば利用可能になる。オブジェクト <code class="docutils literal notranslate"><span class="pre">Modernizr</span></code> にブラウザーが特定の機能に対応しているかどうかを示すフラグを持っている。例えばキャンバスを使いたければ真偽値
<code class="docutils literal notranslate"><span class="pre">Modernizr.canvas</span></code> を調べるという具合だ。本章はこのように、個別機能と検出方法紹介を並べる構造になっているが、本ノートでは割愛する。現代的ブラウザーではどうせ対応されているので。</p>
<blockquote>
<div><p>ブラウザが HTML5 ビデオをサポートしていない場合には、<code class="docutils literal notranslate"><span class="pre">&lt;video&gt;</span></code> 要素として作成された DOM オブジェクトは共通プロパティのみを持っているはずだ。</p>
</div></blockquote>
<p>この考え方はビデオ以外の HTML5 新機能についても成り立つ。興味があるので、ビデオに関する記述を中心に引用する。</p>
<p>「コーデック」を次のように定義している：</p>
<blockquote>
<div><p>ビデオをビットストリームへエンコードする際に使われるアルゴリズムのことだ。</p>
</div></blockquote>
<p>先程の判定論理の「裏」が述べられる：</p>
<blockquote>
<div><p>ブラウザが HTML5 ビデオをサポートしていれば、<code class="docutils literal notranslate"><span class="pre">&lt;video&gt;</span></code> 要素として作成された
DOM オブジェクトは <code class="docutils literal notranslate"><span class="pre">canPlayType()</span></code> メソッドを持っているはずだ。</p>
</div></blockquote>
<p>ローカルストレージの節の冒頭：</p>
<blockquote>
<div><p>HTML5 のストレージは、ウェブサイトがコンピュータに情報を保存して後で使うための手段を提供する。概念としてはクッキーに似ているが、より大きな情報量を取り扱えるように設計されている。</p>
</div></blockquote>
<p>本書の後半で一章割いて説明される。</p>
<p>本書では「マークアップ教授に質問」という質問と回答形式の囲み記事が随所に現れる。次の概念は重要なので引用する：</p>
<blockquote>
<div><p>ブラウザの中では、どの Web サイトも自信が保存した値を読んだり変更したりできるが、別のサイトが保存した値へのアクセスはできない。このことは、同一生成元制約
(same-origin restriction) と呼ばれている。</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;input&gt;</span></code> 要素の <code class="docutils literal notranslate"><span class="pre">type</span></code> 属性になり得る値が HTML5 で急増したことが述べられている。他にも、</p>
<blockquote>
<div><p>プレースホルダは、そのフィールドが空で、かつそこにフォーカスがない場合に入力フィールド中に表示される</p>
</div></blockquote>
<p>機能がある。また、フォーカスに関しては、</p>
<blockquote>
<div><p>HTML5 はすべてのフォームコントロールに <code class="docutils literal notranslate"><span class="pre">autofocus</span></code> 属性を導入した。この
<code class="docutils literal notranslate"><span class="pre">autofocus</span></code> 属性は、フォーカスを特定のフィールドへ移動するという、文字通りの働きをする。</p>
</div></blockquote>
<p>最後に、聞き馴染みのない機能を知る：</p>
<blockquote>
<div><p>マイクロデータは、Web ページに意味付けを追加するための標準的な方法だ。例えば、マイクロデータを使ってある写真が特定のクリエイティブコモンズライセンスで利用できることを宣言できる。</p>
</div></blockquote>
</section>
<section id="html">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">3 章 HTML 文書の構造と意味付け</a><a class="headerlink" href="#html" title="Link to this heading">¶</a></h2>
<p>この章では XHTML 1.0 文書を HTML5 に改良していくという実践的なものだ。以前、自作の古いページを書き直す時にこの記述を大いに利用した。サンプルページはこれ：
&lt;<a class="reference external" href="http://diveintohtml5.info/examples/blog-original.html">http://diveintohtml5.info/examples/blog-original.html</a>&gt;</p>
<blockquote>
<div><p>少なくとも一度は「ソースを表示」してみてから、この先を読み進めて欲しい。</p>
</div></blockquote>
<p>当該 HTML を画面に表示しながら本章を読んでもいい。</p>
<p>DOCTYPE の記述は単純に済ませるのが HTML5 だ：</p>
<blockquote>
<div><p>これがその、HTML5 の DOCTYPE だ。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
</pre></div>
</div>
<p>これだけ。だった 15 文字だ。手で打つのも簡単だし、間違えることもないだろう。</p>
</div></blockquote>
<p>VS Code でコードを編集するのであれば補完候補に現れるからさらに楽だ。</p>
<blockquote>
<div><p>DOCTYPE は、HTML ファイルの最初の行に存在する必要がある。</p>
</div></blockquote>
<p>次にルート要素である <code class="docutils literal notranslate"><span class="pre">&lt;html&gt;</span></code> を改良している。やはり単純だ。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">xmlns</span></code> 属性は必要ない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lang</span></code> 属性があれは <code class="docutils literal notranslate"><span class="pre">xml:lang</span></code> 属性は不要だ。</p></li>
</ul>
<p>どうも HTML ファイルの先頭から末尾に向かって改良しているらしい。次は <code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code>
に着手。</p>
<blockquote>
<div><p>ルート要素の最初の子要素は、普通 <code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code> 要素だ。</p>
</div></blockquote>
<p>文字エンコーディングの宣言を書き換える：</p>
<blockquote>
<div><p>実は、HTML5 ではその（引用註：<code class="docutils literal notranslate"><span class="pre">&lt;meta&gt;</span></code> タグ）使い方も少しやさしくなっている。以下のように書けるのだ。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&quot;utf-8&quot;</span> <span class="p">/&gt;</span>
</pre></div>
</div>
<p>これは、すべてのブラウザで動作する。</p>
</div></blockquote>
<p>マークアップ教授と著者から共通する警告：</p>
<blockquote>
<div><p><strong>すべての</strong> HTML 文書には <strong>常に</strong> 文字エンコーディングを指定すべきであり、そうしないといろいろとまずいことが起こるだろう。（略）どの方法でもいいから確実に行ってほしい。</p>
</div></blockquote>
<p>個人的に軽視していた <code class="docutils literal notranslate"><span class="pre">&lt;link&gt;</span></code> タグについての記述が参考になる。</p>
<blockquote>
<div><p>リンクタイプは、別のページを参照する <strong>理由</strong> を説明するためのものだ。「私がここで別のページを参照しているそのわけは…」に続く文章を作っていると考えればよい。</p>
</div></blockquote>
<p>HTML5 はリンクによる関連付けを二つに区分しているとして、次の記述を引用している：</p>
<blockquote>
<div><p>Two categories of links can be created using the link element: links to
external resources and hyperlinks.
（略）
The exact behavior for links to external resources depends on the exact
relationship, as defined for the relevant link type.
(&lt;<a class="reference external" href="https://html.spec.whatwg.org/multipage/semantics.html#attr-link-rel">https://html.spec.whatwg.org/multipage/semantics.html#attr-link-rel</a>&gt;)</p>
</div></blockquote>
<p>サンプルページでは CSS ファイルに関する <code class="docutils literal notranslate"><span class="pre">&lt;link&gt;</span></code> だけが外部リソースへのリンクに当てはまるとある。</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;meta</span> <span class="pre">rel=&quot;archives&quot;</span> <span class="pre">...&gt;</span></code> をブログの過去記事索引に使えるとある。後で試したい。総索引ページにこのタグを書く感じか。</p>
<p>HTML5 の新しい意味要素として pp. 45-46 に列挙されているもののほとんどが改良作業で重要だ。</p>
<blockquote>
<div><p>すべてのブラウザは不明な要素をインラインレベル要素として表示する。</p>
</div></blockquote>
<p>ので、</p>
<blockquote>
<div><p>HTML5 の新しい要素のいくつかは、ブロックレベル要素として定義されている</p>
</div></blockquote>
<p>ものを旧式ブラウザーで描画させようとすると、明らかにおかしくなる。CSS による回避策が本書に与えられている。</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;div</span> <span class="pre">id=&quot;header&quot;&gt;</span></code> のようなブロックが文書にあれば、それを <code class="docutils literal notranslate"><span class="pre">&lt;header&gt;</span></code> に置き換えることを検討する価値がある：</p>
<blockquote>
<div><p>HTML5 では、<code class="docutils literal notranslate"><span class="pre">&lt;header&gt;</span></code> 要素がこの目的のために定義されている。</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><p>HTML4 では、文書のアウトラインを作成する方法が <code class="docutils literal notranslate"><span class="pre">&lt;h1&gt;</span></code> ～ <code class="docutils literal notranslate"><span class="pre">&lt;h6&gt;</span></code> <strong>だけ</strong>
しかなかった。</p>
</div></blockquote>
<p>ワープロソフトの類比から、そういうものだと思っていた。</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&lt;hgroup&gt;</span></code> 要素は、二個またはそれ以上の <strong>関連する</strong> 見出し要素をグループ化する働きをする。ここで「関連する」とは、全体として文書アウトライン中で単一のノードを形成するという意味だ。</p>
</div></blockquote>
<p>見本コードを確認すると <code class="docutils literal notranslate"><span class="pre">&lt;hgroup&gt;</span></code> の中に <code class="docutils literal notranslate"><span class="pre">&lt;h1&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;h2&gt;</span></code> がこの順序で現れている。<code class="docutils literal notranslate"><span class="pre">&lt;hgroup&gt;</span></code> を抜けると、個別の <code class="docutils literal notranslate"><span class="pre">&lt;h2&gt;</span></code> が現れる。</p>
<hr class="docutils" />
<p>HTML5 <code class="docutils literal notranslate"><span class="pre">&lt;article&gt;</span></code> 要素は、部分文書を構成すると私には読める。</p>
<blockquote>
<div><p>この HTML5 のアルゴリズム（引用註：新しい意味要素を採用した文書アウトライン生成アルゴリズム）では、<code class="docutils literal notranslate"><span class="pre">&lt;article&gt;</span></code> 要素は新しいセクション、つまり新しいノードを文書アウトラインに生成することになっている。そして HTML5 では、セクションごとに <code class="docutils literal notranslate"><span class="pre">&lt;h1&gt;</span></code> 要素が持てるのだ。</p>
</div></blockquote>
<p>このおかげで見出し番号を気にすることなく <code class="docutils literal notranslate"><span class="pre">&lt;article&gt;</span></code> ノード部分をコピーペースト可能になった。</p>
<hr class="docutils" />
<p>日付と時間を表現するための新しい要素を紹介している：</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&lt;time&gt;</span></code> 要素は、三つの部分に分けられる。</p>
<ul class="simple">
<li><p>機械可読なタイムスタンプ</p></li>
<li><p>人間が読むためのテキスト</p></li>
<li><p>オプションの <code class="docutils literal notranslate"><span class="pre">pubdate</span></code> フラグ</p></li>
</ul>
</div></blockquote>
<p>第一項目は <code class="docutils literal notranslate"><span class="pre">datetime</span></code> 属性値に記すようだ。第二項目が要素の値で、空であってもかまわないらしい。それどころか《テキストは何でもよいのだ》。</p>
<blockquote>
<div><p>この <code class="docutils literal notranslate"><span class="pre">pubdate</span></code> 属性の意味するところは、以下の二つのどちらかだ。まず
<code class="docutils literal notranslate"><span class="pre">&lt;time&gt;</span></code> 要素が <code class="docutils literal notranslate"><span class="pre">&lt;article&gt;</span></code> 要素の中にある場合、このタイムスタンプはその記事が公開された日付であることを意味する。また <code class="docutils literal notranslate"><span class="pre">&lt;time&gt;</span></code> 要素が
<code class="docutils literal notranslate"><span class="pre">&lt;article&gt;</span></code> 要素の中にない場合、このタイムスタンプは文書が公開された日付であることを意味する。</p>
</div></blockquote>
<p>この仕様ならばブログ型のページ、特に検索結果ページを作りやすくなるだろう。</p>
<hr class="docutils" />
<blockquote>
<div><p>HTML5 では、ナビゲーションのセクションをマークアップするための意味的な方法が用意されている。それが、<code class="docutils literal notranslate"><span class="pre">&lt;nav&gt;</span></code> 要素だ。</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;div</span> <span class="pre">id=&quot;nav&quot;&gt;</span></code> 区画を <code class="docutils literal notranslate"><span class="pre">&lt;nav&gt;</span></code> に自然に置き換える。</p>
<hr class="docutils" />
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">&lt;footer&gt;</span></code> 要素を使うのにふさわしい場所はどこだろうか。おそらく、現在
<code class="docutils literal notranslate"><span class="pre">&lt;div</span> <span class="pre">id=&quot;footer&quot;&gt;</span></code> としている場所すべてだろう。</p>
</div></blockquote>
</section>
<section id="canvas">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">4 章 Canvas による描画</a><a class="headerlink" href="#canvas" title="Link to this heading">¶</a></h2>
<p>WebGL をやったことがあるので <code class="docutils literal notranslate"><span class="pre">&lt;canvas&gt;</span></code> 要素は馴染みがある。この章の内容をその理解の確認に使える。</p>
<blockquote>
<div><p>HTML5 は <code class="docutils literal notranslate"><span class="pre">&lt;canvas&gt;</span></code> を「解像度に依存するビットマップ描画機能で、グラフ、ゲームのグラフィックス、あるいはその他のビジュアル画像をオンザフライで表示できる」と定義している。</p>
</div></blockquote>
<p>飛行中で表示できるとは何だという疑問が湧く。この先を読むことで明らかになる。</p>
<blockquote>
<div><p>Canvas そのものは目には見えない。<code class="docutils literal notranslate"><span class="pre">&lt;canvas&gt;</span></code> 要素自身は何の内容も持たず、またボーダーも指定されていないからだ。</p>
</div></blockquote>
<p>この事実は WebGL のコードを書きまくったときに体で知った。</p>
<p>JavaScript コードを書く。DOM 中の <code class="docutils literal notranslate"><span class="pre">&lt;canvas&gt;</span></code> 要素が <code class="docutils literal notranslate"><span class="pre">document</span></code> から得られたとする。描画をするに当たって最初にすることは、</p>
<blockquote>
<div><p>その <code class="docutils literal notranslate"><span class="pre">getContext()</span></code> メソッドを呼び出す。<code class="docutils literal notranslate"><span class="pre">getContext()</span></code> メソッドには、
<strong>必ず</strong> 文字列 <code class="docutils literal notranslate"><span class="pre">&quot;2d&quot;</span></code> を渡さなくてはならない。</p>
</div></blockquote>
<p>WebGL 描画の場合には <code class="docutils literal notranslate"><span class="pre">&quot;webgl&quot;</span></code> を渡さなくてはならない。次のページ (p. 67) の脚注によると、本書発行時には仕様策定中だったらしい。</p>
<p>平面図形については Win32 GDI を扱う感覚で、図形に対応するメソッドを呼び出す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.fillStyle</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.fillRect(x,</span> <span class="pre">y,</span> <span class="pre">width,</span> <span class="pre">height)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.strokeStyle</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.strokeRect(x,</span> <span class="pre">y,</span> <span class="pre">width,</span> <span class="pre">height)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.clearRect(x,</span> <span class="pre">y,</span> <span class="pre">width,</span> <span class="pre">height)</span></code></p></li>
</ul>
<p>キャンバスの座標系はスクリーン座標系と同じ向きだ：</p>
<blockquote>
<div><p>座標 (0, 0) は Canvas の左上隅に対応する。X 軸の値は、Canvas の右側に近づくにしたがって増加する。Y 軸の値は、Canvas の下端に近づくにしたがって増加する。</p>
</div></blockquote>
<p>パスの考え方も Win32 GDI と同様だ。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.beginPath()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.moveTo(x,</span> <span class="pre">y)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.lineTo(x,</span> <span class="pre">y)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.stroke()</span></code></p></li>
</ul>
<p>本書は鉛筆メソッドとインクメソッドという術語でコンテキストのメソッドの働きを上手く説明している。</p>
<hr class="docutils" />
<p>テキスト描画のインターフェイスも Win32 GDI に似ている。描画コンテキストを介してフォント属性を操作する。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.font</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.textAlign</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.textBaseline</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.fillText(text,</span> <span class="pre">x,</span> <span class="pre">y)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.strokeText(text,</span> <span class="pre">x,</span> <span class="pre">y)</span></code></p></li>
</ul>
<hr class="docutils" />
<blockquote>
<div><p>円を描く方法については後で説明するが、ここではちょっとずるをして矩形を描いて済ませることにしよう。</p>
</div></blockquote>
<p>寸法の小さい矩形を描けば、遠目からは円に見える。</p>
<hr class="docutils" />
<blockquote>
<div><p>シェープや線は単色以外で描くこともできる。グラデーションを使えば、いろいろな効果が楽しめる。</p>
</div></blockquote>
<p>次の二つのメソッドがグラデーション塗りを実現するものだ。放射状版は同心円でなくてもいいとは：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.createLinearGradient(x0,</span> <span class="pre">y0,</span> <span class="pre">x1,</span> <span class="pre">y0)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.createRadialGradient(x0,</span> <span class="pre">y0,</span> <span class="pre">r0,</span> <span class="pre">x1,</span> <span class="pre">y1,</span> <span class="pre">r1)</span></code></p></li>
</ul>
<p>これらの戻り値のプロパティーに対して色指定を行う。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.addColorStop(offset,</span> <span class="pre">color)</span></code>: <code class="docutils literal notranslate"><span class="pre">offset</span></code> は 0..1 の値で指定。</p></li>
</ul>
<p>グラデーションは対象図形に設定しなければ意味がない。</p>
<blockquote>
<div><p>グラデーションを描くには、<code class="docutils literal notranslate"><span class="pre">fillStyle</span></code> をグラデーションに設定し、矩形や直線などのシェープを描けばよい。</p>
</div></blockquote>
<hr class="docutils" />
<p>画像をキャンバスに描く方法。JavaScript で画像を取り扱う場合、キャンバスが関係しなくても使えるコードを含む。</p>
<blockquote>
<div><p>Canvas に画像を描くには、まず画像が必要だ。画像は既存の <code class="docutils literal notranslate"><span class="pre">&lt;img&gt;</span></code> 要素でもいいし、JavaScript を使って作成した <code class="docutils literal notranslate"><span class="pre">Image()</span></code> オブジェクトでもよい。</p>
</div></blockquote>
<p>本書 p. 81 と p.82 それぞれのコード片の構造を頭に叩き込め。より現代的なコードを目にすることがあり、これがその基本形だ。</p>
<hr class="docutils" />
<p><a class="reference external" href="http://diveintohtml5.info/examples/canvas-halma.html">Halma</a> 実装例に目を通す。キャンバスモノでよくある、マウスクリック位置を検出する課題に関するコツを知る：</p>
<blockquote>
<div><p>実は、マウスイベントはブラウザによって異なる実装がされているので、これはなかなか難しいことなのだ。</p>
<p>（略）</p>
<p>「マウスクリック」→「文書の相対座標」→「Canvas 相対座標」→「アプリケーション特有のコード」という流れになることは覚えておいてほしい。</p>
</div></blockquote>
<p>コードを見ると、参照する可能性がある値は次だ：</p>
<ul class="simple">
<li><p>マウスイベント <code class="docutils literal notranslate"><span class="pre">.pageX</span></code>, <code class="docutils literal notranslate"><span class="pre">.pageY</span></code></p></li>
<li><p>マウスイベント <code class="docutils literal notranslate"><span class="pre">.clientX</span></code>, <code class="docutils literal notranslate"><span class="pre">.clientY</span></code></p></li>
<li><p>文書本文 <code class="docutils literal notranslate"><span class="pre">.scrollLeft</span></code>, <code class="docutils literal notranslate"><span class="pre">.scrollTop</span></code></p></li>
<li><p>ルート要素 <code class="docutils literal notranslate"><span class="pre">.scrollLeft</span></code>, <code class="docutils literal notranslate"><span class="pre">.scrollTop</span></code></p></li>
<li><p>キャンバス <code class="docutils literal notranslate"><span class="pre">.offsetLeft</span></code>, <code class="docutils literal notranslate"><span class="pre">.offsetTop</span></code></p></li>
</ul>
</section>
<section id="web">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">5 章 Web のビデオ</a><a class="headerlink" href="#web" title="Link to this heading">¶</a></h2>
<p>この章の記述は HTML5 というより、ビデオファイルの解説がありがたい。</p>
<blockquote>
<div><p>HTML5 では、<code class="docutils literal notranslate"><span class="pre">&lt;video&gt;</span></code> 要素を使って Web ページにビデオを埋め込む標準的な方法が定義されている。</p>
</div></blockquote>
<p>そのタグについての詳細を説明する準備として、ビデオファイルの構造に関する解説が先だ。</p>
<blockquote>
<div><p>実は、「AVI」や「MP4」はコンテナフォーマットに過ぎないのだ。ZIP ファイルがどんな種類のファイルでも圧縮できるように、コンテナフォーマットはその中にデータを格納する <strong>方法</strong> を定義しているだけで、データの <strong>種類</strong> については規定していない。</p>
</div></blockquote>
<p><a class="reference internal" href="vlc-media-player.html"><span class="doc">VLC media player</span></a> はいいソフトなのでインストールしておきたい。</p>
<hr class="docutils" />
<blockquote>
<div><p><em class="dfn">ビデオコーデック</em> とは、ビデオストリームがエンコードされる際に使われるアルゴリズムのことだ。（「コーデック (codec)」とは「コーダ (coder)」と「デコーダ (decoder)」の合成語だ。）</p>
</div></blockquote>
<p>FFmpeg 操作時には世話になっている H.264 だが、</p>
<blockquote>
<div><p><strong>H.264 標準は、特許に縛られている。</strong></p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><p>ビデオにはない概念がオーディオにはある。それは <strong>チャンネル</strong> だ。</p>
</div></blockquote>
<p>モノラルならば一チャンネル、ステレオならば二チャンネルというアレだ。</p>
<blockquote>
<div><p>ひとつひとつのスピーカーは、録音された特定の <strong>チャンネル</strong> を再生する。</p>
</div></blockquote>
<p>スピーカーの数がチャンネル数よりも多い場合に、スピーカーそれぞれ、どのチャンネルを担当するのかが気になる。</p>
<blockquote>
<div><p>MP3 は、音のチャンネルを <strong>二個</strong> まで持てる。</p>
</div></blockquote>
<p>モノラルかステレオしかあり得ない。チャンネルなしの可能性もない。</p>
<blockquote>
<div><p>音質とビットレートとは線形比例するわけではない。</p>
</div></blockquote>
<p>映像でも同じことが言えるはずだ。</p>
<blockquote>
<div><p><strong>MP3 フォーマット（1991 年に標準化）は特許に縛られている。</strong></p>
</div></blockquote>
<p>これまた FFmpeg 操作時に世話になっている <abbr title="Advanced Audio Coding">AAC</abbr> だが、</p>
<blockquote>
<div><p><strong>AAC フォーマットは特許に縛られている。</strong></p>
</div></blockquote>
<p>値段を調べたければ <a class="reference external" href="https://www.via-la.com/licensing-2/aac/license-fees/">License Fees</a> を当たる。</p>
<blockquote>
<div><p>AAC は音声チャンネルを <strong>48 個まで</strong> エンコードできるが、実際に試した人は誰もいないだろう。</p>
</div></blockquote>
<hr class="docutils" />
<p>ここまで映像と音声の符号形式を多数紹介したのは、<code class="docutils literal notranslate"><span class="pre">&lt;video&gt;</span></code> 要素の書き方に関する説明を読者に理解させるための準備だとわかる。</p>
<blockquote>
<div><p>ひとつの <code class="docutils literal notranslate"><span class="pre">&lt;video&gt;</span></code> 要素は複数のビデオファイルにリンクすることができ、ブラウザは自分が再生可能な最初のビデオファイルを選択する。<strong>どのブラウザがど
のコンテナやコーデックをサポートしているかどうかを理解するのは、あなたの責任
なのだ。</strong></p>
</div></blockquote>
<p>ブラウザーは <code class="docutils literal notranslate"><span class="pre">&lt;video&gt;</span></code> タグ自体には対応しているが、どんな形式（側面が上記の二つあることに注意）のビデオファイルでも再生可能であるという意味ではない。</p>
<hr class="docutils" />
<p>ビデオ変換ツールの記述 (pp. 102-124) は今は読み飛ばす。私は FFmpeg しか使わない。</p>
<hr class="docutils" />
<p><code class="docutils literal notranslate"><span class="pre">&lt;canvas&gt;</span></code> とは違い、</p>
<blockquote>
<div><p>ブラウザは <code class="docutils literal notranslate"><span class="pre">&lt;video&gt;</span></code> タグで指定したボックス内の中央にビデオを表示してくれる。勝手に比率が変更されて、つぶれたり引き伸ばされたりすることはない。</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><p>デフォルトでは <code class="docutils literal notranslate"><span class="pre">&lt;video&gt;</span></code> 要素は再生コントロールの類を何も提供しない。（略）</p>
<p>自分でインタフェースを作るつもりがなければ、ブラウザに組み込みのコントロールを表示させることもできる。これを行うには、<code class="docutils literal notranslate"><span class="pre">&lt;video&gt;</span></code> タグに <code class="docutils literal notranslate"><span class="pre">control</span></code> 属性を追加するだけでよい。</p>
</div></blockquote>
<p>ブラウザーにもよるのだろうが、組み込みのコントローラーは YouTube のそれに比較すると機能が貧弱でありがちだ。</p>
<hr class="docutils" />
<p><code class="docutils literal notranslate"><span class="pre">&lt;video&gt;</span></code> 要素には子ノードとしてビデオファイル一つを指す <code class="docutils literal notranslate"><span class="pre">&lt;source&gt;</span></code> 要素を通常持つ。同一内容のビデオファイルを複数用意しておいて、それぞれに対応する
<code class="docutils literal notranslate"><span class="pre">&lt;source&gt;</span></code> 要素を併記する。</p>
<blockquote>
<div><p>もしブラウザに前もってビデオの形式を教えておくことができれば、ネットワークトラフィックを大幅に節約できる。これは、<code class="docutils literal notranslate"><span class="pre">&lt;source&gt;</span></code> 要素の <code class="docutils literal notranslate"><span class="pre">type</span></code> 属性を使って行う。</p>
</div></blockquote>
<p>子要素 <code class="docutils literal notranslate"><span class="pre">&lt;source&gt;</span></code> の記載順序は重要だ：</p>
<blockquote>
<div><p>ブラウザがそのビデオを再生できないと判断したら、<strong>そのファイルはダウン
ロードしない。</strong></p>
</div></blockquote>
<hr class="docutils" />
<p>本章の内容を総合したコマンドライン、HTML および JavaScript コードで締めくくられる。ここまで手間をかけてでも公に見てもらいたいビデオなどは当面のところ持ち合わせていないので、理屈を理解できればこの章は十分とする。</p>
</section>
<section id="geolocation-api">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">6 章 Geolocation API による位置情報通知</a><a class="headerlink" href="#geolocation-api" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p>Geolocation （位置情報通知機能）は、あなたが地球上のどこにいるかを調べる機能で、そしてその情報をあなたの信頼する人々に知らせることができる。位置の検出には、いろいろな方法がある。いくつか例を挙げれば、IP アドレス、無線ネットワークへの接続状況、携帯電話が通信している基地局、あるいは人工衛星からの緯度・経度を受信する GPS ハードウェアなどだ。</p>
</div></blockquote>
<p>本書表 6-1 によると、現代的ブラウザー全てが Geolocation API に対応している。利用可能性は、むしろ地理的な条件によるほうが大きい？</p>
<blockquote>
<div><p>Geolocation API は、<code class="docutils literal notranslate"><span class="pre">navigation</span></code> オブジェクトの <code class="docutils literal notranslate"><span class="pre">navigator.geolocation</span></code>
という新しいプロパティを利用する。</p>
</div></blockquote>
<p>本文では <code class="docutils literal notranslate"><span class="pre">.getCurrentPosition(success)</span></code> から説明が始める。コールバックを引数に取る。このコールバック関数が呼び出されるタイミングはわからないと思っているのがいいようだ。</p>
<p>エラー処理用コールバックは <code class="docutils literal notranslate"><span class="pre">getCurrentPosition</span></code> の第二引数に与えることが可能。</p>
<blockquote>
<div><p>一部のモバイル機器は、あなたがいる位置を検出するのに <strong>二通りの</strong> 方法をサポートしている。</p>
</div></blockquote>
<p>これらの方法は精度が異なる。用途によって使い分けたり、両者を組み合わせたりする。</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">geo.js</span></code> は W3C の Geolocation API や Gears の API, そして各種のモバイルプラットフォームの提供する API の違いを吸収してくれる、MIT のもとライセンスされたオープンソースの JavaScript ライブラリだ。</p>
</div></blockquote>
<p>このライブラリーは <code class="docutils literal notranslate"><span class="pre">&lt;script&gt;</span></code> タグを二つ要する。ページロード時間を考慮すれば、これらのタグを <code class="docutils literal notranslate"><span class="pre">&lt;head&gt;</span></code> に書かないほうがいいと著者は述べている。</p>
<p>総合的な実例の節では生の Geolocation API ではなく <code class="docutils literal notranslate"><span class="pre">geo.js</span></code> を採用。</p>
</section>
<section id="id5">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">7 章 Web アプリケーションのローカルストレージ：その過去・現在・未来</a><a class="headerlink" href="#id5" title="Link to this heading">¶</a></h2>
<p>Web アプリケーションには、デスクトップアプリケーションのような設定保存の仕組みがなかった。</p>
<blockquote>
<div><p>Cookie にはローカルストレージとして利用するには欠点がある。</p>
</div></blockquote>
<p>Cookie は HTTP 要求すべてに含まれてしまい、送受信が重複したり暗号化がなされないこと、データ要領に 4KB 制限があることが弱点だという。</p>
<hr class="docutils" />
<ul class="simple">
<li><p>Internet Explorer の <code class="docutils literal notranslate"><span class="pre">userData</span></code>,</p></li>
<li><p>Adobe の Flash Cookie,</p></li>
<li><p>Brad Neuberg の AMASS および <code class="docutils literal notranslate"><span class="pre">dojox.storage</span></code>,</p></li>
<li><p>Google Gears</p></li>
</ul>
<p>などのデータ保存機能を考察し、次のように総括している：</p>
<blockquote>
<div><p>これらのソリューションを振り返ってみると、ひとつのパターンが浮かび上がる。全て特定のブラウザに特有の機能か、またはサードパーティのプラグインに依存するのだ。</p>
</div></blockquote>
<p>ここから HTML5 が解決するべき問題が：</p>
<blockquote>
<div><p>サードパーティのプラグインに依存することなく、複数のブラウザでネイティブかつ統一的に実装された、標準的な API を提供すること</p>
</div></blockquote>
<p>だとなる。</p>
<hr class="docutils" />
<p>本節では Web Storage のことを HTML5 ストレージと呼称している。</p>
<blockquote>
<div><p>Web ページがクライアント Web ブラウザの中から、キーと値のペアに名前を付けてローカルに保存するための方法だ。Cookie に保存されるデータと同様に、このデータはその Web サイトを離れたり、ブラウザタブを閉じたり、ブラウザを終了したり、その他どんなことをした後でも保持される。しかし Cookie とは違って、このデータはリモートの Web サーバへ送信されることはない（わざわざ手作業で送信しようとしない限りは）。</p>
</div></blockquote>
<p>この機能はどのブラウザーのほとんどの最新版で利用可能だ。</p>
<blockquote>
<div><p>JavaScript のコードからは、<code class="docutils literal notranslate"><span class="pre">window</span></code> オブジェクト上の <code class="docutils literal notranslate"><span class="pre">localStorage</span></code> オブジェクトを介して HTML5 ストレージへアクセスする。</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><p>HTML5 ストレージは、名前付きキーと値のペアを基本としている。</p>
</div></blockquote>
<p>データベースでいうと MongoDB とか DynamoDB のような感じだろうか。しかし：</p>
<blockquote>
<div><p>データは実際には文字列として保存される。文字列以外を保存して取り出そうとする場合には、<code class="docutils literal notranslate"><span class="pre">parseInt()</span></code> や <code class="docutils literal notranslate"><span class="pre">parseFloat()</span></code> などの関数を使って取り出したデータを元の JavaScript データ型へ型変換する必要があるのだ。</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><p>ストレージ領域が変化したことをプログラムから検出したければ、<code class="docutils literal notranslate"><span class="pre">storage</span></code> イベントをトラップすればよい。</p>
</div></blockquote>
<p>すなわち、</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;storage&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">handle_storage</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">);</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">handle_storage</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>
</pre></div>
</div>
<hr class="docutils" />
<blockquote>
<div><p>「5MB」とは、生成元ごとにストレージ領域が持てるデフォルトの要領だ。</p>
</div></blockquote>
<p>ここで言う生成元とは same-origin restriction などの術語中に含まれる origin と同じ概念だ。</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">QUOTA_EXCEEDED_ERR</span></code> とは、5MB のストレージの制限を超えた場合に発生する例外だ。</p>
</div></blockquote>
<hr class="docutils" />
<p>実例として、第四章の Halma ゲームにステートセーブ機能を実装している。</p>
<p>最後に、Web SQL Database と Indexed Database API という仕様について触れている。</p>
</section>
<section id="id6">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">8 章 オフライン状態での動作</a><a class="headerlink" href="#id6" title="Link to this heading">¶</a></h2>
<p>定義から始まる：</p>
<blockquote>
<div><p>最も単純なオフライン Web アプリケーションは、HTML, CSS, あるいは JavaScript
ファイル、画像、もしくはその他の種類のリソースを指し示す URL のリストに過ぎない。オフライン Web アプリケーションのホームページは、<em class="dfn">マニフェストファイル</em>
と呼ばれるこのリストを参照している。</p>
</div></blockquote>
<p>この一覧がサーバーの《どこか別のところにある》ことに注意。</p>
<blockquote>
<div><p>オフライン Web アプリケーションは、キャッシュマニフェストファイルを中心として動作する。（略）これらのリソースをダウンロードしキャッシュするプロセスを開始させるには、<code class="docutils literal notranslate"><span class="pre">&lt;html&gt;</span></code> 要素の <code class="docutils literal notranslate"><span class="pre">manifest</span></code> 属性を使ってマニフェストファイルを指定する必要がある。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">manifest</span><span class="o">=</span><span class="s">&quot;/cache.manifest&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
...
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>キャッシュマニフェストファイルは Web サーバーのどこに置いてもよいが、MIME タイプ <em class="mimetype">text/cache-manifest</em> を使って送信されなくてはならない。</p>
</div></blockquote>
<p>動作確認にはまたぞろローカルサーバーを稼動させる必要がある。</p>
<p>以下、マニフェストファイルの構成について記述されている。簡単に言うと次のようなものらしい：</p>
<ul class="simple">
<li><p>最初の行</p></li>
<li><p>明示リスト区画</p></li>
<li><p>代替区画</p></li>
<li><p>オンライン指定区画</p></li>
</ul>
<p>最初の行は <code class="docutils literal notranslate"><span class="pre">CACHE</span> <span class="pre">MANIFEST</span></code> と書かれているだけだ。</p>
<blockquote>
<div><p>「明示リスト」セクションの中のリソースはダウンロードされてローカルにキャッシュされ、ネットワークから切断されている間はいつでもオンラインのファイルの代わりに使われる。</p>
</div></blockquote>
<p>オンライン指定区画の説明から：</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">NETWORK:</span></code> の行が「オンライン指定リスト」セクションの始まりを示している。</p>
</div></blockquote>
<p>この一覧に含まれるファイルはキャッシュされない。オフラインで利用不能。</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">CACHE:</span></code> の行は「明示リスト」セクションの始まりを示している。</p>
</div></blockquote>
<p>セクションラベルのないファイルリストは明示リストとみなされる。</p>
<p>代替区画の説明が他よりも長い。</p>
<blockquote>
<div><p>FALLBACK セクションでは、オンラインリソースが何らかの理由でキャッシュできない場合、あるいはキャッシュに失敗した場合の代替リソースを指定できる。</p>
</div></blockquote>
<hr class="docutils" />
<p>HTML5 仕様から引用したらしい例を示したうえで：</p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>CACHE MANIFEST
FALLBACK:
/ /offline.html
NETWORK:
*
</pre></div>
</div>
</div></blockquote>
<p>その意味を解説している。</p>
<p><code class="docutils literal notranslate"><span class="pre">/</span> <span class="pre">/offline.html</span></code> の最初の一文字 <code class="docutils literal notranslate"><span class="pre">/</span></code> は URL ではなく、</p>
<blockquote>
<div><p>ホームページだけではなく、サイトのすべてのページにマッチする。</p>
</div></blockquote>
<p>NETWORK 区画の米印は</p>
<blockquote>
<div><p>「オンライン指定リストのワイルドカードフラグ」と呼ばれ、インターネットに接続している限り、AppCache にないページは元の Web アドレスからダウンロードしてよい、という意味になる。</p>
</div></blockquote>
<hr class="docutils" />
<p>デバッグ手法については急所が二点あるそうだ。</p>
<blockquote>
<div><p><strong>たとえ一個でも、キャッシュマニフェストファイルのリストに記載されたリ
ソースがダウンロードに失敗すれば、オフライン Web アプリケーションをキャッシュ
するというプロセス全体が失敗してしまう。</strong></p>
</div></blockquote>
<p>もう一点はブラウザーのバグと錯覚するような現象がありがちだということだ。いろいろとすっ飛ばして結論だけノートする：</p>
<blockquote>
<div><p>したがって、絶対にやっておくべきことがひとつある。Web サーバの設定を変更して、キャッシュマニフェストファイルが HTTP によってキャッシュされないようにしておくことだ。</p>
</div></blockquote>
<p>さらに次の助言がある：</p>
<blockquote>
<div><p>オフライン Web アプリケーションのリソースのどれかを変更したら、必ずキャッシュマニフェストファイル自身も変更しなくてはならない。</p>
</div></blockquote>
<p>本文の記述の感じからすると、ほんとうに内容を変更する必要があると読める。単なる
<strong class="command">touch</strong> では不十分のようだ。</p>
<hr class="docutils" />
<p>これは演習が難しい。ローカルホストではダウンロードの発生有無を検出できないのではないか。ブラウザーの開発ツールに送受信監視ビューでもあればいけるか？</p>
</section>
<section id="id7">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">9 章 Web フォーム</a><a class="headerlink" href="#id7" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p>HTML5 では、フォーム中に使える入力形式が多数定義されている</p>
</div></blockquote>
<p>主旨は <code class="samp docutils literal notranslate"><span class="pre">&lt;input</span> <span class="pre">type=&quot;</span><em><span class="pre">xxxxxx</span></em><span class="pre">&quot;&gt;</span></code> の <code class="samp docutils literal notranslate"><em><span class="pre">xxxxxx</span></em></code> に指定可能な値が多数追加されたということだ。</p>
<blockquote>
<div><p>HTML5 で Web フォームに行われた最初の改良は、入力フィールドにプレースホルダを設定する機能だ。</p>
</div></blockquote>
<p>MFC の <code class="docutils literal notranslate"><span class="pre">CEdit::SetCueBanner</span></code> のような働きをする。やりかたは例えば
<code class="samp docutils literal notranslate"><span class="pre">&lt;input</span> <span class="pre">placeholder=&quot;</span><em><span class="pre">prompt-text</span></em><span class="pre">&quot;&gt;</span></code> のようにする。</p>
<hr class="docutils" />
<p>自動フォーカスに関する記述。この機能がつねに便利であるとは限らないと述べる。特に、JavaScript でこの機能を実装してしまうと次のようなことがあり得る：</p>
<blockquote>
<div><p>例えばページをスクロールしようとしてスペースバーを押しても、フォーカスがすでにフォームの入力フィールドにあるため、ページはスクロールせず、代わりにそのフィールドにスペースが入力されてしまう。</p>
</div></blockquote>
<p>HTML5 の <code class="docutils literal notranslate"><span class="pre">autofocus</span></code> 属性を採用すると改善される：</p>
<blockquote>
<div><p>この <code class="docutils literal notranslate"><span class="pre">autofocus</span></code> 属性は、ページのロードが完了した時点でフォーカスを特定の入力フィールドへ移動する</p>
</div></blockquote>
<p>やり方は <code class="docutils literal notranslate"><span class="pre">&lt;input&gt;</span></code> 要素に属性 <code class="docutils literal notranslate"><span class="pre">autofocus</span></code> を追加すればいい。値は不要。</p>
<p>古いブラウザーは無視して、自動フォーカスを与えるならば <code class="docutils literal notranslate"><span class="pre">autofocus</span></code> しか使わないようにするのが良さそうだ。</p>
<hr class="docutils" />
<p>HTML5 では、メールアドレス入力欄に対する <code class="docutils literal notranslate"><span class="pre">&lt;input&gt;</span></code> 要素にて属性
<code class="docutils literal notranslate"><span class="pre">type=&quot;email&quot;</span></code> を指定する。ブラウザーによっては、専用の処理を行うことがあると言う：</p>
<blockquote>
<div><p>Apple は、非情に賢い機能を iPhone の Web ブラウザに実装した。いくつかの新しい
HTML5 入力形式を認識し、そして入力の種類に応じて <strong>動的にオンスクリー
ンキーボードを変更する</strong> という機能だ。</p>
</div></blockquote>
<p>メールアドレス入力に特化したキーボード GUI を表示するようだ。</p>
<p>URL 入力欄に対する <code class="docutils literal notranslate"><span class="pre">&lt;input&gt;</span></code> 要素には属性 <code class="docutils literal notranslate"><span class="pre">type=&quot;url&quot;</span></code> を与える。例えば
iPhone4 では：</p>
<blockquote>
<div><p>電子メールアドレスフィールドと同じ用に、iPhone では Web アドレスの入力に適した特別な仮想キーボードが表示される。スペースバーは消え、代わりにピリオド、スラッシュ、そして <span class="guilabel">.com</span> ボタンが表示される。<span class="guilabel">.com</span> ボタンを長押しすると、<span class="guilabel">.co.jp</span> や <span class="guilabel">.jp</span> などのよく使われるサフィックスを選ぶことができる。</p>
</div></blockquote>
<hr class="docutils" />
<p>数値入力用のコントロールにはスピンボックスとスライダーを用意できる。前者は MFC
の <code class="docutils literal notranslate"><span class="pre">CSpinEdit</span></code> と同じ機能を期待してよい。</p>
<blockquote>
<div><div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;number&quot;</span>
       <span class="na">min</span><span class="o">=</span><span class="s">&quot;0&quot;</span>
       <span class="na">max</span><span class="o">=</span><span class="s">&quot;10&quot;</span>
       <span class="na">step</span><span class="o">=</span><span class="s">&quot;2&quot;</span>
       <span class="na">value</span><span class="o">=</span><span class="s">&quot;6&quot;</span><span class="p">&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>ガワに加えて JavaScript による値操作も可能だ。例えば <code class="samp docutils literal notranslate"><span class="pre">.stepUp(</span><em><span class="pre">n</span></em><span class="pre">)</span></code> メソッドで入力欄の値が <code class="samp docutils literal notranslate"><em><span class="pre">n</span></em></code> 増加する。数値を得るには <code class="docutils literal notranslate"><span class="pre">.valueAsNumber</span></code> プロパティーを参照するといい。</p>
<p>後者は MFC でいう <code class="docutils literal notranslate"><span class="pre">CSpinCtrl</span></code> に相当する機能を設けたものだ。<code class="docutils literal notranslate"><span class="pre">&lt;input&gt;</span></code> 要素の属性では <code class="docutils literal notranslate"><span class="pre">type=&quot;range&quot;</span></code> とする。</p>
<hr class="docutils" />
<p>カレンダーや時計のような GUI から日付と時刻の一方または両方を選ぶためのフォーム要素が HTML5 で新しく追加された。タイミングの水準に対応して <code class="docutils literal notranslate"><span class="pre">&lt;input&gt;</span></code> 要素の
<code class="docutils literal notranslate"><span class="pre">type</span></code> 属性に取る値が用意されている：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type=&quot;date&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type=&quot;month&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type=&quot;week&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type=&quot;time&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type=&quot;datetime-local&quot;</span></code></p></li>
</ul>
<p>本書で記載のある <code class="docutils literal notranslate"><span class="pre">type=&quot;datetime&quot;</span></code> は現在廃止済みのようだ。また、本書執筆時点では Opera しかまともに対応していなかったらしく、そのせいか入力値を得る方法に関する記述がない。<code class="docutils literal notranslate"><span class="pre">.value</span></code> か <code class="docutils literal notranslate"><span class="pre">.valueAsNumber</span></code> が使える。後者はタイムスタンプを表現する数値だ。</p>
<hr class="docutils" />
<p>検索欄は <code class="docutils literal notranslate"><span class="pre">type=&quot;search&quot;</span></code> だ。</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">type=&quot;search&quot;</span></code> ボックスに実際に入力をし始めると、Safari はそのボックスの右側に小さな <span class="guilabel">x</span> ボタンを表示する。この <span class="guilabel">x</span> ボタンをクリックすると、フィールドの内容が消去される。</p>
</div></blockquote>
<p>昔は検索内容を変更するたびにテキストを選択して <kbd class="kbd docutils literal notranslate">Del</kbd> を押していたのを思い出す。</p>
<hr class="docutils" />
<p>色指定は <code class="docutils literal notranslate"><span class="pre">type=&quot;color&quot;</span></code> だ。</p>
<blockquote>
<div><p>すべてのプラットフォームにおいて、このコントロールは 6 桁の 16 進数による RGB
値を返す。</p>
</div></blockquote>
<p>JavaScript でプロパティー <code class="docutils literal notranslate"><span class="pre">.value</span></code> を見ると例えば <code class="docutils literal notranslate"><span class="pre">'#0cdeed'</span></code> のような文字列が得られる。</p>
<hr class="docutils" />
<p>《フォームに入力された内容の自動検証機能》について。</p>
<blockquote>
<div><p>フォーム検証機能を有効にするために特別なマークアップは必要ない。なぜなら、デフォルトで有効だからだ。逆に検証を無効にしたい場合は、<code class="docutils literal notranslate"><span class="pre">novalidate</span></code> 属性を使う。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">form</span> <span class="na">novalidate</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;email&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;addr&quot;</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;submit&quot;</span> <span class="na">value</span><span class="o">=</span><span class="s">&quot;Subscribe&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>入力欄単位では入力必須属性というものがある。属性 <code class="docutils literal notranslate"><span class="pre">required</span></code> を <code class="docutils literal notranslate"><span class="pre">&lt;input&gt;</span></code> に付加する。ブラウザーによっては</p>
<blockquote>
<div><p>入力必須フィールドの見た目を変更することがある。</p>
</div></blockquote>
<p>さらに、</p>
<blockquote>
<div><p>入力必須フィールドに何も入力しないままフォームを送信しようとすると、そのフィールドが入力必須であり空にできないというポップアップを表示する</p>
</div></blockquote>
<p>ようなこともする。</p>
</section>
<section id="id8">
<h2><a class="toc-backref" href="#id21" role="doc-backlink">10 章 マイクロデータによるマークアップの拡張</a><a class="headerlink" href="#id8" title="Link to this heading">¶</a></h2>
<blockquote>
<div><p>独自の要素を作り上げることが無理なら、Web に意味を持たせたい Web 制作者はどうすればよいだろうか。</p>
</div></blockquote>
<p>選択肢は次の三つあるが、第三の項目が本章の主題だ：</p>
<ul class="simple">
<li><p><a class="reference external" href="http://microformats.org/">マイクロフォーマット</a></p></li>
<li><p><a class="reference external" href="https://www.w3.org/TR/html-rdfa/">RDFa</a></p></li>
<li><p>マイクロデータ</p></li>
</ul>
<p>マイクロデータとはデータの一種ではなく、</p>
<blockquote>
<div><p>独自の語彙から構成される名前と値のペアによって、あるスコープ（範囲）内の DOM
を意味付けする仕組みだ。</p>
</div></blockquote>
<p>例えば HTML5 要素すべての集合を考えると、これは語彙の一つと言える。《マイクロデータは独自の語彙を中心として機能する》と述べている。</p>
<p>名前と値のペア、スコープに関しては後述の節で実例に即して説明される。</p>
<blockquote>
<div><p>マイクロデータは、<strong>Web ページにすでに表示されているデータ</strong> に意味を追加するものだ。</p>
</div></blockquote>
<hr class="docutils" />
<p>§10.3-10.4 は次の資料を見ながら読み進めるといい：</p>
<ul class="simple">
<li><p>&lt;<a class="reference external" href="http://data-vocabulary.org/Person">http://data-vocabulary.org/Person</a>&gt;: 廃止済み</p></li>
<li><p>&lt;<a class="reference external" href="https://schema.org/Person">https://schema.org/Person</a>&gt;: 上記語彙の移行先候補</p></li>
<li><p>&lt;<a class="reference external" href="http://diveintohtml5.info/examples/person.html">http://diveintohtml5.info/examples/person.html</a>&gt;: マイクロデータ対応前</p></li>
<li><p>&lt;<a class="reference external" href="http://diveintohtml5.info/examples/person-plus-microdata.html">http://diveintohtml5.info/examples/person-plus-microdata.html</a>&gt;: マイクロデータ対応後</p></li>
</ul>
<p>特に、HTML ファイル同士の <strong class="command">diff</strong> を確認すると実際になされた作業が明瞭になる。</p>
<blockquote>
<div><p>まず必要となるのは名前空間で、これは単純な URL だ。</p>
</div></blockquote>
<p>本書の例では上の廃止済み URL を参照する。今のところは一意な識別子でさえあればいい。この語彙を次の集合で定義したと考える：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">photo</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></li>
</ul>
<p>この条件でマイクロデータを対応前 HTML に対して追加するとする。</p>
<blockquote>
<div><p>最初にしなければならないのは、<code class="docutils literal notranslate"><span class="pre">itemtype</span></code> 属性を追加し、使用するマイクロデータ語彙を宣言することだ。次にしなければならないのは、<code class="docutils literal notranslate"><span class="pre">itemscope</span></code> 属性を使って、語彙のスコープを宣言することだ。</p>
</div></blockquote>
<p>というわけで、いちばん外側の要素である <code class="docutils literal notranslate"><span class="pre">&lt;section&gt;</span></code> に次の属性を追加する：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">itemtype=&quot;http://data-vocabulary.org/Person&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">itemscope</span></code></p></li>
</ul>
<p>ここからキーと値のペアを HTML 上で行う。表 10-1 のように、要素ごとに値の在り処が異なる。</p>
<blockquote>
<div><div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">h1</span> <span class="na">itemprop</span><span class="o">=</span><span class="s">&quot;name&quot;</span><span class="p">&gt;</span>Mark Pilgrim<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>日本語で言うと、「これは <code class="docutils literal notranslate"><span class="pre">http://data-vocabulary.org/Person</span></code> 語彙の中の
<code class="docutils literal notranslate"><span class="pre">name</span></code> プロパティで、その値は <code class="docutils literal notranslate"><span class="pre">Mark</span> <span class="pre">Pilgrim</span></code> だ」という意味になる。</p>
</div></blockquote>
<p>この調子で <code class="docutils literal notranslate"><span class="pre">photo</span></code> と <code class="docutils literal notranslate"><span class="pre">url</span></code> も意味付けしていく（表 10-1 に注意する）。</p>
<blockquote>
<div><p>実は、<a class="reference external" href="http://data-vocabulary.org/Person">http://data-vocabulary.org/Person</a> へ行けば、プロパティの一覧を見ることができる。マイクロデータの仕様はそこまで要求していないが、確かにこれは「ベストプラクティス」だと言えるだろう。</p>
</div></blockquote>
<p>現在では当該 URL は廃止されている。著者の主張を理解するには先述の移行先候補 URL
を見ればいい。</p>
<p>場合によっては DOM 構造にも手を入れていく。実際に書かれている内容が二つのプロパティーにまたがっているような場合だ。またがっているということは、</p>
<blockquote>
<div><p>それぞれの箇所をダミーの <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> 要素で囲えば、それぞれの <code class="docutils literal notranslate"><span class="pre">&lt;span&gt;</span></code> に別個のプロパティを宣言できる。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">dt</span><span class="p">&gt;</span>Position<span class="p">&lt;/</span><span class="nt">dt</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">dd</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">itemprop</span><span class="o">=</span><span class="s">&quot;title&quot;</span><span class="p">&gt;</span>Developer advocate<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> for
    <span class="p">&lt;</span><span class="nt">span</span> <span class="na">itemprop</span><span class="o">=</span><span class="s">&quot;affiliation&quot;</span><span class="p">&gt;</span>Google, Inc.<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">dd</span><span class="p">&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>Person 語彙の <code class="docutils literal notranslate"><span class="pre">address</span></code> は、これ自身が独自の語彙を持っている。したがって
Mailing Address の項目部分を</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">dd</span> <span class="na">itemprop</span><span class="o">=</span><span class="s">&quot;address&quot;</span> <span class="na">itemscope</span> <span class="na">itemtype</span><span class="o">=</span><span class="s">&quot;http://data-vocabulary.org/Address&quot;</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>のように書き換えることになる。マイクロデータ関連の属性三つがあることになる。</p>
<p>日本の住所表記と各プロパティーの対照表 (p. 199) がありがたい。</p>
<hr class="docutils" />
<p>マイクロデータは検索エンジンが参考にする可能性がある。検索結果ページに構造化された情報を統合して表示することがある。</p>
<blockquote>
<div><p>Google は、リッチスニペットの一環としてマイクロデータをサポートしている。</p>
</div></blockquote>
<p>&lt;<a class="reference external" href="https://search.google.com/test/rich-results">https://search.google.com/test/rich-results</a>&gt; と思われる。本書のコードを試すことは可能だ。しかし、語彙が廃止されているためだと思われるが、芳しい結果にはならない。検証ツールは <a class="reference external" href="https://validator.schema.org/">Schema.org</a> Validator がわかりやすい。</p>
<blockquote>
<div><p>誰かが「Mark Pilgrim」を検索し、 <strong>かつ</strong> Google がこの「about me」ページを検索結果に含めようと判断し、 <strong>かつ</strong> Google がそのページにもともとあったマイクロデータが表示する価値のあるものだと判断した場合には、検索結果の表示は図 10-1
のようなもの（引用註：マイクロデータで拡張された人物の検索結果の見本画像）になるだろう。</p>
</div></blockquote>
<p>検索結果ページで特殊な表示を目にすることがあるが、これだったのか。</p>
<blockquote>
<div><p>検索エンジンの会社と特別契約を結べるような大企業でなくても、検索エンジンの結果表示をカスタマイズできるのだ。</p>
</div></blockquote>
<hr class="docutils" />
<blockquote>
<div><p>HTML5 では不可視データを注釈としてマイクロデータに加える方法が提供されている。このテクニックは、あくまでも最後の手段として使用してほしい。（略）機械のみが可読な不可視データは、すぐに陳腐化してしまう。</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;meta&gt;</span></code> 要素は特別に取り扱われる。プロパティの値は、その <code class="docutils literal notranslate"><span class="pre">content</span></code> 属性となるのだ。</p>
</div></blockquote>
</section>
<section id="a-html5">
<h2><a class="toc-backref" href="#id22" role="doc-backlink">付録 A （ほぼ）アルファベット順の HTML5 機能機能方法</a><a class="headerlink" href="#a-html5" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">&lt;command&gt;</span></code> 要素は存在しない。</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;datelist&gt;</span></code> 要素は <code class="docutils literal notranslate"><span class="pre">&lt;option&gt;</span></code> 要素を含み、他の入力欄の中で選択可能である選択肢や推奨選択肢を表す。次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/datalist</a>&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;details&gt;</span></code> 要素は折りたたみブロックを構成するのに用いるものだ。次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details</a>&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;device&gt;</span></code> 要素は存在しない。</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;iframe</span> <span class="pre">sandbox&gt;</span></code> および <code class="docutils literal notranslate"><span class="pre">&lt;iframe</span> <span class="pre">srcdoc&gt;</span></code> については次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe</a>&gt;</p>
<p>先述したように <code class="docutils literal notranslate"><span class="pre">&lt;input</span> <span class="pre">type=&quot;datetime&quot;&gt;</span></code> は存在しない。</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;meter&gt;</span></code> 要素については次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meter">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meter</a>&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;output&gt;</span></code> 要素については次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/output">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/output</a>&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;progress&gt;</span></code> 要素については次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/progress">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/progress</a>&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;track&gt;</span></code> 要素は <code class="docutils literal notranslate"><span class="pre">&lt;audio&gt;</span></code> や <code class="docutils literal notranslate"><span class="pre">&lt;video&gt;</span></code> 要素の子にするものだ。次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/track">https://developer.mozilla.org/en-US/docs/Web/HTML/Element/track</a>&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;video&gt;</span></code> 要素の <code class="docutils literal notranslate"><span class="pre">poster</span></code> 属性はビデオのダウンロード中に表示する画像の URL
を値に取る。YouTube で言うとサムネイルに相当する。</p>
<p><code class="docutils literal notranslate"><span class="pre">contentEditable</span></code> 大域的属性については次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/contenteditable">https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/contenteditable</a>&gt;</p>
<p>History はブラウザーの戻る・進むの履歴のための API だ。次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/History">https://developer.mozilla.org/en-US/docs/Web/API/History</a>&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">document.getItems</span></code> は <code class="docutils literal notranslate"><span class="pre">undefined</span></code> だからマイクロデータは使えないということか。</p>
<p><code class="docutils literal notranslate"><span class="pre">EventSource</span></code> については次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/EventSource">https://developer.mozilla.org/en-US/docs/Web/API/EventSource</a>&gt;</p>
<p>セッションストレージについては次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage">https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage</a>&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">UndoManager</span></code> は存在しない。</p>
<p>WebSocket については次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket">https://developer.mozilla.org/en-US/docs/Web/API/WebSocket</a>&gt;</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="kantor22/part03/03-network.html"><span class="doc">Network requests</span></a> で少し見ていた。</p>
</div>
<p>Web SQL データベース。<code class="docutils literal notranslate"><span class="pre">window.openDatabase</span></code> は存在するが、インターネット上にまともな情報がない。</p>
<p>Web Workers について次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Worker">https://developer.mozilla.org/en-US/docs/Web/API/Worker</a>&gt;</p>
<p>W3C Widgets は存在しない。</p>
<p><code class="docutils literal notranslate"><span class="pre">XMLHttpRequest</span></code> については次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest">https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest</a>&gt;</p>
<p><code class="docutils literal notranslate"><span class="pre">window.applicationCache</span></code> が存在しない。</p>
<p>クロスドキュメントメッセージングについては次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage">https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage</a>&gt;</p>
<p>ドラッグアンドドロップは取り扱いが難しいと記憶している。
<code class="docutils literal notranslate"><span class="pre">draggable</span></code> 大域的属性については次を参照：
&lt;<a class="reference external" href="https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/draggable">https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/draggable</a>&gt;</p>
<hr class="docutils" />
<ul class="simple">
<li><p>&lt;<a class="reference external" href="http://dev.w3.org/">http://dev.w3.org/</a>&gt; にある文書は確認方法が不明。</p></li>
<li><p>&lt;<a class="reference external" href="https://www.w3.org/TR/widgets/">https://www.w3.org/TR/widgets/</a>&gt; は «obsoleted 11 October 2018» とある。</p></li>
</ul>
</section>
</section>


          </div>
    <div class="related bottom">
      &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="loeliger09.html" title="Previous">実用 Git 読書ノート</a>
        </li>
      
        <li>
          <a href="griffiths10.html" title="Next">プログラミング C# 第 6 版 読書ノート</a>
          &rarr;
        </li>
    </ul>
  </nav>
    </div>

      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="index.html" title="読書ノート Home"><img src="_images/logo.svg"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2024, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>