<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>入門 bash 読書ノート 1/3 &#8212; 読書ノート 1.6dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=1a9a5cd9" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=5a6f99c4"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/mermaid.js?v=578dbed1"></script>
    <link rel="next" title="入門 bash 読書ノート 2/3" href="note2.html" />
    <link rel="prev" title="入門 bash 読書ノート" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
    <div class="related top">
      &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="index.html" title="Previous">入門 bash 読書ノート</a>
        </li>
      
        <li>
          <a href="note2.html" title="Next">入門 bash 読書ノート 2/3</a>
          &rarr;
        </li>
    </ul>
  </nav>
    </div>


          <div class="body" role="main">
            
  <section id="bash-1-3">
<h1><a class="toc-backref" href="#id35" role="doc-backlink">入門 bash 読書ノート 1/3</a><a class="headerlink" href="#bash-1-3" title="Permalink to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">著者<span class="colon">:</span></dt>
<dd class="field-odd"><p>Cameron Newham, Bill Rosenblatt</p>
</dd>
<dt class="field-even">訳者<span class="colon">:</span></dt>
<dd class="field-even"><p>株式会社クイープ</p>
</dd>
<dt class="field-odd">出版社<span class="colon">:</span></dt>
<dd class="field-odd"><p>オライリー・ジャパン</p>
</dd>
<dt class="field-even">発行年<span class="colon">:</span></dt>
<dd class="field-even"><p>2005 年</p>
</dd>
<dt class="field-odd">ISBN<span class="colon">:</span></dt>
<dd class="field-odd"><p>978-4-87311-254-1</p>
</dd>
</dl>
<nav class="contents" id="id1">
<p class="topic-title">ノートの目次</p>
<ul class="simple">
<li><p><a class="reference internal" href="#bash-1-3" id="id35">入門 bash 読書ノート 1/3</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id36">まえがき</a></p></li>
<li><p><a class="reference internal" href="#bash" id="id37">1 章 <strong class="program">bash</strong> の基礎</a></p>
<ul>
<li><p><a class="reference internal" href="#unix" id="id38">1.3 UNIX シェルの歴史</a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id39">1.3.1 <strong class="program">bash</strong></a></p></li>
<li><p><a class="reference internal" href="#id4" id="id40">1.3.2 <strong class="program">bash</strong> の特徴</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id5" id="id41">1.4 <strong class="program">bash</strong> の入手</a></p></li>
<li><p><a class="reference internal" href="#id6" id="id42">1.6 ファイル</a></p>
<ul>
<li><p><a class="reference internal" href="#id7" id="id43">1.6.1 ディレクトリ</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id44">1.6.2 ファイル名、ワイルドカード、パス名の展開</a></p></li>
<li><p><a class="reference internal" href="#id9" id="id45">1.6.3 ブレース展開</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id10" id="id46">1.7 入力と出力</a></p>
<ul>
<li><p><a class="reference internal" href="#id11" id="id47">1.7.1 標準入出力</a></p></li>
<li><p><a class="reference internal" href="#id12" id="id48">1.7.3 パイプライン</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id13" id="id49">1.8 バックグラウンドジョブ</a></p></li>
<li><p><a class="reference internal" href="#id14" id="id50">1.9 特殊記号とクォーティング</a></p>
<ul>
<li><p><a class="reference internal" href="#id15" id="id51">1.9.1 クォーティング</a></p></li>
<li><p><a class="reference internal" href="#id16" id="id52">1.9.2 バックスラッシュエスケープ</a></p></li>
<li><p><a class="reference internal" href="#id17" id="id53">1.9.5 コントロールキー</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#id18" id="id54">2 章 コマンドライン編集</a></p>
<ul>
<li><p><a class="reference internal" href="#emacs" id="id55">2.3 <strong class="program">emacs</strong> モード</a></p>
<ul>
<li><p><a class="reference internal" href="#id19" id="id56">2.3.1 基本コマンド</a></p></li>
<li><p><a class="reference internal" href="#id20" id="id57">2.3.4 履歴ファイル内での移動</a></p></li>
<li><p><a class="reference internal" href="#id21" id="id58">2.3.5 テキスト補完</a></p></li>
<li><p><a class="reference internal" href="#id22" id="id59">2.3.6 その他のコマンド</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id23" id="id60">2.6 履歴の展開</a></p></li>
<li><p><a class="reference internal" href="#readline" id="id61">2.7 <code class="docutils literal notranslate"><span class="pre">readline</span></code></a></p>
<ul>
<li><p><a class="reference internal" href="#id24" id="id62">2.7.1 <code class="docutils literal notranslate"><span class="pre">readline</span></code> の起動ファイル</a></p></li>
<li><p><a class="reference internal" href="#bind" id="id63">2.7.2 <strong class="command">bind</strong> を使ったキーバインド</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id25" id="id64">2.8 キー入力の習慣</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id26" id="id65">3 章 環境のカスタマイズ</a></p>
<ul>
<li><p><a class="reference internal" href="#bash-profile-bash-logout-bashrc" id="id66">3.1 <code class="file docutils literal notranslate"><span class="pre">.bash_profile</span></code>, <code class="file docutils literal notranslate"><span class="pre">.bash_logout</span></code>, <code class="file docutils literal notranslate"><span class="pre">.bashrc</span></code></a></p></li>
<li><p><a class="reference internal" href="#id27" id="id67">3.2 エイリアス</a></p></li>
<li><p><a class="reference internal" href="#id28" id="id68">3.3 オプション</a></p>
<ul>
<li><p><a class="reference internal" href="#shopt" id="id69">3.3.1 <strong class="command">shopt</strong></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id29" id="id70">3.4 シェル変数</a></p>
<ul>
<li><p><a class="reference internal" href="#id30" id="id71">3.4.1 変数とクォーティング</a></p></li>
<li><p><a class="reference internal" href="#id31" id="id72">3.4.2 組み込み変数</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id32" id="id73">3.5 カスタマイズとサブプロセス</a></p>
<ul>
<li><p><a class="reference internal" href="#id33" id="id74">3.5.1 環境変数</a></p></li>
<li><p><a class="reference internal" href="#id34" id="id75">3.5.2 環境定義ファイル</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="id2">
<h2><a class="toc-backref" href="#id36" role="doc-backlink">まえがき</a><a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$BASH_VERSION</span></code> で使用している <strong class="program">bash</strong> のバージョンを確認できる。(p. v)</p>
<ul>
<li><p>今手許の環境を調べたら <code class="docutils literal notranslate"><span class="pre">3.2.48(21)-release</span></code> と出た。</p></li>
</ul>
</li>
<li><p>本書の想定読者は「初心者」の次の段階に位置する一般的な UNIX/Linux ユーザー。(p. vi)</p></li>
<li><p>本書の狙いは、実用的なシェルプログラムを作成するためにコンピュータの学位を取得する必要はないことを示すことにある。(p. vii)</p></li>
<li><p>RUBOUT: rub out を辞書で調べると、「すり消す」とある。</p></li>
<li><p>&lt;本書では、UNIX を「UNIX と Linux」の略語と捉えている&gt; (p. x)</p></li>
</ul>
</section>
<section id="bash">
<h2><a class="toc-backref" href="#id37" role="doc-backlink">1 章 <strong class="program">bash</strong> の基礎</a><a class="headerlink" href="#bash" title="Permalink to this heading">¶</a></h2>
<section id="unix">
<h3><a class="toc-backref" href="#id38" role="doc-backlink">1.3 UNIX シェルの歴史</a><a class="headerlink" href="#unix" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>歴史的な説明から。</p></li>
</ul>
<dl class="simple">
<dt>Bourne シェル (<strong class="program">sh</strong>)</dt><dd><ul class="simple">
<li><p>作成者 Steven Bourne</p></li>
<li><p>1979 年に登場した最初の普及版 UNIX である Version 7 に搭載されていた</p></li>
</ul>
</dd>
<dt>C シェル (<strong class="program">csh</strong>)</dt><dd><ul class="simple">
<li><p>作者はカリフォルニア州立大学バークレー校の Bill Joy</p></li>
<li><p>Berkley Software Disribution UNIX (BSD UNIX) の一部として書かれた</p></li>
</ul>
</dd>
<dt>Korn シェル (<strong class="program">ksh</strong>)</dt><dd><ul class="simple">
<li><p><strong class="program">sh</strong> と <strong class="program">csh</strong> の優れた機能プラス多数の独自機能から構成</p></li>
<li><p>商用製品</p></li>
</ul>
</dd>
</dl>
<section id="id3">
<h4><a class="toc-backref" href="#id39" role="doc-backlink">1.3.1 <strong class="program">bash</strong></a><a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong class="program">bash</strong> の名前は Bourne Again Shell から来ている。<strong class="program">sh</strong> へのリスペクトが込められている。</p></li>
<li><p>GNU プロジェクトのために作成されたシェルなので、無償で配布されている。</p></li>
<li><p>&lt;<strong class="program">bash</strong> は、GNU システム用の標準のシェルとして、公式には 1988 年 1 月
10 日の日曜日に産声をあげた&gt; (p. 4)</p></li>
</ul>
</section>
<section id="id4">
<h4><a class="toc-backref" href="#id40" role="doc-backlink">1.3.2 <strong class="program">bash</strong> の特徴</a><a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h4>
<p>以下の三点を指摘している。</p>
<ul class="simple">
<li><p>コマンドライン編集モード</p></li>
<li><p>ジョブ制御</p></li>
<li><p>主にシェルをカスタマイズしたりプログラミングしたりするための機能</p></li>
</ul>
</section>
</section>
<section id="id5">
<h3><a class="toc-backref" href="#id41" role="doc-backlink">1.4 <strong class="program">bash</strong> の入手</a><a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">echo</span> <span class="pre">$SHELL</span></code> で使用しているシェルを確認できる。</p>
<ul>
<li><p>手許の環境で試した結果、<code class="docutils literal notranslate"><span class="pre">/bin/bash</span></code> と出た。</p></li>
</ul>
</li>
</ul>
</section>
<section id="id6">
<h3><a class="toc-backref" href="#id42" role="doc-backlink">1.6 ファイル</a><a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h3>
<section id="id7">
<h4><a class="toc-backref" href="#id43" role="doc-backlink">1.6.1 ディレクトリ</a><a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>チルダ展開について。</p>
<ul>
<li><p>ユーザー名の前に <code class="docutils literal notranslate"><span class="pre">~</span></code> を付けると、それはそのユーザーのホームディレクトリの絶対パスとなる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~</span></code> はユーザー自身のホームディレクトリを参照する。</p></li>
</ul>
</li>
</ul>
</section>
<section id="id8">
<h4><a class="toc-backref" href="#id44" role="doc-backlink">1.6.2 ファイル名、ワイルドカード、パス名の展開</a><a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>ワイルドカードとは記号だと思えばよい。すべてのファイルの名前がわからなくても、パターンで指定できる機能を利用するときに使う特殊な記号。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">?</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">[set]</span></code>, <code class="docutils literal notranslate"><span class="pre">[!set]</span></code></p></li>
<li><p>セット構造は初めて知った。</p></li>
<li><p>&lt;開きかっこ (<code class="docutils literal notranslate"><span class="pre">[</span></code>) の後に感嘆符 (<code class="docutils literal notranslate"><span class="pre">!</span></code>) を入れると、セットを「否定」することができる&gt; (p. 12)</p></li>
</ul>
</section>
<section id="id9">
<h4><a class="toc-backref" href="#id45" role="doc-backlink">1.6.3 ブレース展開</a><a class="headerlink" href="#id9" title="Permalink to this heading">¶</a></h4>
<ul>
<li><p>後で以下の入力を試してみる。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span><span class="w"> </span>b<span class="o">{</span>ed,olt,ar<span class="o">}</span>s
<span class="nb">echo</span><span class="w"> </span>b<span class="o">{</span>ar<span class="o">{</span>d,n,k<span class="o">}</span>,ed<span class="o">}</span>s
<span class="nb">echo</span><span class="w"> </span><span class="o">{</span>d..h<span class="o">}</span>
ls<span class="w"> </span>*.<span class="o">{</span>c,h,o<span class="o">}</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="id10">
<h3><a class="toc-backref" href="#id46" role="doc-backlink">1.7 入力と出力</a><a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h3>
<section id="id11">
<h4><a class="toc-backref" href="#id47" role="doc-backlink">1.7.1 標準入出力</a><a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>標準入力を利用してのコマンド入力終了を告げるために <kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">D</kbd> を押す。</p></li>
</ul>
</section>
<section id="id12">
<h4><a class="toc-backref" href="#id48" role="doc-backlink">1.7.3 パイプライン</a><a class="headerlink" href="#id12" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>&lt;入出力リダイレクトとパイプラインが UNIX のブロック構造原理をどのように支援しているかが理解できたと思う。表記は実に簡単で強力である。特に重要なのは、パイプの概念によってコマンドの出力をほかのコマンドに渡すための見苦しい一時ファイルが要らなくなったことである&gt; (p. 18)</p></li>
</ul>
</section>
</section>
<section id="id13">
<h3><a class="toc-backref" href="#id49" role="doc-backlink">1.8 バックグラウンドジョブ</a><a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>バックグラウンドジョブの基本は</p>
<ol class="arabic simple">
<li><p>コマンド <code class="docutils literal notranslate"><span class="pre">&amp;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jobs</span></code> でバックグラウンドジョブを確認することができる。</p></li>
</ol>
</li>
</ul>
</section>
<section id="id14">
<h3><a class="toc-backref" href="#id50" role="doc-backlink">1.9 特殊記号とクォーティング</a><a class="headerlink" href="#id14" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>p. 21 表 1-6 に特殊記号がまとまっている。</p></li>
</ul>
<section id="id15">
<h4><a class="toc-backref" href="#id51" role="doc-backlink">1.9.1 クォーティング</a><a class="headerlink" href="#id15" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>特殊記号をリテラルで使用したいときは、それらを単一引用符で囲むことで OK だ。</p></li>
</ul>
</section>
<section id="id16">
<h4><a class="toc-backref" href="#id52" role="doc-backlink">1.9.2 バックスラッシュエスケープ</a><a class="headerlink" href="#id16" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong class="command">find . -name STRING</strong> などと入力する場合、<code class="docutils literal notranslate"><span class="pre">STRING</span></code> の部分にはワイルドカードを検索対象ファイル名として指示できるが、これを引用符で囲むこと。</p></li>
</ul>
</section>
<section id="id17">
<h4><a class="toc-backref" href="#id53" role="doc-backlink">1.9.5 コントロールキー</a><a class="headerlink" href="#id17" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong class="program">stty</strong> コマンドを使用すると、コントロールキーの設定を確認できる。また必要に応じて変更できる。<strong class="command">stty all</strong> か <strong class="command">stty -a</strong> と入力してみること。</p></li>
<li><p>うっかり <kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">S</kbd> を押すと画面が止まる。もしだしぬけに画面が止まったら、<kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">Q</kbd> を試すこと。&lt;<kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">S</kbd> キーと
<kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">Q</kbd> キーは基本的に迷惑な存在になっている&gt; (p. 26)</p></li>
</ul>
</section>
</section>
</section>
<section id="id18">
<h2><a class="toc-backref" href="#id54" role="doc-backlink">2 章 コマンドライン編集</a><a class="headerlink" href="#id18" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>&lt;<strong class="program">bash</strong> の編集モードでは、UNIX エディタとして最も有名な <strong class="program">vi</strong>
と <strong class="program">emacs</strong> と同様の編集コマンドを使って、コマンドラインを編集することができる&gt; (p. 29)</p></li>
<li><p>&lt;とにかく編集モードを 1 つは覚えておきたいという場合は、<strong class="program">emacs</strong> モードをお勧めする。<strong class="program">emacs</strong> モードのほうが、シェルそのものが提供する基本的な編集機能をより自然な形で拡張しているからだ&gt; (pp. 29-30)</p></li>
</ul>
<section id="emacs">
<h3><a class="toc-backref" href="#id55" role="doc-backlink">2.3 <strong class="program">emacs</strong> モード</a><a class="headerlink" href="#emacs" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>コマンドライン入力を &lt;1 行のウィンドウからなる手軽な <strong class="program">emacs</strong>&gt; (p. 31)
と考えればよい。</p></li>
</ul>
<section id="id19">
<h4><a class="toc-backref" href="#id56" role="doc-backlink">2.3.1 基本コマンド</a><a class="headerlink" href="#id19" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong class="program">emacs</strong> を知らないユーザーにとっては、&lt;基本的なキー操作は覚えやすいが、<strong class="program">emacs</strong> 特有の概念をひととおり身につけることが要求される&gt; (p.
31)</p></li>
</ul>
</section>
<section id="id20">
<h4><a class="toc-backref" href="#id57" role="doc-backlink">2.3.4 履歴ファイル内での移動</a><a class="headerlink" href="#id20" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><strong class="program">emacs</strong> での行単位での上下方向の移動を、コマンド履歴の移動に流用している。</p></li>
<li><p><kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">R</kbd> は <code class="docutils literal notranslate"><span class="pre">reverse-i-search</span></code> になる。</p>
<ul>
<li><p>目当てのコマンドラインが見つかったら、<kbd class="kbd docutils literal notranslate">Enter</kbd> ではなく <kbd class="kbd docutils literal notranslate">Ctrl</kbd> +
<kbd class="kbd docutils literal notranslate">E</kbd> を押すのがよさそう。</p></li>
</ul>
</li>
</ul>
</section>
<section id="id21">
<h4><a class="toc-backref" href="#id58" role="doc-backlink">2.3.5 テキスト補完</a><a class="headerlink" href="#id21" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>&lt;<strong class="program">emacs</strong> モードの最も強力な（そして一般に使用されている）機能の 1 つは、<strong>テキスト補完</strong> 機能である&gt; (p. 35)</p></li>
<li><p>最も重要なのは <kbd class="kbd docutils literal notranslate">Tab</kbd> である。</p></li>
<li><p>p. 37 の表 2-5 を見ると、いろいろな補完コマンドがあることがわかるが、やっぱり
<kbd class="kbd docutils literal notranslate">Tab</kbd> 一丁で何とかなる。</p></li>
</ul>
</section>
<section id="id22">
<h4><a class="toc-backref" href="#id59" role="doc-backlink">2.3.6 その他のコマンド</a><a class="headerlink" href="#id22" title="Permalink to this heading">¶</a></h4>
<ol class="arabic simple">
<li><p><kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">L</kbd> は <code class="docutils literal notranslate"><span class="pre">clear</span></code> と同じ。</p></li>
<li><p><kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">V</kbd> は <code class="docutils literal notranslate"><span class="pre">quote-char</span></code> と同じ。</p></li>
<li><p><kbd class="kbd docutils literal notranslate">Esc</kbd> + <kbd class="kbd docutils literal notranslate">.</kbd> および <kbd class="kbd docutils literal notranslate">Esc</kbd> + <kbd class="kbd docutils literal notranslate">_</kbd> が便利で、前のコマンドラインの最後のワードをポイント位置に挿入する。</p></li>
</ol>
</section>
</section>
<section id="id23">
<h3><a class="toc-backref" href="#id60" role="doc-backlink">2.6 履歴の展開</a><a class="headerlink" href="#id23" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>イベント指示記号</p>
<ul>
<li><p>タイプミス直後に <code class="docutils literal notranslate"><span class="pre">^string1^string2</span></code> を活用できる。</p></li>
</ul>
</li>
<li><p>ワード指示記号</p>
<ul>
<li><p>&lt;<code class="docutils literal notranslate"><span class="pre">!!:0</span></code> に続いて新しい引数を入力すれば、最後のコマンドを別の引数で実行することができる&gt; (p. 51)</p></li>
</ul>
</li>
<li><p>修飾子</p></li>
</ul>
<p>このセクション、もう少し実用的な具体例が欲しい。と思っていたら、最後にこんなことが書いてあった。&lt;履歴の展開は、コマンドをすばやく再実行するのに便利だが、前述のコマンドライン編集メカニズムでは無効になってしまう&gt; (p. 52)</p>
</section>
<section id="readline">
<h3><a class="toc-backref" href="#id61" role="doc-backlink">2.7 <code class="docutils literal notranslate"><span class="pre">readline</span></code></a><a class="headerlink" href="#readline" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong class="program">bash</strong> のコマンドライン編集インターフェイス。</p></li>
<li><p>テキストベースのインターフェースを有するアプリケーションが <code class="docutils literal notranslate"><span class="pre">readline</span></code> を利用している場合がある。</p></li>
<li><p>キーバインドをカスタマイズすることができる。</p></li>
</ul>
<section id="id24">
<h4><a class="toc-backref" href="#id62" role="doc-backlink">2.7.1 <code class="docutils literal notranslate"><span class="pre">readline</span></code> の起動ファイル</a><a class="headerlink" href="#id24" title="Permalink to this heading">¶</a></h4>
<ul>
<li><p>&lt;デフォルトの起動ファイルは <code class="file docutils literal notranslate"><span class="pre">.inputrc</span></code> である&gt; (p. 52)</p></li>
<li><p>&lt;<code class="docutils literal notranslate"><span class="pre">readline</span></code> を使用するアプリケーションが別にある場合は、<strong class="program">bash</strong> 専用のキーバインドを別にしておいたほうがよいだろう。これには、（略）
<code class="file docutils literal notranslate"><span class="pre">.inputrc</span></code> ファイルに <code class="docutils literal notranslate"><span class="pre">$if</span> <span class="pre">bash</span></code> という条件文を挿入する&gt; (p. 54)</p></li>
<li><p>&lt;変数を設定するには、<code class="file docutils literal notranslate"><span class="pre">.inputrc</span></code> ファイルで <code class="docutils literal notranslate"><span class="pre">set</span></code> コマンドを使用する&gt;
(p. 55)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># bash を vi モードで起動するようにする</span>
<span class="nb">set</span><span class="w"> </span>editing-mode<span class="w"> </span>vi
</pre></div>
</div>
</li>
</ul>
</section>
<section id="bind">
<h4><a class="toc-backref" href="#id63" role="doc-backlink">2.7.2 <strong class="command">bind</strong> を使ったキーバインド</a><a class="headerlink" href="#bind" title="Permalink to this heading">¶</a></h4>
<ul>
<li><p>&lt;<strong class="command">bind -P</strong> と入力すれば、現在のキーバインドを表示することができる&gt;
(p. 55) そうなので、今手許の Cygwin で試したら大量に出力された。</p></li>
<li><p>&lt;キー配列にシェルコマンドをバインドしたい場合には、<strong class="command">bind -x</strong> が便利である&gt;</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># :kbd:`Ctrl` +L を ls コマンドにバインドする</span>
<span class="nb">bind</span><span class="w"> </span>-x<span class="w"> </span><span class="s1">&#39;&quot;\C-l&quot;:ls&#39;</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="id25">
<h3><a class="toc-backref" href="#id64" role="doc-backlink">2.8 キー入力の習慣</a><a class="headerlink" href="#id25" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong class="program">vi</strong> や <strong class="program">emacs</strong> のエディタを使った経験がなければ、
<strong class="program">emacs</strong> モードのキー入力を憶えることを著者は推奨している。また、
<strong class="program">emacs</strong> のコマンド構造がミニバージョンを作成するのに向いていることも指摘している。</p></li>
</ul>
</section>
</section>
<section id="id26">
<h2><a class="toc-backref" href="#id65" role="doc-backlink">3 章 環境のカスタマイズ</a><a class="headerlink" href="#id26" title="Permalink to this heading">¶</a></h2>
<p>冒頭で、環境という概念を、職場の机の例を挙げてわかりやすく説明している。文房具や電話機を個人の趣向に合わせて配置することは、環境のカスタマイズの一例だ。</p>
<section id="bash-profile-bash-logout-bashrc">
<h3><a class="toc-backref" href="#id66" role="doc-backlink">3.1 <code class="file docutils literal notranslate"><span class="pre">.bash_profile</span></code>, <code class="file docutils literal notranslate"><span class="pre">.bash_logout</span></code>, <code class="file docutils literal notranslate"><span class="pre">.bashrc</span></code></a><a class="headerlink" href="#bash-profile-bash-logout-bashrc" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">.bash_profile</span></code> はシステムにログインする度に読み込まれ、そこに書いてあるものを実行する。</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">.bash_profile</span></code> に類似するファイルとして、<code class="file docutils literal notranslate"><span class="pre">.bash_login</span></code> と
<code class="file docutils literal notranslate"><span class="pre">.profile</span></code> がある。</p>
<ul>
<li><p><code class="file docutils literal notranslate"><span class="pre">.bash_login</span></code> は C シェルの <code class="docutils literal notranslate"><span class="pre">.login</span></code> に由来している。</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">.profile</span></code> は Bourne シェルと Korn シェルの同名の設定ファイルに由来している。</p></li>
<li><p>ログイン時には、これらのいずれか一つだけが読み込まれる。優先度は
<code class="file docutils literal notranslate"><span class="pre">.bash_profile</span></code>, <code class="file docutils literal notranslate"><span class="pre">.bash_login</span></code>, <code class="file docutils literal notranslate"><span class="pre">.profile</span></code> の順。</p></li>
</ul>
</li>
<li><p>コマンドラインから <strong class="program">bash</strong> を起動した場合（サブシェル）、<code class="docutils literal notranslate"><span class="pre">.bashrc</span></code>
からコマンドを読み込もうとする。</p></li>
</ul>
</section>
<section id="id27">
<h3><a class="toc-backref" href="#id67" role="doc-backlink">3.2 エイリアス</a><a class="headerlink" href="#id27" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>構文は以下の通り。等号記号の前後に空白文字を入れてはならない。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">alias</span> <span class="o">&lt;</span><span class="n">名前</span><span class="o">&gt;=&lt;</span><span class="n">コマンド</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p><strong class="program">bash</strong> はエイリアスの対象となるものにテキスト置換を実行する。例えば
<strong class="command">alias printall='pr * | lpr'</strong> というエイリアスに対して、<code class="docutils literal notranslate"><span class="pre">*</span></code> をワイルドカード展開する。</p></li>
<li><p>エイリアスは再帰的であるが、無限ループに陥らないようにできている。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 無限ループにならない</span>
<span class="nb">alias</span><span class="w"> </span><span class="nv">ls</span><span class="o">=</span><span class="s1">&#39;ls -l&#39;</span>
</pre></div>
</div>
</li>
<li><p>等号なしで <strong class="command">alias XXXX</strong> を実行すると <code class="docutils literal notranslate"><span class="pre">XXXX</span></code> の値が表示される。</p></li>
<li><p>引数なしで <strong class="command">alias</strong> を実行すると、定義済みのエイリアスの一覧が表示される。</p></li>
<li><p>エイリアルは、&lt;シェルのスクリプトや関数では基本的に無効となる&gt; (p. 64)</p></li>
</ul>
</section>
<section id="id28">
<h3><a class="toc-backref" href="#id68" role="doc-backlink">3.3 オプション</a><a class="headerlink" href="#id28" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong class="command">set -o &lt;オプション名&gt;</strong> と <strong class="command">set +o &lt;オプション名&gt;</strong> が基本。前者はオプションを ON にし、後者は OFF にする。</p></li>
<li><p><strong class="command">ignoreeof</strong> と <strong class="command">nounset</strong> が面白そう。</p></li>
<li><p>オプションの状態を確認するには、単に <strong class="command">set -o</strong> とだけ入力する。</p>
<ul>
<li><p>今試してみたら、ほとんどのオプションが値が <code class="docutils literal notranslate"><span class="pre">off</span></code> だった。</p></li>
</ul>
</li>
</ul>
<section id="shopt">
<h4><a class="toc-backref" href="#id69" role="doc-backlink">3.3.1 <strong class="command">shopt</strong></a><a class="headerlink" href="#shopt" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>bash 2.0 で追加されたコマンドで、環境変数や <strong class="command">set</strong> コマンドで行われていた設定に代わるもの。</p></li>
<li><p><strong class="command">shopt -p</strong> で一覧を見てみよう。</p></li>
</ul>
</section>
</section>
<section id="id29">
<h3><a class="toc-backref" href="#id70" role="doc-backlink">3.4 シェル変数</a><a class="headerlink" href="#id29" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>変数を定義する構文は <code class="docutils literal notranslate"><span class="pre">&lt;変数名&gt;=&lt;値&gt;</span></code> であり、等号記号の左右に空白文字は入らない。</p></li>
<li><p>変数を削除するには <strong class="command">unset &lt;変数名&gt;</strong> とする。別に便利ではないようだ。</p></li>
<li><p>&lt;変数の値を確認する最も簡単な方法は <strong class="command">echo</strong> コマンドを使用することだ&gt;
(p. 67)</p></li>
</ul>
<section id="id30">
<h4><a class="toc-backref" href="#id71" role="doc-backlink">3.4.1 変数とクォーティング</a><a class="headerlink" href="#id30" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>&lt;引用符で囲まれている文字列を 1 つのワードをシェルに思い込ませる&gt; (p. 68)</p></li>
</ul>
</section>
<section id="id31">
<h4><a class="toc-backref" href="#id72" role="doc-backlink">3.4.2 組み込み変数</a><a class="headerlink" href="#id31" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>最初にコマンドライン履歴関連の変数を紹介している。よく使っているのは
<code class="docutils literal notranslate"><span class="pre">HISTFILESIZE</span></code>, <code class="docutils literal notranslate"><span class="pre">HISTSIZE</span></code>, <code class="docutils literal notranslate"><span class="pre">HISTTIMEFORMAT</span></code> の三つ。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">HISTCONTROL</span></code> 変数をうまく設定すると、重複するコマンドラインが履歴リストに追加されなくなる。例えば <code class="docutils literal notranslate"><span class="pre">HISTCONTROL=ignoredups</span></code> とする。</p></li>
</ul>
</li>
<li><p>プロンプト変数 (<code class="docutils literal notranslate"><span class="pre">PS1</span></code>, <code class="docutils literal notranslate"><span class="pre">PS2</span></code>, <code class="docutils literal notranslate"><span class="pre">PS3</span></code>, <code class="docutils literal notranslate"><span class="pre">PS4</span></code>) により、プロンプトをカスタマイズできる。</p>
<ul>
<li><p>&lt;Bash は 4 種類のプロンプト文を使い分ける&gt; (p. 73)</p></li>
<li><p>&lt;プロンプト文を設定する最も効果的な方法は、常にカレントディレクトリが表示されるようにすることだろう&gt; (p. 74) たとえば <code class="docutils literal notranslate"><span class="pre">PS1=&quot;\u</span> <span class="pre">\!--&gt;</span> <span class="pre">&quot;</span></code> のようにする。</p></li>
<li><p>&lt;セカンダリプロンプト文は、コマンドラインを入力して <kbd class="kbd docutils literal notranslate">RETURN</kbd> キーを押したときに、コマンドが未完成であることを示すために使用される&gt; (p. 75)</p></li>
</ul>
</li>
<li><p>コマンド検索パス <code class="docutils literal notranslate"><span class="pre">PATH</span></code></p>
<ul>
<li><p>この記法をおさえる。
<code class="docutils literal notranslate"><span class="pre">PATH=$PATH:&quot;/home/user-name/bin&quot;</span></code></p></li>
<li><p>セキュリティ上 <code class="docutils literal notranslate"><span class="pre">PATH</span></code> を自分のディレクトリをほかのよりも優先されるように設定してはいけない。</p></li>
</ul>
</li>
<li><p><strong class="program">bash</strong> はコマンドハッシュなるものを管理している。<strong class="command">hash</strong> コマンドでそれを確認できる。</p>
<ul>
<li><p>&lt;<strong class="command">hash</strong> の詳細について頭を悩ませる必要はない&gt; (p. 77)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">CDPATH</span></code> の紹介。「Cygwin へ送る」ユーザーである私は使わない。</p></li>
</ul>
</section>
</section>
<section id="id32">
<h3><a class="toc-backref" href="#id73" role="doc-backlink">3.5 カスタマイズとサブプロセス</a><a class="headerlink" href="#id32" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>&lt;ユーザーがコマンドを入力するたびに、シェルがそのコマンドをサブプロセスで実行することを思い出そう。複雑なプログラムになると、サブプロセスを独自に生成することもある&gt; (p. 79)</p></li>
</ul>
<section id="id33">
<h4><a class="toc-backref" href="#id74" role="doc-backlink">3.5.1 環境変数</a><a class="headerlink" href="#id33" title="Permalink to this heading">¶</a></h4>
<ul>
<li><p>環境変数は、すべてのサブプロセスが参照できる特殊なシェル変数だ。</p></li>
<li><p>以下のように処理した変数は、環境変数として使用することができる。</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="o">&lt;</span><span class="n">変数名</span><span class="o">&gt;</span>
<span class="c1"># or</span>
<span class="n">export</span> <span class="o">&lt;</span><span class="n">変数名</span><span class="o">&gt;=&lt;</span><span class="n">値</span><span class="o">&gt;</span>
</pre></div>
</div>
</li>
<li><p>特定のサブプロセス環境だけで使用する環境変数を定義することもできる。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">TERM</span><span class="o">=</span>trythisone<span class="w"> </span>emacs<span class="w"> </span>file-name
</pre></div>
</div>
</li>
<li><p>環境変数をリストするには <strong class="command">export</strong> を引数なしで実行する。</p>
<ul class="simple">
<li><p>実行してみたら <strong class="command">declare -x</strong> の嵐となった。</p></li>
</ul>
</li>
</ul>
</section>
<section id="id34">
<h4><a class="toc-backref" href="#id75" role="doc-backlink">3.5.2 環境定義ファイル</a><a class="headerlink" href="#id34" title="Permalink to this heading">¶</a></h4>
<ul>
<li><p>&lt;原則としては、<code class="file docutils literal notranslate"><span class="pre">.bash_profile</span></code> 内の定義をできるだけ減らし、環境定義ファイル (<strong class="command">.bashrc</strong>) の定義をできるだけ増やす&gt; (p. 84)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>stty<span class="w"> </span>stop<span class="w"> </span>^S<span class="w"> </span>intr<span class="w"> </span>^C<span class="w"> </span>erase<span class="w"> </span>^?
date
<span class="nb">source</span><span class="w"> </span>.bashrc
</pre></div>
</div>
</li>
</ul>
</section>
</section>
</section>
</section>


          </div>
    <div class="related bottom">
      &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="index.html" title="Previous">入門 bash 読書ノート</a>
        </li>
      
        <li>
          <a href="note2.html" title="Next">入門 bash 読書ノート 2/3</a>
          &rarr;
        </li>
    </ul>
  </nav>
    </div>

      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="../index.html" title="読書ノート Home"><img src="../_images/logo.svg"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2024, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>