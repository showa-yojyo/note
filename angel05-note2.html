<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>OpenGL: A Primer Second Edition 読書ノート 2/4 &mdash; 読書ノート v1.4.0dev</title>
    
    <link rel="stylesheet" href="_static/prefab.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.4.0dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/twitter-button.js"></script>
    <link rel="top" title="読書ノート v1.4.0dev" href="index.html" />
    <link rel="up" title="OpenGL: A Primer Second Edition 読書ノート" href="angel05.html" />
    <link rel="next" title="OpenGL: A Primer Second Edition 読書ノート 3/4" href="angel05-note3.html" />
    <link rel="prev" title="OpenGL: A Primer Second Edition 読書ノート 1/4" href="angel05-note1.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html">読書ノート v1.4.0dev</a> &raquo;</li>
          <li><a href="angel05.html" accesskey="U">OpenGL: A Primer Second Edition 読書ノート</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="opengl-a-primer-second-edition-2-4">
<h1><a class="toc-backref" href="#id2">OpenGL: A Primer Second Edition 読書ノート 2/4</a><a class="headerlink" href="#opengl-a-primer-second-edition-2-4" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="angel05-note1.html"><em>OpenGL: A Primer Second Edition 読書ノート 1/4</em></a> からの続き。</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">著者:</th><td class="field-body">Edward Angel</td>
</tr>
<tr class="field-even field"><th class="field-name">出版社:</th><td class="field-body">Peason Education, Inc.</td>
</tr>
<tr class="field-odd field"><th class="field-name">ISBN:</th><td class="field-body">0-321-26982-9</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="id1">
<p class="topic-title first">ノート目次</p>
<ul class="simple">
<li><a class="reference internal" href="#opengl-a-primer-second-edition-2-4" id="id2">OpenGL: A Primer Second Edition 読書ノート 2/4</a><ul>
<li><a class="reference internal" href="#basic-three-dimensional-programming" id="id3">Basic Three-Dimensional Programming</a><ul>
<li><a class="reference internal" href="#cameras-and-objects" id="id4">Cameras and Objects</a></li>
<li><a class="reference internal" href="#orthographic-projections-in-opengl" id="id5">Orthographic Projections in OpenGL</a></li>
<li><a class="reference internal" href="#viewing-a-cube" id="id6">Viewing a Cube</a></li>
<li><a class="reference internal" href="#locating-the-camera" id="id7">Locating the Camera</a></li>
<li><a class="reference internal" href="#building-objects" id="id8">Building Objects</a><ul>
<li><a class="reference internal" href="#using-arrays" id="id9">Using Arrays</a></li>
<li><a class="reference internal" href="#vertex-arrays" id="id10">Vertex Arrays</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hidden-surface-removal" id="id11">Hidden-Surface Removal</a></li>
<li><a class="reference internal" href="#glu-and-glut-objects" id="id12">GLU and GLUT Objects</a><ul>
<li><a class="reference internal" href="#glut-quadrics" id="id13">GLUT Quadrics</a></li>
<li><a class="reference internal" href="#glut-objects" id="id14">GLUT Objects</a></li>
</ul>
</li>
<li><a class="reference internal" href="#perspective-projections" id="id15">Perspective Projections</a></li>
<li><a class="reference internal" href="#programming-exercises" id="id16">Programming Exercises</a></li>
</ul>
</li>
<li><a class="reference internal" href="#transformations" id="id17">Transformations</a><ul>
<li><a class="reference internal" href="#line-preserving-transformation" id="id18">Line-Preserving Transformation</a></li>
<li><a class="reference internal" href="#homogeneous-coordinates" id="id19">Homogeneous Coordinates</a></li>
<li><a class="reference internal" href="#translation" id="id20">Translation</a><ul>
<li><a class="reference internal" href="#concatenating-translations" id="id21">Concatenating Translations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rotation" id="id22">Rotation</a><ul>
<li><a class="reference internal" href="#concatenation-rotation-with-arbitrary-fixed-point" id="id23">Concatenation: Rotation with Arbitrary Fixed Point</a></li>
</ul>
</li>
<li><a class="reference internal" href="#scaling" id="id24">Scaling</a></li>
<li><a class="reference internal" href="#setting-matrices-directly" id="id25">Setting Matrices Directly</a></li>
<li><a class="reference internal" href="#transformations-and-coordinate-systems" id="id26">Transformations and Coordinate Systems</a></li>
<li><a class="reference internal" href="#modeling-with-transformations" id="id27">Modeling with Transformations</a><ul>
<li><a class="reference internal" href="#instancing" id="id28">Instancing</a></li>
<li><a class="reference internal" href="#hierarchical-models" id="id29">Hierarchical Models</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="basic-three-dimensional-programming">
<h2><a class="toc-backref" href="#id3">Basic Three-Dimensional Programming</a><a class="headerlink" href="#basic-three-dimensional-programming" title="Permalink to this headline">¶</a></h2>
<div class="section" id="cameras-and-objects">
<h3><a class="toc-backref" href="#id4">Cameras and Objects</a><a class="headerlink" href="#cameras-and-objects" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>そもそも投影とは何か。次のように説明している。
&lt;The process of combining the specifications of objects and camera is
called <strong>projection</strong>&gt; (p.77)</li>
<li>カメラの指定方法は、オブジェクトのそれほど直感的ではない。
カメラ自身の位置に加え、どちらを向いているのかという情報と、
その向きに対してどれくらい回転がかかっているのかという情報が必要。</li>
<li>直交投影 (orthographic projection) は最も単純な種類の投影だ。</li>
<li>viewing volume, front/back (or near/far) clipping plane の概念をおさえること。</li>
<li>ピラミッドの角をカットしたような形状を frustum という。</li>
</ul>
</div>
<div class="section" id="orthographic-projections-in-opengl">
<h3><a class="toc-backref" href="#id5">Orthographic Projections in OpenGL</a><a class="headerlink" href="#orthographic-projections-in-opengl" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>&lt;The viewing frustum becomes a right parallelpiped &#8211; a rectangular box&gt;
(p. 80)</li>
<li><tt class="docutils literal"><span class="pre">glOrtho(left,</span> <span class="pre">right,</span> <span class="pre">bottom,</span> <span class="pre">top,</span> <span class="pre">near,</span> <span class="pre">far)</span></tt> - 視点座標系で引数を与える。<ul>
<li><tt class="docutils literal"><span class="pre">left</span> <span class="pre">&lt;</span> <span class="pre">right</span></tt> かつ <tt class="docutils literal"><span class="pre">bottom</span> <span class="pre">&lt;</span> <span class="pre">top</span></tt> かつ <tt class="docutils literal"><span class="pre">near</span> <span class="pre">&lt;</span> <span class="pre">far</span></tt> である必要がある。</li>
</ul>
</li>
<li>&lt;Note that <tt class="docutils literal"><span class="pre">gluOrtho2D()</span></tt> is derived from <tt class="docutils literal"><span class="pre">gluOrtho()</span></tt> by setting near
and far to -1 and +1 respectively&gt; (p.81)</li>
</ul>
</div>
<div class="section" id="viewing-a-cube">
<h3><a class="toc-backref" href="#id6">Viewing a Cube</a><a class="headerlink" href="#viewing-a-cube" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>GLUT には座標原点に指定サイズのキューブを描画する便利な関数がある。<ul>
<li><tt class="docutils literal"><span class="pre">glutWireCube(size)</span></tt> - 各辺の長さが <tt class="docutils literal"><span class="pre">size</span></tt> のワイヤーキューブを描く</li>
<li><tt class="docutils literal"><span class="pre">glutSolidCube(size)</span></tt> - 各辺の長さが <tt class="docutils literal"><span class="pre">size</span></tt> のソリッドキューブを描く</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="locating-the-camera">
<h3><a class="toc-backref" href="#id7">Locating the Camera</a><a class="headerlink" href="#locating-the-camera" title="Permalink to this headline">¶</a></h3>
<p>キューブを別の角度から見たいとする。このときカメラを動かすか、キューブを動かせば
よいのだが、カメラを動かすことを先に知る。</p>
<p>&lt;We can decide on a position for the camera (called the <strong>eye point</strong>)
and decide where to aim it to by specifying a point at which it
is pointing (the <strong>at point</strong>)&gt;</p>
<p>&lt;We need a third input, the direction we want to consider as up
in the image (the <strong>up vector</strong>)&gt; (p. 83)</p>
<p>&lt;A simple choice of the up vector is often (0, 1, 0) or
the y direction in world coortinates&gt; (p. 83)</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">gluLookAt((eye),</span> <span class="pre">(at),</span> <span class="pre">(up))</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">eye:</th><td class="field-body">視点の位置 (x, y, z)</td>
</tr>
<tr class="field-even field"><th class="field-name">at:</th><td class="field-body">注視する点の位置 (x, y, z)</td>
</tr>
<tr class="field-odd field"><th class="field-name">up:</th><td class="field-body">イメージの上方を定義するベクトル (x, y, z)</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">カメラの設定コードはほぼ必ず以下のようになる。</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_MODELVIEW</span><span class="p">);</span>
<span class="n">glLoadIdentity</span><span class="p">();</span>
<span class="n">gluLookAt</span><span class="p">(...);</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="building-objects">
<h3><a class="toc-backref" href="#id8">Building Objects</a><a class="headerlink" href="#building-objects" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>&lt;the vertices in a counterclockwise manner when each face is
viewed from the outside&gt; (p. 86)</li>
</ul>
<div class="section" id="using-arrays">
<h4><a class="toc-backref" href="#id9">Using Arrays</a><a class="headerlink" href="#using-arrays" title="Permalink to this headline">¶</a></h4>
<p>これまでのやり方だと、頂点を指定するのは大量の関数呼び出しを伴うが、
頂点配列を用いることで、関数呼び出しの回数を減らすことができる。</p>
</div>
<div class="section" id="vertex-arrays">
<h4><a class="toc-backref" href="#id10">Vertex Arrays</a><a class="headerlink" href="#vertex-arrays" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">&lt;OpenGL provides support for six types of arrays: vertex, color,
color index, normal, texture coordinate, and edge flag&gt; (p. 88)</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">glEnableClientState(arraytype)</span></tt>,
<tt class="docutils literal"><span class="pre">glDisableClientState(arraytype)</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">arraytype:</th><td class="field-body"><tt class="docutils literal"><span class="pre">GL_(VERTEX|COLOR|INDEX|NORMAL|TEXTURE_COORD|EDGE_FLAG)_ARRAY</span></tt></td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">glVertexPointer(dim,</span> <span class="pre">type,</span> <span class="pre">stride,</span> <span class="pre">array)</span></tt>,
<tt class="docutils literal"><span class="pre">glColorPointer(dim,</span> <span class="pre">type,</span> <span class="pre">stride,</span> <span class="pre">array)</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">dim:</th><td class="field-body">データの次元数 [234]</td>
</tr>
<tr class="field-even field"><th class="field-name">type:</th><td class="field-body"><tt class="docutils literal"><span class="pre">GL_(SHORT|INT|FLOAT|DOUBLE)</span></tt></td>
</tr>
<tr class="field-odd field"><th class="field-name">stride:</th><td class="field-body"><tt class="docutils literal"><span class="pre">array</span></tt> の中にデータがどのように連続して詰まっているかを示す数</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">glDrawElements(mode,</span> <span class="pre">n,</span> <span class="pre">type,</span> <span class="pre">indices)</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">mode:</th><td class="field-body">例えば <tt class="docutils literal"><span class="pre">GL_POLYGON</span></tt> とか</td>
</tr>
<tr class="field-even field"><th class="field-name">n:</th><td class="field-body">インデックスの個数</td>
</tr>
<tr class="field-odd field"><th class="field-name">type:</th><td class="field-body"><tt class="docutils literal"><span class="pre">indices</span></tt> の型。例えば <tt class="docutils literal"><span class="pre">GL_UNSIGNED_BYTE</span></tt> とか。</td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">コード例</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">GLfloat</span> <span class="n">vertices</span><span class="p">[][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{...};</span>
<span class="n">GLfloat</span> <span class="n">colors</span><span class="p">[][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{...};</span>
<span class="n">GLubyte</span> <span class="n">cubeIndices</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
    <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span>
    <span class="p">...</span>
    <span class="p">};</span>
</pre></div>
</div>
<p>とすると、とりあえずは以下のように面を描画できる。</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">glEnableClientState</span><span class="p">(</span><span class="n">GL_COLOR_ARRAY</span><span class="p">);</span>
<span class="n">glEnableClientState</span><span class="p">(</span><span class="n">GL_VERTEX_ARRAY</span><span class="p">);</span>
<span class="n">glVertexPointer</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertices</span><span class="p">);</span>
<span class="n">glColorPointer</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">GL_FLOAT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">colors</span><span class="p">);</span>
<span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="n">glDrawElements</span><span class="p">(</span><span class="n">GL_POLYGON</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">cubeIndices</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>ループはさらにシンプルにできる。</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">glDrawElements</span><span class="p">(</span><span class="n">GL_QUADS</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="n">GL_UNSIGNED_BYTE</span><span class="p">,</span> <span class="n">cubeIndices</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="hidden-surface-removal">
<h3><a class="toc-backref" href="#id11">Hidden-Surface Removal</a><a class="headerlink" href="#hidden-surface-removal" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">観察者からは角度的に見えない面を描画しない手法を指す。</p>
</li>
<li><p class="first">例えば</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">glEnable</span><span class="p">(</span><span class="n">GL_CULL_FACE</span><span class="p">);</span>
<span class="n">glCullFace</span><span class="p">(</span><span class="n">GL_BACK</span><span class="p">);</span>
</pre></div>
</div>
<p>が考えられるが、この方法は先述のように convex objects に対してのみ働く。</p>
</li>
<li><p class="first">オブジェクトの奥行きを管理するバッファを z-buffer or depth buffer という。</p>
</li>
<li><p class="first">&lt;In most programs, the depth buffer should be cleared whenever
the color buffer is cleared&gt; (p. 91)</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">glutInitDisplayMode</span><span class="p">(</span><span class="n">GLUT_RGB</span> <span class="o">|</span> <span class="n">GLUT_DOUBLE</span> <span class="o">|</span> <span class="n">GLUT_DEPTH</span><span class="p">);</span>
<span class="c1">// ...</span>
<span class="n">glEnable</span><span class="p">(</span><span class="n">GL_DEPTH_TEST</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="glu-and-glut-objects">
<h3><a class="toc-backref" href="#id12">GLU and GLUT Objects</a><a class="headerlink" href="#glu-and-glut-objects" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>よく利用される幾何形状の描画は、GLU や GLUT が提供している。</li>
<li>円柱だとか球だとかもあるが、基本的には多角形近似である。</li>
</ul>
<div class="section" id="glut-quadrics">
<h4><a class="toc-backref" href="#id13">GLUT Quadrics</a><a class="headerlink" href="#glut-quadrics" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">&lt;GLUT provides three types of quadrics: spheres, cylinders, and disks&gt;
(p. 92)</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">gluNewQuadric()</span></tt> - 二次曲面オブジェクトを生成して、そのポインターを返す。</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">gluDeleteQuadric(obj)</span></tt> - 二次曲面オブジェクトを削除する。</p>
</li>
<li><p class="first">Quadric objects は四種類のレンダー様式がある。
点、線、塗りつぶしはいつも通りだが、シルエットというものがある。</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">gluQuadricDrawStyle(obj,</span> <span class="pre">style)</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">style:</th><td class="field-body"><tt class="docutils literal"><span class="pre">GLU_(POINT|LINE|FILL|SILHOUETTE)</span></tt></td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">gluQuadricNormals(obj,</span> <span class="pre">mode)</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">mode:</th><td class="field-body"><tt class="docutils literal"><span class="pre">GLU_(NONE|FLAT|SMOOTH)</span></tt></td>
</tr>
</tbody>
</table>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">gluQuadricTexture(obj,</span> <span class="pre">mode)</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">mode:</th><td class="field-body"><tt class="docutils literal"><span class="pre">GL_(TRUE|FALSE)</span></tt></td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li><p class="first">どの GLU 二次曲面も内部的には多角形近似で描くのだが、
その多角形の点の多さのようなものを引数に指示する必要がある。</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">gluSphare(obj,</span> <span class="pre">radius,</span> <span class="pre">slices,</span> <span class="pre">stacks)</span></tt><ul>
<li>&lt;The sphere is approximated with polygons using slices lines
of longitude and stacks linces of latitude&gt; (p. 93)</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">gluCylinder(obj,</span> <span class="pre">base,</span> <span class="pre">top,</span> <span class="pre">height,</span> <span class="pre">slices,</span> <span class="pre">stacks)</span></tt><ul>
<li>名前は円柱だが、上面と底面で半径を別々に指示できる。</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">gluDisk(obj,</span> <span class="pre">inner,</span> <span class="pre">outer,</span> <span class="pre">slices,</span> <span class="pre">rings)</span></tt><ul>
<li>文字通り円盤。中央に穴が開いている。</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">gluPartialDisk(obj,</span> <span class="pre">inner,</span> <span class="pre">outer,</span> <span class="pre">slices,</span> <span class="pre">rings,</span> <span class="pre">start,</span> <span class="pre">angle)</span></tt><ul>
<li>扇形円盤。</li>
<li>&lt;Partial disks are disks with a wedge removed&gt; (p. 94)</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="glut-objects">
<h4><a class="toc-backref" href="#id14">GLUT Objects</a><a class="headerlink" href="#glut-objects" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">球、円錐、トーラス、正多面体、果てはティーポットまで提供している。</p>
</li>
<li><p class="first">二次曲面系は多角形近似のための引数指定が必要。面倒そうだな。</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">glutWireSphere(radius,</span> <span class="pre">slices,</span> <span class="pre">stacks)</span></tt>, <tt class="docutils literal"><span class="pre">glutSolidSphere(radius,</span> <span class="pre">slices,</span> <span class="pre">stacks)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">glutWireCone(base,</span> <span class="pre">height,</span> <span class="pre">slices)</span></tt>, <tt class="docutils literal"><span class="pre">glutSolidCone(base,</span> <span class="pre">height,</span> <span class="pre">slices)</span></tt></li>
<li><tt class="docutils literal"><span class="pre">glutWireTorus(inner,</span> <span class="pre">outer,</span> <span class="pre">sides,</span> <span class="pre">slices)</span></tt>, <tt class="docutils literal"><span class="pre">glutSolidTorus(inner,</span> <span class="pre">outer,</span> <span class="pre">sides,</span> <span class="pre">slices)</span></tt></li>
</ul>
</li>
<li><p class="first">正多面体 (regular polyhedral) をすべてサポート。キューブ以外を特に強調している。
半径 1 の球に内接するサイズで定義されている。</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">glutWireTetrahedron()</span></tt>, <tt class="docutils literal"><span class="pre">glutSolidTetrahedron()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">glutWireOctahedron()</span></tt>, <tt class="docutils literal"><span class="pre">glutSolidOctahedron()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">glutWireDodecahedron()</span></tt>, <tt class="docutils literal"><span class="pre">glutSolidDodecahedron()</span></tt></li>
<li><tt class="docutils literal"><span class="pre">glutWireIcosahedron()</span></tt>, <tt class="docutils literal"><span class="pre">glutSolidIcosahedron()</span></tt></li>
</ul>
</li>
<li><p class="first">特筆すべきは何と言ってもティーポットだ。
&lt;The Utah teapot is generated using OpenGL surface.  The teapot
has been used for many years for testing rendering algorithms.
It is constructed from 192 vertices.  The teapot is generated
with both normals and texture coordinates&gt; (p. 97)</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">glutWireTeapot(size)</span></tt>, <tt class="docutils literal"><span class="pre">glutSolidTeapot(size)</span></tt></p>
<p>ティーポットを <tt class="docutils literal"><span class="pre">size</span></tt> の大きさで描く。</p>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="perspective-projections">
<h3><a class="toc-backref" href="#id15">Perspective Projections</a><a class="headerlink" href="#perspective-projections" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">透視図法投影を実現するための行列操作を習得する。</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">glFrustum(left,</span> <span class="pre">right,</span> <span class="pre">bottom,</span> <span class="pre">top,</span> <span class="pre">near,</span> <span class="pre">far)</span></tt></p>
<ul>
<li><p class="first">引数リストは <tt class="docutils literal"><span class="pre">glOrtho</span></tt> と同じ。</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">far</span> <span class="pre">&gt;</span> <span class="pre">near</span> <span class="pre">&gt;</span> <span class="pre">0</span></tt> に注意。</p>
</li>
<li><p class="first">ほぼ必ず以下の手順で利用する。</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_PROJECTION</span><span class="p">);</span>
<span class="n">glLoadIdentity</span><span class="p">();</span>
<span class="n">glFrustum</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">near</span><span class="p">,</span> <span class="n">far</span><span class="p">);</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">glFrustum と gluPerspective の使いやすさの違いを憶えておく。
&lt;the interface provided by <tt class="docutils literal"><span class="pre">glFrustum()</span></tt> can make it difficult
to obtain a desired view&gt; (p. 98)</p>
</li>
<li><p class="first">&lt;we change the lens and get one with a wider angle of view.
The function <tt class="docutils literal"><span class="pre">gluPerspective()</span></tt> provides such an interface&gt; (p. 98)</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">gluPerspective(fov,</span> <span class="pre">aspect,</span> <span class="pre">near,</span> <span class="pre">far)</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">fov:</th><td class="field-body">角錐台の上下間の角度。</td>
</tr>
<tr class="field-even field"><th class="field-name">aspect:</th><td class="field-body"><tt class="docutils literal"><span class="pre">width</span> <span class="pre">/</span> <span class="pre">height</span></tt></td>
</tr>
</tbody>
</table>
</li>
<li><p class="first">&lt;One potential problem with perspective views is loss of
accuracy in depth, which can be noticeable in the display&gt;
(p. 100)</p>
</li>
<li><p class="first">near plane をカメラに近づけ過ぎぬ事。
&lt;The problem is worst when the near plane is very close to
the center of projection&gt; (p. 100)</p>
</li>
<li><p class="first">&lt;Placing the front clipping plane too close to the camera can lead to numerical
errors in depth calculations for perspective views&gt; (p. 100)</p>
</li>
</ul>
</div>
<div class="section" id="programming-exercises">
<h3><a class="toc-backref" href="#id16">Programming Exercises</a><a class="headerlink" href="#programming-exercises" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>球を自力で多角形近似で描画するときのコツは、
&lt;Use quad strips except for triangle fans at the poles&gt; (p. 100)
だそうだ。</li>
</ul>
</div>
</div>
<div class="section" id="transformations">
<h2><a class="toc-backref" href="#id17">Transformations</a><a class="headerlink" href="#transformations" title="Permalink to this headline">¶</a></h2>
<p>これを習得しておかないと、geometric objects の操作、シーンの
アニメーションや、狙い通りのビューを得ることができない。</p>
<div class="section" id="line-preserving-transformation">
<h3><a class="toc-backref" href="#id18">Line-Preserving Transformation</a><a class="headerlink" href="#line-preserving-transformation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>この章の文章では、transformation は「写像」の意味で用いられている。
&lt;<strong>Transformations</strong> map vertices and vectors to other vertices and
vectors&gt; (p. 101)</li>
<li>&lt;rotations and translations are known as <strong>rigid-body transformations</strong>&gt; (p. 101)
換言すれば「サイズの変わらない」変換。</li>
<li>我々が興味のある写像は点・ベクトルを点・ベクトルに写すものであることは当然ながら、
さらに直線を直線に写すものだ。とはいえ、
&lt;If we restrict ourselves to transformations that preserve line segments,
then we need only transform the endpoints&#8211;two vertices&#8211;of each line
segment&gt; (p. 102)
なので、結局点の写像のみに絞って考えればよい。</li>
<li><strong>affine transformations</strong> のポイント
1. translation, rotation, scaling はその一種である
2. 平行な直線群を平行な直線群へ写す
3. 逆方向の変換が存在する</li>
<li><strong>projection transformations</strong> は通常逆変換は考えられない。
なぜなら、二次元に投影されたイメージから、元の三次元のイメージが復元できないからだ。</li>
</ul>
</div>
<div class="section" id="homogeneous-coordinates">
<h3><a class="toc-backref" href="#id19">Homogeneous Coordinates</a><a class="headerlink" href="#homogeneous-coordinates" title="Permalink to this headline">¶</a></h3>
<p>同次座標の考え方は OpenGL のレンダリング方法論の核と言えるようだ。</p>
<ul class="simple">
<li>すべての点は 4 つの座標成分 (x, y, z, w) の組の形で表現されている。</li>
<li>三次元の点は (x, y, z, 1) として内部的に表現されている。</li>
<li>二次元の点は (x, y, 0, 1) として内部的に表現されている。</li>
<li>一般に点は (x, y, z, w) として表現されるが、w がゼロでない限り、
三次元の点 (x/w, y/w, z/w) として見える。</li>
<li>三次元のベクトルは (x, y, z, 0) として内部的に表現されている。
これは無限遠点と等価だ。</li>
<li>すべての transformations は点・ベクトルの同次座標表現に作用する
4 x 4 行列となる。</li>
</ul>
</div>
<div class="section" id="translation">
<h3><a class="toc-backref" href="#id20">Translation</a><a class="headerlink" href="#translation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>&lt;Because the camera in OpenGL is also at the origin, we want to move
the object away from the camera, or equivalently move the camera
away from the object&gt; (p. 103)</li>
<li>translation とは、オブジェクトに変位 (<strong>displacement</strong>) を加える操作だ。</li>
<li>translation の距離は右手座標系による。</li>
</ul>
<div class="section" id="concatenating-translations">
<h4><a class="toc-backref" href="#id21">Concatenating Translations</a><a class="headerlink" href="#concatenating-translations" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>&lt;The function <tt class="docutils literal"><span class="pre">glTranslate*()</span></tt> forms a translation matrix that
is applied to the current matrix.  Thus, the two translations
are combined or <strong>concatenated</strong> together to form a compound transformation&gt;
(p. 105)</li>
</ul>
</div>
</div>
<div class="section" id="rotation">
<h3><a class="toc-backref" href="#id22">Rotation</a><a class="headerlink" href="#rotation" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">回転変換には回転の影響を受けない点がある。これを <strong>fixed point</strong> と呼ぶ。</p>
</li>
<li><p class="first">回転の向きについては、ここでも「反時計回りが正」のルールがある。</p>
<p>&lt;The desired amount of rotation about this axis is measured in a
counterclockwise direction looking from the positive direction
along the given direction back toward the origin&gt; (p. 106)</p>
</li>
</ul>
<div class="section" id="concatenation-rotation-with-arbitrary-fixed-point">
<h4><a class="toc-backref" href="#id23">Concatenation: Rotation with Arbitrary Fixed Point</a><a class="headerlink" href="#concatenation-rotation-with-arbitrary-fixed-point" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">任意の点を fixed point として回転変換を生じさせたいとする。
このときは <tt class="docutils literal"><span class="pre">glTranslate</span></tt> と <tt class="docutils literal"><span class="pre">glRotate</span></tt> を組み合わせて実現する。</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_MODELVIEW</span><span class="p">);</span>
<span class="n">glLoadIdentity</span><span class="p">();</span>
<span class="n">glTranslatef</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
<span class="n">glRotatef</span><span class="p">(</span><span class="n">angle</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">);</span>
<span class="n">glTranslatef</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">z</span><span class="p">);</span>
</pre></div>
</div>
<ul class="simple">
<li>&lt;<em>the last transformation specified is the first applied</em>&gt; ルール。
OpenGL の行列乗算は postmultiplication であることをおさえる。</li>
</ul>
</li>
<li><p class="first">ディスプレイリストに変換行列の操作が含まれている場合は、
リストの定義終了までに行列の状態を定義開始前のそれに復元するのが肝要。</p>
<p>&lt;Any primitives that are in display lists that do not change the
current matrices are affected by the same model-view matrix.
Conversely, if any matrices are changed in a display list, these
changes are in effect after the execution of the display list&gt; (p. 107)</p>
</li>
</ul>
</div>
</div>
<div class="section" id="scaling">
<h3><a class="toc-backref" href="#id24">Scaling</a><a class="headerlink" href="#scaling" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>ここでも fixed point の考え方が有効だ。<ul>
<li>&lt;We also note that scaling has a fixed point that is unchanged by the
scaling&gt; (p. 107)</li>
<li>&lt;The fixed point is at the origin, but we can use the same technique as
with rotations to obtain any desired fixed point&gt; (p. 108)</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="setting-matrices-directly">
<h3><a class="toc-backref" href="#id25">Setting Matrices Directly</a><a class="headerlink" href="#setting-matrices-directly" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">OpenGL の行列は 4 x 4 正方行列で、メモリレイアウトとしては column order だ。</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">glLoadMatrix(m)</span></tt> - 行列成分を直接配列の形で指示する</li>
<li><tt class="docutils literal"><span class="pre">glMultMatrix(m)</span></tt> - current matrix に対して m を右からかける</li>
</ul>
</li>
<li><p class="first">shear 変換を実現するには、この直接行列指示でなければならない。</p>
<div class="highlight-python"><div class="highlight"><pre>M = 1  cot(theta)  0  0
    0           1  0  0
    0           0  1  0
    0           0  0  1
</pre></div>
</div>
</li>
<li><p class="first"><strong>oblique projection</strong> を実現することもできる。</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_PROJECTION</span><span class="p">);</span>
<span class="n">glLoadIdentity</span><span class="p">();</span>
<span class="n">glOrtho</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">bottom</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">near</span><span class="p">,</span> <span class="n">far</span><span class="p">);</span>
<span class="n">glMultMatrixf</span><span class="p">(</span><span class="n">M</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p class="first">影の計算なども面白い。光源を (x, y, z) として、z 平面に影を付ける変換は</p>
<div class="highlight-python"><div class="highlight"><pre>M = 1     0  0  0
    0     1  0  0
    0     0  1  0
    0  -1/y  0  0
</pre></div>
</div>
<p>で与えられる。コードは大体次のような構造になる。</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_MODELVIEW</span><span class="p">);</span>
<span class="n">cube</span><span class="p">();</span>

<span class="n">glPushMatrix</span><span class="p">();</span>
<span class="n">glPushAttrib</span><span class="p">(...);</span>
<span class="n">glTranslate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
<span class="n">glMultMatrix</span><span class="p">(</span><span class="n">M</span><span class="p">);</span>
<span class="n">glTranslate</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">z</span><span class="p">);</span>
<span class="n">glColor3fv</span><span class="p">(</span><span class="n">shadow_color</span><span class="p">)</span>
<span class="n">cube</span><span class="p">();</span>
<span class="n">glPopAttrib</span><span class="p">();</span>
<span class="n">glPopMatrix</span><span class="p">();</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="transformations-and-coordinate-systems">
<h3><a class="toc-backref" href="#id26">Transformations and Coordinate Systems</a><a class="headerlink" href="#transformations-and-coordinate-systems" title="Permalink to this headline">¶</a></h3>
<p>色々な座標（系）が出てきたので、ちょっと整理する。</p>
<ul class="simple">
<li><strong>world coordinates</strong></li>
<li><strong>camera (or eye) coordinates</strong></li>
<li><strong>clipping coordinates</strong></li>
<li><strong>normalized device coordinates</strong></li>
<li><strong>window coordinates</strong></li>
</ul>
</div>
<div class="section" id="modeling-with-transformations">
<h3><a class="toc-backref" href="#id27">Modeling with Transformations</a><a class="headerlink" href="#modeling-with-transformations" title="Permalink to this headline">¶</a></h3>
<div class="section" id="instancing">
<h4><a class="toc-backref" href="#id28">Instancing</a><a class="headerlink" href="#instancing" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">&lt;The matrix that brings the object into the model with the
desired size, orientation, and position is called the
<strong>instance transformation</strong>&gt; (p. 114) 聞いたことのない用語だ。</p>
</li>
<li><p class="first">&lt;The GLU cylinder was aligned with the z axis and has its base
in the plane z = 0.  With such a starting point, we almost
always want to scale the object to its desired size, then
orient it, and finally translate it to its desired position
in that order&gt; (p. 114)</p>
<div class="highlight-c"><div class="highlight"><pre><span class="n">glMatrixMode</span><span class="p">(</span><span class="n">GL_MODELVIEW</span><span class="p">);</span>
<span class="n">glLoadIdentity</span><span class="p">();</span>
<span class="n">glTranslatef</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>
<span class="n">glRotatef</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span><span class="p">);</span>
<span class="n">glScalef</span><span class="p">(</span><span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="n">sz</span><span class="p">);</span>
</pre></div>
</div>
<p>文章に表れる変換順序と、OpenGL コードに現れる関数コール順が逆であることをおさえておく。</p>
</li>
</ul>
</div>
<div class="section" id="hierarchical-models">
<h4><a class="toc-backref" href="#id29">Hierarchical Models</a><a class="headerlink" href="#hierarchical-models" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>人体モデルを木構造のデータとして表現する話題。
木のルートから transform を適用していくテクニックを紹介している。
ここでは胴体をルートとしている。</li>
<li>&lt;we can observe that each transformation actually represents
a <em>relative</em> change from one scaling, position, and orientation
to another&gt; (p. 116)</li>
<li>&lt;Our first example did not require us tp save any information about
the model-view matrix as we went through the display callback
because the transformations accumulated&gt; (p.118)</li>
</ul>
<hr class="docutils" />
<p><a class="reference internal" href="angel05-note3.html"><em>OpenGL: A Primer Second Edition 読書ノート 3/4</em></a> へ。</p>
</div>
</div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li><a href="index.html">読書ノート v1.4.0dev</a> &raquo;</li>
          <li><a href="angel05.html" >OpenGL: A Primer Second Edition 読書ノート</a> &raquo;</li> 
      </ul>
    </div>
    <div id="footer">
      <div id="footer_logo">
        <a class="imga" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="_static/logos.png" width="88" height="31" /></a>
      </div>
      <div id="footer_share">
        <a href="https://twitter.com/share" class="twitter-share-button" data-size="large">Tweet</a>
        <script type="text/javascript">render_twitter_button(document, 'script', 'twitter-wjs')</script>
      </div>
      <div id="footer_copyright">
        Since 1999<br />
        Copyright &copy; 1999-2014, プレハブ小屋 All rights reserved.
      </div>
      <div id="footer_spacer">
        <p>
          Last updated at 2014/11/29 (Sat) 02:35:26.
        </p>
      </div>
    </div>
  </body>
</html>