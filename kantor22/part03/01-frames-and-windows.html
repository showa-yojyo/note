
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Frames and windows &#8212; 読書ノート 1.5dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/mermaid.js"></script>
    <link rel="next" title="Binary data, files" href="02-binary.html" />
    <link rel="prev" title="Part 3 Additional articles" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="index.html" title="Previous document">Part 3 Additional articles</a>
        </li>
        <li>
          <a href="02-binary.html" title="Next document">Binary data, files</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <div class="section" id="frames-and-windows">
<h1><a class="toc-backref" href="#id1">Frames and windows</a><a class="headerlink" href="#frames-and-windows" title="Permalink to this heading">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#frames-and-windows" id="id1">Frames and windows</a></p>
<ul>
<li><p><a class="reference internal" href="#popups-and-window-methods" id="id2">Popups and window methods</a></p></li>
<li><p><a class="reference internal" href="#cross-window-communication" id="id3">Cross-window communication</a></p></li>
<li><p><a class="reference internal" href="#the-clickjacking-attack" id="id4">The clickjacking attack</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="popups-and-window-methods">
<h2><a class="toc-backref" href="#id2">Popups and window methods</a><a class="headerlink" href="#popups-and-window-methods" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/popup-windows">https://javascript.info/popup-windows</a>&gt; ノート。</p>
<p>ポップアップウィンドウはユーザーに文書を追加的に表示する最も古い方法の一つだ。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;https://javascript.info/&#39;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>与えられた URL で新しいウィンドウを開く。最近のブラウザーは、別ウィンドウではなく、新しいタブで開くように設定されているものがほとんどだ。</p>
<p>ポップアップは、本当に古い時代から存在している。当初の着想は、メインウィンドウを閉じることなく、別の内容を表示することだった。今では別の方法がある。
<code class="docutils literal notranslate"><span class="pre">fetch()</span></code> で内容を動的に読み込み、<code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> を動的に生成してそこに表示できる。ポップアップは日常的に使うものではない。</p>
<p>また、複数のウィンドウを同時に表示できないモバイル機器では、ポップアップは厄介な存在だ。</p>
<p>それでも、OAuth 認証（Google/Facebook/…でログイン）のように、ポップアップが使われるタスクがあるのは、以下の理由による：</p>
<ul class="simple">
<li><p>ポップアップは独立したウィンドウであり、JavaScript 環境が独自のものになる。それゆえ、サードパーティーの信頼できないサイトからのポップアップを開いても安全だ。</p></li>
<li><p>ポップアップを開くのはとても容易だ。</p></li>
<li><p>ポップアップは URL を変更したり、自身を開いたウィンドウに対してメッセージを送れる。</p></li>
</ul>
<div class="section" id="popup-blocking">
<h3>Popup blocking<a class="headerlink" href="#popup-blocking" title="Permalink to this heading">¶</a></h3>
<p>かつての悪質なサイトのページでは、広告の入ったポップアップウィンドウを大量に開くことがあった。現在では、ブラウザーのほとんどがポップアップをブロックし、利用者を保護しようとしている。</p>
<p>ブラウザーの大半は、ポップアップが <code class="docutils literal notranslate"><span class="pre">onclick</span></code> のような利用者発イベントハンドラーの外部で呼び出された場合、ポップアップを抑止する。</p>
<div class="admonition- admonition">
<p class="admonition-title">学習者ノート</p>
<p>イベントハンドラーの中からでなければ <code class="docutils literal notranslate"><span class="pre">window.open()</span></code> は効かないと言っている。</p>
</div>
<p>この方法では、利用者は不要なポップアップからある程度保護されるが、機能は完全に無効化されるわけではない。ポップアップが <code class="docutils literal notranslate"><span class="pre">onclick</span></code> から <code class="docutils literal notranslate"><span class="pre">setTimeout()</span></code> により後に開かれる場合はどうなるか。これはブラウザーによりけりで、開くものもあれば、そうでないものもある。本書では指定する遅延時間によっても挙動が変わると述べている。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">setTimeout</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;http://google.com&#39;</span><span class="p">),</span><span class="w"> </span><span class="mf">3000</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="window-open">
<h3>window.open<a class="headerlink" href="#window-open" title="Permalink to this heading">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="p">,</span><span class="w"> </span><span class="nx">params</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">url</span></code>: 新しいウィンドウに読み込む URL.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: 新しいウィンドウの名前。各ウィンドウは <code class="docutils literal notranslate"><span class="pre">window.name</span></code> を持ち、ここでポップアップに使用するウィンドウを指定できる。そのような名前のウィンドウがすでに存在する場合、指定された URL をそのウィンドウで開き、そうでなければ新しいウィンドウを開く。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code>: 新しいウィンドウの設定文字列。カンマで区切られた設定項目を含む。
<code class="docutils literal notranslate"><span class="pre">params</span></code> には空白を入れてはいけない。例としては <code class="docutils literal notranslate"><span class="pre">&quot;width=200,height=100&quot;</span></code>
が通る。</p>
<ul>
<li><p>Position:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">left</span></code>/<code class="docutils literal notranslate"><span class="pre">top</span></code> (numeric): ウィンドウ左上スクリーン座標。画面外を指定してはいけない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">width</span></code>/<code class="docutils literal notranslate"><span class="pre">height</span></code> (numeric): ウィンドウの横と縦の長さ。見えない大きさにしてはいけない。</p></li>
</ul>
</li>
<li><p>Window features:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">menubar</span></code> (yes/no): ブラウザーメニューを表示するかどうか。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">toolbar</span></code> (yes/no): ブラウザーのナビゲーションバー（戻る、進む、再読み込みなど）を表示するかどうか。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code> (yes/no): URL 欄を表示するかどうか。一部ブラウザーでは隠せない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">status</span></code> (yes/no): ステータスバーを表示するかどうか。ここでも、ブラウザーのほとんどで強制的に表示されるようになっている。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resizable</span></code> (yes/no): 推奨されない設定項目。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scrollbars</span></code> (yes/no): 推奨されない設定項目。</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>この他にも、あまりサポートされていないブラウザー固有の機能があり、通常は使用されない。</p>
</div>
<div class="section" id="example-a-minimalistic-window">
<h3>Example: a minimalistic window<a class="headerlink" href="#example-a-minimalistic-window" title="Permalink to this heading">¶</a></h3>
<p>最低限の機能を持つウィンドウを開き、ブラウザーがどの機能を無効化できるかを調べる。本書のコードでは、ほとんどの「ウィンドウ機能」が無効化され、ウィンドウは画面の外に配置されるように引数を指定している。実際に何が起こるか試すと、幅・高さがゼロで、左・上部が画面外にあるような奇妙な指定をブラウザーは「修正」することが認められる。例えば、Chrome はこのようなウィンドウを幅と高さを目一杯使って開き、画面全体を占めるようにする。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=0,height=0,left=-1000,top=-1000`</span><span class="p">;</span><span class="w"></span>

<span class="nx">open</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">params</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>通常の配置オプションを追加して、適正な <code class="docutils literal notranslate"><span class="pre">width</span></code>, <code class="docutils literal notranslate"><span class="pre">height</span></code>, <code class="docutils literal notranslate"><span class="pre">left</span></code>, <code class="docutils literal notranslate"><span class="pre">top</span></code>
を設定すると、ブラウザーのほとんどは、要求されたとおりのウィンドウを表示する。</p>
<p><code class="docutils literal notranslate"><span class="pre">window.open()</span></code> 呼び出しにおいて設定が省略された場合の規則：</p>
<ul class="simple">
<li><p>第三引数がない場合、既定のウィンドウ引数が採用される。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code> が文字列で与えられていて、いくつかの yes/no 機能が省略されている場合、省略された機能は値がないものとみなされる。したがって、<code class="docutils literal notranslate"><span class="pre">params</span></code> を指定する場合は、必要な機能すべてを明示的に <code class="docutils literal notranslate"><span class="pre">yes</span></code> に設定すること。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">left</span></code>/<code class="docutils literal notranslate"><span class="pre">top</span></code> がなければ、新しいウィンドウが最後に開いたウィンドウの近くに出現する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">width</span></code>/<code class="docutils literal notranslate"><span class="pre">height</span></code> がなければ、新しいウィンドウの寸法は最後に開いたものと同じになる。</p></li>
</ul>
</div>
<div class="section" id="accessing-popup-from-window">
<h3>Accessing popup from window<a class="headerlink" href="#accessing-popup-from-window" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">open()</span></code> 呼び出しは、新しいウィンドウへの参照を返す。これは、プロパティーを操作したり、場所を変更したり、さらに多くのことに利用できる。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">newWin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;about:blank&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;width=200,height=200&quot;</span><span class="p">);</span><span class="w"></span>
<span class="nx">newWin</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">&quot;Hello, world!&quot;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>ノート：元々ある <code class="docutils literal notranslate"><span class="pre">window</span></code> と同格のオブジェクトを得られることになる。</p>
<p>ロード後に内容を変更することもできる。<code class="docutils literal notranslate"><span class="pre">window.open()</span></code> の直後は、新しいウィンドウはまだロードされていない。そのため、変更は <code class="docutils literal notranslate"><span class="pre">onload</span></code> か、
<code class="docutils literal notranslate"><span class="pre">DOMContentLoaded</span></code> ハンドラーで行う。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">newWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;example&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;width=300,height=300&#39;</span><span class="p">)</span><span class="w"></span>
<span class="nx">newWindow</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span><span class="w"></span>
<span class="nx">newWindow</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">html</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sb">`&lt;div style=&quot;font-size:30px&quot;&gt;Welcome!&lt;/div&gt;`</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nx">newWindow</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="s1">&#39;afterbegin&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">html</span><span class="p">);</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<hr class="docutils" />
<p>ウィンドウ同士は、同一オリジンである場合にのみ、互いの内容に自由にアクセスできる。そうでない場合は、利用者安全保障上不可能だ。</p>
</div>
<div class="section" id="accessing-window-from-popup">
<h3>Accessing window from popup<a class="headerlink" href="#accessing-window-from-popup" title="Permalink to this heading">¶</a></h3>
<p>ポップアップは <code class="docutils literal notranslate"><span class="pre">window.opener</span></code> を参照して、自身を開いたウィンドウにアクセスできる。このプロパティーの値は、ポップアップ以外のウィンドウでは <code class="docutils literal notranslate"><span class="pre">null</span></code> だ。</p>
<p>次のコードでは、現在のウィンドウの内容が “Test” に置き換わる：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">newWin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s2">&quot;about:blank&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;width=200,height=200&quot;</span><span class="p">);</span><span class="w"></span>

<span class="nx">newWin</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="w"></span>
<span class="w">  </span><span class="s2">&quot;&lt;script&gt;window.opener.document.body.innerHTML = &#39;Test&#39;&lt;\/script&gt;&quot;</span><span class="w"></span>
<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>ウィンドウ間の接続は双方向であり、メインウィンドウとポップアップが相互に参照しあっているのだ。</p>
</div>
<div class="section" id="closing-a-popup">
<h3>Closing a popup<a class="headerlink" href="#closing-a-popup" title="Permalink to this heading">¶</a></h3>
<p>ウィンドウを閉じるには <code class="docutils literal notranslate"><span class="pre">win.close()</span></code> とする。閉じられているかどうかを調べるには``win.closed`` をチェックする。</p>
<p>技術的には、メソッド <code class="docutils literal notranslate"><span class="pre">close()</span></code> はどのウィンドウにも使えるが、ウィンドウが
<code class="docutils literal notranslate"><span class="pre">window.open()</span></code> で作られていない場合、<code class="docutils literal notranslate"><span class="pre">window.close()</span></code> はブラウザーのほとんどが無視する。つまり、ポップアップでしか機能しない。</p>
<p>プロパティー <code class="docutils literal notranslate"><span class="pre">closed</span></code> は、ウィンドウが閉じられていれば <code class="docutils literal notranslate"><span class="pre">true</span></code> となる。これはポップアップ（またはメインウィンドウ）がまだ開いているかどうかを確認するのに便利だ。利用者はいつでもウィンドウを閉じることができるので、コードはその可能性を考慮する必要がある。</p>
<p>ウィンドウを読み込んでから閉じるコード：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">newWindow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">open</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;example&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;width=300,height=300&#39;</span><span class="p">);</span><span class="w"></span>

<span class="nx">newWindow</span><span class="p">.</span><span class="nx">onload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">newWindow</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="nx">alert</span><span class="p">(</span><span class="nx">newWindow</span><span class="p">.</span><span class="nx">closed</span><span class="p">);</span><span class="w"> </span><span class="c1">// true</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="moving-and-resizing">
<h3>Moving and resizing<a class="headerlink" href="#moving-and-resizing" title="Permalink to this heading">¶</a></h3>
<p>ウィンドウを移動するメソッドと寸法を変更するメソッドがある。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">win.moveBy(x,</span> <span class="pre">y)</span></code>: 現在位置から右に <code class="docutils literal notranslate"><span class="pre">x</span></code> ピクセル、下に <code class="docutils literal notranslate"><span class="pre">y</span></code> ピクセル相対的にウィンドウを動かす。負の値を許す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">win.moveTo(x,</span> <span class="pre">y)</span></code>: 画面上の座標 <code class="docutils literal notranslate"><span class="pre">(x,</span> <span class="pre">y)</span></code> にウィンドウを動かす。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">win.resizeBy(width,</span> <span class="pre">height)</span></code>: 現在の寸法から相対的に指定された <code class="docutils literal notranslate"><span class="pre">width</span></code>,
<code class="docutils literal notranslate"><span class="pre">height</span></code> でウィンドウの寸法を変更する。負の値を許す。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">win.resizeTo(width,</span> <span class="pre">height)</span></code>: 与えられた寸法に変更する。</p></li>
</ul>
<p>また、イベント <code class="docutils literal notranslate"><span class="pre">window.onresize</span></code> もある。</p>
<p>悪用を防ぐために、ブラウザーは通常これらの方法をブロックしている。これらのメソッドは、自分で開いた、追加のタブがないポップアップに対してのみ、確実に機能する。</p>
<p>JavaScript にはウィンドウを最小化したり最大化したりする手段がない。これらの OS
レベルの機能は、フロントエンドの開発者に対して隠蔽されている。</p>
<p>ウィンドウを最大化または最小化した場合、上記のメソッド群は機能しない。</p>
</div>
<div class="section" id="scrolling-a-window">
<h3>Scrolling a window<a class="headerlink" href="#scrolling-a-window" title="Permalink to this heading">¶</a></h3>
<p>ウィンドウのスクロール一般については履修済みだ。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">win.scrollBy(x,</span> <span class="pre">y)</span></code></dt><dd><p>ウィンドウを現在のスクロールに対して右に <code class="docutils literal notranslate"><span class="pre">x</span></code> ピクセル、下に <code class="docutils literal notranslate"><span class="pre">y</span></code> ピクセルスクロールする。負の値を許す。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">win.scrollTo(x,</span> <span class="pre">y)</span></code></dt><dd><p>ウィンドウを与えられた座標 (x, y) にスクロールする。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">elem.scrollIntoView(top</span> <span class="pre">=</span> <span class="pre">true)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">elem</span></code> が上部に表示されるように（既定）、または <code class="docutils literal notranslate"><span class="pre">elem.scrollIntoView(false)</span></code>
の場合は下部に表示されるようにウィンドウをスクロールさせる。</p>
</dd>
</dl>
<p>また、イベント <code class="docutils literal notranslate"><span class="pre">window.onscroll</span></code> もある。</p>
</div>
<div class="section" id="focus-blur-on-a-window">
<h3>Focus/blur on a window<a class="headerlink" href="#focus-blur-on-a-window" title="Permalink to this heading">¶</a></h3>
<p>理論的には、ウィンドウにフォーカスを当てたり外したりするためのメソッドとして
<code class="docutils literal notranslate"><span class="pre">window.focus()</span></code> および <code class="docutils literal notranslate"><span class="pre">window.blur()</span></code> が存在する。また、それらに対応するイベントもそれぞれ存在する。これらを使えば、訪問者がウィンドウにフォーカスし、別の場所に切り替えた瞬間を捕捉することができる。しかし、過去に悪いページがこれらを悪用したため、実際には厳しく制限されている。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">window</span><span class="p">.</span><span class="nx">onblur</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">focus</span><span class="p">();</span><span class="w"></span>
</pre></div>
</div>
<p>このコードの意図は、利用者をウィンドウ内に囲い込むことだ。ブラウザーはこのようなコードを禁止し、広告や悪質なページから利用者を保護するために多くの制限を導入する必要があった。たとえば、モバイルブラウザーは <code class="docutils literal notranslate"><span class="pre">window.focus()</span></code> を通常、完全に無視する。また、ポップアップが新しいウィンドウではなく別のタブで開かれる場合、フォーカス制御は機能しない。それでも、このような呼び出しが機能する利用場面がいくつかあり、便利なことがある。</p>
<p>例えば、ポップアップを開くときに、<code class="docutils literal notranslate"><span class="pre">newWindow.focus()</span></code> を実行するのは良い考えであるかもしれない。 OS とブラウザーの組み合わせ次第では、利用者が新しいウィンドウにいることを確認できる。</p>
<p>訪問者が実際にウェブアプリを使用するタイミングを追跡したい場合は、
<code class="docutils literal notranslate"><span class="pre">window.{onfocus,onblur}</span></code> を追跡できる。これにより、ページ内の活動状況やアニメーションなどを一時停止または再開することができる。しかし、イベント <code class="docutils literal notranslate"><span class="pre">blur</span></code> では、訪問者がウィンドウから切り替えたことを意味するが、まだ観察している可能性がある。ウィンドウはバックグラウンドにあるのだが、まだ見えている可能性がある。</p>
</div>
</div>
<div class="section" id="cross-window-communication">
<h2><a class="toc-backref" href="#id3">Cross-window communication</a><a class="headerlink" href="#cross-window-communication" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/cross-window-communication">https://javascript.info/cross-window-communication</a>&gt; ノート。</p>
<p>同一オリジン政策は、ウィンドウとフレームの相互的アクセスを制限する。これは、利用者がページを二つ開いている場合、一方は john-smith.com で、他方はgmail.com だとすると、john-smith.com にあるスクリプトが gmail.com にある我々のメールを読むことは望まないだろうというものだ。つまり、同一オリジン政策の目的は、情報の盗難から利用者を保護することにある。</p>
<div class="section" id="same-origin">
<h3>Same Origin<a class="headerlink" href="#same-origin" title="Permalink to this heading">¶</a></h3>
<div class="admonition- admonition">
<p class="admonition-title">学習者ノート</p>
<p>ここに書いてあるのは以前学習した内容の復習だと思う。</p>
</div>
<p>URL 二つのプロトコル、ドメイン、ポートのそれぞれが同じである場合、この二つの URL
はオリジンが同じであると言う。</p>
<p>これらの URL すべては同じ出所だ：</p>
<ul class="simple">
<li><p>&lt;<a class="reference external" href="http://site.com">http://site.com</a>&gt;</p></li>
<li><p>&lt;<a class="reference external" href="http://site.com/">http://site.com/</a>&gt;</p></li>
<li><p>&lt;<a class="reference external" href="http://site.com/my/page.html">http://site.com/my/page.html</a>&gt;</p></li>
</ul>
<p>これらのものはそうではない：</p>
<ul class="simple">
<li><p>&lt;<a class="reference external" href="http://www.site.com">http://www.site.com</a>&gt;: www に注意</p></li>
<li><p>&lt;<a class="reference external" href="http://site.org">http://site.org</a>&gt;: org</p></li>
<li><p>&lt;<a class="reference external" href="https://site.com">https://site.com</a>&gt;: https</p></li>
<li><p>&lt;<a class="reference external" href="http://site.com:8080">http://site.com:8080</a>&gt;: 8080</p></li>
</ul>
<p>同一オリジン政策は次のことを述べている：</p>
<ul class="simple">
<li><p>他のウィンドウ、例えば <code class="docutils literal notranslate"><span class="pre">window.open()</span></code> で生成されたポップアップや
<code class="docutils literal notranslate"><span class="pre">&lt;iframe&gt;</span></code> 内のウィンドウへの参照を持っていて、そのウィンドウが同じオリジンから来ている場合、そのウィンドウに完全にアクセスすることができる。</p></li>
<li><p>そうでなければ、それが別のオリジンから来たものであれば、そのウィンドウの内容、変数、ドキュメント、その他にアクセスすることはできない。唯一の例外は
<code class="docutils literal notranslate"><span class="pre">location</span></code> で、これを変更することができる（したがって利用者を転送することができる）。しかし、<code class="docutils literal notranslate"><span class="pre">location</span></code> を読み取ることはできない（利用者が今どこにいるのかを知ることはできず、情報漏れは起こらない）。</p></li>
</ul>
<div class="section" id="in-action-iframe">
<h4>In action: iframe<a class="headerlink" href="#in-action-iframe" title="Permalink to this heading">¶</a></h4>
<p>タグ <code class="docutils literal notranslate"><span class="pre">&lt;iframe&gt;</span></code> は、独立した組み込みウィンドウを収容する場所となり、それ自身の独立した``document`` と <code class="docutils literal notranslate"><span class="pre">window</span></code> オブジェクトを持つ。</p>
<p>次に挙げるプロパティーを使えばこれらのオブジェクトにアクセスできる。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iframe.contentWindow</span></code>: <code class="docutils literal notranslate"><span class="pre">&lt;iframe&gt;</span></code> 内のウィンドウ。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iframe.contentDocument</span></code>: <code class="docutils literal notranslate"><span class="pre">&lt;iframe&gt;</span></code> 内のドキュメント。
<code class="docutils literal notranslate"><span class="pre">iframe.contentWindow.document</span></code> と同じ。</p></li>
</ul>
<p>埋め込まれたウィンドウの中の何かにアクセスするとき、ブラウザーは <code class="docutils literal notranslate"><span class="pre">iframe</span></code> が同じオリジンであるかどうかをチェックする。もしそうでなければ、アクセスを拒否する。ただし <code class="docutils literal notranslate"><span class="pre">location</span></code> への書き込みは例外で、まだ許可する。</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;iframe&gt;</span></code> に対して別のオリジンから読み書きを行ってみると、以下の操作だけが成功し、それ以外ではエラーが発生する：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iframe.contentWindow</span></code> への参照取得</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location</span></code> への書き込み</p></li>
</ul>
<p>それとは逆に、<code class="docutils literal notranslate"><span class="pre">&lt;iframe&gt;</span></code> が同じオリジンであれば、何でもできる。</p>
<hr class="docutils" />
<p><code class="docutils literal notranslate"><span class="pre">&lt;iframe&gt;</span></code> タグ上、イベント <code class="docutils literal notranslate"><span class="pre">iframe.onload</span></code> は、基本的に埋め込まれたウィンドウ上 <code class="docutils literal notranslate"><span class="pre">iframe.contentWindow.onload</span></code> と同じものだ。これは、埋め込みウィンドウが全ての資源を完全にロードすると発生する。しかし、他のオリジンに関する
<code class="docutils literal notranslate"><span class="pre">iframe.contentWindow.onload</span></code> にはアクセスできないので <code class="docutils literal notranslate"><span class="pre">iframe.onload</span></code> を使用する。</p>
</div>
</div>
<div class="section" id="windows-on-subdomains-document-domain">
<h3>Windows on subdomains: document.domain<a class="headerlink" href="#windows-on-subdomains-document-domain" title="Permalink to this heading">¶</a></h3>
<p>その定義上、異なるドメインである二つの URL はオリジンが異なる。しかし、ウィンドウが同じ第二水準ドメイン、たとえば john.site.com, peter.site.com, site.com を共有している場合、ブラウザーにその違いを無視させて、ウィンドウ間通信の目的のために同じオリジンであるものとして扱わせることができる。これを実現するには、そのようなウィンドウごとに、次のコードを実行する必要がある：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">document</span><span class="p">.</span><span class="nx">domain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;site.com&#39;</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>プロパティー <code class="docutils literal notranslate"><span class="pre">document.domain</span></code> は仕様から削除される方向にある。その代わりのものが提案されている。今のところ、すべてのブラウザーがこれを対応しているし、
<code class="docutils literal notranslate"><span class="pre">document.domain</span></code> に依存している古いコードを壊さないように、将来にわたって維持される予定だ。</p>
</div>
<div class="section" id="iframe-wrong-document-pitfall">
<h3>Iframe: wrong document pitfall<a class="headerlink" href="#iframe-wrong-document-pitfall" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">iframe</span></code> が同じオリジンから来た場合、そのドキュメントにアクセスする可能性がある場合、落とし穴がある。 <code class="docutils literal notranslate"><span class="pre">iframe</span></code> は生成されるとすぐにドキュメントを持つ。しかし、そのドキュメントは <code class="docutils literal notranslate"><span class="pre">iframe</span></code> に読み込まれるものとは別だ。もし、そのドキュメントに対してすぐに何かをすると、それはおそらく失われるはずだ。</p>
<p>まだロードされていない <code class="docutils literal notranslate"><span class="pre">iframe</span></code> のドキュメントを操作するべきではない。なぜなら、それは間違ったドキュメントだからだ。それにイベントハンドラーを設定しても無視される。</p>
<p>ドキュメントがそこにある瞬間をどのように検出するか。<code class="docutils literal notranslate"><span class="pre">iframe.onload</span></code> が起こされたとき、正しいドキュメントがそこにあることは間違いない。しかし、これは、資源のすべてを含む <code class="docutils literal notranslate"><span class="pre">iframe</span></code> 全体がロードされたときにしか起こされない。
<code class="docutils literal notranslate"><span class="pre">setInterval()</span></code> でチェックすることで、より早くその瞬間を捉えられる：</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">iframe</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;/&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;iframe&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">iframe</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">oldDoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">iframe</span><span class="p">.</span><span class="nx">contentDocument</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// every 100 ms check if the document is the new one</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="nx">timer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">setInterval</span><span class="p">(()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">newDoc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">iframe</span><span class="p">.</span><span class="nx">contentDocument</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">newDoc</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">oldDoc</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;New document is here!&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span><span class="w"> </span><span class="c1">// cancel setInterval, don&#39;t need it any more</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="mf">100</span><span class="p">);</span><span class="w"></span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
<div class="admonition- admonition">
<p class="admonition-title">学習者ノート</p>
<p>一定時間間隔で何かをテストするコードは上のような形で <code class="docutils literal notranslate"><span class="pre">setInterval()</span></code> と
<code class="docutils literal notranslate"><span class="pre">clearInterval()</span></code> を呼ぶことを理解する。</p>
</div>
</div>
<div class="section" id="collection-window-frames">
<h3>Collection: window.frames<a class="headerlink" href="#collection-window-frames" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">&lt;iframe&gt;</span></code> に対するウィンドウオブジェクトを取得する別の方法として、名前付きコレクション <code class="docutils literal notranslate"><span class="pre">window.frames</span></code> がある。</p>
<ul class="simple">
<li><p>番号で指定: <code class="docutils literal notranslate"><span class="pre">window.frames[0]</span></code>: ドキュメント内の最初のフレームのウィンドウ。</p></li>
<li><p>名前で指定: <code class="docutils literal notranslate"><span class="pre">window.frames.iframeName</span></code>: <code class="docutils literal notranslate"><span class="pre">name=&quot;iframeName&quot;</span></code> であるフレームのウィンドウ。</p></li>
</ul>
<p>一つの <code class="docutils literal notranslate"><span class="pre">iframe</span></code> は、内部に他の <code class="docutils literal notranslate"><span class="pre">iframe</span></code> を複数含める。対応するウィンドウオブジェクトは階層を形成する。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">window.frames</span></code>: 子ウィンドウのコレクション（入れ子フレームの場合）</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">window.parent</span></code>: 親（外側の）ウィンドウ</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">window.top</span></code>: いちばん上の親ウィンドウ</p></li>
</ul>
<p>プロパティー <code class="docutils literal notranslate"><span class="pre">top</span></code> を使って、現在の文書がフレーム内に開かれているかどうかを確認できる。</p>
</div>
<div class="section" id="the-sandbox-iframe-attribute">
<h3>The “sandbox” iframe attribute<a class="headerlink" href="#the-sandbox-iframe-attribute" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">&lt;iframe&gt;</span></code> の属性 <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> では、信頼できないコードの実行を防ぐために、フレーム内の特定のアクションを除外することを可能にする。<code class="docutils literal notranslate"><span class="pre">iframe</span></code> が別の場所から来たものとして扱ったり、他の制限を適用することによって、<code class="docutils literal notranslate"><span class="pre">iframe</span></code> を砂箱に置くものだ。</p>
<p><code class="docutils literal notranslate"><span class="pre">&lt;iframe</span> <span class="pre">sandbox</span> <span class="pre">src=&quot;...&quot;&gt;</span></code> に適用される制限の既定値（の集合）はある。しかし、例えば次のように、適用すべきでない制限を空白文字区切りリストを属性の値として指定すると、制限を緩和することができる：</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">iframe</span> <span class="na">sandbox</span><span class="o">=</span><span class="s">&quot;allow-forms allow-popups&quot;</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>言い換えれば、空の <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> は、可能な限り厳しい制限をするが、解除したい制限を空白文字区切りリストで指定できる。</p>
<p>制限オプションの一部を次に示す：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">allow-same-origin</span></code></dt><dd><p>通常は <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> は <code class="docutils literal notranslate"><span class="pre">iframe</span></code> に対して異なるオリジン政策を強制する。ブラウザーは <code class="docutils literal notranslate"><span class="pre">iframe</span></code> の <code class="docutils literal notranslate"><span class="pre">src</span></code> が同じサイトを指していても、別のオリジンから来たものとして扱う。スクリプトに対するすべての暗黙の制限だ。このオプションはそれを取り除く。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allow-top-navigation</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">iframe</span></code> が <code class="docutils literal notranslate"><span class="pre">parent.location</span></code> を変更できるようにする。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allow-forms</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">iframe</span></code> からフォームを提出できるようにする。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allow-scripts</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">iframe</span></code> からスクリプトを実行できるようにする。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">allow-popups</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">iframe</span></code> から <code class="docutils literal notranslate"><span class="pre">window.open()</span></code> でポップアップを表示できるようにする。</p>
</dd>
</dl>
<p>本書のここにある例では、<code class="docutils literal notranslate"><span class="pre">sandbox</span></code> に何も指定しない <code class="docutils literal notranslate"><span class="pre">iframe</span></code> を示している。
Google に入力テキストを送りつける JavaScript とフォームがあるものの、何も動作しない。ボタンのイベントハンドラーすら走らない。既定値は本当に厳しい。</p>
<p>属性 <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> の目的は、制限を追加することしかない。取り除くことはできない。特に、<code class="docutils literal notranslate"><span class="pre">iframe</span></code> が他のオリジンから来た場合、同一オリジンの制限を緩和することはできない。</p>
</div>
<div class="section" id="cross-window-messaging">
<h3>Cross-window messaging<a class="headerlink" href="#cross-window-messaging" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">postMessage()</span></code> は、ウィンドウ同士がどのオリジンから来たものであっても通話できるようにするものだ。つまり、同一政策を回避する。john-smith.com のウィンドウが
gmail.com と会話し、情報を交換することを可能にする。ただし、両者が同意し、対応する JavaScript 関数を呼び出した場合だけだ。そのため、利用者にとって安全だ。</p>
<p>インターフェースは二つの部分から構成されている。</p>
<div class="section" id="postmessage">
<h4>postMessage<a class="headerlink" href="#postmessage" title="Permalink to this heading">¶</a></h4>
<p>メッセージを送りたいウィンドウは、受信側のウィンドウのメソッド <code class="docutils literal notranslate"><span class="pre">postMessage()</span></code>
を呼び出す。<code class="docutils literal notranslate"><span class="pre">win</span></code> にメッセージを送りたいとすると、</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">win</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">targetOrigin</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>を呼び出す必要がある。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code></dt><dd><p>送信するデータ。任意のオブジェクトを指定でき、データは構造化直列化アルゴリズムを使って複製される。 IE は文字列しか対応していないので、複雑なオブジェクトを <code class="docutils literal notranslate"><span class="pre">JSON.stringify()</span></code> する必要がある。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">targetOrigin</span></code></dt><dd><p>到達ウィンドウのオリジンを指定し、指定されたオリジンからのウィンドウのみがメッセージを受け取るようにする。</p>
</dd>
</dl>
<p><code class="docutils literal notranslate"><span class="pre">targetOrigin</span></code> は安全策だ。到達ウィンドウが他のオリジンから来た場合、送信者ウィンドウの位置を読み取ることができないので、目的のウィンドウで今どのサイトが開いているかを確認することはできない。利用者は移動することができ、送信者ウィンドウはそれについて何もわからない。 <code class="docutils literal notranslate"><span class="pre">targetOrigin</span></code> を指定することで、ウィンドウがデータを受け取るのは、それがまだ正しいサイトにいる場合だけであることを保証する。データの機密性が高い場合に重要だ。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">iframe</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;http://example.com&quot;</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;example&quot;</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span><span class="w"></span>
<span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="nx">win</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">frames</span><span class="p">.</span><span class="nx">example</span><span class="p">;</span><span class="w"></span>

<span class="w">  </span><span class="nx">win</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;http://example.com&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">  </span><span class="c1">// If we don&#39;t want that check, we can set targetOrigin to *.</span><span class="w"></span>
<span class="w">  </span><span class="c1">//win.postMessage(&quot;message&quot;, &quot;*&quot;);</span><span class="w"></span>
<span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="onmessage">
<h4>onmessage<a class="headerlink" href="#onmessage" title="Permalink to this heading">¶</a></h4>
<p>メッセージを受信するには、受信側ウィンドウにイベント <code class="docutils literal notranslate"><span class="pre">message</span></code> のハンドラーを設定する。これは、<code class="docutils literal notranslate"><span class="pre">postMessage()</span></code> が呼ばれたとき、および <code class="docutils literal notranslate"><span class="pre">targetOrigin</span></code> のチェックが成功したときに発生する。</p>
<p>イベントオブジェクトは特別なプロパティーがある：</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">data</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">postMessage()</span></code> から受け取ったデータ。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">origin</span></code></dt><dd><p>送信側のオリジン。URL 文字列だと思うといい。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">source</span></code></dt><dd><p>送信側ウィンドウへの参照。そうしたければ、<code class="docutils literal notranslate"><span class="pre">source.postMessage()</span></code> 返しがすぐにできる。</p>
</dd>
</dl>
<p>ハンドラーは、<code class="docutils literal notranslate"><span class="pre">addEventListener()</span></code> でしか割り当てられない。<code class="docutils literal notranslate"><span class="pre">onmessage</span></code> への代入ではダメだ。例：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">origin</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s1">&#39;http://javascript.info&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="c1">// something from an unknown domain, let&#39;s ignore it</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ...</span><span class="w"></span>

<span class="w">    </span><span class="c1">// can message back using event.source.postMessage(...)</span><span class="w"></span>
<span class="p">});</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-clickjacking-attack">
<h2><a class="toc-backref" href="#id4">The clickjacking attack</a><a class="headerlink" href="#the-clickjacking-attack" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/clickjacking">https://javascript.info/clickjacking</a>&gt; ノート。</p>
<p>クリックジャック攻撃は、悪質なページが訪問者に代わって被害サイトをクリックするものだ。現在は修正済みであるが、Twitter, Facebook, Paypal など、多くのサイトがこの方法でハックされたことがある。</p>
<div class="section" id="the-idea">
<h3>The idea<a class="headerlink" href="#the-idea" title="Permalink to this heading">¶</a></h3>
<p>Facebook を使ったクリックジャッキングのやり方はこうだ：</p>
<ol class="arabic simple">
<li><p>方法は問わないので、訪問者を悪いページにおびき寄せる。</p></li>
<li><p>そのページには無害そうなリンクを置く。</p></li>
<li><p>そのリンクの上に <code class="docutils literal notranslate"><span class="pre">src</span></code> が facebook.com からのものであるような <code class="docutils literal notranslate"><span class="pre">&lt;iframe&gt;</span></code>
を配置し、そのリンクの真上に「いいね」ボタンが来るようにする。通常、これは
<code class="docutils literal notranslate"><span class="pre">z-index</span></code> で実現する。</p></li>
<li><p>リンクをクリックしようとした訪問者は、実際にそうしてしまう。</p></li>
</ol>
</div>
<div class="section" id="the-demo">
<h3>The demo<a class="headerlink" href="#the-demo" title="Permalink to this heading">¶</a></h3>
<p>悪いページのデモコード。要点をかいつまむと：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">iframe</span></code> のスタイルシートで <code class="docutils literal notranslate"><span class="pre">opatity:</span> <span class="pre">0</span></code> および <code class="docutils literal notranslate"><span class="pre">z-index:</span> <span class="pre">1</span></code> のようなものを指定する。また、かなり不自然な寸法を与える。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iframe</span></code> の属性 <code class="docutils literal notranslate"><span class="pre">src</span></code> に上述のような URL を指定する。</p></li>
</ul>
<p>ここでは、透明の <code class="docutils literal notranslate"><span class="pre">&lt;iframe</span> <span class="pre">src=&quot;facebook.html&quot;&gt;</span></code> があり、この例では、ボタンの上に浮かんで見える。ボタンをクリックすると、実際には <code class="docutils literal notranslate"><span class="pre">iframe</span></code> がクリックされますが、それが透明であるため、閲覧者には見えない。その結果、訪問者が Facebook で認証されている場合「いいね」が追加される。 Twitter ならばフォローボタンが追加される。</p>
<p>悪人たちがするべきことは、リンクのすぐ上にボタンが来るように、<code class="docutils literal notranslate"><span class="pre">&lt;iframe&gt;</span></code> を悪いページに配置することだ。そうすれば、閲覧者がリンクをクリックすると、本当にボタンがクリックされる。これは通常、CSS でできる。</p>
<hr class="docutils" />
<p>クリックジャッキングは、キーボードではなく、クリックに対して行われる。この手の攻撃は、マウス操作（またはモバイルでのタップのような類似の操作）にしか効果がない。キーボード入力は、転送するのがひじょうに困難だ。技術的には、ハックするテキスト欄があれば、テキスト欄同士が重なるように <code class="docutils literal notranslate"><span class="pre">iframe</span></code> を配置できる。そうすれば、訪問者がページ上に表示されている入力に神経を集中しようとしたとき、実際には <code class="docutils literal notranslate"><span class="pre">iframe</span></code>
内の入力に集中することになるのだ。しかし、そこで問題が発生する。 <code class="docutils literal notranslate"><span class="pre">iframe</span></code> が見えないので、訪問者が入力したものはすべて隠されてしまう。新しい文字が画面にエコーされるのが見えなくなると、人は入力するのをやめてしまう。</p>
</div>
<div class="section" id="old-school-defences-weak">
<h3>Old-school defences (weak)<a class="headerlink" href="#old-school-defences-weak" title="Permalink to this heading">¶</a></h3>
<p>最も古い防御策は、次のようにしてフレーム内でページを開くことを禁止するものだ：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">top</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">window</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">top</span><span class="p">.</span><span class="nx">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">window</span><span class="p">.</span><span class="nx">location</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>つまり、ウィンドウは自分が一番上でないことを知ると、自動的に自分を一番上にするというものだ。これは確実な防御策ではない。これを回避する方法はたくさんある。</p>
<div class="section" id="blocking-top-navigation">
<h4>Blocking top-navigation<a class="headerlink" href="#blocking-top-navigation" title="Permalink to this heading">¶</a></h4>
<p>イベントハンドラー <code class="docutils literal notranslate"><span class="pre">beforeunload</span></code> で <code class="docutils literal notranslate"><span class="pre">top.location</span></code> を変更することによって、ページ遷移を阻止できる。トップページ（ハッカーのもの）では、阻止ハンドラーをこのように設定する：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">window</span><span class="p">.</span><span class="nx">onbeforeunload</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">false</span><span class="p">;</span><span class="w"></span>
<span class="p">};</span><span class="w"></span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">iframe</span></code> が <code class="docutils literal notranslate"><span class="pre">top.location</span></code> を変更しようとするときに、訪問者は退出するかどうか尋ねるメッセージを受け取る。ほとんどの場合、訪問者は <code class="docutils literal notranslate"><span class="pre">iframe</span></code> のことを知らないので、否定的な答えをするだろう。つまり、<code class="docutils literal notranslate"><span class="pre">top.location</span></code> は変更されない。</p>
<div class="admonition- admonition">
<p class="admonition-title">学習者ノート</p>
<p>デモコードが意図通りに動作しないようだ。</p>
</div>
</div>
<div class="section" id="sandbox-attribute">
<h4>Sandbox attribute<a class="headerlink" href="#sandbox-attribute" title="Permalink to this heading">¶</a></h4>
<p>属性 <code class="docutils literal notranslate"><span class="pre">sandbox</span></code> で制限されるものの一つにナビゲーションがある。サンドボックス化された <code class="docutils literal notranslate"><span class="pre">iframe</span></code> は <code class="docutils literal notranslate"><span class="pre">top.location</span></code> を変更できない。</p>
<p>そこで、<code class="docutils literal notranslate"><span class="pre">sandbox=&quot;allow-scripts</span> <span class="pre">allow-forms&quot;</span></code> である <code class="docutils literal notranslate"><span class="pre">iframe</span></code> を追加できる。そうすると、制限が緩和され、スクリプトとフォームが許可される。しかし、
<code class="docutils literal notranslate"><span class="pre">allow-top-navigation</span></code> を省略し、<code class="docutils literal notranslate"><span class="pre">top.location</span></code> を変更することを禁止している。</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">iframe</span> <span class="na">sandbox</span><span class="o">=</span><span class="s">&quot;allow-scripts allow-forms&quot;</span> <span class="na">src</span><span class="o">=</span><span class="s">&quot;facebook.html&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">iframe</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>この単純なプロテクトを回避する方法もまたある。</p>
</div>
</div>
<div class="section" id="x-frame-options">
<h3>X-Frame-Options<a class="headerlink" href="#x-frame-options" title="Permalink to this heading">¶</a></h3>
<p>サーバー側ヘッダー <code class="docutils literal notranslate"><span class="pre">X-Frame-Options</span></code> は、ページをフレーム内に表示することを許可または禁止することができる。これは HTTP-header として正確に送信されなければならない。ブラウザーは、HTMLの <code class="docutils literal notranslate"><span class="pre">&lt;meta&gt;</span></code> タグで見つけた場合、これを無視する。つまり、<code class="docutils literal notranslate"><span class="pre">&lt;meta</span> <span class="pre">http-equiv=&quot;X-Frame-Options&quot;</span> <span class="pre">...&gt;</span></code> と書いても何もしない。</p>
<p>ヘッダーにある値は三つあり得る：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DENY</span></code>: ページをフレーム内に表示しない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SAMEORIGIN</span></code>: 親ドキュメントが同じオリジンから来た場合、フレーム内を許可する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ALLOW-FROM</span> <span class="pre">domain</span></code>: 親ドキュメントが与えられたドメインから来た場合、フレーム内を許可する。</p></li>
</ul>
<p>例えば、Twitter は <code class="docutils literal notranslate"><span class="pre">X-Frame-Options:</span> <span class="pre">SAMEORIGIN</span></code> を採用している。 <code class="docutils literal notranslate"><span class="pre">&lt;iframe</span>
<span class="pre">src=&quot;https://twitter.com&quot;&gt;&lt;/iframe&gt;</span></code> を書こうものなら、本書のように接続拒否エラー表示になる。</p>
</div>
<div class="section" id="showing-with-disabled-functionality">
<h3>Showing with disabled functionality<a class="headerlink" href="#showing-with-disabled-functionality" title="Permalink to this heading">¶</a></h3>
<p>ヘッダー <code class="docutils literal notranslate"><span class="pre">X-Frame-Options</span></code> には副作用がある。他のサイトが、たとえそうする正当な理由があったとしても、当方のページをフレーム内に表示することができなくなる。</p>
<p>たとえば、<code class="docutils literal notranslate"><span class="pre">height:</span> <span class="pre">100%;</span> <span class="pre">width:</span> <span class="pre">100%;</span></code> というスタイルの <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> でページを覆って、すべてのクリックを阻止できるようにする。この <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> は、
<code class="docutils literal notranslate"><span class="pre">window</span> <span class="pre">==top</span></code> の場合か、または保護が不要と判断された場合に削除される。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// protector がページ全体を覆う div ノード</span><span class="w"></span>

<span class="c1">// there will be an error if top window is from the different origin</span><span class="w"></span>
<span class="c1">// but that&#39;s ok here</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">top</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">domain</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">domain</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nx">protector</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</div>
<div class="section" id="samesite-cookie-attribute">
<h3>Samesite cookie attribute<a class="headerlink" href="#samesite-cookie-attribute" title="Permalink to this heading">¶</a></h3>
<p>また、cookie 属性 <code class="docutils literal notranslate"><span class="pre">samesite</span></code> は、クリックジャック攻撃を防げる。このような属性を持つ cookie は、フレーム経由などではなく、直接ウェブサイトが開かれた場合にのみ送信される。</p>
<p>Facebook のように、サイトがその認証 cookie に属性 <code class="docutils literal notranslate"><span class="pre">samesite</span></code> を有する場合、
Facebook が他のサイトから <code class="docutils literal notranslate"><span class="pre">iframe</span></code> で開かれたときに、そのような cookie は送られないだろう。だから攻撃は失敗する。</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Set-Cookie: authorization=secret; samesite
</pre></div>
</div>
<p>Cookie 属性 <code class="docutils literal notranslate"><span class="pre">samesite</span></code> は、cookie が使用されていない場合は効果がない。これにより、他のウェブサイトが当方の公開された未認証のページを <code class="docutils literal notranslate"><span class="pre">iframe</span></code> で簡単に表示することができるようになるかもしれない。ただし、この場合、一部の限られた場合にクリックジャック攻撃が機能する可能性もある。例えば、IP アドレスをチェックすることで重複投票を防止している匿名投票サイトは、 cookie を使って利用者を認証していないため、クリックジャッキングの脆弱性が依然としてある。</p>
</div>
</div>
</div>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="index.html" title="Previous document">Part 3 Additional articles</a>
        </li>
        <li>
          <a href="02-binary.html" title="Next document">Binary data, files</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">読書ノート</a></h1>



<p class="blurb">個人的な読書、学習、研究ノート。</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../mathseminar72.html">数学 100 の発見 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gamma95/index.html">オブジェクト指向における再利用のためのデザインパターン改訂版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hunt00/index.html">達人プログラマー 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sutter00.html">Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../alexandrescu01/index.html">Modern C++ Design 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../meyers01.html">Effective STL 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sutter02.html">More Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../joel04/index.html">Joel on Software 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graham04.html">ハッカーと画家 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../angel05/index.html">OpenGL: A Primer Second Edition 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../yamamoto05/index.html">入門 xyzzy 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../newham05/index.html">入門 bash 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tsuboi05/index.html">幾何学 I 多様体入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../subramaniam06.html">アジャイルプラクティス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../asaoka06.html">SE・製造技術者・理工系学生のための技術文書の作り方・書き方 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../levin06/index.html">Shaping Functions 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tsuboi08/index.html">幾何学 III 微分形式 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../loeliger09.html">実用 Git 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../griffiths10.html">プログラミング C# 第 6 版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../onodera10.html">ORACLE MASTER Bronze 11g SQL 基礎 I 必修教本 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hosoda10/index.html">Python 入門［２＆３対応］読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nishiyama12/index.html">幾何学と不変量 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../omg15/index.html">Unified Modeling Language 2.5 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gorelick14.html">ハイパフォーマンス Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stroustrup14.html">C++ のエッセンス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stepanov15.html">その数式、プログラムできますか？ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../khronos15/index.html">WebGL Specification 1.0 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vivo15/index.html">The Book of Shaders 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../saha16.html">Python からはじめる数学入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../slatkin16.html">Effective Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guntheroth16.html">Optimized C++ 下読みノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../speinellis17.html">Effective Debugging 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bancila18.html">Modern C++ チャレンジ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../haverbeke18/index.html">Eloquent JavaScript 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../khronos18/index.html">OpenGL Shading Language 4.60 Specification 読書ノート</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Modern JavaScript Tutorial 読書ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2014.html">ノート準備中書籍群 2014 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2015.html">ノート準備中書籍群 2015 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2016.html">ノート準備中書籍群 2016 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2017.html">ノート準備中書籍群 2017 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2018.html">ノート準備中書籍群 2018 年編</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bash-v2.html">What’s New In Bash 2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bash-v3.html">What’s New In Bash 3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bash-v4.html">What’s New In Bash 4 ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cpp11/index.html">What’s New In C++11 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp14/index.html">What’s New In C++14 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp17/index.html">What’s New In C++17 ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.0.html">What’s New In Python 3.0 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.1.html">What’s New In Python 3.1 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.2.html">What’s New In Python 3.2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.3.html">What’s New In Python 3.3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.4.html">What’s New In Python 3.4 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.5.html">What’s New In Python 3.5 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.6.html">What’s New In Python 3.6 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.7.html">What’s New In Python 3.7 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.8.html">What’s New In Python 3.8 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.9.html">What’s New In Python 3.9 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.10.html">What’s New In Python 3.10 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pip.html">pip 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pylint.html">Pylint 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-docutils/index.html">Docutils 解読ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-restview.html">Restview 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-nose.html">Nose 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-ipython.html">IPython 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-jupyter.html">Jupyter 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-numpy/index.html">NumPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-scipy/index.html">SciPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-sympy/index.html">SymPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-apgl.html">Another Python Graph Library (APGL) 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pil.html">PIL 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pillow.html">Pillow 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-matplotlib/index.html">Matplotlib 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-networkx/index.html">NetworkX 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-quaternion.html">Quaternion 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-jinja2.html">Jinja2 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pygments.html">Pygments 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-bs4.html">BeautifulSoup4 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-selenium.html">Selenium 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-scrapy.html">Scrapy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-twitter/index.html">Python Twitter Tools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-isbn-hyphenate.html">isbn-hyphenate 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pyopengl/index.html">PyOpenGL 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pyqt4.html">PyQt4 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pyqt5.html">PyQt5 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pandas/index.html">Pandas 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pygame.html">Pygame 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pytube.html">Pytube 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-py2exe.html">Py2exe 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-upgrade.html">Python 移行ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-miniconda.html">Miniconda 利用ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../freeware.html">Windows 用フリーウェア 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deepl-translator.html">DeepL Translator 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../winget.html">Windows Package Manager CLI 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../power-toys.html">Microsoft PowerToys 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../windows-terminal.html">Windows Terminal 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wsl.html">Windows Subsystem for Linux 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cygwin.html">Cygwin 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chrome.html">Chrome DevTools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../git/index.html">Git 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../twitter.html">Twitter 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../inkscape/index.html">Inkscape 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mathjax.html">MathJax 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript-mermaid/index.html">Mermaid 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../css-selector.html">CSS セレクター学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xpath.html">XPath 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hxutils.html">HTML-XML-utils 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../webgl.html">WebGL 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pandoc.html">Pandoc 利用ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../milestone09/index.html">ラジルギノア プレイノート</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">The Modern JavaScript Tutorial 読書ノート</a><ul>
  <li><a href="index.html">Part 3 Additional articles</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Part 3 Additional articles</a></li>
      <li>Next: <a href="02-binary.html" title="next chapter">Binary data, files</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="../../_static/logos.png"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2022, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>