<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Code quality &#8212; 読書ノート 1.5dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/mermaid.js"></script>
    <link rel="next" title="Objects: the basics" href="04-object-basics.html" />
    <link rel="prev" title="JavaScript Fundamentals" href="02-first-steps.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="02-first-steps.html" title="Previous document">JavaScript Fundamentals</a>
        </li>
        <li>
          <a href="04-object-basics.html" title="Next document">Objects: the basics</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="code-quality">
<h1><a class="toc-backref" href="#id4" role="doc-backlink">Code quality</a><a class="headerlink" href="#code-quality" title="Permalink to this heading">¶</a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#code-quality" id="id4">Code quality</a></p>
<ul>
<li><p><a class="reference internal" href="#debugging-in-the-browser" id="id5">Debugging in the browser</a></p></li>
<li><p><a class="reference internal" href="#coding-style" id="id6">Coding Style</a></p></li>
<li><p><a class="reference internal" href="#comments" id="id7">Comments</a></p></li>
<li><p><a class="reference internal" href="#ninja-code" id="id8">Ninja code</a></p></li>
<li><p><a class="reference internal" href="#automated-testing-with-mocha" id="id9">Automated testing with Mocha</a></p></li>
<li><p><a class="reference internal" href="#polyfills-and-transpilers" id="id10">Polyfills and transpilers</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="debugging-in-the-browser">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Debugging in the browser</a><a class="headerlink" href="#debugging-in-the-browser" title="Permalink to this heading">¶</a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../chrome.html"><span class="doc">Chrome DevTools 利用ノート</span></a></p>
</div>
<p>Google Chrome の開発ツールを例にとって、デバッグの手法がいくつか紹介されている。
Chrome の文書を併せて一読するべし。作業効率が無視できないほど違ってくる。</p>
<section id="the-sources-panel">
<h3>The “Sources” panel<a class="headerlink" href="#the-sources-panel" title="Permalink to this heading">¶</a></h3>
<p><span class="guilabel">Sources</span> パネルの開き方を習得する。開発ツールの開き方がわかっていればすぐにわかるものだ。</p>
</section>
<section id="console">
<h3>Console<a class="headerlink" href="#console" title="Permalink to this heading">¶</a></h3>
<p><span class="guilabel">Console</span> パネルは JavaScript 専用の REPL コンソールだ。
<span class="guilabel">Sources</span> パネルから <kbd class="kbd docutils literal notranslate">Esc</kbd> キーでコンソールが開くのは知らなんだ。</p>
</section>
<section id="breakpoints">
<h3>Breakpoints<a class="headerlink" href="#breakpoints" title="Permalink to this heading">¶</a></h3>
<p><span class="guilabel">Sources</span> パネルのコードビューにおける Breakpoint の追加方法を習得する。追加方法は複数ある。行番号をクリックするのが基本だ。</p>
<p>さらに Conditional breakpoint も拾得したい。ぜひ習得したい。</p>
</section>
<section id="the-command-debugger">
<h3>The command <code class="docutils literal notranslate"><span class="pre">debugger</span></code><a class="headerlink" href="#the-command-debugger" title="Permalink to this heading">¶</a></h3>
<p>コード中に <code class="docutils literal notranslate"><span class="pre">debugger</span></code> 文を書くと、そこに breakpoint を置いたのと同値になる。これは開発ツールが表示されているときにしか有効にされないものだと思ってよい。</p>
</section>
<section id="pause-and-look-around">
<h3>Pause and look around<a class="headerlink" href="#pause-and-look-around" title="Permalink to this heading">¶</a></h3>
<p>JavaScript Debugging 内から <span class="guilabel">Watch</span>, <span class="guilabel">Call Stack</span>,
<span class="guilabel">Scope</span> 各ビューを確認できる。他の言語のデバッガーにある機能にそれぞれ対応する。</p>
</section>
<section id="tracing-the-execution">
<h3>Tracing the execution<a class="headerlink" href="#tracing-the-execution" title="Permalink to this heading">¶</a></h3>
<p>トレースコマンド各種。コマンドとショートカットキーを体で覚える。</p>
<ul class="simple">
<li><p><span class="guilabel">Step into</span> コマンドは知らない。これは別途時間を取って学習する。</p></li>
<li><p><span class="guilabel">Continue to here</span> コマンドも手軽で便利だろう。</p></li>
</ul>
</section>
<section id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">console.log()</span></code> について紹介。値はコンソールに出力されるので、普通のユーザーは目にしないと期待される。</p>
</section>
</section>
<section id="coding-style">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Coding Style</a><a class="headerlink" href="#coding-style" title="Permalink to this heading">¶</a></h2>
<p>コードはきれいで読みやすいものでなければならない。複雑なタスクを、正しく、かつ人間が読めるようにコードにすることがプログラミングの技だ。良いコードスタイルはそれを大いに支える。</p>
<p>もっとも VS Code の <span class="guilabel">Format Document</span> コマンド任せで十分だ。真面目に読むとしたら Style Guides 節の各リンク先だろう。</p>
<section id="syntax">
<h3>Syntax<a class="headerlink" href="#syntax" title="Permalink to this heading">¶</a></h3>
<p>著者の提唱するコードスタイルがコードに注釈が付いたイラストの形で示されている。こういうのは VS Code の <span class="guilabel">Format Document</span> コマンドに任せる。</p>
<section id="curly-braces">
<h4>Curly Braces<a class="headerlink" href="#curly-braces" title="Permalink to this heading">¶</a></h4>
<p>こういう中括弧の入れ方をエジプト式というのか。</p>
<p>単文でもコードブロックを設けるという意見に賛同する。</p>
</section>
<section id="line-length">
<h4>Line Length<a class="headerlink" href="#line-length" title="Permalink to this heading">¶</a></h4>
<p>テキストエディターに縦線が薄く描かれているから、それに従えばいいだろう。</p>
</section>
<section id="indents">
<h4>Indents<a class="headerlink" href="#indents" title="Permalink to this heading">¶</a></h4>
<p>著者は空行もインデントの一種だと捉えている。</p>
</section>
<section id="semicolons">
<h4>Semicolons<a class="headerlink" href="#semicolons" title="Permalink to this heading">¶</a></h4>
<p>以前述べたように、セミコロンは statement の末尾に必ず書くことだ。</p>
</section>
<section id="nesting-levels">
<h4>Nesting Levels<a class="headerlink" href="#nesting-levels" title="Permalink to this heading">¶</a></h4>
<p>どの言語でも深い入れ子は敬遠されるものだ。</p>
</section>
</section>
<section id="function-placement">
<h3>Function Placement<a class="headerlink" href="#function-placement" title="Permalink to this heading">¶</a></h3>
<p>関数定義と、それらを呼び出すコードをのどちらを先に書くかという問題だ。JavaScript
の場合には、どちらの方式でも有効なコードなので、こういうことを考える余地がある。</p>
</section>
<section id="style-guides">
<h3>Style Guides<a class="headerlink" href="#style-guides" title="Permalink to this heading">¶</a></h3>
<p>リンクを転載する。</p>
<ul class="simple">
<li><p><a class="reference external" href="https://google.github.io/styleguide/jsguide.html">Google JavaScript Style Guide</a></p></li>
<li><p><a class="reference external" href="https://github.com/airbnb/javascript">Airbnb JavaScript Style Guide</a></p></li>
<li><p><a class="reference external" href="https://github.com/rwaldron/idiomatic.js">Idiomatic.JS</a></p></li>
<li><p><a class="reference external" href="https://standardjs.com/">StandardJS</a></p></li>
</ul>
</section>
<section id="automated-linters">
<h3>Automated Linters<a class="headerlink" href="#automated-linters" title="Permalink to this heading">¶</a></h3>
<p>おせっかいツールの紹介。著者は <a class="reference external" href="https://eslint.org/">ESLint</a> を採用している。</p>
<p>この手のツールも VS Code に仕込めるはずだ。</p>
</section>
<section id="tasks">
<h3>Tasks<a class="headerlink" href="#tasks" title="Permalink to this heading">¶</a></h3>
<section id="bad-style">
<h4>Bad style<a class="headerlink" href="#bad-style" title="Permalink to this heading">¶</a></h4>
<p>コードレビューをするつもりで指摘していこう。</p>
</section>
</section>
</section>
<section id="comments">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Comments</a><a class="headerlink" href="#comments" title="Permalink to this heading">¶</a></h2>
<section id="bad-comments">
<h3>Bad comments<a class="headerlink" href="#bad-comments" title="Permalink to this heading">¶</a></h3>
<p>初心者はコードの中で何が起こっているのかを説明するためにコメントを使いがちだ。コメントが必要なほどコードが不明確なら、コメントを使うのではなく、コードを書き直すべきなのだ。</p>
<section id="recipe-factor-out-functions">
<h4>Recipe: factor out functions<a class="headerlink" href="#recipe-factor-out-functions" title="Permalink to this heading">¶</a></h4>
<p>コードの一部を関数に置き換えることが有益な場合もある。</p>
</section>
<section id="recipe-create-functions">
<h4>Recipe: create functions<a class="headerlink" href="#recipe-create-functions" title="Permalink to this heading">¶</a></h4>
<p>コードの層が生じているならば、関数として括り出す。</p>
</section>
</section>
<section id="good-comments">
<h3>Good comments<a class="headerlink" href="#good-comments" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>コード全体を俯瞰するようなコメントは良いものだ。</p></li>
<li><p><a class="reference external" href="http://en.wikipedia.org/wiki/JSDoc">JSDoc</a> を導入する。いろいろと利点がある。</p></li>
<li><p>コードがすべてではない。</p></li>
</ul>
<div class="admonition- admonition">
<p class="admonition-title">学習者ノート</p>
<p>JSDoc の導入例は <a class="reference external" href="https://www.npmjs.com/package/jsdoc">jsdoc - npm</a> に書いてある。しかし、これだけだとハローワールドがわからないので、次を試す：</p>
<blockquote>
<div><p><a class="reference external" href="https://learning-zone.github.io/jsdoc-tutorial/">JSDoc Tutorial</a></p>
</div></blockquote>
</div>
</section>
</section>
<section id="ninja-code">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Ninja code</a><a class="headerlink" href="#ninja-code" title="Permalink to this heading">¶</a></h2>
<p>見出しは忍者なのに、引用は中国の古の賢人たちの言葉なのは怪しい。</p>
<section id="comments-1">
<span id="id1"></span><h3>Comments<a class="headerlink" href="#comments-1" title="Permalink to this heading">¶</a></h3>
<p>本文よりもコメント欄のほうが重要。コメント欄を読まないとこの回の意味がわからないまである。</p>
</section>
</section>
<section id="automated-testing-with-mocha">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Automated testing with Mocha</a><a class="headerlink" href="#automated-testing-with-mocha" title="Permalink to this heading">¶</a></h2>
<p>この回はとくに重要なので時間をとって取り組む。サンドボックスを開いて実際に試すこと。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">it.only()</span></code> は、他にテストがどれだけたくさんあっても、ほんとうにこのテストしか実行されなくなる。</p></li>
</ul>
<div class="admonition- admonition">
<p class="admonition-title">学習者ノート</p>
<p><a class="reference external" href="https://mochajs.org/">Mocha</a> のページの Getting Started をやるといい。</p>
</div>
<section id="why-do-we-need-tests">
<h3>Why do we need tests?<a class="headerlink" href="#why-do-we-need-tests" title="Permalink to this heading">¶</a></h3>
<p>自動テストでは、製品コードとは別にテスト用のコードを書く。自動テストは、製品機能をさまざまな方法で実行し、結果を期待するものと比較する。</p>
</section>
<section id="behavior-driven-development-bdd">
<h3>Behavior Driven Development (BDD)<a class="headerlink" href="#behavior-driven-development-bdd" title="Permalink to this heading">¶</a></h3>
<p>BDD とはテストと文書と例を一体化したものだ。</p>
</section>
<section id="development-of-pow-the-spec">
<h3>Development of “pow”: the spec<a class="headerlink" href="#development-of-pow-the-spec" title="Permalink to this heading">¶</a></h3>
<p>まだ Mocha を紹介していないが、次の要素を説明している：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">describe(&quot;title&quot;,</span> <span class="pre">function()</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">})</span></code>: おそらく test suite に相当する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">it(&quot;use</span> <span class="pre">case</span> <span class="pre">description&quot;,</span> <span class="pre">function()</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">})</span></code>: おそらく test case に相当する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">assert.equal(value1,</span> <span class="pre">value2)</span></code>: 他言語のテストパッケージにあるものと同等</p></li>
</ul>
</section>
<section id="the-development-flow">
<h3>The development flow<a class="headerlink" href="#the-development-flow" title="Permalink to this heading">¶</a></h3>
<p>ここで Mocha の名前がようやく現れる。</p>
</section>
<section id="the-spec-in-action">
<h3>The spec in action<a class="headerlink" href="#the-spec-in-action" title="Permalink to this heading">¶</a></h3>
<p>本チュートリアルで用いるパッケージ群：</p>
<ul class="simple">
<li><p><a class="reference external" href="http://mochajs.org/">Mocha</a></p></li>
<li><p><a class="reference external" href="http://chaijs.com/">Chai</a></p></li>
<li><p><a class="reference external" href="http://sinonjs.org/">Sinon</a></p></li>
</ul>
<p>これらを組み込んだ HTML ページの外観。</p>
</section>
<section id="initial-implementation">
<h3>Initial implementation<a class="headerlink" href="#initial-implementation" title="Permalink to this heading">¶</a></h3>
<p>初期版は次のコードとする：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mf">8</span><span class="p">;</span><span class="w"> </span><span class="c1">// :) we cheat!</span>
<span class="p">}</span>
</pre></div>
</div>
<p>明らかに正しくないのだが、テストの初期版も次のような感じなので成功する：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;pow&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;raises to n-th power&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">),</span><span class="w"> </span><span class="mf">8</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="improving-the-spec">
<h3>Improving the spec<a class="headerlink" href="#improving-the-spec" title="Permalink to this heading">¶</a></h3>
<p>次のテストを追加することで、失敗させる：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;3 raised to power 4 is 81&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">),</span><span class="w"> </span><span class="mf">81</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>一つのテストは一つのことをチェックする。初期版も修正しておく：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;pow&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;2 raised to power 3 is 8&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">),</span><span class="w"> </span><span class="mf">8</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="improving-the-implementation">
<h3>Improving the implementation<a class="headerlink" href="#improving-the-implementation" title="Permalink to this heading">¶</a></h3>
<p>ここで <code class="docutils literal notranslate"><span class="pre">pow()</span></code> の実装をまともにする。それからテスト項目を追加するやり方を柔軟にする。これで 3 乗のテストは比較的網羅できるようになる：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;pow&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">makeTest</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">expected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="p">;</span>
<span class="w">        </span><span class="nx">it</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">x</span><span class="si">}</span><span class="sb"> in the power 3 is </span><span class="si">${</span><span class="nx">expected</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">),</span><span class="w"> </span><span class="nx">expected</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">makeTest</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="nested-describe">
<h3>Nested describe<a class="headerlink" href="#nested-describe" title="Permalink to this heading">¶</a></h3>
<p>関数 <code class="docutils literal notranslate"><span class="pre">describe()</span></code> の入れ子を形成することで、テストを階層的に構築する。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;pow&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;raises x to power 3&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="c1">// ... more tests to follow here, both describe and it can be added</span>
<span class="p">});</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">before</span></code>/<code class="docutils literal notranslate"><span class="pre">after</span></code> と <code class="docutils literal notranslate"><span class="pre">beforeEach</span></code>/<code class="docutils literal notranslate"><span class="pre">afterEach</span></code> の紹介。後の章の演習問題のコードにこれらが現れることがあるので、そのとき思い出す。</p></li>
</ul>
</section>
<section id="extending-the-spec">
<h3>Extending the spec<a class="headerlink" href="#extending-the-spec" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>テストコードを先に拡充してから、開発コードを修正していく。これの反復だ。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">assert.isNaN()</span></code> など、その他の assertion も使っていく。</p></li>
</ul>
</section>
<section id="id2">
<h3>Tasks<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<section id="what-s-wrong-in-the-test">
<h4>What’s wrong in the test?<a class="headerlink" href="#what-s-wrong-in-the-test" title="Permalink to this heading">¶</a></h4>
<p>このような書き方だと、エラーが発生した場合、何が問題だったのかがわかりにくくなる。複雑な実行フローの途中でエラーが発生した場合、その時点のデータを把握する必要が生じ、実際にテストをデバッグしなければならなくなる。これでは自動テストの意味がない。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">it.only()</span></code> の挙動はこの説明ではよくわからない？</p></li>
</ul>
</section>
</section>
<section id="comments-2">
<span id="id3"></span><h3>Comments<a class="headerlink" href="#comments-2" title="Permalink to this heading">¶</a></h3>
<p>コメント欄ではこの章は不評のようだが、単体テストのトピックが重要であることは間違いない。</p>
</section>
</section>
<section id="polyfills-and-transpilers">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Polyfills and transpilers</a><a class="headerlink" href="#polyfills-and-transpilers" title="Permalink to this heading">¶</a></h2>
<p>MDN のページを見ると polyfill という不思議な単語が頻出する。この章の本文でやっと定義を確認できた。</p>
<section id="transpilers">
<h3>Transpilers<a class="headerlink" href="#transpilers" title="Permalink to this heading">¶</a></h3>
<p>Transpiler とは、ソースコードを別のソースコードに変換するソフトウェアだ。最新のコードを解析し、古い構文を使って書き換え、古いエンジンでも動作させるようにする。</p>
<ul class="simple">
<li><p>ここでは演算子 <code class="docutils literal notranslate"><span class="pre">??</span></code> を含むコードを書き換える例を挙げている。</p></li>
<li><p><a class="reference external" href="https://babeljs.io/">Babel</a> は著名な transpiler の筆頭だ。</p></li>
<li><p><a class="reference external" href="https://webpack.js.org/">Webpack</a> のような最新のプロジェクトビルドシステムは、コード変更のたびにtranspiler を自動的に実行する手段を提供しているので、開発プロセスに組み込むのが容易だ。</p></li>
</ul>
</section>
<section id="polyfills">
<h3>Polyfills<a class="headerlink" href="#polyfills" title="Permalink to this heading">¶</a></h3>
<p>新しい機能を更新・追加するスクリプトを polyfill と呼ぶ。「隙間を埋める」「足りない実装を追加する」ものだ。</p>
</section>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="02-first-steps.html" title="Previous document">JavaScript Fundamentals</a>
        </li>
        <li>
          <a href="04-object-basics.html" title="Next document">Objects: the basics</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">読書ノート</a></h1>



<p class="blurb">個人的な読書、学習、研究ノート。</p>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">図書・教科書・仕様書ノート</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../mathseminar72.html">数学 100 の発見 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gamma95/index.html">オブジェクト指向における再利用のためのデザインパターン改訂版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hunt00/index.html">達人プログラマー 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sutter00.html">Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../alexandrescu01/index.html">Modern C++ Design 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../meyers01.html">Effective STL 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sutter02.html">More Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../joel04/index.html">Joel on Software 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graham04.html">ハッカーと画家 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../angel05/index.html">OpenGL: A Primer Second Edition 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../yamamoto05/index.html">入門 xyzzy 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../newham05/index.html">入門 bash 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tsuboi05/index.html">幾何学 I 多様体入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../subramaniam06.html">アジャイルプラクティス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../asaoka06.html">SE・製造技術者・理工系学生のための技術文書の作り方・書き方 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../levin06/index.html">Shaping Functions 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tsuboi08/index.html">幾何学 III 微分形式 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../loeliger09.html">実用 Git 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../griffiths10.html">プログラミング C# 第 6 版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../onodera10.html">ORACLE MASTER Bronze 11g SQL 基礎 I 必修教本 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hosoda10/index.html">Python 入門［２＆３対応］読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nishiyama12/index.html">幾何学と不変量 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../omg15/index.html">Unified Modeling Language 2.5 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gorelick14.html">ハイパフォーマンス Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stroustrup14.html">C++ のエッセンス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stepanov15.html">その数式、プログラムできますか？ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../khronos15/index.html">WebGL Specification 1.0 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vivo15/index.html">The Book of Shaders 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../saha16.html">Python からはじめる数学入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../slatkin16.html">Effective Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guntheroth16.html">Optimized C++ 下読みノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../speinellis17.html">Effective Debugging 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bancila18.html">Modern C++ チャレンジ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../haverbeke18/index.html">Eloquent JavaScript 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../khronos18/index.html">OpenGL Shading Language 4.60 Specification 読書ノート</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Modern JavaScript Tutorial 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ou23/index.html">Modern C++ Tutorial: C++ 11/14/17/20 On the Fly 読書ノート</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ノートにまとまっていない書籍類一覧</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2014.html">ノート準備中書籍群 2014 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2015.html">ノート準備中書籍群 2015 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2016.html">ノート準備中書籍群 2016 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2017.html">ノート準備中書籍群 2017 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2018.html">ノート準備中書籍群 2018 年編</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">シェルノート</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bash-v2.html">What’s New In Bash 2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bash-v3.html">What’s New In Bash 3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bash-v4.html">What’s New In Bash 4 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bash-v5.html">What’s New In Bash 5 ノート</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">C++ ノート</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cpp11/index.html">What’s New In C++11 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp14/index.html">What’s New In C++14 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp17/index.html">What’s New In C++17 ノート</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Python ノート</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.0.html">What’s New In Python 3.0 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.1.html">What’s New In Python 3.1 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.2.html">What’s New In Python 3.2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.3.html">What’s New In Python 3.3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.4.html">What’s New In Python 3.4 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.5.html">What’s New In Python 3.5 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.6.html">What’s New In Python 3.6 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.7.html">What’s New In Python 3.7 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.8.html">What’s New In Python 3.8 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.9.html">What’s New In Python 3.9 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.10.html">What’s New In Python 3.10 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pip.html">pip 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pylint.html">Pylint 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-docutils/index.html">Docutils 解読ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-restview.html">Restview 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-nose.html">Nose 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-ipython.html">IPython 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-jupyter.html">Jupyter 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-numpy/index.html">NumPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-scipy/index.html">SciPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-sympy/index.html">SymPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-apgl.html">Another Python Graph Library (APGL) 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pil.html">PIL 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pillow.html">Pillow 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-matplotlib/index.html">Matplotlib 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-networkx/index.html">NetworkX 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-quaternion.html">Quaternion 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-jinja2.html">Jinja2 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pygments.html">Pygments 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-bs4.html">BeautifulSoup4 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-selenium.html">Selenium 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-scrapy.html">Scrapy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-twitter/index.html">Python Twitter Tools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-isbn-hyphenate.html">isbn-hyphenate 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pyopengl/index.html">PyOpenGL 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pyqt4.html">PyQt4 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pyqt5.html">PyQt5 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pandas/index.html">Pandas 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pygame.html">Pygame 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pytube.html">Pytube 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../youtube-dl.html">youtube-dl 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-py2exe.html">Py2exe 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-upgrade.html">Python 移行ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-miniconda.html">Miniconda 利用ノート</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ソフトウェア・ツール・パッケージ・ライブラリーノート</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../freeware.html">Windows 用フリーウェア 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../google-ime.html">Google 日本語入力利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deepl-translator.html">DeepL Translator 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../winget.html">Windows Package Manager CLI 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../powertoys/index.html">Microsoft PowerToys 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../windows-terminal.html">Windows Terminal 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wsl.html">Windows Subsystem for Linux 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wslg.html">Windows Subsystem for Linux GUI 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vscode/index.html">Visual Studio Code 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cygwin.html">Cygwin 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chrome.html">Chrome DevTools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../git/index.html">Git 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../oh-my-posh.html">Oh My Posh 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../twitter.html">Twitter 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../inkscape/index.html">Inkscape 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ffmpeg/index.html">FFmpeg 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mathjax.html">MathJax 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript-mermaid/index.html">Mermaid 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../css-selector.html">CSS セレクター学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xpath.html">XPath 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hxutils.html">HTML-XML-utils 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../webgl.html">WebGL 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pandoc.html">Pandoc 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zoom.html">Zoom Cloud Meetings 利用ノート</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">その他</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../milestone09/index.html">ラジルギノア プレイノート</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">テーマ別</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../javascript.html">JavaScript 総合</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">The Modern JavaScript Tutorial 読書ノート</a><ul>
  <li><a href="index.html">Part 1 The JavaScript language</a><ul>
      <li>Previous: <a href="02-first-steps.html" title="previous chapter">JavaScript Fundamentals</a></li>
      <li>Next: <a href="04-object-basics.html" title="next chapter">Objects: the basics</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="../../_static/logos.png"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2023, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>