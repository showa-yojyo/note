<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Code quality &#8212; 読書ノート 1.5 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=4f649999" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=1a9a5cd9" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=d21ed4cc"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/mermaid.js?v=578dbed1"></script>
    <link rel="next" title="Objects: the basics" href="04-object-basics.html" />
    <link rel="prev" title="JavaScript Fundamentals" href="02-first-steps.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="02-first-steps.html" title="Previous document">JavaScript Fundamentals</a>
        </li>
        <li>
          <a href="04-object-basics.html" title="Next document">Objects: the basics</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="code-quality">
<h1><a class="toc-backref" href="#id4" role="doc-backlink">Code quality</a><a class="headerlink" href="#code-quality" title="Permalink to this heading">¶</a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#code-quality" id="id4">Code quality</a></p>
<ul>
<li><p><a class="reference internal" href="#debugging-in-the-browser" id="id5">Debugging in the browser</a></p></li>
<li><p><a class="reference internal" href="#coding-style" id="id6">Coding Style</a></p></li>
<li><p><a class="reference internal" href="#comments" id="id7">Comments</a></p></li>
<li><p><a class="reference internal" href="#ninja-code" id="id8">Ninja code</a></p></li>
<li><p><a class="reference internal" href="#automated-testing-with-mocha" id="id9">Automated testing with Mocha</a></p></li>
<li><p><a class="reference internal" href="#polyfills-and-transpilers" id="id10">Polyfills and transpilers</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="debugging-in-the-browser">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Debugging in the browser</a><a class="headerlink" href="#debugging-in-the-browser" title="Permalink to this heading">¶</a></h2>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../../chrome.html"><span class="doc">Chrome DevTools 利用ノート</span></a></p>
</div>
<p>Google Chrome の開発ツールを例にとって、デバッグの手法がいくつか紹介されている。
Chrome の文書を併せて一読するべし。作業効率が無視できないほど違ってくる。</p>
<section id="the-sources-panel">
<h3>The “Sources” panel<a class="headerlink" href="#the-sources-panel" title="Permalink to this heading">¶</a></h3>
<p><span class="guilabel">Sources</span> パネルの開き方を習得する。開発ツールの開き方がわかっていればすぐにわかるものだ。</p>
</section>
<section id="console">
<h3>Console<a class="headerlink" href="#console" title="Permalink to this heading">¶</a></h3>
<p><span class="guilabel">Console</span> パネルは JavaScript 専用の REPL コンソールだ。
<span class="guilabel">Sources</span> パネルから <kbd class="kbd docutils literal notranslate">Esc</kbd> キーでコンソールが開くのは知らなんだ。</p>
</section>
<section id="breakpoints">
<h3>Breakpoints<a class="headerlink" href="#breakpoints" title="Permalink to this heading">¶</a></h3>
<p><span class="guilabel">Sources</span> パネルのコードビューにおける Breakpoint の追加方法を習得する。追加方法は複数ある。行番号をクリックするのが基本だ。</p>
<p>さらに Conditional breakpoint も拾得したい。ぜひ習得したい。</p>
</section>
<section id="the-command-debugger">
<h3>The command <code class="docutils literal notranslate"><span class="pre">debugger</span></code><a class="headerlink" href="#the-command-debugger" title="Permalink to this heading">¶</a></h3>
<p>コード中に <code class="docutils literal notranslate"><span class="pre">debugger</span></code> 文を書くと、そこに breakpoint を置いたのと同値になる。これは開発ツールが表示されているときにしか有効にされないものだと思ってよい。</p>
</section>
<section id="pause-and-look-around">
<h3>Pause and look around<a class="headerlink" href="#pause-and-look-around" title="Permalink to this heading">¶</a></h3>
<p>JavaScript Debugging 内から <span class="guilabel">Watch</span>, <span class="guilabel">Call Stack</span>,
<span class="guilabel">Scope</span> 各ビューを確認できる。他の言語のデバッガーにある機能にそれぞれ対応する。</p>
</section>
<section id="tracing-the-execution">
<h3>Tracing the execution<a class="headerlink" href="#tracing-the-execution" title="Permalink to this heading">¶</a></h3>
<p>トレースコマンド各種。コマンドとショートカットキーを体で覚える。</p>
<ul class="simple">
<li><p><span class="guilabel">Step into</span> コマンドは知らない。これは別途時間を取って学習する。</p></li>
<li><p><span class="guilabel">Continue to here</span> コマンドも手軽で便利だろう。</p></li>
</ul>
</section>
<section id="logging">
<h3>Logging<a class="headerlink" href="#logging" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">console.log()</span></code> について紹介。値はコンソールに出力されるので、普通のユーザーは目にしないと期待される。</p>
</section>
</section>
<section id="coding-style">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Coding Style</a><a class="headerlink" href="#coding-style" title="Permalink to this heading">¶</a></h2>
<p>コードはきれいで読みやすいものでなければならない。複雑なタスクを、正しく、かつ人間が読めるようにコードにすることがプログラミングの技だ。良いコードスタイルはそれを大いに支える。</p>
<p>もっとも VS Code の <span class="guilabel">Format Document</span> コマンド任せで十分だ。真面目に読むとしたら Style Guides 節の各リンク先だろう。</p>
<section id="syntax">
<h3>Syntax<a class="headerlink" href="#syntax" title="Permalink to this heading">¶</a></h3>
<p>著者の提唱するコードスタイルがコードに注釈が付いたイラストの形で示されている。こういうのは VS Code の <span class="guilabel">Format Document</span> コマンドに任せる。</p>
<section id="curly-braces">
<h4>Curly Braces<a class="headerlink" href="#curly-braces" title="Permalink to this heading">¶</a></h4>
<p>こういう中括弧の入れ方をエジプト式というのか。</p>
<p>単文でもコードブロックを設けるという意見に賛同する。</p>
</section>
<section id="line-length">
<h4>Line Length<a class="headerlink" href="#line-length" title="Permalink to this heading">¶</a></h4>
<p>テキストエディターに縦線が薄く描かれているから、それに従えばいいだろう。</p>
</section>
<section id="indents">
<h4>Indents<a class="headerlink" href="#indents" title="Permalink to this heading">¶</a></h4>
<p>著者は空行もインデントの一種だと捉えている。</p>
</section>
<section id="semicolons">
<h4>Semicolons<a class="headerlink" href="#semicolons" title="Permalink to this heading">¶</a></h4>
<p>以前述べたように、セミコロンは statement の末尾に必ず書くことだ。</p>
</section>
<section id="nesting-levels">
<h4>Nesting Levels<a class="headerlink" href="#nesting-levels" title="Permalink to this heading">¶</a></h4>
<p>どの言語でも深い入れ子は敬遠されるものだ。</p>
</section>
</section>
<section id="function-placement">
<h3>Function Placement<a class="headerlink" href="#function-placement" title="Permalink to this heading">¶</a></h3>
<p>関数定義と、それらを呼び出すコードをのどちらを先に書くかという問題だ。JavaScript
の場合には、どちらの方式でも有効なコードなので、こういうことを考える余地がある。</p>
</section>
<section id="style-guides">
<h3>Style Guides<a class="headerlink" href="#style-guides" title="Permalink to this heading">¶</a></h3>
<p>リンクを転載する。</p>
<ul class="simple">
<li><p><a class="reference external" href="https://google.github.io/styleguide/jsguide.html">Google JavaScript Style Guide</a></p></li>
<li><p><a class="reference external" href="https://github.com/airbnb/javascript">Airbnb JavaScript Style Guide</a></p></li>
<li><p><a class="reference external" href="https://github.com/rwaldron/idiomatic.js">Idiomatic.JS</a></p></li>
<li><p><a class="reference external" href="https://standardjs.com/">StandardJS</a></p></li>
</ul>
</section>
<section id="automated-linters">
<h3>Automated Linters<a class="headerlink" href="#automated-linters" title="Permalink to this heading">¶</a></h3>
<p>おせっかいツールの紹介。著者は <a class="reference external" href="https://eslint.org/">ESLint</a> を採用している。</p>
<p>この手のツールも VS Code に仕込めるはずだ。</p>
</section>
<section id="tasks">
<h3>Tasks<a class="headerlink" href="#tasks" title="Permalink to this heading">¶</a></h3>
<section id="bad-style">
<h4>Bad style<a class="headerlink" href="#bad-style" title="Permalink to this heading">¶</a></h4>
<p>コードレビューをするつもりで指摘していこう。</p>
</section>
</section>
</section>
<section id="comments">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Comments</a><a class="headerlink" href="#comments" title="Permalink to this heading">¶</a></h2>
<section id="bad-comments">
<h3>Bad comments<a class="headerlink" href="#bad-comments" title="Permalink to this heading">¶</a></h3>
<p>初心者はコードの中で何が起こっているのかを説明するためにコメントを使いがちだ。コメントが必要なほどコードが不明確なら、コメントを使うのではなく、コードを書き直すべきなのだ。</p>
<section id="recipe-factor-out-functions">
<h4>Recipe: factor out functions<a class="headerlink" href="#recipe-factor-out-functions" title="Permalink to this heading">¶</a></h4>
<p>コードの一部を関数に置き換えることが有益な場合もある。</p>
</section>
<section id="recipe-create-functions">
<h4>Recipe: create functions<a class="headerlink" href="#recipe-create-functions" title="Permalink to this heading">¶</a></h4>
<p>コードの層が生じているならば、関数として括り出す。</p>
</section>
</section>
<section id="good-comments">
<h3>Good comments<a class="headerlink" href="#good-comments" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>コード全体を俯瞰するようなコメントは良いものだ。</p></li>
<li><p><a class="reference external" href="http://en.wikipedia.org/wiki/JSDoc">JSDoc</a> を導入する。いろいろと利点がある。</p></li>
<li><p>コードがすべてではない。</p></li>
</ul>
<div class="admonition- admonition">
<p class="admonition-title">学習者ノート</p>
<p>JSDoc の導入例は <a class="reference external" href="https://www.npmjs.com/package/jsdoc">jsdoc - npm</a> に書いてある。しかし、これだけだとハローワールドがわからないので、次を試す：</p>
<blockquote>
<div><p><a class="reference external" href="https://learning-zone.github.io/jsdoc-tutorial/">JSDoc Tutorial</a></p>
</div></blockquote>
</div>
</section>
</section>
<section id="ninja-code">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Ninja code</a><a class="headerlink" href="#ninja-code" title="Permalink to this heading">¶</a></h2>
<p>見出しは忍者なのに、引用は中国の古の賢人たちの言葉なのは怪しい。</p>
<section id="comments-1">
<span id="id1"></span><h3>Comments<a class="headerlink" href="#comments-1" title="Permalink to this heading">¶</a></h3>
<p>本文よりもコメント欄のほうが重要。コメント欄を読まないとこの回の意味がわからないまである。</p>
</section>
</section>
<section id="automated-testing-with-mocha">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Automated testing with Mocha</a><a class="headerlink" href="#automated-testing-with-mocha" title="Permalink to this heading">¶</a></h2>
<p>この回はとくに重要なので時間をとって取り組む。サンドボックスを開いて実際に試すこと。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">it.only()</span></code> は、他にテストがどれだけたくさんあっても、ほんとうにこのテストしか実行されなくなる。</p></li>
</ul>
<div class="admonition- admonition">
<p class="admonition-title">学習者ノート</p>
<p><a class="reference external" href="https://mochajs.org/">Mocha</a> のページの Getting Started をやるといい。</p>
</div>
<section id="why-do-we-need-tests">
<h3>Why do we need tests?<a class="headerlink" href="#why-do-we-need-tests" title="Permalink to this heading">¶</a></h3>
<p>自動テストでは、製品コードとは別にテスト用のコードを書く。自動テストは、製品機能をさまざまな方法で実行し、結果を期待するものと比較する。</p>
</section>
<section id="behavior-driven-development-bdd">
<h3>Behavior Driven Development (BDD)<a class="headerlink" href="#behavior-driven-development-bdd" title="Permalink to this heading">¶</a></h3>
<p>BDD とはテストと文書と例を一体化したものだ。</p>
</section>
<section id="development-of-pow-the-spec">
<h3>Development of “pow”: the spec<a class="headerlink" href="#development-of-pow-the-spec" title="Permalink to this heading">¶</a></h3>
<p>まだ Mocha を紹介していないが、次の要素を説明している：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">describe(&quot;title&quot;,</span> <span class="pre">function()</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">})</span></code>: おそらく test suite に相当する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">it(&quot;use</span> <span class="pre">case</span> <span class="pre">description&quot;,</span> <span class="pre">function()</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">})</span></code>: おそらく test case に相当する。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">assert.equal(value1,</span> <span class="pre">value2)</span></code>: 他言語のテストパッケージにあるものと同等</p></li>
</ul>
</section>
<section id="the-development-flow">
<h3>The development flow<a class="headerlink" href="#the-development-flow" title="Permalink to this heading">¶</a></h3>
<p>ここで Mocha の名前がようやく現れる。</p>
</section>
<section id="the-spec-in-action">
<h3>The spec in action<a class="headerlink" href="#the-spec-in-action" title="Permalink to this heading">¶</a></h3>
<p>本チュートリアルで用いるパッケージ群：</p>
<ul class="simple">
<li><p><a class="reference external" href="http://mochajs.org/">Mocha</a></p></li>
<li><p><a class="reference external" href="http://chaijs.com/">Chai</a></p></li>
<li><p><a class="reference external" href="http://sinonjs.org/">Sinon</a></p></li>
</ul>
<p>これらを組み込んだ HTML ページの外観。</p>
</section>
<section id="initial-implementation">
<h3>Initial implementation<a class="headerlink" href="#initial-implementation" title="Permalink to this heading">¶</a></h3>
<p>初期版は次のコードとする：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mf">8</span><span class="p">;</span><span class="w"> </span><span class="c1">// :) we cheat!</span>
<span class="p">}</span>
</pre></div>
</div>
<p>明らかに正しくないのだが、テストの初期版も次のような感じなので成功する：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;pow&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;raises to n-th power&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">),</span><span class="w"> </span><span class="mf">8</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="improving-the-spec">
<h3>Improving the spec<a class="headerlink" href="#improving-the-spec" title="Permalink to this heading">¶</a></h3>
<p>次のテストを追加することで、失敗させる：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;3 raised to power 4 is 81&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="mf">3</span><span class="p">,</span><span class="w"> </span><span class="mf">4</span><span class="p">),</span><span class="w"> </span><span class="mf">81</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>
</div>
<p>一つのテストは一つのことをチェックする。初期版も修正しておく：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;pow&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;2 raised to power 3 is 8&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">),</span><span class="w"> </span><span class="mf">8</span><span class="p">);</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="improving-the-implementation">
<h3>Improving the implementation<a class="headerlink" href="#improving-the-implementation" title="Permalink to this heading">¶</a></h3>
<p>ここで <code class="docutils literal notranslate"><span class="pre">pow()</span></code> の実装をまともにする。それからテスト項目を追加するやり方を柔軟にする。これで 3 乗のテストは比較的網羅できるようになる：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;pow&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">function</span><span class="w"> </span><span class="nx">makeTest</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">expected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nx">x</span><span class="p">;</span>
<span class="w">        </span><span class="nx">it</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">x</span><span class="si">}</span><span class="sb"> in the power 3 is </span><span class="si">${</span><span class="nx">expected</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">),</span><span class="w"> </span><span class="nx">expected</span><span class="p">);</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span><span class="w"> </span><span class="nx">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">makeTest</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="nested-describe">
<h3>Nested describe<a class="headerlink" href="#nested-describe" title="Permalink to this heading">¶</a></h3>
<p>関数 <code class="docutils literal notranslate"><span class="pre">describe()</span></code> の入れ子を形成することで、テストを階層的に構築する。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;pow&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">describe</span><span class="p">(</span><span class="s2">&quot;raises x to power 3&quot;</span><span class="p">,</span><span class="w"> </span><span class="kd">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">});</span>

<span class="w">    </span><span class="c1">// ... more tests to follow here, both describe and it can be added</span>
<span class="p">});</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">before</span></code>/<code class="docutils literal notranslate"><span class="pre">after</span></code> と <code class="docutils literal notranslate"><span class="pre">beforeEach</span></code>/<code class="docutils literal notranslate"><span class="pre">afterEach</span></code> の紹介。後の章の演習問題のコードにこれらが現れることがあるので、そのとき思い出す。</p></li>
</ul>
</section>
<section id="extending-the-spec">
<h3>Extending the spec<a class="headerlink" href="#extending-the-spec" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>テストコードを先に拡充してから、開発コードを修正していく。これの反復だ。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">assert.isNaN()</span></code> など、その他の assertion も使っていく。</p></li>
</ul>
</section>
<section id="id2">
<h3>Tasks<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<section id="what-s-wrong-in-the-test">
<h4>What’s wrong in the test?<a class="headerlink" href="#what-s-wrong-in-the-test" title="Permalink to this heading">¶</a></h4>
<p>このような書き方だと、エラーが発生した場合、何が問題だったのかがわかりにくくなる。複雑な実行フローの途中でエラーが発生した場合、その時点のデータを把握する必要が生じ、実際にテストをデバッグしなければならなくなる。これでは自動テストの意味がない。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">it.only()</span></code> の挙動はこの説明ではよくわからない？</p></li>
</ul>
</section>
</section>
<section id="comments-2">
<span id="id3"></span><h3>Comments<a class="headerlink" href="#comments-2" title="Permalink to this heading">¶</a></h3>
<p>コメント欄ではこの章は不評のようだが、単体テストのトピックが重要であることは間違いない。</p>
</section>
</section>
<section id="polyfills-and-transpilers">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Polyfills and transpilers</a><a class="headerlink" href="#polyfills-and-transpilers" title="Permalink to this heading">¶</a></h2>
<p>MDN のページを見ると polyfill という不思議な単語が頻出する。この章の本文でやっと定義を確認できた。</p>
<section id="transpilers">
<h3>Transpilers<a class="headerlink" href="#transpilers" title="Permalink to this heading">¶</a></h3>
<p>Transpiler とは、ソースコードを別のソースコードに変換するソフトウェアだ。最新のコードを解析し、古い構文を使って書き換え、古いエンジンでも動作させるようにする。</p>
<ul class="simple">
<li><p>ここでは演算子 <code class="docutils literal notranslate"><span class="pre">??</span></code> を含むコードを書き換える例を挙げている。</p></li>
<li><p><a class="reference external" href="https://babeljs.io/">Babel</a> は著名な transpiler の筆頭だ。</p></li>
<li><p><a class="reference external" href="https://webpack.js.org/">Webpack</a> のような最新のプロジェクトビルドシステムは、コード変更のたびにtranspiler を自動的に実行する手段を提供しているので、開発プロセスに組み込むのが容易だ。</p></li>
</ul>
</section>
<section id="polyfills">
<h3>Polyfills<a class="headerlink" href="#polyfills" title="Permalink to this heading">¶</a></h3>
<p>新しい機能を更新・追加するスクリプトを polyfill と呼ぶ。「隙間を埋める」「足りない実装を追加する」ものだ。</p>
</section>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="02-first-steps.html" title="Previous document">JavaScript Fundamentals</a>
        </li>
        <li>
          <a href="04-object-basics.html" title="Next document">Objects: the basics</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="../../_static/logos.png"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2023, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>