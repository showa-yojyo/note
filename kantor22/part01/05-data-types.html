
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Data types &#8212; 読書ノート 1.5dev documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/mermaid.js"></script>
    <link rel="next" title="Advanced working with functions" href="06-advanced-functions.html" />
    <link rel="prev" title="Objects: the basics" href="04-object-basics.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="04-object-basics.html" title="Previous document">Objects: the basics</a>
        </li>
        <li>
          <a href="06-advanced-functions.html" title="Next document">Advanced working with functions</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="data-types">
<h1><a class="toc-backref" href="#id15" role="doc-backlink">Data types</a><a class="headerlink" href="#data-types" title="Permalink to this heading">¶</a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#data-types" id="id15">Data types</a></p>
<ul>
<li><p><a class="reference internal" href="#methods-of-primitives" id="id16">Methods of primitives</a></p></li>
<li><p><a class="reference internal" href="#numbers" id="id17">Numbers</a></p></li>
<li><p><a class="reference internal" href="#strings" id="id18">Strings</a></p></li>
<li><p><a class="reference internal" href="#arrays" id="id19">Arrays</a></p></li>
<li><p><a class="reference internal" href="#array-methods" id="id20">Array methods</a></p></li>
<li><p><a class="reference internal" href="#iterables" id="id21">Iterables</a></p></li>
<li><p><a class="reference internal" href="#map-and-set" id="id22"><code class="docutils literal notranslate"><span class="pre">Map</span></code> and <code class="docutils literal notranslate"><span class="pre">Set</span></code></a></p></li>
<li><p><a class="reference internal" href="#weakmap-and-weakset" id="id23"><code class="docutils literal notranslate"><span class="pre">WeakMap</span></code> and <code class="docutils literal notranslate"><span class="pre">WeakSet</span></code></a></p></li>
<li><p><a class="reference internal" href="#object-keys-values-entries" id="id24"><code class="docutils literal notranslate"><span class="pre">Object.keys</span></code>, <code class="docutils literal notranslate"><span class="pre">values</span></code>, <code class="docutils literal notranslate"><span class="pre">entries</span></code></a></p></li>
<li><p><a class="reference internal" href="#destructuring-assignment" id="id25">Destructuring assignment</a></p></li>
<li><p><a class="reference internal" href="#date-and-time" id="id26">Date and time</a></p></li>
<li><p><a class="reference internal" href="#json-methods-tojson" id="id27">JSON methods, <code class="docutils literal notranslate"><span class="pre">toJSON</span></code></a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="methods-of-primitives">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Methods of primitives</a><a class="headerlink" href="#methods-of-primitives" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/primitives-methods">https://javascript.info/primitives-methods</a>&gt; のノート。</p>
<p>原子型とは次の七つを指す：
<code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">number</span></code>, <code class="docutils literal notranslate"><span class="pre">bigint</span></code>, <code class="docutils literal notranslate"><span class="pre">boolean</span></code>, <code class="docutils literal notranslate"><span class="pre">symbol</span></code>, <code class="docutils literal notranslate"><span class="pre">null</span></code>,
<code class="docutils literal notranslate"><span class="pre">undefined</span></code>.</p>
<ul class="simple">
<li><p>この分類はかなり疑問があるのだが、いちおう本文のまま引いておく。</p></li>
</ul>
<section id="a-primitive-as-an-object">
<h3>A primitive as an object<a class="headerlink" href="#a-primitive-as-an-object" title="Permalink to this heading">¶</a></h3>
<p>文字列や数値のような原子型でやりたいことはたくさんあるものの、できるだけ高速で軽量でなければならない。</p>
<p>オブジェクトラッパーとは次の型を指す：
<code class="docutils literal notranslate"><span class="pre">String</span></code>, <code class="docutils literal notranslate"><span class="pre">Number</span></code>, <code class="docutils literal notranslate"><span class="pre">Boolean</span></code>, <code class="docutils literal notranslate"><span class="pre">Symbol</span></code>, <code class="docutils literal notranslate"><span class="pre">BigInt</span></code>.</p>
<p>原子型の値に対してメソッドを呼び出すと、実際には対応するラッパーのインスタンスが一瞬生成されて、そのメソッドが呼び出される。その戻り値がメソッド呼び出しの結果になる。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;Hello&quot;</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span><span class="w"> </span><span class="c1">// == String(&quot;Hello&quot;).toUpperCase()</span>
</pre></div>
</div>
<p>したがって、オブジェクトラッパーのコンストラクターは直接呼び出しするようなものではない。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">null</span></code>, <code class="docutils literal notranslate"><span class="pre">undefined</span></code> にはメソッドがない。</p></li>
</ul>
</section>
<section id="tasks">
<h3>Tasks<a class="headerlink" href="#tasks" title="Permalink to this heading">¶</a></h3>
<section id="can-i-add-a-string-property">
<h4>Can I add a string property?<a class="headerlink" href="#can-i-add-a-string-property" title="Permalink to this heading">¶</a></h4>
<p>原子型値にプロパティーを後付けしようとすると、</p>
<ul class="simple">
<li><p>“use strict” モードの場合には純粋にエラーになる。</p></li>
<li><p>そうでない場合には、一瞬生成されるオブジェクトラッパーに対してプロパティーが追加される。この代入式が終了すると、このラッパーが消滅する。したがって、元の原子型値から追加プロパティーに参照すると <code class="docutils literal notranslate"><span class="pre">undefined</span></code> と評価される。</p></li>
</ul>
</section>
</section>
</section>
<section id="numbers">
<h2><a class="toc-backref" href="#id17" role="doc-backlink">Numbers</a><a class="headerlink" href="#numbers" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/number">https://javascript.info/number</a>&gt; のノート。</p>
<p>浮動小数点数の仕組みはどの言語でも通じるので必修。</p>
<p>JavaScript の数の型は、IEEE-755 準拠の数と、BigInt 系の二つに分類される。ここでは前者を見ていき、後者はいずれ別の章で見る。</p>
<section id="more-ways-to-write-a-number">
<h3>More ways to write a number<a class="headerlink" href="#more-ways-to-write-a-number" title="Permalink to this heading">¶</a></h3>
<p>Python のように、桁数の多いリテラル数値をアンダーバーで何桁かおきに区切って表現できる。また、<code class="docutils literal notranslate"><span class="pre">1.23e4</span></code> や <code class="docutils literal notranslate"><span class="pre">1.23e-4</span></code> のような表記も有効。</p>
<section id="hex-binary-and-octal-numbers">
<h4>Hex, binary and octal numbers<a class="headerlink" href="#hex-binary-and-octal-numbers" title="Permalink to this heading">¶</a></h4>
<p>Python と同様の prefix を数リテラルに付加することで、それが何進数表記なのかを表せる。</p>
</section>
</section>
<section id="tostring-base">
<h3><code class="docutils literal notranslate"><span class="pre">toString(base)</span></code><a class="headerlink" href="#tostring-base" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">toString()</span></code> 呼び出しで基数を指定できる。デフォルト値が 10 ということだ。</p>
<p><code class="docutils literal notranslate"><span class="pre">(123456).toString(36)</span></code> などを <code class="docutils literal notranslate"><span class="pre">123456..toString(36)</span></code> とも書ける。これはいいことを知った。</p>
</section>
<section id="rounding">
<h3>Rounding<a class="headerlink" href="#rounding" title="Permalink to this heading">¶</a></h3>
<p>基本的な関数：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="mf">3.1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="o">-</span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">-</span><span class="mf">2</span><span class="p">;</span>

<span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="mf">3.1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="o">-</span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">;</span>

<span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="mf">3.1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="mf">3.6</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="mf">3.5</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">4</span><span class="p">;</span>

<span class="nb">Math</span><span class="p">.</span><span class="nx">trunc</span><span class="p">(</span><span class="mf">3.1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">3</span><span class="p">;</span>
<span class="nb">Math</span><span class="p">.</span><span class="nx">trunc</span><span class="p">(</span><span class="o">-</span><span class="mf">1.1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">;</span>
</pre></div>
</div>
<p>数を小数点以下第 <code class="docutils literal notranslate"><span class="pre">n</span></code> 位に丸めたいときには、引数を <code class="docutils literal notranslate"><span class="pre">10**n</span></code> 倍したものを丸め関数に入力し、出力を <code class="docutils literal notranslate"><span class="pre">10**n</span></code> で除算する。</p>
<p><code class="docutils literal notranslate"><span class="pre">toFixed(n)</span></code> は丸めを伴う。しかも戻り値は文字列だ。</p>
</section>
<section id="imprecise-calculations">
<h3>Imprecise calculations<a class="headerlink" href="#imprecise-calculations" title="Permalink to this heading">¶</a></h3>
<p>JavaScript とは本質的に関係がない IEEE-754 にまつわる、よくある問題について述べられている。</p>
<p>前項でなぜ丸め処理を紹介したのかが、これで納得がいくと思う。</p>
</section>
<section id="tests-isfinite-and-isnan">
<h3>Tests: <code class="docutils literal notranslate"><span class="pre">isFinite</span></code> and <code class="docutils literal notranslate"><span class="pre">isNaN</span></code><a class="headerlink" href="#tests-isfinite-and-isnan" title="Permalink to this heading">¶</a></h3>
<p>特別ではあるが、<code class="docutils literal notranslate"><span class="pre">Infinity</span></code> と <code class="docutils literal notranslate"><span class="pre">NaN</span></code> はいちおう数だ。それらのための関数が用意されている。</p>
<ul class="simple">
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">isNaN(value)</span></code> は引数を数に変換して、それが <code class="docutils literal notranslate"><span class="pre">NaN</span></code> であるかどうかをテストする。</p>
<ul>
<li><p>これが存在する理由は、<code class="docutils literal notranslate"><span class="pre">NaN</span></code> を比較演算のオペランドに取ることが事実上できないからだ。</p></li>
</ul>
</li>
<li><p>関数 <code class="docutils literal notranslate"><span class="pre">isFinite(value)</span></code> は引数を数に変換して、それが特別でない数かどうかを返す。</p>
<ul>
<li><p>これをユーザー入力文字列が数であるかどうかをテストするのに援用することがある。</p></li>
</ul>
</li>
</ul>
<p>囲み記事で <code class="docutils literal notranslate"><span class="pre">Object.is()</span></code> について言及されている。</p>
</section>
<section id="parseint-and-parsefloat">
<h3>parseInt and parseFloat<a class="headerlink" href="#parseint-and-parsefloat" title="Permalink to this heading">¶</a></h3>
<p>CSS では <code class="docutils literal notranslate"><span class="pre">100px</span></code> や <code class="docutils literal notranslate"><span class="pre">12pt</span></code> のような単位付きの値を指定することがよくある。また、通貨記号が付きの 19€ のような金額から数値を抜き出したいこともよくある。そのために関数 <code class="docutils literal notranslate"><span class="pre">parseInt</span></code> と <code class="docutils literal notranslate"><span class="pre">parseFloat</span></code> がある。</p>
</section>
<section id="other-math-functions">
<h3>Other math functions<a class="headerlink" href="#other-math-functions" title="Permalink to this heading">¶</a></h3>
<p>おそらく演習問題の解法の幅を広げるために、以下の関数を紹介している：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Math.random()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Math.min(a,</span> <span class="pre">b,</span> <span class="pre">...)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Math.max(a,</span> <span class="pre">b,</span> <span class="pre">...)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Math.pow(n,</span> <span class="pre">power)</span></code></p></li>
</ul>
</section>
<section id="id1">
<h3>Tasks<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<section id="sum-numbers-from-the-visitor">
<h4>Sum numbers from the visitor<a class="headerlink" href="#sum-numbers-from-the-visitor" title="Permalink to this heading">¶</a></h4>
<p>和を取るので、関数 <code class="docutils literal notranslate"><span class="pre">prompt()</span></code> の呼び出しに単項プラスを付けるなどして、明示的に数に変換する必要がある。そうしないと、文字列の連結が生じる。これは以前にもやった。</p>
</section>
<section id="why-6-35-tofixed-1-6-3">
<h4>Why <code class="docutils literal notranslate"><span class="pre">6.35.toFixed(1)</span> <span class="pre">==</span> <span class="pre">6.3</span></code>?<a class="headerlink" href="#why-6-35-tofixed-1-6-3" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>Why の問いについては IEEE-754 の性質で説明がつく。ここにあるようにして
<code class="docutils literal notranslate"><span class="pre">toFixed(20)</span></code> のような検証が思いつけるようになること。</p></li>
<li><p>How の問いについては本文にあるように、小数点第何位の方式を採るしかない。</p></li>
</ul>
</section>
<section id="repeat-until-the-input-is-a-number">
<h4>Repeat until the input is a number<a class="headerlink" href="#repeat-until-the-input-is-a-number" title="Permalink to this heading">¶</a></h4>
<p>先ほど記したように、ユーザー入力に対する検証と関数 <code class="docutils literal notranslate"><span class="pre">isFinite()</span></code> は相性がいい。</p>
</section>
<section id="an-occasional-infinite-loop">
<h4>An occasional infinite loop<a class="headerlink" href="#an-occasional-infinite-loop" title="Permalink to this heading">¶</a></h4>
<p>浮動小数点数は等号で比較するものではないということだ。</p>
</section>
<section id="a-random-number-from-min-to-max">
<h4>A random number from min to max<a class="headerlink" href="#a-random-number-from-min-to-max" title="Permalink to this heading">¶</a></h4>
<p>関数 <code class="docutils literal notranslate"><span class="pre">Math.random()</span></code> を与えられた範囲に引き伸ばす。GLSL の <code class="docutils literal notranslate"><span class="pre">mix</span></code> のような感じだ。</p>
</section>
<section id="a-random-integer-from-min-to-max">
<h4>A random integer from min to max<a class="headerlink" href="#a-random-integer-from-min-to-max" title="Permalink to this heading">¶</a></h4>
<p>個人的には <code class="docutils literal notranslate"><span class="pre">Math.floor()</span></code> を使うやり方を推奨。</p>
</section>
</section>
</section>
<section id="strings">
<h2><a class="toc-backref" href="#id18" role="doc-backlink">Strings</a><a class="headerlink" href="#strings" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/string">https://javascript.info/string</a>&gt; のノート。</p>
<p>この内容に対応する Python でのやり方も身につけておく。練習問題が笑える。</p>
<p>文字列の内部フォーマットは常に UTF-16 であって、ページのエンコーディングとは関係ない。これは JavaScript がブラウザー外でも動作する環境があることを考えると、固定の符号が採用されていることが理解できる。</p>
<section id="quotes">
<h3>Quotes<a class="headerlink" href="#quotes" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Python の f-string に対応するのはバッククォートによる文字列リテラル。ただし、評価部分は <code class="docutils literal notranslate"><span class="pre">${}</span></code> というパターンで囲む。</p></li>
<li><p>複数行にまたがる文字列リテラルを定義するには、バッククォートしか使えない。</p></li>
</ul>
</section>
<section id="special-characters">
<h3>Special characters<a class="headerlink" href="#special-characters" title="Permalink to this heading">¶</a></h3>
<p>バックスラッシュから始まる制御文字について述べている。よそでよく見かけるものとだいたい同じだ。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\b</span></code>, <code class="docutils literal notranslate"><span class="pre">\f</span></code>, <code class="docutils literal notranslate"><span class="pre">\v</span></code> はいつものと同じだが、互換性のために定義されているに過ぎず、現代では使われない。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\xXX</span></code>: 与えられた 16 進数に対応する Unicode 文字。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\uXXXX</span></code>: 与えられた 16 進数に対応する UTF-16 符号形式である Unicode 文字。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\u{XXXXXX}</span></code>: 与えられた 16 進数に対応する UTF-32 符号形式である Unicode 文字。
<code class="docutils literal notranslate"><span class="pre">XXXXXX</span></code> 部分は一桁から六桁の 16 進数。</p></li>
</ul>
</section>
<section id="string-length">
<h3>String length<a class="headerlink" href="#string-length" title="Permalink to this heading">¶</a></h3>
<p>文字列の長さは読み取り専用プロパティー <code class="docutils literal notranslate"><span class="pre">length</span></code> で得る。</p>
</section>
<section id="accessing-characters">
<h3>Accessing characters<a class="headerlink" href="#accessing-characters" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>普通は <code class="docutils literal notranslate"><span class="pre">str[i]</span></code> で i 番目の文字を得る。文字列の長さよりも大きい番号のときには <code class="docutils literal notranslate"><span class="pre">undefined</span></code> となる。</p></li>
<li><p>メソッド <code class="docutils literal notranslate"><span class="pre">str.charAt(i)</span></code> も i 番目の文字を得る。こちらは大きい番号のときに空文字列が返る。</p></li>
<li><p>文字列は iterable であり、<code class="docutils literal notranslate"><span class="pre">for</span></code> … <code class="docutils literal notranslate"><span class="pre">of</span></code> 文で文字列の各文字を反復できる。</p></li>
</ul>
</section>
<section id="strings-are-immutable">
<h3>Strings are immutable<a class="headerlink" href="#strings-are-immutable" title="Permalink to this heading">¶</a></h3>
<p>Python 同様、文字列は immutable な値だ。例えば上記のメソッドを左辺値として用いることはできない。</p>
</section>
<section id="changing-the-case">
<h3>Changing the case<a class="headerlink" href="#changing-the-case" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">toLowerCase()</span></code></p></td>
<td><p>小文字に変換する</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">toUpperCase()</span></code></p></td>
<td><p>大文字に変換する</p></td>
</tr>
</tbody>
</table>
</section>
<section id="searching-for-a-substring">
<h3>Searching for a substring<a class="headerlink" href="#searching-for-a-substring" title="Permalink to this heading">¶</a></h3>
<p>文字列の中の部分文字列を探すには複数の方法がある。</p>
<section id="str-indexof">
<h4><code class="docutils literal notranslate"><span class="pre">str.indexOf</span></code><a class="headerlink" href="#str-indexof" title="Permalink to this heading">¶</a></h4>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">str.indexOf(substr,</span> <span class="pre">pos)</span></code> 呼び出しは、文字列 <code class="docutils literal notranslate"><span class="pre">substr</span></code> が文字列
<code class="docutils literal notranslate"><span class="pre">str</span></code> のどの位置にあるかを返す。</p>
<ul class="simple">
<li><p>引数 <code class="docutils literal notranslate"><span class="pre">substr</span></code> が <code class="docutils literal notranslate"><span class="pre">str</span></code> の部分文字列でない場合には -1 を返す。</p></li>
<li><p>引数 <code class="docutils literal notranslate"><span class="pre">pos</span></code> は、指定されていたら、探索開始位置を表す。</p></li>
<li><p>候補が複数ある場合にはいちばん早い位置を返す。</p></li>
</ul>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">str.lastIndexOf(substr,</span> <span class="pre">pos)</span></code> もある。これは候補が複数ある場合にはいちばん遅い位置を返す。</p>
<section id="the-bitwise-not-trick">
<h5>The bitwise NOT trick<a class="headerlink" href="#the-bitwise-not-trick" title="Permalink to this heading">¶</a></h5>
<p>戻り値が -1 か否かを判定するコードについて述べている。これならコメント欄で +1 をテストすればいいではないかと指摘されている。</p>
</section>
</section>
<section id="includes-startswith-endswith">
<h4><code class="docutils literal notranslate"><span class="pre">includes</span></code>, <code class="docutils literal notranslate"><span class="pre">startsWith</span></code>, <code class="docutils literal notranslate"><span class="pre">endsWith</span></code><a class="headerlink" href="#includes-startswith-endswith" title="Permalink to this heading">¶</a></h4>
<p>これらは部分文字列であるかどうかを判定する。</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">includes(substr,</span> <span class="pre">pos)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">substr</span></code> が部分文字列であるかどうか</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">startsWith(substr)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">substr</span></code> から始まるかどうか</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">endsWith(substr)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">substr</span></code> で終わるかどうか</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="getting-a-substring">
<h3>Getting a substring<a class="headerlink" href="#getting-a-substring" title="Permalink to this heading">¶</a></h3>
<p>次の三つを覚えておく：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">slice(start</span> <span class="pre">[,</span> <span class="pre">end])</span></code></p></td>
<td><p>指定範囲にある部分文字列を得る</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">substring(start</span> <span class="pre">[,</span> <span class="pre">end])</span></code></p></td>
<td><p>同上</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">substr(start</span> <span class="pre">[,</span> <span class="pre">length])</span></code></p></td>
<td><p>長さを指定して部分文字列を得る</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>メソッド <code class="docutils literal notranslate"><span class="pre">slice</span></code> と <code class="docutils literal notranslate"><span class="pre">substring</span></code> は機能は同じだが、引数の扱いが異なる。前者は負の数を許し、後者は範囲の端点の逆転を許す。</p></li>
<li><p>メソッド <code class="docutils literal notranslate"><span class="pre">substr</span></code> の <code class="docutils literal notranslate"><span class="pre">start</span></code> も負の数を認める。</p></li>
</ul>
</section>
<section id="comparing-strings">
<h3>Comparing strings<a class="headerlink" href="#comparing-strings" title="Permalink to this heading">¶</a></h3>
<p>比較演算子で lexicographical な比較を評価することはすでに述べられている。</p>
<section id="correct-comparisons">
<h4>Correct comparisons<a class="headerlink" href="#correct-comparisons" title="Permalink to this heading">¶</a></h4>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">str.localeCompare(str2)</span></code> は順序関係を符号 (sign) で返す。</p>
</section>
</section>
<section id="internals-unicode">
<h3>Internals, Unicode<a class="headerlink" href="#internals-unicode" title="Permalink to this heading">¶</a></h3>
<p>上級者向け。</p>
<section id="surrogate-pairs">
<h4>Surrogate pairs<a class="headerlink" href="#surrogate-pairs" title="Permalink to this heading">¶</a></h4>
<p>JavaScript では UTF-16 で文字を扱うので、たいていの文字は 2 バイトの数に対応する。その範囲から漏れる文字は surrogate pair と呼ばれる 2 バイト文字の対で符号化される。</p>
<ul class="simple">
<li><p>そういう文字一文字から成る文字列に対して <code class="docutils literal notranslate"><span class="pre">length</span></code> を参照すると 2 が返る。</p></li>
<li><p>メソッド <code class="docutils literal notranslate"><span class="pre">fromCodePoint()</span></code> と <code class="docutils literal notranslate"><span class="pre">codePointAt()</span></code> は surrogate pair を正しく扱う。</p></li>
</ul>
</section>
<section id="diacritical-marks-and-normalization">
<h4>Diacritical marks and normalization<a class="headerlink" href="#diacritical-marks-and-normalization" title="Permalink to this heading">¶</a></h4>
<p>これは説明が難しい。一部の文字は、surrogate pair による表現方法が一意的でない。</p>
<p>本文で挙げている例は、次の連続する二文字で説明している：</p>
<ul class="simple">
<li><p>「前の文字の上に点をつける」を指示する文字 <code class="docutils literal notranslate"><span class="pre">\u0307</span></code></p></li>
<li><p>「前の文字の下に点をつける」を指示する文字 <code class="docutils literal notranslate"><span class="pre">\u0323</span></code></p></li>
</ul>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">normalize()</span></code> はそのような文字列を「正規化」することができる。</p>
</section>
</section>
<section id="id2">
<h3>Tasks<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<section id="uppercase-the-first-character">
<h4>Uppercase the first character<a class="headerlink" href="#uppercase-the-first-character" title="Permalink to this heading">¶</a></h4>
<p>Python でいう <code class="docutils literal notranslate"><span class="pre">str.capitalize()</span></code> を書けという問題。JavaScript にこれがない理由は？</p>
</section>
<section id="check-for-spam">
<h4>Check for spam<a class="headerlink" href="#check-for-spam" title="Permalink to this heading">¶</a></h4>
<p>この問題は実用的なのに笑える。本質は case insensitive な比較を書けというものだろう。</p>
</section>
<section id="truncate-the-text">
<h4>Truncate the text<a class="headerlink" href="#truncate-the-text" title="Permalink to this heading">¶</a></h4>
<p>まさに <code class="docutils literal notranslate"><span class="pre">slice()</span></code> の出番だ。</p>
</section>
<section id="extract-the-money">
<h4>Extract the money<a class="headerlink" href="#extract-the-money" title="Permalink to this heading">¶</a></h4>
<p>これは前章の状況とは異なり、ドルマークが一文字目なので数のメソッド <code class="docutils literal notranslate"><span class="pre">parseInt()</span></code>
は使えない。</p>
</section>
</section>
</section>
<section id="arrays">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">Arrays</a><a class="headerlink" href="#arrays" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/array">https://javascript.info/array</a>&gt; のノート。</p>
<p>Python の <code class="docutils literal notranslate"><span class="pre">list</span></code> に対応する型であると考えられる。</p>
<section id="declaration">
<h3>Declaration<a class="headerlink" href="#declaration" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Array</span></code> のコンストラクターを呼び出す方法もあるが、配列リテラルで定義するのが普通だ。</p></li>
<li><p>文字列とは異なり配列オブジェクトは mutable であるので、添字参照を左辺値に書ける。</p></li>
<li><p>Python のように、配列の各要素は型が異なっていてもよい。</p></li>
</ul>
</section>
<section id="get-last-elements-with-at">
<h3>Get last elements with <code class="docutils literal notranslate"><span class="pre">at</span></code><a class="headerlink" href="#get-last-elements-with-at" title="Permalink to this heading">¶</a></h3>
<p>Python とは異なり、角括弧による要素の参照では負の添字が使えない。メソッド
<code class="docutils literal notranslate"><span class="pre">at()</span></code> はそれを許す。</p>
</section>
<section id="methods-pop-push-shift-unshift">
<h3>Methods <code class="docutils literal notranslate"><span class="pre">pop</span></code>/<code class="docutils literal notranslate"><span class="pre">push</span></code>, <code class="docutils literal notranslate"><span class="pre">shift</span></code>/<code class="docutils literal notranslate"><span class="pre">unshift</span></code><a class="headerlink" href="#methods-pop-push-shift-unshift" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Methods</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pop()</span></code></p></td>
<td><p>配列の末尾から要素を削除する</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">push(...)</span></code></p></td>
<td><p>配列の末尾に要素を追加する</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">shift()</span></code></p></td>
<td><p>配列の先頭から要素を削除する</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unshift(...)</span></code></p></td>
<td><p>配列の先頭に要素を追加する</p></td>
</tr>
</tbody>
</table>
</section>
<section id="internals">
<h3>Internals<a class="headerlink" href="#internals" title="Permalink to this heading">¶</a></h3>
<p>JavaScript エンジンは配列の要素を連続したメモリー領域に格納しようとする。ほかにも最適化を行って、配列を非常に高速に動作させるようにしてする。通常のオブジェクトのように扱う（余計なプロパティーを追加するなどする）と、最適化が壊れる。</p>
</section>
<section id="performance">
<h3>Performance<a class="headerlink" href="#performance" title="Permalink to this heading">¶</a></h3>
<p>配列ではメソッド <code class="docutils literal notranslate"><span class="pre">push()</span></code> と <code class="docutils literal notranslate"><span class="pre">pop()</span></code> は速いが、他方でメソッド <code class="docutils literal notranslate"><span class="pre">shift()</span></code> と
<code class="docutils literal notranslate"><span class="pre">unshift()</span></code> は遅い。先頭の要素操作は、既存要素の配列内の移動を伴うからだ。</p>
</section>
<section id="loops">
<h3>Loops<a class="headerlink" href="#loops" title="Permalink to this heading">¶</a></h3>
<p>配列を <code class="docutils literal notranslate"><span class="pre">for</span></code> ループで反復するには、添字をインクリメントするよりも
<code class="docutils literal notranslate"><span class="pre">for</span></code> … <code class="docutils literal notranslate"><span class="pre">of</span></code> 文を適用するのがよい。Python の事情とたぶん同じだろう。</p>
</section>
<section id="a-word-about-length">
<h3>A word about <code class="docutils literal notranslate"><span class="pre">length</span></code><a class="headerlink" href="#a-word-about-length" title="Permalink to this heading">¶</a></h3>
<p>文字列同様、プロパティー <code class="docutils literal notranslate"><span class="pre">length</span></code> が用意されている。</p>
<ul class="simple">
<li><p>配列の長さの更新と同期して正しい値になる。</p></li>
<li><p>左辺値としても参照できる。配列を空にするのに <code class="docutils literal notranslate"><span class="pre">arr.length</span> <span class="pre">=</span> <span class="pre">0</span></code> とすることもできる。</p></li>
</ul>
</section>
<section id="new-array">
<h3><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Array()</span></code><a class="headerlink" href="#new-array" title="Permalink to this heading">¶</a></h3>
<p>あえてコンストラクター <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Array()</span></code> を使って配列オブジェクトを生成する機会を考える。</p>
</section>
<section id="multidimensional-arrays">
<h3>Multidimensional arrays<a class="headerlink" href="#multidimensional-arrays" title="Permalink to this heading">¶</a></h3>
<p>WebGL のコードを書くときに間接的に現れるかもしれない。</p>
</section>
<section id="tostring">
<h3>toString<a class="headerlink" href="#tostring" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Array.toString()</span></code> は特別に、要素をカンマ区切りで連結した文字列を返す。</p>
<p><code class="docutils literal notranslate"><span class="pre">Array</span></code> には <code class="docutils literal notranslate"><span class="pre">Symbol.toPrimitive()</span></code> も <code class="docutils literal notranslate"><span class="pre">valueOf()</span></code> もなく、<code class="docutils literal notranslate"><span class="pre">toString()</span></code>
しか変換メソッドが実装されていない。</p>
</section>
<section id="don-t-compare-arrays-with">
<h3>Don’t compare arrays with <code class="docutils literal notranslate"><span class="pre">==</span></code><a class="headerlink" href="#don-t-compare-arrays-with" title="Permalink to this heading">¶</a></h3>
<p>JavaScript の <code class="docutils literal notranslate"><span class="pre">==</span></code> 演算は、こういう値の意味を持つオブジェクト同士では何の意味もないので使わない。正しい比較方法は次章で論じられる。</p>
</section>
<section id="id3">
<h3>Tasks<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<section id="is-array-copied">
<h4>Is array copied?<a class="headerlink" href="#is-array-copied" title="Permalink to this heading">¶</a></h4>
<p>配列の問題というより、変数の理解の問題だ。</p>
</section>
<section id="array-operations">
<h4>Array operations<a class="headerlink" href="#array-operations" title="Permalink to this heading">¶</a></h4>
<p>追加メソッド、削除メソッドが正しく理解できているかを問う演習だ。</p>
</section>
<section id="calling-in-an-array-context">
<h4>Calling in an array context<a class="headerlink" href="#calling-in-an-array-context" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">this</span></code> が <code class="docutils literal notranslate"><span class="pre">arr</span></code> を指すこと</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arr.toString()</span></code> の内容が何であるかをわかっていること</p></li>
</ul>
</section>
<section id="sum-input-numbers">
<h4>Sum input numbers<a class="headerlink" href="#sum-input-numbers" title="Permalink to this heading">¶</a></h4>
<p>関数 <code class="docutils literal notranslate"><span class="pre">prompt()</span></code> の戻り値をいつものように処理すること。</p>
</section>
<section id="a-maximal-subarray">
<h4>A maximal subarray<a class="headerlink" href="#a-maximal-subarray" title="Permalink to this heading">¶</a></h4>
<p>初版で線形オーダーのアルゴリズムを実装できる能力を身に付けておきたいものだ。</p>
</section>
</section>
</section>
<section id="array-methods">
<h2><a class="toc-backref" href="#id20" role="doc-backlink">Array methods</a><a class="headerlink" href="#array-methods" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/array-methods">https://javascript.info/array-methods</a>&gt; のノート。</p>
<section id="add-remove-items">
<h3>Add/remove items<a class="headerlink" href="#add-remove-items" title="Permalink to this heading">¶</a></h3>
<p>前章のものに加え、要素操作メソッドはあと三つはある。</p>
<section id="splice">
<h4><code class="docutils literal notranslate"><span class="pre">splice</span></code><a class="headerlink" href="#splice" title="Permalink to this heading">¶</a></h4>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">splice()</span></code> は削除したり追加したり置換したりと、多目的用途がある。</p>
</section>
<section id="slice">
<h4><code class="docutils literal notranslate"><span class="pre">slice</span></code><a class="headerlink" href="#slice" title="Permalink to this heading">¶</a></h4>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">slice()</span></code> は Python と同じ。角括弧コロンのような特殊な記法はない。</p>
</section>
<section id="concat">
<h4><code class="docutils literal notranslate"><span class="pre">concat</span></code><a class="headerlink" href="#concat" title="Permalink to this heading">¶</a></h4>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">concat()</span></code> は Python の <code class="docutils literal notranslate"><span class="pre">extend()</span></code> に相当する。ただし、実引数の
<code class="docutils literal notranslate"><span class="pre">Symbol.isConcatSpreadable</span></code> 値により連結方式が決まる。</p>
</section>
</section>
<section id="iterate-foreach">
<h3>Iterate: <code class="docutils literal notranslate"><span class="pre">forEach</span></code><a class="headerlink" href="#iterate-foreach" title="Permalink to this heading">¶</a></h3>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">forEach()</span></code> は <code class="docutils literal notranslate"><span class="pre">for</span></code> ループを書かずに要素を反復することができる。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">arr</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">,</span><span class="w"> </span><span class="nx">array</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ... do something with item</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="searching-in-array">
<h3>Searching in array<a class="headerlink" href="#searching-in-array" title="Permalink to this heading">¶</a></h3>
<section id="indexof-lastindexof-and-includes">
<h4><code class="docutils literal notranslate"><span class="pre">indexOf</span></code>/<code class="docutils literal notranslate"><span class="pre">lastIndexOf</span></code> and <code class="docutils literal notranslate"><span class="pre">includes</span></code><a class="headerlink" href="#indexof-lastindexof-and-includes" title="Permalink to this heading">¶</a></h4>
<p>文字列のときに見たようなメソッドと同じようなものが配列にもある。文字の代わりに要素になっただけだ。</p>
<ul class="simple">
<li><p>要素同士の比較は演算子 <code class="docutils literal notranslate"><span class="pre">===</span></code> で判定される。</p></li>
<li><p>この三つのうちメソッド <code class="docutils literal notranslate"><span class="pre">includes()</span></code> だけが <code class="docutils literal notranslate"><span class="pre">NaN</span></code> を正しく検索できる。</p></li>
</ul>
</section>
<section id="find-and-findindex">
<h4><code class="docutils literal notranslate"><span class="pre">find</span></code> and <code class="docutils literal notranslate"><span class="pre">findIndex</span></code><a class="headerlink" href="#find-and-findindex" title="Permalink to this heading">¶</a></h4>
<p>述語を与えて要素を検索するメソッドだ。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arr</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">,</span><span class="w"> </span><span class="nx">array</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// if true is returned, item is returned and iteration is stopped</span>
<span class="w">    </span><span class="c1">// for falsy scenario returns undefined</span>
<span class="p">});</span>
</pre></div>
</div>
<ul class="simple">
<li><p>メソッド <code class="docutils literal notranslate"><span class="pre">find()</span></code> は述語が <code class="docutils literal notranslate"><span class="pre">true</span></code> であるような要素があるかどうかを判定する。</p></li>
<li><p>メソッド <code class="docutils literal notranslate"><span class="pre">findIndex()</span></code> は述語が <code class="docutils literal notranslate"><span class="pre">true</span></code> であるような要素を返す。</p></li>
</ul>
</section>
<section id="filter">
<h4><code class="docutils literal notranslate"><span class="pre">filter</span></code><a class="headerlink" href="#filter" title="Permalink to this heading">¶</a></h4>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">filter()</span></code> は <code class="docutils literal notranslate"><span class="pre">find()</span></code> と引数リストが同じであり、述語が <code class="docutils literal notranslate"><span class="pre">true</span></code>
であるような要素をすべて返す。</p>
</section>
</section>
<section id="transform-an-array">
<h3>Transform an array<a class="headerlink" href="#transform-an-array" title="Permalink to this heading">¶</a></h3>
<section id="map">
<h4><code class="docutils literal notranslate"><span class="pre">map</span></code><a class="headerlink" href="#map" title="Permalink to this heading">¶</a></h4>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">map()</span></code> は写像を与えてその像を返す。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arr</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="p">,</span><span class="w"> </span><span class="nx">array</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// returns the new value instead of item</span>
<span class="p">});</span>
</pre></div>
</div>
</section>
<section id="sort-fn">
<h4><code class="docutils literal notranslate"><span class="pre">sort(fn)</span></code><a class="headerlink" href="#sort-fn" title="Permalink to this heading">¶</a></h4>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">sort()</span></code> は配列を in-place で並び替える。比較関数を与えることができる。</p>
<p>デフォルトの比較は文字列の比較であることに注意する。これは一般的には使えない。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">arr</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nx">b</span><span class="p">);</span>

<span class="nx">arr</span><span class="p">.</span><span class="nx">sort</span><span class="p">((</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">a</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="nx">b</span><span class="p">)));</span>
</pre></div>
</div>
</section>
<section id="reverse">
<h4><code class="docutils literal notranslate"><span class="pre">reverse</span></code><a class="headerlink" href="#reverse" title="Permalink to this heading">¶</a></h4>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">reverse()</span></code> は配列を in-place で逆順に並び替える。自身を返す。</p>
</section>
<section id="split-and-join">
<h4><code class="docutils literal notranslate"><span class="pre">split</span></code> and <code class="docutils literal notranslate"><span class="pre">join</span></code><a class="headerlink" href="#split-and-join" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p>文字列のメソッド <code class="docutils literal notranslate"><span class="pre">split()</span></code> は配列を返す。</p></li>
<li><p>Python とは異なり、<code class="docutils literal notranslate"><span class="pre">join()</span></code> は配列のメソッドだ。</p></li>
</ul>
</section>
<section id="reduce-reduceright">
<h4><code class="docutils literal notranslate"><span class="pre">reduce</span></code>/<code class="docutils literal notranslate"><span class="pre">reduceRight</span></code><a class="headerlink" href="#reduce-reduceright" title="Permalink to this heading">¶</a></h4>
<p>JavaScript では <code class="docutils literal notranslate"><span class="pre">reduce()</span></code> はメソッドだ。</p>
</section>
</section>
<section id="array-isarray">
<h3><code class="docutils literal notranslate"><span class="pre">Array.isArray</span></code><a class="headerlink" href="#array-isarray" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Array.isArray()</span></code> でオブジェクトが配列であることをテストする。</p>
</section>
<section id="most-methods-support-thisarg">
<h3>Most methods support <code class="docutils literal notranslate"><span class="pre">thisArg</span></code><a class="headerlink" href="#most-methods-support-thisarg" title="Permalink to this heading">¶</a></h3>
<p>述語を引数に取る配列メソッドのほどんどで、述語関数の内部から <code class="docutils literal notranslate"><span class="pre">thisArg</span></code> という値にアクセスできる。これは関数スコープでの <code class="docutils literal notranslate"><span class="pre">this</span></code> と同じ値であるようだ。したがって、めったに利用されない。</p>
</section>
<section id="id4">
<h3>Tasks<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<section id="translate-border-left-width-to-borderleftwidth">
<h4>Translate <code class="docutils literal notranslate"><span class="pre">border-left-width</span></code> to <code class="docutils literal notranslate"><span class="pre">borderLeftWidth</span></code><a class="headerlink" href="#translate-border-left-width-to-borderleftwidth" title="Permalink to this heading">¶</a></h4>
<p>文字列メソッドの問題かと思いきや？</p>
</section>
<section id="filter-range">
<h4>Filter range<a class="headerlink" href="#filter-range" title="Permalink to this heading">¶</a></h4>
<p>条件を満たす要素を全部見つけて新しい配列を作成して返す問題。</p>
</section>
<section id="filter-range-in-place">
<h4>Filter range “in place”<a class="headerlink" href="#filter-range-in-place" title="Permalink to this heading">¶</a></h4>
<p>このアルゴリズムには疑問があるが、言いたいことは前の問題の方針のほうが楽だということだろう。</p>
</section>
<section id="sort-in-decreasing-order">
<h4>Sort in decreasing order<a class="headerlink" href="#sort-in-decreasing-order" title="Permalink to this heading">¶</a></h4>
<p>本文中に解がある。</p>
</section>
<section id="copy-and-sort-array">
<h4>Copy and sort array<a class="headerlink" href="#copy-and-sort-array" title="Permalink to this heading">¶</a></h4>
<p>配列コピーが主題。その考え方は Python と同じ。</p>
</section>
<section id="create-an-extendable-calculator">
<h4>Create an extendable calculator<a class="headerlink" href="#create-an-extendable-calculator" title="Permalink to this heading">¶</a></h4>
<p>二項演算を表す文字列を <code class="docutils literal notranslate"><span class="pre">split()</span></code> でバラして変換して算術演算に持ち込む。</p>
</section>
<section id="map-to-names">
<h4>Map to names<a class="headerlink" href="#map-to-names" title="Permalink to this heading">¶</a></h4>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">map()</span></code> の基本的な動作を確認する問題。</p>
</section>
<section id="map-to-objects">
<h4>Map to objects<a class="headerlink" href="#map-to-objects" title="Permalink to this heading">¶</a></h4>
<p>こちらも。</p>
</section>
<section id="sort-users-by-age">
<h4>Sort users by age<a class="headerlink" href="#sort-users-by-age" title="Permalink to this heading">¶</a></h4>
<p>ソートの簡単な問題。</p>
</section>
<section id="shuffle-an-array">
<h4>Shuffle an array<a class="headerlink" href="#shuffle-an-array" title="Permalink to this heading">¶</a></h4>
<p>ランダムシャッフルを実装する問題。メソッド <code class="docutils literal notranslate"><span class="pre">sort()</span></code> のキーを理解しているかが問われる。</p>
</section>
<section id="get-average-age">
<h4>Get average age<a class="headerlink" href="#get-average-age" title="Permalink to this heading">¶</a></h4>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">reduce()</span></code> で和を取る方法は本文でやってある。</p>
</section>
<section id="filter-unique-array-members">
<h4>Filter unique array members<a class="headerlink" href="#filter-unique-array-members" title="Permalink to this heading">¶</a></h4>
<p>問題設定に疑問がある。</p>
</section>
<section id="create-keyed-object-from-array">
<h4>Create keyed object from array<a class="headerlink" href="#create-keyed-object-from-array" title="Permalink to this heading">¶</a></h4>
<p>これはデータベースの加工のような処理で興味深い。メソッド <code class="docutils literal notranslate"><span class="pre">reduce()</span></code> を応用するのは面白い。</p>
</section>
</section>
</section>
<section id="iterables">
<h2><a class="toc-backref" href="#id21" role="doc-backlink">Iterables</a><a class="headerlink" href="#iterables" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/iterable">https://javascript.info/iterable</a>&gt; のノート。</p>
<ul class="simple">
<li><p>オブジェクトが iterable であるとは、オブジェクトがその構成要素を <code class="docutils literal notranslate"><span class="pre">for</span></code> …
<code class="docutils literal notranslate"><span class="pre">of</span></code> ループで反復できることをいう。</p></li>
<li><p>配列や文字列は iterable だ。</p></li>
<li><p>あるオブジェクトが配列ではなく、何かの集まりを表しているなら、<code class="docutils literal notranslate"><span class="pre">for</span></code> …
<code class="docutils literal notranslate"><span class="pre">of</span></code> は構成要素を反復させるのに最適な構文だ。</p></li>
</ul>
<section id="symbol-iterator">
<h3><code class="docutils literal notranslate"><span class="pre">Symbol.iterator</span></code><a class="headerlink" href="#symbol-iterator" title="Permalink to this heading">¶</a></h3>
<p>オブジェクトに iterator を実装する方法を示している。ひじょうに覚えにくい。</p>
<ul class="simple">
<li><p>メソッド <code class="docutils literal notranslate"><span class="pre">[Symbol.iterator]</span></code> を定義する。それは次のようなオブジェクトを返すものとする：</p>
<ul>
<li><p>プロパティー <code class="docutils literal notranslate"><span class="pre">current</span></code> を有する。一般には反復中の値を管理するためのデータだ。</p></li>
<li><p>プロパティー <code class="docutils literal notranslate"><span class="pre">last</span></code> を有する。集まりの最後の値を表す。</p></li>
<li><p>メソッド <code class="docutils literal notranslate"><span class="pre">next()</span></code> を有する。これは反復中の状況に応じて次のようなオブジェクトを返すものとする：</p>
<ul>
<li><p>プロパティー <code class="docutils literal notranslate"><span class="pre">done</span></code> はまだ要素が残っているかどうかを表す Boolean 値とする。</p></li>
<li><p>プロパティー <code class="docutils literal notranslate"><span class="pre">value</span></code> は反復中の現在の要素を表す。</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>この節のオブジェクト <code class="docutils literal notranslate"><span class="pre">range</span></code> は以降も引き合いに出される。</p>
</section>
<section id="string-is-iterable">
<h3>String is iterable<a class="headerlink" href="#string-is-iterable" title="Permalink to this heading">¶</a></h3>
<p>以前にも述べられたとおり、文字列を <code class="docutils literal notranslate"><span class="pre">for</span></code> … <code class="docutils literal notranslate"><span class="pre">of</span></code> で反復すると、先頭から末尾まで一文字ずつアクセスできる。</p>
</section>
<section id="calling-an-iterator-explicitly">
<h3>Calling an iterator explicitly<a class="headerlink" href="#calling-an-iterator-explicitly" title="Permalink to this heading">¶</a></h3>
<p>反復可能なオブジェクトから iterator を直接得て、<code class="docutils literal notranslate"><span class="pre">for</span></code> … <code class="docutils literal notranslate"><span class="pre">of</span></code> ではなく
<code class="docutils literal notranslate"><span class="pre">while</span></code> 文でループする例だ。デザインパターンの教科書を読んだことがあれば自然に理解できる。</p>
</section>
<section id="iterables-and-array-likes">
<h3>Iterables and array-likes<a class="headerlink" href="#iterables-and-array-likes" title="Permalink to this heading">¶</a></h3>
<p>次節で紹介するメソッドを説明するために「オブジェクトが配列風である」という用語を定義している。すなわち、プロパティー <code class="docutils literal notranslate"><span class="pre">length</span></code> を備えているオブジェクトだ。</p>
</section>
<section id="array-from">
<h3><code class="docutils literal notranslate"><span class="pre">Array.from</span></code><a class="headerlink" href="#array-from" title="Permalink to this heading">¶</a></h3>
<p>関数 <code class="docutils literal notranslate"><span class="pre">Array.from()</span></code> は反復可能オブジェクトまたは配列風オブジェクトをとり、本物の配列を返す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Array.from(c).map(f)</span></code> のようなことを考えているのならば、それは
<code class="docutils literal notranslate"><span class="pre">Array.from(c,</span> <span class="pre">f)</span></code> でいっぺんに実現できる。</p></li>
</ul>
</section>
</section>
<section id="map-and-set">
<h2><a class="toc-backref" href="#id22" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">Map</span></code> and <code class="docutils literal notranslate"><span class="pre">Set</span></code></a><a class="headerlink" href="#map-and-set" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/map-set">https://javascript.info/map-set</a>&gt; のノート。</p>
<p>JavaScript にもこれらの機能が用意されている。</p>
<section id="map-1">
<span id="id5"></span><h3><code class="docutils literal notranslate"><span class="pre">Map</span></code><a class="headerlink" href="#map-1" title="Permalink to this heading">¶</a></h3>
<p>JavaScript のオブジェクトも連想配列の性質があると言えるが、それとは違って本物の
<code class="docutils literal notranslate"><span class="pre">Map</span></code> はキーに任意の型の値を許す。</p>
<p>意味はわかるだろうから、主要なメソッド、プロパティーを説明なしで記しておく：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Map()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map.set(key,</span> <span class="pre">value)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map.get(key)</span></code>: 値がない場合には <code class="docutils literal notranslate"><span class="pre">undefined</span></code> が返ることに注意。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map.has(key)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map.delete(key)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map.clear()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map.size</span></code></p></li>
</ul>
<p>その他注意点：</p>
<ul class="simple">
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">Map</span></code> のオブジェクト <code class="docutils literal notranslate"><span class="pre">m</span></code> に対して <code class="docutils literal notranslate"><span class="pre">m[k]</span></code> は使わない。やらかしそうで怖い。</p></li>
<li><p>任意の型をキーに使えると書いたが、なんと <code class="docutils literal notranslate"><span class="pre">Object</span></code> も許されている。これは
Python だとあり得ない。</p></li>
<li><p>キーの比較関数は演算子 <code class="docutils literal notranslate"><span class="pre">===</span></code> と考えてよいのだが、例外的に <code class="docutils literal notranslate"><span class="pre">NaN</span></code> もキーとして扱えるように考慮されている。</p></li>
</ul>
</section>
<section id="iteration-over-map">
<h3>Iteration over <code class="docutils literal notranslate"><span class="pre">Map</span></code><a class="headerlink" href="#iteration-over-map" title="Permalink to this heading">¶</a></h3>
<p>これも意味はわかるはずだから、メソッド名だけ列挙しておく：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">map.keys()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map.values()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map.entries()</span></code></p></li>
</ul>
<p>これらを <code class="docutils literal notranslate"><span class="pre">for</span></code> … <code class="docutils literal notranslate"><span class="pre">of</span></code> ループの iterable オブジェクト指定部分で呼び出せる。</p>
<ul class="simple">
<li><p>ループ中の反復順序は要素の挿入順に従う。これは一般の <code class="docutils literal notranslate"><span class="pre">Object</span></code> と異なる。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Map</span></code> にもメソッド <code class="docutils literal notranslate"><span class="pre">forEach()</span></code> が用意されている。</p></li>
</ul>
</section>
<section id="object-entries-map-from-object">
<h3><code class="docutils literal notranslate"><span class="pre">Object.entries</span></code>: <code class="docutils literal notranslate"><span class="pre">Map</span></code> from <code class="docutils literal notranslate"><span class="pre">Object</span></code><a class="headerlink" href="#object-entries-map-from-object" title="Permalink to this heading">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="ow">new</span><span class="w"> </span><span class="nb">Map</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">obj</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="object-fromentries-object-from-map">
<h3><code class="docutils literal notranslate"><span class="pre">Object.fromEntries</span></code>: <code class="docutils literal notranslate"><span class="pre">Object</span></code> from <code class="docutils literal notranslate"><span class="pre">Map</span></code><a class="headerlink" href="#object-fromentries-object-from-map" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Object</span></code> を <code class="docutils literal notranslate"><span class="pre">Map</span></code> に変換するには <code class="docutils literal notranslate"><span class="pre">Object.entries()</span></code> を併用する。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">Object</span><span class="p">.</span><span class="nx">fromEntries</span><span class="p">(</span><span class="nx">map</span><span class="p">.</span><span class="nx">entries</span><span class="p">());</span>
<span class="c1">// or</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">fromEntries</span><span class="p">(</span><span class="nx">map</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition- admonition">
<p class="admonition-title">学習者ノート</p>
<p>このメソッドはキーと値のペアの集合を <code class="docutils literal notranslate"><span class="pre">Object</span></code> に変換するようなものだ。引数は反復可能ならば十分だ。例えば <code class="docutils literal notranslate"><span class="pre">Array</span></code> や <code class="docutils literal notranslate"><span class="pre">Map</span></code> は通じる。</p>
<p>メソッド <code class="docutils literal notranslate"><span class="pre">Object.entries()</span></code> が逆関数に相当する。これは <code class="docutils literal notranslate"><span class="pre">Object</span></code> をキーと値のペアの配列に変換する。</p>
</div>
</section>
<section id="set">
<h3><code class="docutils literal notranslate"><span class="pre">Set</span></code><a class="headerlink" href="#set" title="Permalink to this heading">¶</a></h3>
<p>JavaScript にも集合を扱うクラスがある。機能だけ列挙しておく：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Set(iterable)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set.add(value)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set.delete(value)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set.has(value)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set.clear()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set.size</span></code></p></li>
</ul>
</section>
<section id="iteration-over-set">
<h3>Iteration over <code class="docutils literal notranslate"><span class="pre">Set</span></code><a class="headerlink" href="#iteration-over-set" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">for</span></code> … <code class="docutils literal notranslate"><span class="pre">of</span></code> ループに関係するメソッドを列挙しておく：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">set.keys()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set.values()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set.entries()</span></code></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">set.forEach()</span></code> はインターフェイスにクセがあるか。なぜ JavaScript はコレクションの <code class="docutils literal notranslate"><span class="pre">forEach</span></code> 引数リストを一致させたいのだろう。</p>
</section>
<section id="id6">
<h3>Tasks<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h3>
<section id="filter-unique-array-members-1">
<span id="id7"></span><h4>Filter unique array members<a class="headerlink" href="#filter-unique-array-members-1" title="Permalink to this heading">¶</a></h4>
<p>考え方は Python と同じようだ。</p>
</section>
<section id="filter-anagrams">
<h4>Filter anagrams<a class="headerlink" href="#filter-anagrams" title="Permalink to this heading">¶</a></h4>
<p>いろいろと面白いコードがある。対象がアナグラムなのでソートが有用となる。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.split('').sort().join('')</span></code> で文字列をある意味で正規化する。</p></li>
</ul>
</section>
<section id="iterable-keys">
<h4>Iterable keys<a class="headerlink" href="#iterable-keys" title="Permalink to this heading">¶</a></h4>
<p>少し前の章で述べられているように、反復可能オブジェクトから <code class="docutils literal notranslate"><span class="pre">Array.from()</span></code> で配列を生成する。</p>
</section>
</section>
</section>
<section id="weakmap-and-weakset">
<h2><a class="toc-backref" href="#id23" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">WeakMap</span></code> and <code class="docutils literal notranslate"><span class="pre">WeakSet</span></code></a><a class="headerlink" href="#weakmap-and-weakset" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/weakmap-weakset">https://javascript.info/weakmap-weakset</a>&gt; のノート。</p>
<p>本章の説明のために、到達可能性の定義の復習から始まっている。</p>
<section id="weakmap">
<h3><code class="docutils literal notranslate"><span class="pre">WeakMap</span></code><a class="headerlink" href="#weakmap" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">WeakMap</span></code> はキーが <code class="docutils literal notranslate"><span class="pre">Object</span></code> である連想配列であって、キー要素のゴミ収集を妨害しないものだ。</p>
<p>キーとなるオブジェクトが外部では参照されなくなると、対応する収容オブジェクトが失われて減る。</p>
<p><code class="docutils literal notranslate"><span class="pre">WeakMap</span></code> のメソッドは <code class="docutils literal notranslate"><span class="pre">Map</span></code> よりも少ない。反復操作とサイズ属性がないので、消滅時にそれを直接確認する術はない：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">weakMap.get(key)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">weakMap.set(key,</span> <span class="pre">value)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">weakMap.delete(key)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">weakMap.has(key)</span></code></p></li>
</ul>
<p>この考え方は面白い。Python にも対応物があったか？</p>
</section>
<section id="use-case-additional-data">
<h3>Use case: additional data<a class="headerlink" href="#use-case-additional-data" title="Permalink to this heading">¶</a></h3>
<p>キーオブジェクトがゴミ収集されたときに、その値が自動的に消えるとうれしい場合に
<code class="docutils literal notranslate"><span class="pre">WeakMap</span></code> を利用するといい。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">weakMap</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">john</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;secret documents&quot;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="use-case-caching">
<h3>Use case: caching<a class="headerlink" href="#use-case-caching" title="Permalink to this heading">¶</a></h3>
<p>これを見て思ったが、逆に上記のメソッドしか使われていない <code class="docutils literal notranslate"><span class="pre">Map</span></code> があれば、それは <code class="docutils literal notranslate"><span class="pre">WeakMap</span></code> に置き換えることができるのではないか。</p>
</section>
<section id="weakset">
<h3><code class="docutils literal notranslate"><span class="pre">WeakSet</span></code><a class="headerlink" href="#weakset" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">WeakSet</span></code> は <code class="docutils literal notranslate"><span class="pre">WeakMap</span></code> の集合版だ。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">set.add(value)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set.delete(value)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set.has(value)</span></code></p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">WeakMap</span></code> も <code class="docutils literal notranslate"><span class="pre">WeakSet</span></code> も反復可能ではない。関連メソッドも備わっていない。</p>
</section>
<section id="id8">
<h3>Tasks<a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h3>
<section id="store-unread-flags">
<h4>Store “unread” flags<a class="headerlink" href="#store-unread-flags" title="Permalink to this heading">¶</a></h4>
<p>オブジェクト <code class="docutils literal notranslate"><span class="pre">messages</span></code> を一切変更できない場合はこんなふうにラップする。</p>
</section>
<section id="store-read-dates">
<h4>Store read dates<a class="headerlink" href="#store-read-dates" title="Permalink to this heading">¶</a></h4>
<p>上の問題で付加的な情報を扱う場合には <code class="docutils literal notranslate"><span class="pre">WeakSet</span></code> を <code class="docutils literal notranslate"><span class="pre">WeakMap</span></code> に差し替えて、値を処理したい情報とする。</p>
</section>
</section>
</section>
<section id="object-keys-values-entries">
<h2><a class="toc-backref" href="#id24" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">Object.keys</span></code>, <code class="docutils literal notranslate"><span class="pre">values</span></code>, <code class="docutils literal notranslate"><span class="pre">entries</span></code></a><a class="headerlink" href="#object-keys-values-entries" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/keys-values-entries">https://javascript.info/keys-values-entries</a>&gt; のノート。</p>
<p>それを言い出すと <code class="docutils literal notranslate"><span class="pre">length</span></code> もオブジェクト属性ではなく静的メソッドのほうが柔軟であることになる。</p>
<section id="object-keys-values-entries-1">
<span id="id9"></span><h3><code class="docutils literal notranslate"><span class="pre">Object.keys</span></code>, <code class="docutils literal notranslate"><span class="pre">values</span></code>, <code class="docutils literal notranslate"><span class="pre">entries</span></code><a class="headerlink" href="#object-keys-values-entries-1" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Map</span></code> のメソッド <code class="docutils literal notranslate"><span class="pre">keys()</span></code>, <code class="docutils literal notranslate"><span class="pre">values()</span></code>, <code class="docutils literal notranslate"><span class="pre">entries()</span></code> を一般化して
<code class="docutils literal notranslate"><span class="pre">Object</span></code> に実装することを考える。</p>
<p><code class="docutils literal notranslate"><span class="pre">Object</span></code> の場合はインスタンスメソッドではなく、クラスメソッドのような形式で用いる：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Object.keys(obj)</span></code></p></td>
<td><p>キーの配列を返す</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Object.values(obj)</span></code></p></td>
<td><p>値の配列を返す</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Object.entries(obj)</span></code></p></td>
<td><p>キーと値の配列の配列を返す</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>これらのメソッドは本物の配列を返すことに注意する。当時は反復可能オブジェクトという考え方がなかったのだろう。</p></li>
<li><p>普段は問題にならないが、これらのメソッドは <code class="docutils literal notranslate"><span class="pre">Symbol</span></code> キーを無視する。</p></li>
</ul>
</section>
<section id="transforming-objects">
<h3>Transforming objects<a class="headerlink" href="#transforming-objects" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Object</span></code> には <code class="docutils literal notranslate"><span class="pre">map()</span></code> や <code class="docutils literal notranslate"><span class="pre">filter()</span></code> が欠けているように見えるが、上述のメソッドが配列を返すことを利用すればいい。</p>
<p>キーと値の配列の配列をオブジェクトに変換する場合には <code class="docutils literal notranslate"><span class="pre">Object.fromEntries()</span></code> を呼び出す。</p>
</section>
<section id="id10">
<h3>Tasks<a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h3>
<p>この章の問題はべらぼうに易しい。</p>
<section id="sum-the-properties">
<h4>Sum the properties<a class="headerlink" href="#sum-the-properties" title="Permalink to this heading">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Object.values()</span></code> を利用する絶好の機会。さらに、関数型プログラミングが好みならば <code class="docutils literal notranslate"><span class="pre">reduce()</span></code> を利用する絶好の機会でもある。</p>
</section>
<section id="count-properties">
<h4>Count properties<a class="headerlink" href="#count-properties" title="Permalink to this heading">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Object.keys()</span></code> の長さを求めればいい。</p>
</section>
</section>
</section>
<section id="destructuring-assignment">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">Destructuring assignment</a><a class="headerlink" href="#destructuring-assignment" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/destructuring-assignment">https://javascript.info/destructuring-assignment</a>&gt; のノート。</p>
<p>JavaScript では <code class="docutils literal notranslate"><span class="pre">Object</span></code> や <code class="docutils literal notranslate"><span class="pre">Array</span></code> を多用するが、関数にそれを入力するとき、その全体が必要ではない場合がある。ここでは、それらを変数の束に分解するための特別な構文を学ぶ。この構文は、さらに、多くの引数や既定値などを引数リストに持つ関数で威力を発揮する。</p>
<div class="admonition- admonition">
<p class="admonition-title">学習者ノート</p>
<p>色々とパターンがあって、有用なものを忘れたくないところだが、とても憶え切れない。</p>
</div>
<section id="array-destructuring">
<h3>Array destructuring<a class="headerlink" href="#array-destructuring" title="Permalink to this heading">¶</a></h3>
<p>左辺値の書き方に特徴がある。右辺は配列とする。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">arr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;John&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Smith&quot;</span><span class="p">]</span>

<span class="kd">let</span><span class="w"> </span><span class="p">[</span><span class="nx">firstName</span><span class="p">,</span><span class="w"> </span><span class="nx">surname</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arr</span><span class="p">;</span>

<span class="kd">let</span><span class="w"> </span><span class="p">[</span><span class="nx">firstName</span><span class="p">,</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="nx">title</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Julius&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Caesar&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Consul&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;of the Roman Republic&quot;</span><span class="p">];</span>

<span class="kd">let</span><span class="w"> </span><span class="p">[</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">,</span><span class="w"> </span><span class="nx">c</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;abc&quot;</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="p">[</span><span class="nx">one</span><span class="p">,</span><span class="w"> </span><span class="nx">two</span><span class="p">,</span><span class="w"> </span><span class="nx">three</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nb">Set</span><span class="p">([</span><span class="mf">1</span><span class="p">,</span><span class="w"> </span><span class="mf">2</span><span class="p">,</span><span class="w"> </span><span class="mf">3</span><span class="p">]);</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">name</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;John&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">age</span><span class="o">:</span><span class="w"> </span><span class="mf">30</span>
<span class="p">};</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kd">let</span><span class="w"> </span><span class="p">[</span><span class="nx">key</span><span class="p">,</span><span class="w"> </span><span class="nx">value</span><span class="p">]</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nb">Object</span><span class="p">.</span><span class="nx">entries</span><span class="p">(</span><span class="nx">user</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">guest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Jane&quot;</span><span class="p">;</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">admin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Pete&quot;</span><span class="p">;</span>
<span class="p">[</span><span class="nx">guest</span><span class="p">,</span><span class="w"> </span><span class="nx">admin</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="nx">admin</span><span class="p">,</span><span class="w"> </span><span class="nx">guest</span><span class="p">];</span>
</pre></div>
</div>
<section id="the-rest">
<h4>The rest <code class="docutils literal notranslate"><span class="pre">...</span></code><a class="headerlink" href="#the-rest" title="Permalink to this heading">¶</a></h4>
<p>分解代入において、主要でない部分に <code class="docutils literal notranslate"><span class="pre">...</span></code> を付加して値を押し込むことができる。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="p">[</span><span class="nx">name1</span><span class="p">,</span><span class="w"> </span><span class="nx">name2</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">rest</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Julius&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Caesar&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Consul&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;of the Roman Republic&quot;</span><span class="p">];</span>
</pre></div>
</div>
<p>この場合、変数 <code class="docutils literal notranslate"><span class="pre">rest</span></code> は配列となり、右辺の配列の後ろ二つの要素からなる。</p>
</section>
<section id="default-values">
<h4>Default values<a class="headerlink" href="#default-values" title="Permalink to this heading">¶</a></h4>
<p>次の構文で既定値を定義できる（右辺値は定数である必要はない。何なら関数呼び出しでもいい）。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="p">[</span><span class="nx">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Guest&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">surname</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Anonymous&quot;</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">arr</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="object-destructuring">
<h3>Object destructuring<a class="headerlink" href="#object-destructuring" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Object</span></code> バージョンの分解代入構文の例を本文からいくつか引用する：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">title</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Menu&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="mf">100</span><span class="p">,</span>
<span class="w">    </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="mf">200</span>
<span class="p">};</span>
</pre></div>
</div>
<p>このとき、次のような分解代入を書ける：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="p">{</span><span class="nx">width</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">options</span><span class="p">;</span>
</pre></div>
</div>
<p>既定値を指定する（配列の分解代入と同様に、値は定数である必要はない）：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="p">{</span><span class="nx">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">111</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">222</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">options</span><span class="p">;</span>
</pre></div>
</div>
<p>変数名をオリジナルのものと変える：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="p">{</span><span class="nx">width</span><span class="o">:</span><span class="w"> </span><span class="nx">w</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="o">:</span><span class="w"> </span><span class="nx">h</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">options</span><span class="p">;</span>
</pre></div>
</div>
<p>なお、変数名の変更と既定値の指定を一度にできる。</p>
<section id="the-rest-pattern">
<h4>The rest pattern <code class="docutils literal notranslate"><span class="pre">...</span></code><a class="headerlink" href="#the-rest-pattern" title="Permalink to this heading">¶</a></h4>
<p>配列の <code class="docutils literal notranslate"><span class="pre">...</span></code> と同様に、オブジェクトでも適用できる：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="p">{</span><span class="nx">title</span><span class="p">,</span><span class="w"> </span><span class="p">...</span><span class="nx">rest</span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">options</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="nested-destructuring">
<h3>Nested destructuring<a class="headerlink" href="#nested-destructuring" title="Permalink to this heading">¶</a></h3>
<p>分割代入は入れ子になっていても機能する。しかしこれはまず使わないだろう。</p>
</section>
<section id="smart-function-parameters">
<h3>Smart function parameters<a class="headerlink" href="#smart-function-parameters" title="Permalink to this heading">¶</a></h3>
<p>この構文は関数のオプショナル引数を実装するのにうってつけだ：</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">showMenu</span><span class="p">({</span><span class="nx">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">200</span><span class="p">,</span><span class="w"> </span><span class="nx">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">100</span><span class="p">,</span><span class="w"> </span><span class="nx">items</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]})</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// function body...</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id11">
<h3>Tasks<a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h3>
<section id="destructuring-assignment-1">
<span id="id12"></span><h4>Destructuring assignment<a class="headerlink" href="#destructuring-assignment-1" title="Permalink to this heading">¶</a></h4>
<p>基本仕様の確認問題。</p>
</section>
<section id="the-maximal-salary">
<h4>The maximal salary<a class="headerlink" href="#the-maximal-salary" title="Permalink to this heading">¶</a></h4>
<p>無理に分解代入を適用するような問題ではない。</p>
</section>
</section>
</section>
<section id="date-and-time">
<h2><a class="toc-backref" href="#id26" role="doc-backlink">Date and time</a><a class="headerlink" href="#date-and-time" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/date">https://javascript.info/date</a>&gt; のノート。</p>
<p>一日が 25 時間ある場合がある。</p>
<section id="creation">
<h3>Creation<a class="headerlink" href="#creation" title="Permalink to this heading">¶</a></h3>
<p>コンストラクターで生成する。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Date()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Date(milliseconds)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Date(datestring)</span></code>: cf. <code class="docutils literal notranslate"><span class="pre">Date.parse</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Date(year,</span> <span class="pre">month,</span> <span class="pre">date,</span> <span class="pre">hours,</span> <span class="pre">minutes,</span> <span class="pre">seconds,</span> <span class="pre">ms)</span></code>:
引数は指定しないとゼロになるだろう。</p></li>
</ul>
</section>
<section id="access-date-components">
<h3>Access date components<a class="headerlink" href="#access-date-components" title="Permalink to this heading">¶</a></h3>
<p>プロパティー直接参照の形式ではなく、メソッド <code class="docutils literal notranslate"><span class="pre">getXXX()</span></code> を呼び出す方法だ。インターフェイスが旧式なのだ。</p>
<ul class="simple">
<li><p>年は注意。<code class="docutils literal notranslate"><span class="pre">getFullYear()</span></code> が対応する。</p></li>
<li><p>月は <code class="docutils literal notranslate"><span class="pre">getMonth()</span></code> だ。しかし 0 から 11 までの整数を返す。</p></li>
<li><p>曜日は <code class="docutils literal notranslate"><span class="pre">getDay()</span></code> で、0 から 6 までの整数を返す。</p></li>
<li><p>メソッド <code class="docutils literal notranslate"><span class="pre">getUTCXXX()</span></code> 系はローカルタイムではなく標準時を返す。</p></li>
<li><p>次のメソッドには対応する UTC 版がない：</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">getTime()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getTimezoneOffset()</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="setting-date-components">
<h3>Setting date components<a class="headerlink" href="#setting-date-components" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">setFullYear(year,</span> <span class="pre">[month],</span> <span class="pre">[date])</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setMonth(month,</span> <span class="pre">[date])</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setDate(date)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setHours(hour,</span> <span class="pre">[min],</span> <span class="pre">[sec],</span> <span class="pre">[ms])</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setMinutes(min,</span> <span class="pre">[sec],</span> <span class="pre">[ms])</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setSeconds(sec,</span> <span class="pre">[ms])</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setMilliseconds(ms)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">setTime(milliseconds)</span></code></p></li>
</ul>
<p>最後のものだけ UTC 版はない。</p>
</section>
<section id="autocorrection">
<h3>Autocorrection<a class="headerlink" href="#autocorrection" title="Permalink to this heading">¶</a></h3>
<p>日付オブジェクトに範囲外の値を設定しても、自動で調整される。例えば 8 月 32 日は 9 月 1 日になる。</p>
</section>
<section id="date-to-number-date-diff">
<h3>Date to number, date diff<a class="headerlink" href="#date-to-number-date-diff" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>日付 <code class="docutils literal notranslate"><span class="pre">date</span></code> が数に変換する状況では、その値は <code class="docutils literal notranslate"><span class="pre">date.getTime()</span></code> と同じだ。</p></li>
<li><p>日付同士の減算は数へのキャストが機能し、結果的に時差が得られる。</p></li>
</ul>
</section>
<section id="date-now">
<h3>Date.now()<a class="headerlink" href="#date-now" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Date.now()</span></code> で <code class="docutils literal notranslate"><span class="pre">new</span> <span class="pre">Date().getTime()</span></code> と同じ値が得られる。</p>
</section>
<section id="benchmarking">
<h3>Benchmarking<a class="headerlink" href="#benchmarking" title="Permalink to this heading">¶</a></h3>
<p>省略。</p>
</section>
<section id="date-parse-from-a-string">
<h3>Date.parse from a string<a class="headerlink" href="#date-parse-from-a-string" title="Permalink to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Date.parse(str)</span></code> の完全な書式は YYYY-MM-DDTHH:mm:ss.sssZ だ。</p>
<ul class="simple">
<li><p>YYYY だけでも可。</p></li>
<li><p>YYYY-MM だけでも可。</p></li>
<li><p>YYYY-MM-DD だけでも可。</p></li>
<li><p>T は文字通り T とする。</p></li>
<li><p>ここで Z は文字通り Z とするか、+-hh:mm とする。</p></li>
</ul>
<p>このメソッドはタイムスタンプを返す。</p>
</section>
<section id="id13">
<h3>Tasks<a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h3>
<section id="create-a-date">
<h4>Create a date<a class="headerlink" href="#create-a-date" title="Permalink to this heading">¶</a></h4>
<p>普通のコンストラクターの使い方を確認する。</p>
</section>
<section id="show-a-weekday">
<h4>Show a weekday<a class="headerlink" href="#show-a-weekday" title="Permalink to this heading">¶</a></h4>
<p>日付から曜日を名前で返す関数を書け。</p>
</section>
<section id="european-weekday">
<h4>European weekday<a class="headerlink" href="#european-weekday" title="Permalink to this heading">¶</a></h4>
<p>省略。</p>
</section>
<section id="which-day-of-month-was-many-days-ago">
<h4>Which day of month was many days ago?<a class="headerlink" href="#which-day-of-month-was-many-days-ago" title="Permalink to this heading">¶</a></h4>
<p>実はコピーコンストラクターが使える。</p>
</section>
<section id="last-day-of-month">
<h4>Last day of month?<a class="headerlink" href="#last-day-of-month" title="Permalink to this heading">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Date</span></code> コンストラクターの日引数に何を渡せばいいのかが問われている。</p>
</section>
<section id="how-many-seconds-have-passed-today">
<h4>How many seconds have passed today?<a class="headerlink" href="#how-many-seconds-have-passed-today" title="Permalink to this heading">¶</a></h4>
<p>要するに本日の 0:00:00 を表すオブジェクトが欲しい。</p>
</section>
<section id="how-many-seconds-till-tomorrow">
<h4>How many seconds till tomorrow?<a class="headerlink" href="#how-many-seconds-till-tomorrow" title="Permalink to this heading">¶</a></h4>
<p>着想は上の問題と同じ。</p>
</section>
<section id="format-the-relative-date">
<h4>Format the relative date<a class="headerlink" href="#format-the-relative-date" title="Permalink to this heading">¶</a></h4>
<p>Twitter の日付表示のような関数を作れという問題。</p>
</section>
</section>
</section>
<section id="json-methods-tojson">
<h2><a class="toc-backref" href="#id27" role="doc-backlink">JSON methods, <code class="docutils literal notranslate"><span class="pre">toJSON</span></code></a><a class="headerlink" href="#json-methods-tojson" title="Permalink to this heading">¶</a></h2>
<p>&lt;<a class="reference external" href="https://javascript.info/json">https://javascript.info/json</a>&gt; のノート。</p>
<p>自作オブジェクトをダンプするためだけにメソッド <code class="docutils literal notranslate"><span class="pre">toString()</span></code> を実装する必要はない。</p>
<ul class="simple">
<li><p>対象オブジェクトの <code class="docutils literal notranslate"><span class="pre">toJSON()</span></code> が存在すれば <code class="docutils literal notranslate"><span class="pre">JSON.stringify()</span></code> はそれを利用する。</p></li>
<li><p>デシリアライズの注意点として、例えばタイムスタンプ文字列は勝手に <code class="docutils literal notranslate"><span class="pre">Date</span></code> に変換されたりはしない。</p></li>
</ul>
<section id="json-stringify">
<h3><code class="docutils literal notranslate"><span class="pre">JSON.stringify</span></code><a class="headerlink" href="#json-stringify" title="Permalink to this heading">¶</a></h3>
<p>JSON とは値やオブジェクトを表現するための一般的な (RFC 4627) フォーマットだ。
JavaScript のために作られた仕様だが、他のプログラミング言語でも取り扱うことができるライブラリーがあるだろう。</p>
<p>次の二つのメソッドが重要だ：</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Methods</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">JSON.str</span>
<span class="pre">ingify(value[,</span> <span class="pre">replacer,</span> <span class="pre">space])</span></code></p></td>
<td><p>オブジェクトを JSON に変換する</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">JSON.parse(str,</span> <span class="pre">[reviver])</span></code></p></td>
<td><p>JSON をオブジェクトに変換する</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>スクリプトファイルに書かれるようなオブジェクトリテラルに似た文字列を返す。</p></li>
<li><p>引数 <code class="docutils literal notranslate"><span class="pre">value</span></code> として、オブジェクトだけではなく、配列、原子型値や <code class="docutils literal notranslate"><span class="pre">null</span></code> も受け付ける。</p></li>
<li><p>メソッド、<code class="docutils literal notranslate"><span class="pre">Symbol</span></code> プロパティー、値が <code class="docutils literal notranslate"><span class="pre">undefined</span></code> のプロパティーは無視される。</p></li>
<li><p>循環参照がない限り、オブジェクトが別のオブジェクトで階層的になっていてもよい。</p></li>
</ul>
</section>
<section id="excluding-and-transforming-replacer">
<h3>Excluding and transforming: <code class="docutils literal notranslate"><span class="pre">replacer</span></code><a class="headerlink" href="#excluding-and-transforming-replacer" title="Permalink to this heading">¶</a></h3>
<p>引数 <code class="docutils literal notranslate"><span class="pre">replacer</span></code> は JSON 化するプロパティーの配列を指定するか、対応を与える
<code class="docutils literal notranslate"><span class="pre">function(key,</span> <span class="pre">value)</span></code> を指定する。</p>
<ul class="simple">
<li><p>特定のプロパティーしか JSON 化する必要がないときなど、配列で指定すればいい。ただし、本文の例のようにフィルターが厳し過ぎる。</p></li>
<li><p>逆に、特定のプロパティーだけ無視したい場合にはフィルター関数を指定する。無視したい <code class="docutils literal notranslate"><span class="pre">key</span></code> に対して <code class="docutils literal notranslate"><span class="pre">undefined</span></code> を返す関数を書けばいい。</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">JSON.stringify()</span></code> の最初の呼び出しは特別だ。関数 <code class="docutils literal notranslate"><span class="pre">replacer</span></code> に対する最初の実引数 <code class="docutils literal notranslate"><span class="pre">key,</span> <span class="pre">value</span></code> はそれぞれ空文字列と <code class="docutils literal notranslate"><span class="pre">JSON.stringify()</span></code> の実引数のほうの
<code class="docutils literal notranslate"><span class="pre">value</span></code> に等しい。</p>
</section>
<section id="formatting-spacepp">
<h3>Formatting: <code class="docutils literal notranslate"><span class="pre">spacePP</span></code><a class="headerlink" href="#formatting-spacepp" title="Permalink to this heading">¶</a></h3>
<p>引数 <code class="docutils literal notranslate"><span class="pre">space</span></code> は JSON 文字列における空白文字の個数を制御する数だ。文字列を指定して空白文字列の代わりに出力させることもできる。</p>
</section>
<section id="custom-tojson">
<h3>Custom <code class="docutils literal notranslate"><span class="pre">toJSON</span></code><a class="headerlink" href="#custom-tojson" title="Permalink to this heading">¶</a></h3>
<p>JSON 化される値がメソッド <code class="docutils literal notranslate"><span class="pre">toString()</span></code> を有するならば <code class="docutils literal notranslate"><span class="pre">JSON.stringify()</span></code> はそれを採用する。</p>
</section>
<section id="json-parse">
<h3><code class="docutils literal notranslate"><span class="pre">JSON.parse</span></code><a class="headerlink" href="#json-parse" title="Permalink to this heading">¶</a></h3>
<p>JSON 文字列をオブジェクトに復号するには <code class="docutils literal notranslate"><span class="pre">JSON.parse()</span></code> を用いる。</p>
<p>手書きの JSON の典型的な間違い：</p>
<ul class="simple">
<li><p>キーや文字列型の値を引用符で囲むのを忘れる。</p></li>
<li><p>引用符は二重引用符しか使えない。</p></li>
<li><p>うっかり <code class="docutils literal notranslate"><span class="pre">new</span></code> コンストラクター呼び出し形式のオブジェクトを書いてしまう。</p></li>
</ul>
</section>
<section id="using-reviver">
<h3>Using <code class="docutils literal notranslate"><span class="pre">reviver</span></code><a class="headerlink" href="#using-reviver" title="Permalink to this heading">¶</a></h3>
<p>引数 <code class="docutils literal notranslate"><span class="pre">reviver</span></code> は対応を与える <code class="docutils literal notranslate"><span class="pre">function(key,</span> <span class="pre">value)</span></code> を指定する。符号化のときと同様に、特別に処理したいキーをフィルターするのに用いる。例えば <code class="docutils literal notranslate"><span class="pre">Date</span></code> オブジェクトだった文字列を <code class="docutils literal notranslate"><span class="pre">Date</span></code> に戻すには、自力でそれを処理する。</p>
</section>
<section id="id14">
<h3>Tasks<a class="headerlink" href="#id14" title="Permalink to this heading">¶</a></h3>
<section id="turn-the-object-into-json-and-back">
<h4>Turn the object into JSON and back<a class="headerlink" href="#turn-the-object-into-json-and-back" title="Permalink to this heading">¶</a></h4>
<p>この問題がわからなかったら、読者はどうかしている。</p>
</section>
<section id="exclude-backreferences">
<h4>Exclude backreferences<a class="headerlink" href="#exclude-backreferences" title="Permalink to this heading">¶</a></h4>
<p>与えられたオブジェクト <code class="docutils literal notranslate"><span class="pre">meetup</span></code> をそのまま <code class="docutils literal notranslate"><span class="pre">JSON.stringify()</span></code> に渡すと、エラーメッセージに循環参照の場所が示される。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code> が空文字列であるかどうかのテストが必要だ。最初の呼び出しであるかどうかをチェックするためだ。</p></li>
<li><p>あとは指示通りに <code class="docutils literal notranslate"><span class="pre">value</span></code> と <code class="docutils literal notranslate"><span class="pre">meetup</span></code> との比較をすればいい。</p></li>
</ul>
</section>
</section>
</section>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="04-object-basics.html" title="Previous document">Objects: the basics</a>
        </li>
        <li>
          <a href="06-advanced-functions.html" title="Next document">Advanced working with functions</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">読書ノート</a></h1>



<p class="blurb">個人的な読書、学習、研究ノート。</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../mathseminar72.html">数学 100 の発見 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gamma95/index.html">オブジェクト指向における再利用のためのデザインパターン改訂版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hunt00/index.html">達人プログラマー 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sutter00.html">Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../alexandrescu01/index.html">Modern C++ Design 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../meyers01.html">Effective STL 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sutter02.html">More Exceptional C++ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../joel04/index.html">Joel on Software 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../graham04.html">ハッカーと画家 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../angel05/index.html">OpenGL: A Primer Second Edition 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../yamamoto05/index.html">入門 xyzzy 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../newham05/index.html">入門 bash 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tsuboi05/index.html">幾何学 I 多様体入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../subramaniam06.html">アジャイルプラクティス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../asaoka06.html">SE・製造技術者・理工系学生のための技術文書の作り方・書き方 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../levin06/index.html">Shaping Functions 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tsuboi08/index.html">幾何学 III 微分形式 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../loeliger09.html">実用 Git 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../griffiths10.html">プログラミング C# 第 6 版 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../onodera10.html">ORACLE MASTER Bronze 11g SQL 基礎 I 必修教本 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hosoda10/index.html">Python 入門［２＆３対応］読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nishiyama12/index.html">幾何学と不変量 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../omg15/index.html">Unified Modeling Language 2.5 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gorelick14.html">ハイパフォーマンス Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stroustrup14.html">C++ のエッセンス 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stepanov15.html">その数式、プログラムできますか？ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../khronos15/index.html">WebGL Specification 1.0 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vivo15/index.html">The Book of Shaders 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../saha16.html">Python からはじめる数学入門 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../slatkin16.html">Effective Python 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../guntheroth16.html">Optimized C++ 下読みノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../speinellis17.html">Effective Debugging 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bancila18.html">Modern C++ チャレンジ 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../haverbeke18/index.html">Eloquent JavaScript 読書ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../khronos18/index.html">OpenGL Shading Language 4.60 Specification 読書ノート</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">The Modern JavaScript Tutorial 読書ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2014.html">ノート準備中書籍群 2014 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2015.html">ノート準備中書籍群 2015 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2016.html">ノート準備中書籍群 2016 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2017.html">ノート準備中書籍群 2017 年編</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../preliminary2018.html">ノート準備中書籍群 2018 年編</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../bash-v2.html">What’s New In Bash 2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bash-v3.html">What’s New In Bash 3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bash-v4.html">What’s New In Bash 4 ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../cpp11/index.html">What’s New In C++11 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp14/index.html">What’s New In C++14 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cpp17/index.html">What’s New In C++17 ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.0.html">What’s New In Python 3.0 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.1.html">What’s New In Python 3.1 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.2.html">What’s New In Python 3.2 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.3.html">What’s New In Python 3.3 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.4.html">What’s New In Python 3.4 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.5.html">What’s New In Python 3.5 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.6.html">What’s New In Python 3.6 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.7.html">What’s New In Python 3.7 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.8.html">What’s New In Python 3.8 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.9.html">What’s New In Python 3.9 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-3.10.html">What’s New In Python 3.10 ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pip.html">pip 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pylint.html">Pylint 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-docutils/index.html">Docutils 解読ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-restview.html">Restview 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-nose.html">Nose 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-ipython.html">IPython 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-jupyter.html">Jupyter 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-numpy/index.html">NumPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-scipy/index.html">SciPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-sympy/index.html">SymPy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-apgl.html">Another Python Graph Library (APGL) 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pil.html">PIL 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pillow.html">Pillow 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-matplotlib/index.html">Matplotlib 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-networkx/index.html">NetworkX 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-quaternion.html">Quaternion 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-jinja2.html">Jinja2 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pygments.html">Pygments 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-bs4.html">BeautifulSoup4 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-selenium.html">Selenium 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-scrapy.html">Scrapy 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-twitter/index.html">Python Twitter Tools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-isbn-hyphenate.html">isbn-hyphenate 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pyopengl/index.html">PyOpenGL 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pyqt4.html">PyQt4 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pyqt5.html">PyQt5 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pandas/index.html">Pandas 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pygame.html">Pygame 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-pytube.html">Pytube 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-py2exe.html">Py2exe 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-upgrade.html">Python 移行ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python-miniconda.html">Miniconda 利用ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../freeware.html">Windows 用フリーウェア 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../google-ime.html">Google 日本語入力利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deepl-translator.html">DeepL Translator 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../winget.html">Windows Package Manager CLI 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../powertoys/index.html">Microsoft PowerToys 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../windows-terminal.html">Windows Terminal 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../wsl.html">Windows Subsystem for Linux 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vscode/index.html">Visual Studio Code 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cygwin.html">Cygwin 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chrome.html">Chrome DevTools 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../git/index.html">Git 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../twitter.html">Twitter 利用ノート [obsolete]</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../inkscape/index.html">Inkscape 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mathjax.html">MathJax 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../javascript-mermaid/index.html">Mermaid 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../css-selector.html">CSS セレクター学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xpath.html">XPath 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../hxutils.html">HTML-XML-utils 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../webgl.html">WebGL 学習ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pandoc.html">Pandoc 利用ノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../zoom.html">Zoom Cloud Meetings 利用ノート</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../milestone09/index.html">ラジルギノア プレイノート</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">The Modern JavaScript Tutorial 読書ノート</a><ul>
  <li><a href="index.html">Part 1 The JavaScript language</a><ul>
      <li>Previous: <a href="04-object-basics.html" title="previous chapter">Objects: the basics</a></li>
      <li>Next: <a href="06-advanced-functions.html" title="next chapter">Advanced working with functions</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="../../_static/logos.png"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2023, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>