
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>クラス docutils.nodes.Node &#8212; 読書ノート v1.5dev</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/prefab.css" />
    
    <script src="../_static/mathjax-v3.js"></script>
    <script src="../_static/mermaid.js"></script>
    
    <link rel="next" title="クラス docutils.nodes.NodeVisitor" href="visitor.html" />
    <link rel="prev" title="サブパッケージ docutils.languages" href="languages.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="visitor.html" title="クラス docutils.nodes.NodeVisitor"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="languages.html" title="サブパッケージ docutils.languages"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">読書ノート</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Docutils 解読ノート</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">クラス <code class="docutils literal notranslate"><span class="pre">docutils.nodes.Node</span></code></a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <section id="docutils-nodes-node">
<h1><a class="toc-backref" href="#id7">クラス <code class="docutils literal notranslate"><span class="pre">docutils.nodes.Node</span></code></a><a class="headerlink" href="#docutils-nodes-node" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://docutils.sourceforge.io/">Docutils</a> では reStructuredText 形式のデータを処理するために、中間形式として木構造のオブジェクト群を組み立てる。この木のオブジェクトの型を定義する一連のクラスは <code class="docutils literal notranslate"><span class="pre">Node</span></code> というスーパークラスを継承の始点とする。これらのスーパークラスとサブクラスは全てモジュール <code class="docutils literal notranslate"><span class="pre">docutils.nodes</span></code> で定義されている。本節ではデータ構造を中心に、ノード群の設計を解読していく。ただし、各具象ノードの構造までは深く立ち入らないで、別の節で検討したい。例えばノードオブジェクトの処理方法については、次節 <a class="reference internal" href="visitor.html"><span class="doc">クラス docutils.nodes.NodeVisitor</span></a> で解読していく。</p>
<div class="contents topic" id="id1">
<p class="topic-title">ノート目次</p>
<ul class="simple">
<li><p><a class="reference internal" href="#docutils-nodes-node" id="id7">クラス <code class="docutils literal notranslate"><span class="pre">docutils.nodes.Node</span></code></a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id8">クラス図</a></p></li>
<li><p><a class="reference internal" href="#node" id="id9">クラス <code class="docutils literal notranslate"><span class="pre">Node</span></code></a></p>
<ul>
<li><p><a class="reference internal" href="#id3" id="id10">メンバーデータ</a></p></li>
<li><p><a class="reference internal" href="#id4" id="id11">メンバーメソッド</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id5" id="id12">サブクラス</a></p>
<ul>
<li><p><a class="reference internal" href="#admonition" id="id13">クラス <code class="docutils literal notranslate"><span class="pre">Admonition</span></code></a></p></li>
<li><p><a class="reference internal" href="#backlinkable" id="id14">クラス <code class="docutils literal notranslate"><span class="pre">BackLinkable</span></code></a></p></li>
<li><p><a class="reference internal" href="#bibliographic" id="id15">クラス <code class="docutils literal notranslate"><span class="pre">Bibliographic</span></code></a></p></li>
<li><p><a class="reference internal" href="#body" id="id16">クラス <code class="docutils literal notranslate"><span class="pre">Body</span></code></a></p></li>
<li><p><a class="reference internal" href="#decorative" id="id17">クラス <code class="docutils literal notranslate"><span class="pre">Decorative</span></code></a></p></li>
<li><p><a class="reference internal" href="#fixedtextelement" id="id18">クラス <code class="docutils literal notranslate"><span class="pre">FixedTextElement</span></code></a></p></li>
<li><p><a class="reference internal" href="#general" id="id19">クラス <code class="docutils literal notranslate"><span class="pre">General</span></code></a></p></li>
<li><p><a class="reference internal" href="#inline" id="id20">クラス <code class="docutils literal notranslate"><span class="pre">Inline</span></code></a></p></li>
<li><p><a class="reference internal" href="#invisible" id="id21">クラス <code class="docutils literal notranslate"><span class="pre">Invisible</span></code></a></p></li>
<li><p><a class="reference internal" href="#labeled" id="id22">クラス <code class="docutils literal notranslate"><span class="pre">Labeled</span></code></a></p></li>
<li><p><a class="reference internal" href="#part" id="id23">クラス <code class="docutils literal notranslate"><span class="pre">Part</span></code></a></p></li>
<li><p><a class="reference internal" href="#prebibliographic" id="id24">クラス <code class="docutils literal notranslate"><span class="pre">PreBibliographic</span></code></a></p></li>
<li><p><a class="reference internal" href="#referential" id="id25">クラス <code class="docutils literal notranslate"><span class="pre">Referential</span></code></a></p></li>
<li><p><a class="reference internal" href="#resolvable" id="id26">クラス <code class="docutils literal notranslate"><span class="pre">Resolvable</span></code></a></p></li>
<li><p><a class="reference internal" href="#root" id="id27">クラス <code class="docutils literal notranslate"><span class="pre">Root</span></code></a></p></li>
<li><p><a class="reference internal" href="#sequential" id="id28">クラス <code class="docutils literal notranslate"><span class="pre">Sequential</span></code></a></p></li>
<li><p><a class="reference internal" href="#special" id="id29">クラス <code class="docutils literal notranslate"><span class="pre">Special</span></code></a></p></li>
<li><p><a class="reference internal" href="#structural" id="id30">クラス <code class="docutils literal notranslate"><span class="pre">Structural</span></code></a></p></li>
<li><p><a class="reference internal" href="#targetable" id="id31">クラス <code class="docutils literal notranslate"><span class="pre">Targetable</span></code></a></p></li>
<li><p><a class="reference internal" href="#titular" id="id32">クラス <code class="docutils literal notranslate"><span class="pre">Titular</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id6" id="id33">感想</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="id2">
<h2><a class="toc-backref" href="#id8">クラス図</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>まずは抽象クラス <code class="docutils literal notranslate"><span class="pre">Node</span></code> を継承グラフの始点とする簡単なクラス図を示す。ただし、本来は具象クラスが 98 個もあるにもかかわらず、一枚の図に全てを掲載することは紙幅の都合上避ける。また、理解し易さを優先するべく、説明の目的とは外れた関係、属性の記載を省略している。</p>
<div align="center" class="mermaid align-center">
            classDiagram
    direction TB
        Node &lt;|-- Text
            Text &lt;|-- ConcreteText
        Node &lt;|-- Element
            Element &lt;|-- ConcreteElement

        Root &lt;|-- document
        Structural &lt;|-- document
        Element &lt;|-- document

        %% ロールを書きたい。
        Node --&gt; Node: parent
        Node --&gt; document: document
        Element *-- Element: children

    class Node{
        +str source
        +int line
        +copy()* Node
        +deepcopy()* Node
        +astext()* str
        #setup_child(Node)
        +walk(NodeVisitor)
        +walkabout(NodeVisitor)
        +traverse(...)
        +next_node(...) Node
    }

    class Text{
        +shortexpr(int) str
        +copy() Text
        +deepcopy() Text
    }

    class Element{
        +astext() str
        +shortexpr(int) str
        +starttag(...) str
        +endtag(...) str
        +emptytag() str
        +copy() Element
        +deepcopy() Element
    }

    class document{
        +copy() document
    }

        </div>
        <ul class="simple">
<li><p>クラス名が普通なもの (CamelCase) は抽象クラスまたは補助クラス。</p></li>
<li><p>クラス名が小文字ベースなもの (snake_case) は対応する名前の XML 要素的なものにマッチする。</p></li>
<li><p>ノードの位置は抽象クラスにより表現される？</p></li>
<li><p>全ての具象ノードクラスの名前はリストオブジェクト <code class="docutils literal notranslate"><span class="pre">doutils.nodes.node_class_names</span></code> で確認可能。クラス <code class="docutils literal notranslate"><span class="pre">NodeVisitor</span></code> の宣言直前に書いてある。</p></li>
</ul>
</section>
<section id="node">
<h2><a class="toc-backref" href="#id9">クラス <code class="docutils literal notranslate"><span class="pre">Node</span></code></a><a class="headerlink" href="#node" title="Permalink to this headline">¶</a></h2>
<p>クラス <code class="docutils literal notranslate"><span class="pre">Node</span></code> はドキュメントツリーの全ノードクラスの抽象クラスだ。</p>
<section id="id3">
<h3><a class="toc-backref" href="#id10">メンバーデータ</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>これらはクラススコープで宣言されているが、実際はむしろオブジェクトデータとして参照されるもよう。</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">Node.parent</span></code></dt><dd><p>このノードを直下に含むノードへの参照。メソッド <code class="docutils literal notranslate"><span class="pre">setup_child</span></code> を見ると、実体はノードオブジェクトらしい。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Node.document</span></code></dt><dd><p>このノードの所属するドキュメントツリーのルートノードということだ。実体はクラス <code class="docutils literal notranslate"><span class="pre">document</span></code> のオブジェクトだ。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Node.source</span></code></dt><dd><p>このノードを生成した入力元のファイルパスまたは説明文を示す文字列。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">Node.line</span></code></dt><dd><p>このノードに対応する文字列の開始位置が <code class="docutils literal notranslate"><span class="pre">source</span></code> の何行目にあるかを示す正の整数。</p>
</dd>
</dl>
</section>
<section id="id4">
<h3><a class="toc-backref" href="#id11">メンバーメソッド</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">__bool__(self)</span></code></dt><dd><p>ノードオブジェクトを if 文に置いた時に真を返すようにしたいので、これがある。メソッド <code class="docutils literal notranslate"><span class="pre">traverse</span></code> を見ればわかる。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">copy(self)</span></code>, <code class="docutils literal notranslate"><span class="pre">deepcopy(self)</span></code></dt><dd><p>オーバーライド専用メソッド。デフォルトの実装はいつもの <code class="docutils literal notranslate"><span class="pre">raise</span> <span class="pre">NotImplementedError</span></code> だ。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">copy</span></code> をオーバーライドするのはサブクラス <code class="docutils literal notranslate"><span class="pre">Text</span></code>, <code class="docutils literal notranslate"><span class="pre">Element</span></code>, <code class="docutils literal notranslate"><span class="pre">document</span></code>, <code class="docutils literal notranslate"><span class="pre">pending</span></code> だけ。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deepcopy</span></code> をオーバーライドするのはサブクラス <code class="docutils literal notranslate"><span class="pre">Text</span></code>, <code class="docutils literal notranslate"><span class="pre">Element</span></code> だけ。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">walk(self,</span> <span class="pre">visitor)</span></code>, <code class="docutils literal notranslate"><span class="pre">walkabout(self,</span> <span class="pre">visitor)</span></code></dt><dd><p>これらは <a class="reference internal" href="visitor.html"><span class="doc">クラス docutils.nodes.NodeVisitor</span></a> で解説する。</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">traverse(self,</span> <span class="pre">condition=None,</span> <span class="pre">include_self=True,</span> <span class="pre">descend=True,</span> <span class="pre">siblings=False,</span> <span class="pre">ascend=False)</span></code></dt><dd><p>このノードツリーに対して、引数で指示したようなノードオブジェクトを含むリストオブジェクトを返す。キーワード引数の意味は、型が <code class="docutils literal notranslate"><span class="pre">bool</span></code> なものはその名前の示すとおり。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">condition</span></code> が特殊。述語関数を渡す場合と、ノードのサブクラスを型として渡す場合がある。いずれにせよ、このメソッドは <code class="docutils literal notranslate"><span class="pre">condition(n)</span></code> が真となるノード <code class="docutils literal notranslate"><span class="pre">n</span></code> をかき集める。</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">next_node(self,</span> <span class="pre">condition=None,</span> <span class="pre">include_self=False,</span> <span class="pre">descend=True,</span> <span class="pre">siblings=False,</span> <span class="pre">ascend=False)</span></code></dt><dd><p><code class="docutils literal notranslate"><span class="pre">self.traverse(...)[0]</span></code> または <code class="docutils literal notranslate"><span class="pre">None</span></code> を返す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">include_self=False</span></code> がデフォルト値なので注意。</p></li>
</ul>
</dd>
</dl>
</section>
</section>
<section id="id5">
<h2><a class="toc-backref" href="#id12">サブクラス</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>差し当たり <code class="docutils literal notranslate"><span class="pre">Text</span></code>, <code class="docutils literal notranslate"><span class="pre">Element</span></code>, <code class="docutils literal notranslate"><span class="pre">document</span></code> が Docutils の設計を読み解くのに特に重要なサブクラスだろう。</p>
<ul>
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">Text</span></code> はノードツリーの末端オブジェクトになる。子ノードも属性も存在しない。オブジェクトのコピーが可能。</p></li>
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">Element</span></code> がノードツリーのオブジェクトの基本機能、子ノードと属性値へのアクセスのためのインターフェイスを提供する。オブジェクトのコピーが可能。</p>
<p>このクラスそれ自体もいずれ解読したい。</p>
</li>
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">document</span></code> はドキュメントツリーのルートノードのための型だ。</p>
<p>これは解読するなら別ページにしたい。</p>
</li>
</ul>
</li>
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">Element</span></code> の下には大量のサブクラスが存在するが、インターフェイスが新規に追加されていることはほぼない。代わりに Visitor がその辺を賄うという設計だ。</p></li>
<li><p>一般に、ノードオブジェクトを生成するのはクラス <code class="docutils literal notranslate"><span class="pre">State</span></code> のサブクラスのそれぞれのメソッドとなる。入力の reStructuredText データを一行一行構文解析すると同時に、順次オブジェクトを生成する。</p>
<p>例えば <code class="docutils literal notranslate"><span class="pre">doctest_block</span></code> オブジェクトを生成するのは、クラス <code class="docutils literal notranslate"><span class="pre">docutils.parsers.rst.states.Body</span></code> のメソッド <code class="docutils literal notranslate"><span class="pre">doctest</span></code> による。生成したオブジェクトをメンバーデータであるオブジェクト <code class="docutils literal notranslate"><span class="pre">parent</span></code> に収納する。</p>
</li>
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">Element</span></code> の継承グラフの最下層クラス群は名前が snake_case になっている。固有のコードが存在しないクラスの多重継承を多用している。</p></li>
</ul>
<section id="admonition">
<h3><a class="toc-backref" href="#id13">クラス <code class="docutils literal notranslate"><span class="pre">Admonition</span></code></a><a class="headerlink" href="#admonition" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>直接のスーパークラスは <code class="docutils literal notranslate"><span class="pre">Body</span></code> ひとつ。</p></li>
<li><p>このクラス固有のコードがない。例外クラスの定義よろしく単に <code class="docutils literal notranslate"><span class="pre">pass</span></code> してあるだけだ。</p></li>
<li><p>直接のサブクラスは次のものがある。
<code class="docutils literal notranslate"><span class="pre">attention</span></code>, <code class="docutils literal notranslate"><span class="pre">caution</span></code>, <code class="docutils literal notranslate"><span class="pre">danger</span></code>, <code class="docutils literal notranslate"><span class="pre">error</span></code>, <code class="docutils literal notranslate"><span class="pre">important</span></code>,
<code class="docutils literal notranslate"><span class="pre">note</span></code>, <code class="docutils literal notranslate"><span class="pre">tip</span></code>, <code class="docutils literal notranslate"><span class="pre">hint</span></code>, <code class="docutils literal notranslate"><span class="pre">warning</span></code>, <code class="docutils literal notranslate"><span class="pre">admonition</span></code> 以上。</p>
<ul>
<li><p>これらのサブクラスにも固有のコードがない。</p></li>
<li><p>これらのサブクラスにはもう一つだけスーパークラスを持つ。すなわち <code class="docutils literal notranslate"><span class="pre">Element</span></code> だ。</p></li>
</ul>
</li>
</ul>
</section>
<section id="backlinkable">
<h3><a class="toc-backref" href="#id14">クラス <code class="docutils literal notranslate"><span class="pre">BackLinkable</span></code></a><a class="headerlink" href="#backlinkable" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>このクラスにはスーパークラスがない。</p></li>
<li><p>このクラス固有のコードがない。</p></li>
<li><p>直接のサブクラスは次のものがある。
<code class="docutils literal notranslate"><span class="pre">footnote</span></code>, <code class="docutils literal notranslate"><span class="pre">citation</span></code> そして <code class="docutils literal notranslate"><span class="pre">system_message</span></code> だ。</p>
<ul>
<li><p>これらのサブクラスは必ず <code class="docutils literal notranslate"><span class="pre">Element</span></code> をもスーパークラスに持つ。</p></li>
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">footnote</span></code> と <code class="docutils literal notranslate"><span class="pre">citation</span></code> には固有のコードがない。</p></li>
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">system_message</span></code> は少々特殊な用途があるようだ。</p></li>
</ul>
</li>
</ul>
</section>
<section id="bibliographic">
<h3><a class="toc-backref" href="#id15">クラス <code class="docutils literal notranslate"><span class="pre">Bibliographic</span></code></a><a class="headerlink" href="#bibliographic" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>このクラスにはスーパークラスがない。</p></li>
<li><p>固有のコードもない。</p></li>
<li><p>直接のサブクラスは次のものがある。
<code class="docutils literal notranslate"><span class="pre">docinfo</span></code>, <code class="docutils literal notranslate"><span class="pre">author</span></code>, <code class="docutils literal notranslate"><span class="pre">authors</span></code>, <code class="docutils literal notranslate"><span class="pre">organization</span></code>, <code class="docutils literal notranslate"><span class="pre">address</span></code>,
<code class="docutils literal notranslate"><span class="pre">contact</span></code>, <code class="docutils literal notranslate"><span class="pre">version</span></code>, <code class="docutils literal notranslate"><span class="pre">revision</span></code>, <code class="docutils literal notranslate"><span class="pre">status</span></code>, <code class="docutils literal notranslate"><span class="pre">date</span></code>, <code class="docutils literal notranslate"><span class="pre">copyright</span></code> 以上。</p>
<ul>
<li><p>いずれのサブクラスも固有のコードがない。</p></li>
<li><p>いずれもあと一つスーパークラスを持つ。
<code class="docutils literal notranslate"><span class="pre">Element</span></code>, <code class="docutils literal notranslate"><span class="pre">TextElement</span></code> または <code class="docutils literal notranslate"><span class="pre">FixedTextElement</span></code> に限る。</p></li>
</ul>
</li>
</ul>
</section>
<section id="body">
<h3><a class="toc-backref" href="#id16">クラス <code class="docutils literal notranslate"><span class="pre">Body</span></code></a><a class="headerlink" href="#body" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>このクラスにはスーパークラスがない。</p></li>
<li><p>固有のコードもない。</p></li>
<li><p>直接のサブクラスは次のものがある。
<code class="docutils literal notranslate"><span class="pre">General</span></code>, <code class="docutils literal notranslate"><span class="pre">Sequential</span></code>, <code class="docutils literal notranslate"><span class="pre">Admonition</span></code>, <code class="docutils literal notranslate"><span class="pre">Special</span></code> 以上。</p>
<ul>
<li><p>いずれのサブクラスも固有のコードがない。</p></li>
<li><p>いずれのサブクラスも <code class="docutils literal notranslate"><span class="pre">Body</span></code> 以外のスーパークラスがない。</p></li>
</ul>
</li>
</ul>
</section>
<section id="decorative">
<h3><a class="toc-backref" href="#id17">クラス <code class="docutils literal notranslate"><span class="pre">Decorative</span></code></a><a class="headerlink" href="#decorative" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>直接のスーパークラスは <code class="docutils literal notranslate"><span class="pre">PreBibliographic</span></code> ただ一つだ。</p></li>
<li><p>固有のコードがない。</p></li>
<li><p>直接のサブクラスは次のとおり。
<code class="docutils literal notranslate"><span class="pre">decoration</span></code>, <code class="docutils literal notranslate"><span class="pre">header</span></code>, <code class="docutils literal notranslate"><span class="pre">footer</span></code> の三つ。</p>
<ul>
<li><p>どのサブクラスも、もう一つのスーパークラスとして <code class="docutils literal notranslate"><span class="pre">Element</span></code> を継承する。</p></li>
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">decoration</span></code> は小文字クラスにしては珍しく固有のメソッドがある。すなわち <code class="docutils literal notranslate"><span class="pre">get_header</span></code> と <code class="docutils literal notranslate"><span class="pre">get_footer</span></code> だ。どちらも子ノード列の先頭と末尾要素へのアクセスに他ならない。一方、クラス <code class="docutils literal notranslate"><span class="pre">header</span></code> と <code class="docutils literal notranslate"><span class="pre">footer</span></code> には固有のコードがない。</p></li>
</ul>
</li>
</ul>
</section>
<section id="fixedtextelement">
<h3><a class="toc-backref" href="#id18">クラス <code class="docutils literal notranslate"><span class="pre">FixedTextElement</span></code></a><a class="headerlink" href="#fixedtextelement" title="Permalink to this headline">¶</a></h3>
<p>クラス <code class="docutils literal notranslate"><span class="pre">FixedTextElement</span></code> は書式化済みのテキストを直接含む要素ということだ。</p>
<ul class="simple">
<li><p>スーパークラスは <code class="docutils literal notranslate"><span class="pre">TextElement</span></code> ただ一つ。</p></li>
<li><p>サブクラスとしては次のものがある。
<code class="docutils literal notranslate"><span class="pre">address</span></code>, <code class="docutils literal notranslate"><span class="pre">literal_block</span></code>, <code class="docutils literal notranslate"><span class="pre">doctest_block</span></code>, <code class="docutils literal notranslate"><span class="pre">math_block</span></code>,
<code class="docutils literal notranslate"><span class="pre">comment</span></code>, <code class="docutils literal notranslate"><span class="pre">raw</span></code> 以上。</p>
<ul>
<li><p>各サブクラスの他のスーパークラスとしては色々なパターンがある。</p></li>
<li><p>どのサブクラスにも固有のコードがない。</p></li>
</ul>
</li>
<li><p>メンバーとしては <code class="docutils literal notranslate"><span class="pre">__init__</span></code> がオーバーライド定義されていて、常に <code class="docutils literal notranslate"><span class="pre">xml:space</span></code> 属性値が <code class="docutils literal notranslate"><span class="pre">preserve</span></code> に設定済みになる。</p></li>
</ul>
</section>
<section id="general">
<h3><a class="toc-backref" href="#id19">クラス <code class="docutils literal notranslate"><span class="pre">General</span></code></a><a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>スーパークラスは <code class="docutils literal notranslate"><span class="pre">Body</span></code> ただ一つ。</p></li>
<li><p>固有のコードがない。</p></li>
<li><p>サブクラスはかなりのものがある。
<code class="docutils literal notranslate"><span class="pre">paragraph</span></code>, <code class="docutils literal notranslate"><span class="pre">compound</span></code>, <code class="docutils literal notranslate"><span class="pre">container</span></code>, <code class="docutils literal notranslate"><span class="pre">literal_block</span></code>, <code class="docutils literal notranslate"><span class="pre">doctest_block</span></code>,
<code class="docutils literal notranslate"><span class="pre">math_block</span></code>, <code class="docutils literal notranslate"><span class="pre">line_block</span></code>, <code class="docutils literal notranslate"><span class="pre">block_quote</span></code>, <code class="docutils literal notranslate"><span class="pre">footnote</span></code>, <code class="docutils literal notranslate"><span class="pre">citation</span></code>,
<code class="docutils literal notranslate"><span class="pre">figure</span></code>, <code class="docutils literal notranslate"><span class="pre">table</span></code>, <code class="docutils literal notranslate"><span class="pre">reference</span></code>, <code class="docutils literal notranslate"><span class="pre">image</span></code> 以上。</p>
<ul>
<li><p>これらのサブクラスは複数のスーパークラスから継承しており、必ず <code class="docutils literal notranslate"><span class="pre">Element</span></code> またはそのサブクラスを派生元リストに含んでいる。</p></li>
</ul>
</li>
</ul>
</section>
<section id="inline">
<h3><a class="toc-backref" href="#id20">クラス <code class="docutils literal notranslate"><span class="pre">Inline</span></code></a><a class="headerlink" href="#inline" title="Permalink to this headline">¶</a></h3>
<p>文書中のインライン要素をマークアップするためのクラス群の共通スーパークラス。</p>
<ul class="simple">
<li><p>スーパークラスおよび固有のコードがない。</p></li>
<li><p>サブクラスが多数ある。</p>
<ul>
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">image</span></code> を除いて、いずれもクラス <code class="docutils literal notranslate"><span class="pre">TextElement</span></code> からも派生している。</p></li>
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">image</span></code> を除いて、まともなコードがない。
<code class="docutils literal notranslate"><span class="pre">image</span></code> にはメソッド <code class="docutils literal notranslate"><span class="pre">astext</span></code> が <code class="docutils literal notranslate"><span class="pre">Element</span></code> からオーバーライドされている。</p></li>
</ul>
</li>
</ul>
</section>
<section id="invisible">
<h3><a class="toc-backref" href="#id21">クラス <code class="docutils literal notranslate"><span class="pre">Invisible</span></code></a><a class="headerlink" href="#invisible" title="Permalink to this headline">¶</a></h3>
<p>出力には現れることのない内部要素のためのスーパークラス。</p>
<ul class="simple">
<li><p>スーパークラスは <code class="docutils literal notranslate"><span class="pre">PreBibliographic</span></code> だ。</p></li>
<li><p>このクラスには固有のコードがない。</p></li>
<li><p>サブクラスは次のとおり。
<code class="docutils literal notranslate"><span class="pre">comment</span></code>, <code class="docutils literal notranslate"><span class="pre">substitution_definition</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">pending</span></code> の以上だ。</p>
<ul>
<li><p>いずれのサブクラスも複数のスーパークラスから派生している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pending</span></code> を除いてクラスに固有のコードがない。</p></li>
</ul>
</li>
</ul>
</section>
<section id="labeled">
<h3><a class="toc-backref" href="#id22">クラス <code class="docutils literal notranslate"><span class="pre">Labeled</span></code></a><a class="headerlink" href="#labeled" title="Permalink to this headline">¶</a></h3>
<p>これは最初の要素として <code class="docutils literal notranslate"><span class="pre">label</span></code> を含む要素を表すスーパークラスだ。</p>
<ul class="simple">
<li><p>スーパークラスもコードもない空のクラス。</p></li>
<li><p>サブクラスは <code class="docutils literal notranslate"><span class="pre">footnote</span></code> と <code class="docutils literal notranslate"><span class="pre">citation</span></code> の二つ。</p>
<ul>
<li><p>いずれも同じスーパークラス群から派生しており、固有のコードがないことも共通している。</p></li>
</ul>
</li>
</ul>
</section>
<section id="part">
<h3><a class="toc-backref" href="#id23">クラス <code class="docutils literal notranslate"><span class="pre">Part</span></code></a><a class="headerlink" href="#part" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>スーパークラスも固有のコードもない空のクラス。</p></li>
<li><p>サブクラスが大量にある。一例を挙げると <code class="docutils literal notranslate"><span class="pre">list_item</span></code>, <code class="docutils literal notranslate"><span class="pre">definition_list_item</span></code>, <code class="docutils literal notranslate"><span class="pre">term</span></code>,
<code class="docutils literal notranslate"><span class="pre">classifier</span></code>, <code class="docutils literal notranslate"><span class="pre">definition</span></code>,
<code class="docutils literal notranslate"><span class="pre">field</span></code>, <code class="docutils literal notranslate"><span class="pre">field_name</span></code>, <code class="docutils literal notranslate"><span class="pre">field_body</span></code>,
<code class="docutils literal notranslate"><span class="pre">option</span></code>, <code class="docutils literal notranslate"><span class="pre">option_argument</span></code>,
<code class="docutils literal notranslate"><span class="pre">option_group</span></code>, <code class="docutils literal notranslate"><span class="pre">option_list_item</span></code>, <code class="docutils literal notranslate"><span class="pre">option_string</span></code>,
<code class="docutils literal notranslate"><span class="pre">description</span></code>, <code class="docutils literal notranslate"><span class="pre">line</span></code>, <code class="docutils literal notranslate"><span class="pre">attribution</span></code>,
<code class="docutils literal notranslate"><span class="pre">label</span></code>, <code class="docutils literal notranslate"><span class="pre">caption</span></code>,
<code class="docutils literal notranslate"><span class="pre">legend</span></code>, <code class="docutils literal notranslate"><span class="pre">tgroup</span></code>, <code class="docutils literal notranslate"><span class="pre">colspec</span></code>, <code class="docutils literal notranslate"><span class="pre">thead</span></code>,
<code class="docutils literal notranslate"><span class="pre">tbody</span></code>, <code class="docutils literal notranslate"><span class="pre">row</span></code>, <code class="docutils literal notranslate"><span class="pre">entry</span></code> といったところだ。</p>
<ul>
<li><p>いずれももう一つのスーパークラスから派生している。型は <code class="docutils literal notranslate"><span class="pre">Element</span></code> または <code class="docutils literal notranslate"><span class="pre">TextElement</span></code> に限られている。</p></li>
<li><p>基本的にはサブクラス固有のコードはないものが多いが、一部 <code class="docutils literal notranslate"><span class="pre">option</span></code> 系と <code class="docutils literal notranslate"><span class="pre">line</span></code> には若干のコードがある。</p></li>
</ul>
</li>
</ul>
</section>
<section id="prebibliographic">
<h3><a class="toc-backref" href="#id24">クラス <code class="docutils literal notranslate"><span class="pre">PreBibliographic</span></code></a><a class="headerlink" href="#prebibliographic" title="Permalink to this headline">¶</a></h3>
<p>これは <code class="docutils literal notranslate"><span class="pre">Bibliographic</span></code> ノードよりも前の位置に出現する文書要素のためのスーパークラスだ。</p>
<ul class="simple">
<li><p>スーパークラスもコードもない空のクラス。</p></li>
<li><p>サブクラスは次のとおり。
<code class="docutils literal notranslate"><span class="pre">Decorative</span></code>, <code class="docutils literal notranslate"><span class="pre">Invisible</span></code>,
<code class="docutils literal notranslate"><span class="pre">title</span></code>, <code class="docutils literal notranslate"><span class="pre">subtitle</span></code>, <code class="docutils literal notranslate"><span class="pre">system_message</span></code>, <code class="docutils literal notranslate"><span class="pre">raw</span></code> 以上。</p>
<ul>
<li><p>最初の二つのサブクラスは先述のとおり。</p></li>
</ul>
</li>
</ul>
</section>
<section id="referential">
<h3><a class="toc-backref" href="#id25">クラス <code class="docutils literal notranslate"><span class="pre">Referential</span></code></a><a class="headerlink" href="#referential" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>スーパークラスは <code class="docutils literal notranslate"><span class="pre">Resolvable</span></code> ただ一つ。</p></li>
<li><p>コードはない。</p></li>
<li><p>サブクラスは次の三つ。
<code class="docutils literal notranslate"><span class="pre">reference</span></code>, <code class="docutils literal notranslate"><span class="pre">footnote_reference</span></code>, <code class="docutils literal notranslate"><span class="pre">citation_reference</span></code> 以上。</p>
<ul>
<li><p>いずれもスーパークラス <code class="docutils literal notranslate"><span class="pre">Inline</span></code> と <code class="docutils literal notranslate"><span class="pre">TextElement</span></code> から派生している。
<code class="docutils literal notranslate"><span class="pre">reference</span></code> だけはさらに <code class="docutils literal notranslate"><span class="pre">General</span></code> からも派生している。</p></li>
<li><p>サブクラス固有のコードはない。</p></li>
</ul>
</li>
</ul>
</section>
<section id="resolvable">
<h3><a class="toc-backref" href="#id26">クラス <code class="docutils literal notranslate"><span class="pre">Resolvable</span></code></a><a class="headerlink" href="#resolvable" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>スーパークラスはない。</p></li>
<li><p>コードとしてはクラス属性 <code class="docutils literal notranslate"><span class="pre">resolved</span> <span class="pre">=</span> <span class="pre">0</span></code> が定義されているのみ。</p></li>
<li><p>サブクラスは <code class="docutils literal notranslate"><span class="pre">Referential</span></code> と <code class="docutils literal notranslate"><span class="pre">Targetable</span></code> の二つがある。いずれのサブクラスも <code class="docutils literal notranslate"><span class="pre">Resolvable</span></code> 以外のスーパークラスからは派生していない。</p></li>
</ul>
</section>
<section id="root">
<h3><a class="toc-backref" href="#id27">クラス <code class="docutils literal notranslate"><span class="pre">Root</span></code></a><a class="headerlink" href="#root" title="Permalink to this headline">¶</a></h3>
<p>これは構文木の根要素のためだけに存在するクラスと言える。</p>
<ul class="simple">
<li><p>スーパークラスも固有のコードもない。</p></li>
<li><p>サブクラスは <code class="docutils literal notranslate"><span class="pre">document</span></code> ただ一つ。</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">document</span></code> に関しては別の箇所で詳しく見てきたい。</p></li>
</ul>
</li>
</ul>
</section>
<section id="sequential">
<h3><a class="toc-backref" href="#id28">クラス <code class="docutils literal notranslate"><span class="pre">Sequential</span></code></a><a class="headerlink" href="#sequential" title="Permalink to this headline">¶</a></h3>
<p>これは配列のような要素を表すためのスーパークラスとして存在する。</p>
<ul class="simple">
<li><p>スーパークラスは <code class="docutils literal notranslate"><span class="pre">Body</span></code> ただ一つ。</p></li>
<li><p>クラス固有のコードはない。</p></li>
<li><p>サブクラスは次のとおり。
<code class="docutils literal notranslate"><span class="pre">bullet_list</span></code>, <code class="docutils literal notranslate"><span class="pre">enumerated_list</span></code>, <code class="docutils literal notranslate"><span class="pre">definition_list</span></code>,
<code class="docutils literal notranslate"><span class="pre">field_list</span></code>, <code class="docutils literal notranslate"><span class="pre">option_list</span></code> 以上。</p>
<ul>
<li><p>いずれもクラス <code class="docutils literal notranslate"><span class="pre">Element</span></code> からも派生。</p></li>
<li><p>いずれもクラス固有のコードがない。</p></li>
</ul>
</li>
</ul>
</section>
<section id="special">
<h3><a class="toc-backref" href="#id29">クラス <code class="docutils literal notranslate"><span class="pre">Special</span></code></a><a class="headerlink" href="#special" title="Permalink to this headline">¶</a></h3>
<p>何か特別な要素のためのスーパークラスということだろう。</p>
<ul class="simple">
<li><p>スーパークラスは <code class="docutils literal notranslate"><span class="pre">Body</span></code> ただ一つ。</p></li>
<li><p>クラス固有のコードはない。</p></li>
<li><p>サブクラスは <code class="docutils literal notranslate"><span class="pre">comment</span></code>, <code class="docutils literal notranslate"><span class="pre">substitution_definition</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>,
<code class="docutils literal notranslate"><span class="pre">system_message</span></code>, <code class="docutils literal notranslate"><span class="pre">pending</span></code>, <code class="docutils literal notranslate"><span class="pre">raw</span></code> だ。</p></li>
</ul>
</section>
<section id="structural">
<h3><a class="toc-backref" href="#id30">クラス <code class="docutils literal notranslate"><span class="pre">Structural</span></code></a><a class="headerlink" href="#structural" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>スーパークラスも固有のコードもない。</p></li>
<li><p>サブクラスは次のとおり。
<code class="docutils literal notranslate"><span class="pre">document</span></code>, <code class="docutils literal notranslate"><span class="pre">section</span></code>, <code class="docutils literal notranslate"><span class="pre">topic</span></code>, <code class="docutils literal notranslate"><span class="pre">sidebar</span></code>, <code class="docutils literal notranslate"><span class="pre">transition</span></code> 以上。</p>
<ul>
<li><p>いずれもクラス <code class="docutils literal notranslate"><span class="pre">Element</span></code> からも派生している。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">document</span></code> 以外のいずれのサブクラスにもクラス固有のコードがない。せいぜい docstring が書いてあるだけ。</p></li>
</ul>
</li>
</ul>
</section>
<section id="targetable">
<h3><a class="toc-backref" href="#id31">クラス <code class="docutils literal notranslate"><span class="pre">Targetable</span></code></a><a class="headerlink" href="#targetable" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>直接のスーパークラスは <code class="docutils literal notranslate"><span class="pre">Resolvable</span></code> ただ一つ。</p></li>
<li><p>クラス属性 <code class="docutils literal notranslate"><span class="pre">referenced</span></code> と <code class="docutils literal notranslate"><span class="pre">indirect_reference_name</span></code> を定義する。</p></li>
<li><p>サブクラスは <code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">footnote</span></code>, <code class="docutils literal notranslate"><span class="pre">citation</span></code> の三つ。</p>
<ul>
<li><p>複数のスーパークラスがある。</p></li>
<li><p>クラス固有のコードはない。</p></li>
</ul>
</li>
</ul>
</section>
<section id="titular">
<h3><a class="toc-backref" href="#id32">クラス <code class="docutils literal notranslate"><span class="pre">Titular</span></code></a><a class="headerlink" href="#titular" title="Permalink to this headline">¶</a></h3>
<p>これは見出しに関係する要素のためのスーパークラスだ。</p>
<ul class="simple">
<li><p>スーパークラスも固有のコードもない。</p></li>
<li><p>サブクラスは <code class="docutils literal notranslate"><span class="pre">title</span></code>, <code class="docutils literal notranslate"><span class="pre">subtitle</span></code>, <code class="docutils literal notranslate"><span class="pre">rubric</span></code> の三つ。</p>
<ul>
<li><p>必ず <code class="docutils literal notranslate"><span class="pre">TextElement</span></code> をスーパークラスとする。</p></li>
<li><p>クラス固有のコードはない。</p></li>
</ul>
</li>
</ul>
</section>
</section>
<section id="id6">
<h2><a class="toc-backref" href="#id33">感想</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>文字列 <code class="docutils literal notranslate"><span class="pre">line</span></code> を grep するのがたいへん難しい。</p></li>
<li><p>メソッド <code class="docutils literal notranslate"><span class="pre">Node.traverse</span></code> 系は generator にできるだろうか。</p></li>
<li><p>クラス <code class="docutils literal notranslate"><span class="pre">Element</span></code> における演算子のオーバーロードは注意したい。もしかすると <code class="docutils literal notranslate"><span class="pre">elem</span> <span class="pre">+=</span> <span class="pre">x</span></code> で「要素 <code class="docutils literal notranslate"><span class="pre">x</span></code> を子要素とする」の意味があるかもしれない。</p></li>
<li><p>オブジェクト生成は構文解析時になされるので、ノートが本節で完結しない。</p></li>
<li><p>実はクラス <code class="docutils literal notranslate"><span class="pre">Element</span></code> 以下の継承グラフを DOT で描いてみたのだが、何の省略の工夫もせずにグラフを定義したところ、幅 6000 ピクセル超の画像になってしまった。ブラウザーの画面幅に収まらない図表は使い物にならないので、ボツにした。</p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="visitor.html" title="クラス docutils.nodes.NodeVisitor"
             >next</a></li>
        <li class="right" >
          <a href="languages.html" title="サブパッケージ docutils.languages"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">読書ノート</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Docutils 解読ノート</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">クラス <code class="docutils literal notranslate"><span class="pre">docutils.nodes.Node</span></code></a></li> 
      </ul>
    </div>
    <div id="footer">
      <div id="footer_logo">
        <a class="imga" href="https://showa-yojyo.github.io/" title="プレハブ小屋 Since 1999"><img src="../_static/logos.png" width="88" height="31" /></a>
      </div>
      <div id="footer_copyright">
        Since 1999<br />
        Copyright &copy; 1999-2022, プレハブ小屋 All rights reserved.
      </div>
    </div>
  </body>
</html>