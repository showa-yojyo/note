<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Pull requests documentation ノート &#8212; 読書ノート 1.6dev</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="../_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=c9b0a06a" />
    <script src="../_static/documentation_options.js?v=4354bf25"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/mermaid.js?v=578dbed1"></script>
    <link rel="next" title="GitHub Discussions documentation ノート" href="discussions.html" />
    <link rel="prev" title="Repositories documentation ノート" href="repositories.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
    <div class="related top">
      &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="repositories.html" title="Previous">Repositories documentation ノート</a>
        </li>
      
        <li>
          &uarr;
          <a href="index.html" title="Parent">GitHub Docs 読書ノート</a>
        </li>
        <li>
          <a href="discussions.html" title="Next">GitHub Discussions documentation ノート</a>
          &rarr;
        </li>
    </ul>
  </nav>
    </div>


          <div class="body" role="main">
            
  <section id="pull-requests-documentation">
<h1><a class="toc-backref" href="#id1" role="doc-backlink">Pull requests documentation ノート</a><a class="headerlink" href="#pull-requests-documentation" title="Link to this heading">¶</a></h1>
<p><a class="reference external" href="https://docs.github.com/en/pull-requests">Pull requests documentation</a> は
GitHub が生み出した文化、pull request に関する記述からなる。</p>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#pull-requests-documentation" id="id1">Pull requests documentation ノート</a></p>
<ul>
<li><p><a class="reference internal" href="#committing-changes-to-your-project" id="id2">Committing changes to your project</a></p>
<ul>
<li><p><a class="reference internal" href="#creating-and-editing-commits" id="id3">Creating and editing commits</a></p></li>
<li><p><a class="reference internal" href="#viewing-and-comparing-commits" id="id4">Viewing and comparing commits</a></p></li>
<li><p><a class="reference internal" href="#troubleshooting-commits" id="id5">Troubleshooting commits</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#collaborating-with-pull-requests" id="id6">Collaborating with pull requests</a></p>
<ul>
<li><p><a class="reference internal" href="#getting-started" id="id7">Getting started</a></p></li>
<li><p><a class="reference internal" href="#working-with-forks" id="id8">Working with forks</a></p></li>
<li><p><a class="reference internal" href="#collaborating-on-repositories-with-code-quality-features" id="id9">Collaborating on repositories with code quality features</a></p></li>
<li><p><a class="reference internal" href="#proposing-changes-to-your-work-with-pull-requests" id="id10">Proposing changes to your work with pull requests</a></p></li>
<li><p><a class="reference internal" href="#addressing-merge-conflicts" id="id11">Addressing merge conflicts</a></p></li>
<li><p><a class="reference internal" href="#reviewing-changes-in-pull-requests" id="id12">Reviewing changes in pull requests</a></p></li>
<li><p><a class="reference internal" href="#incorporating-changes-from-a-pull-request" id="id13">Incorporating changes from a pull request</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<ul class="simple">
<li><p><span class="guilabel">Overview</span> は妙に深い節にある <a class="reference internal" href="#pull-requests-overview"><span class="std std-ref">About pull requests</span></a> へ</p></li>
</ul>
<section id="committing-changes-to-your-project">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Committing changes to your project</a><a class="headerlink" href="#committing-changes-to-your-project" title="Link to this heading">¶</a></h2>
<section id="creating-and-editing-commits">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Creating and editing commits</a><a class="headerlink" href="#creating-and-editing-commits" title="Link to this heading">¶</a></h3>
<section id="about-commits">
<h4>About commits<a class="headerlink" href="#about-commits" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>Git assigns each commit a unique ID, called a SHA or hash</p>
</div></blockquote>
<p>ファイルの SHA とは別のものとなる。</p>
<p>この後見ていくもの：</p>
<ul class="simple">
<li><p>締結</p></li>
<li><p>共同作業者</p></li>
<li><p>組織</p></li>
<li><p>コミット順序の変更</p></li>
</ul>
<blockquote>
<div><p>You can see which branch a commit is on by looking at the labels beneath the
commit on the commit page.</p>
</div></blockquote>
<p>リポジトリーページの <span class="guilabel">(number) commits</span> を押し、コミット項目のログメッセージを押す。このページでブランチ名などを確認可能。</p>
<blockquote>
<div><p>If the commit is part of an unmerged pull request, you can click the link to
go to the pull request.</p>
</div></blockquote>
<p>コミットが複数ファイルを含むとき、ページ左側にツリーが表示される。</p>
</section>
<section id="creating-a-commit-with-multiple-authors">
<h4>Creating a commit with multiple authors<a class="headerlink" href="#creating-a-commit-with-multiple-authors" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>You can attribute a commit to more than one author by adding one or more
<code class="docutils literal notranslate"><span class="pre">Co-authored-by</span></code> trailers to the commit’s message.</p>
</div></blockquote>
<p>これは知らなんだ。</p>
<p>共同コミット者の GitHub で通用するメールアドレスを知っている必要がある。例の
<code class="docutils literal notranslate"><span class="pre">no-reply</span></code> アドレスを利用している場合はそれで通す。</p>
<p>Git では共同コミット者を指定するには、コミットログを次のように記入する。空行二つに注意：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bash$ git commit -m &quot;Refactor usability tests.</span>
<span class="go">&gt;</span>
<span class="go">&gt;</span>
<span class="go">&gt; Co-authored-by: NAME &lt;NAME@EXAMPLE.COM&gt;</span>
<span class="go">&gt; Co-authored-by: ANOTHER-NAME &lt;ANOTHER-NAME@EXAMPLE.COM&gt;&quot;</span>
</pre></div>
</div>
<p>GitHub での方法はコミットログ欄で同様の書式を採用するようだ。</p>
</section>
<section id="creating-a-commit-on-behalf-of-an-organization">
<h4>Creating a commit on behalf of an organization<a class="headerlink" href="#creating-a-commit-on-behalf-of-an-organization" title="Link to this heading">¶</a></h4>
<p>割愛。</p>
</section>
<section id="changing-a-commit-message">
<h4>Changing a commit message<a class="headerlink" href="#changing-a-commit-message" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>In Git, the text of the commit message is part of the commit. Changing the
commit message will change the commit ID</p>
</div></blockquote>
<p>GitHub にプッシュする前かつコミット直後なら <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">--amend</span> <span class="pre">-m</span> <span class="pre">MESSAGE</span></code> で事足りる。そうでない場合、ローカルで <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rebase</span> <span class="pre">-i</span></code> などでログメッセージを修正し、プッシュし直す：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bash$ git push --force-with-lease origin BRANCH</span>
</pre></div>
</div>
<blockquote>
<div><p>As before, amending the commit message will result in a new commit with a new
ID. However, in this case, every commit that follows the amended commit will
also get a new ID because each commit also contains the id of its parent.</p>
</div></blockquote>
</section>
</section>
<section id="viewing-and-comparing-commits">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Viewing and comparing commits</a><a class="headerlink" href="#viewing-and-comparing-commits" title="Link to this heading">¶</a></h3>
<section id="comparing-commits">
<h4>Comparing commits<a class="headerlink" href="#comparing-commits" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>To compare different versions of your repository, append <code class="docutils literal notranslate"><span class="pre">/compare</span></code> to your
repository’s path.</p>
</div></blockquote>
<p>例えば <code class="docutils literal notranslate"><span class="pre">https://github.com/octocat/linguist/compare/master...octocat:master</span></code>
のようにする。</p>
<p>比較は <code class="docutils literal notranslate"><span class="pre">base</span></code> と <code class="docutils literal notranslate"><span class="pre">compare</span></code> の対象二つを取る。</p>
<blockquote>
<div><p>The most common use of <code class="docutils literal notranslate"><span class="pre">Compare</span></code> is to compare branches, such as when
you’re starting a new pull request.</p>
</div></blockquote>
<blockquote>
<div><p>To compare branches, you can select a branch name from the <code class="docutils literal notranslate"><span class="pre">compare</span></code> drop
down menu at the top of the page.</p>
</div></blockquote>
<p>タグ同士の比較も普通だ。リリースの差分を確認したい場合がある：</p>
<blockquote>
<div><p>To compare tags, you can select a tag name from the <code class="docutils literal notranslate"><span class="pre">compare</span></code> drop-down
menu at the top of the page.</p>
</div></blockquote>
<p>任意のコミットを比較する場合、URL を直接入力するほうが早い：</p>
<blockquote>
<div><p>For example, this URL uses the shortened seven-character SHA codes to compare
commits <code class="docutils literal notranslate"><span class="pre">f75c570</span></code> and <code class="docutils literal notranslate"><span class="pre">3391dcc</span></code>:
<code class="docutils literal notranslate"><span class="pre">https://github.com/github-linguist/linguist/compare/f75c570..3391dcc</span></code>.</p>
</div></blockquote>
<p>リポジトリーをまたぐ比較もあり得る：</p>
<blockquote>
<div><p>To compare branches on different repositories, preface the branch names with
user names.</p>
</div></blockquote>
</section>
<section id="differences-between-commit-views">
<h4>Differences between commit views<a class="headerlink" href="#differences-between-commit-views" title="Link to this heading">¶</a></h4>
<p>GitHub には次の二つのコミット情報表示方式があり、場合によっては表示が異なる：</p>
<blockquote>
<div><ul class="simple">
<li><p>Navigating directly to the commits page of a repository</p></li>
<li><p>Clicking on a file, then clicking <span class="guilabel">History</span>, to get to the commit
history for a specific file</p></li>
</ul>
</div></blockquote>
</section>
</section>
<section id="troubleshooting-commits">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Troubleshooting commits</a><a class="headerlink" href="#troubleshooting-commits" title="Link to this heading">¶</a></h3>
<section id="commit-exists-on-github-but-not-in-my-local-clone">
<h4>Commit exists on GitHub but not in my local clone<a class="headerlink" href="#commit-exists-on-github-but-not-in-my-local-clone" title="Link to this heading">¶</a></h4>
<p>誰かが <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">push</span> <span class="pre">--force</span></code> した可能性などがある。</p>
<p>まず、念のため <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">fetch</span> <span class="pre">REMOTE</span></code> する。</p>
<blockquote>
<div><p>You can use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">fetch</span> <span class="pre">upstream</span></code> to get information from a repository
you’ve forked, or <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">fetch</span> <span class="pre">origin</span></code> to get information from a repository
you’ve only cloned.</p>
</div></blockquote>
<p>誰かが対象コミットを含むブランチを削除した場合、一時的に当該ブランチを GitHubにプッシュしてもらう：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bash$ git branch recover-B B</span>
<span class="go">bash$ git push upstream B:recover-B</span>
</pre></div>
</div>
<p>その後、他の人が <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">fetch</span> <span class="pre">upstream</span> <span class="pre">recover-B</span></code> する。</p>
<blockquote>
<div><p>Avoid force pushing to a repository unless absolutely necessary. This is
especially true if more than one person can push to the repository.</p>
</div></blockquote>
</section>
<section id="why-are-my-commits-linked-to-the-wrong-user">
<h4>Why are my commits linked to the wrong user?<a class="headerlink" href="#why-are-my-commits-linked-to-the-wrong-user" title="Link to this heading">¶</a></h4>
<p>メールアドレスが関係している。</p>
<blockquote>
<div><p>If your commits are linked to another user, that means the email address in
your local Git configuration settings is connected to that user’s account on
GitHub. In this case, you can change the email in your local Git
configuration settings and add the new email address to your account on
GitHub.com account to link future commits to your account.</p>
</div></blockquote>
<p>アカウント <span class="menuselection">Settings ‣ Emails</span> ページを確認すること。</p>
<p><span class="guilabel">GitHub Commits</span> ページ各項目に自分のコミットに自分の名前が出ない場合は次のどれかになるようだ：</p>
<dl class="simple">
<dt><span class="guilabel">Unrecognized author</span></dt><dd><p>メールありの場合となしの場合で対処が異なる。</p>
</dd>
<dt><span class="guilabel">Invalid email</span></dt><dd><p>これはローカルの、つまり Git の <code class="docutils literal notranslate"><span class="pre">user.email</span></code> 設定がなされていない。</p>
</dd>
</dl>
</section>
</section>
</section>
<section id="collaborating-with-pull-requests">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Collaborating with pull requests</a><a class="headerlink" href="#collaborating-with-pull-requests" title="Link to this heading">¶</a></h2>
<section id="getting-started">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Getting started</a><a class="headerlink" href="#getting-started" title="Link to this heading">¶</a></h3>
<section id="about-collaborative-development-models">
<h4>About collaborative development models<a class="headerlink" href="#about-collaborative-development-models" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>The way you use pull requests depends on the type of development model you
use in your project. You can use the fork and pull model or the shared
repository model.</p>
</div></blockquote>
<p>二つ述べられている：</p>
<ul class="simple">
<li><p>Fork and pull model</p></li>
<li><p>Shared repository model</p></li>
</ul>
<p>ブランチをどのリポジトリーに設けるかが大きな差異であると見立てたが？</p>
</section>
</section>
<section id="working-with-forks">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Working with forks</a><a class="headerlink" href="#working-with-forks" title="Link to this heading">¶</a></h3>
<section id="about-forks">
<h4>About forks<a class="headerlink" href="#about-forks" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>A fork is a new repository that shares code and visibility settings with the
original “upstream” repository.</p>
</div></blockquote>
<p>特徴は次の二点に集約されるか：</p>
<blockquote>
<div><p>After you fork a repository, you can fetch updates from the upstream
repository to keep your fork up to date, and you can propose changes from
your fork to the upstream repository with pull requests.</p>
</div></blockquote>
<p>GitHub 上では、フォークはその川上リポジトリーが名前の下に示される。</p>
<blockquote>
<div><p>After a fork is deleted, you cannot restore the fork.</p>
</div></blockquote>
<p>特に、</p>
<blockquote>
<div><p>If you delete a private repository, all forks of the repository are deleted.</p>
</div></blockquote>
<p>Pull request をしないつもりなら、用意されていればテンプレートから作成する手もある。</p>
</section>
<section id="about-permissions-and-visibility-of-forks">
<h4>About permissions and visibility of forks<a class="headerlink" href="#about-permissions-and-visibility-of-forks" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>If you fork a private repository that belongs to a personal account, external
collaborators also get access to the fork.</p>
</div></blockquote>
<p>これは不思議な感じがある。</p>
<blockquote>
<div><p>You cannot change the visibility of a fork.</p>
</div></blockquote>
<p>こういう概念がある：</p>
<blockquote>
<div><p>All repositories belong to a repository network.</p>
</div></blockquote>
<p>フォークを扱う場合、自分のリポジトリーからのフォークを許可する場合、安全保障上考慮する点がいくつもある。特に、川上リポジトリーの所有者はフォークに対して介入できないと考える方がいい。</p>
<blockquote>
<div><p>The permissions and visibility of forks depend on whether the upstream
repository is public or private, and whether it is owned by an organization.</p>
</div></blockquote>
<p>さっきから次の条件が何かひっかかる：</p>
<blockquote>
<div><p>If you fork a private repository that belongs to a personal account, external
collaborators also get access to the fork.</p>
</div></blockquote>
<p>次の公開リポジトリーに対するフォークの公開性は明瞭：</p>
<blockquote>
<div><p>All forks of public repositories are public. You cannot change the visibility
of a fork.</p>
</div></blockquote>
<p>私設フォークの権限は川上リポジトリーのそれを継承する。ある意味では、川上の権限者はフォークに口出しできるのか？</p>
<blockquote>
<div><p>Private forks inherit the permissions structure of the upstream repository.</p>
</div></blockquote>
</section>
<section id="configuring-a-remote-repository-for-a-fork">
<h4>Configuring a remote repository for a fork<a class="headerlink" href="#configuring-a-remote-repository-for-a-fork" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>You must configure a remote that points to the upstream repository in Git to
sync changes you make in a fork with the original repository.</p>
</div></blockquote>
<p>これは Git の基本なので必ず習得するべし。</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bash$ git remote add upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git</span>
</pre></div>
</div>
</section>
<section id="syncing-a-fork">
<h4>Syncing a fork<a class="headerlink" href="#syncing-a-fork" title="Link to this heading">¶</a></h4>
<p>フォークリポジトリー画面の <span class="guilabel">Sync fork</span> を押す。</p>
<p>ローカルからコマンドで実行する方法がある：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bash$ gh repo sync owner/cli-fork -b BRANCH_NAME</span>
</pre></div>
</div>
<p>Git では（この方法はフォークの意義をよく表していると思う）：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bash$ git fetch upstream</span>
<span class="go">bash$ git checkout main</span>
<span class="go">bash$ git merge upstream/main</span>
</pre></div>
</div>
</section>
<section id="allowing-changes-to-a-pull-request-branch-created-from-a-fork">
<h4>Allowing changes to a pull request branch created from a fork<a class="headerlink" href="#allowing-changes-to-a-pull-request-branch-created-from-a-fork" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>If the pull request author wants greater collaboration, they can grant
maintainers of the upstream repository (that is, anyone with push access to
the upstream repository) permission to commit to the pull request’s compare
branch.</p>
</div></blockquote>
<p>フォーク側が川上に許可をすると読めるが？</p>
<p>GitHub の操作として、Pull request したい人が川上リポジトリーの <span class="guilabel">Pull
requests</span> 画面に行き、対象リクエストの <span class="guilabel">Allow edits from maintainers</span>
を押すらしい？</p>
</section>
<section id="what-happens-to-forks-when-a-repository-is-deleted-or-changes-visibility">
<h4>What happens to forks when a repository is deleted or changes visibility?<a class="headerlink" href="#what-happens-to-forks-when-a-repository-is-deleted-or-changes-visibility" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>When you delete a private repository, all of its private forks are also
deleted.</p>
</div></blockquote>
<p>ただしクローンならば維持される。</p>
<blockquote>
<div><p>When you delete a public repository, one of the existing public forks is
chosen to be the new upstream repository.</p>
</div></blockquote>
<p>この法則はリポジトリーネットワークと関係しているはず。</p>
<blockquote>
<div><p>If a public repository is made private, its public forks are split off into a
new network.</p>
</div></blockquote>
<p>この場合が複雑で、フォーク側の pull request 先が少なくとも本来の川上リポジトリーではなくなる。</p>
</section>
</section>
<section id="collaborating-on-repositories-with-code-quality-features">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Collaborating on repositories with code quality features</a><a class="headerlink" href="#collaborating-on-repositories-with-code-quality-features" title="Link to this heading">¶</a></h3>
<p>ワークフロー品質管理とは？</p>
<section id="about-status-checks">
<h4>About status checks<a class="headerlink" href="#about-status-checks" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>Status checks are based on external processes, such as continuous integration
builds, which run for each push you make to a repository. You can see the
pending, passing, or failing state of status checks next to individual
commits in your pull request.</p>
</div></blockquote>
<p>Pull request 欄に表示されるもので、通常のコミットには現れない？</p>
<blockquote>
<div><p><em>Checks</em> are different from <em>statuses</em> in that they provide line annotations,
more detailed messaging, and are only available for use with GitHub Apps.</p>
</div></blockquote>
<blockquote>
<div><p>When <em>checks</em> are set up in a repository, pull requests have a
<span class="guilabel">Checks</span> tab where you can view detailed build output from status
checks and rerun failed checks.</p>
</div></blockquote>
<p>Pull request 画面の <span class="guilabel">Checks</span> で確認。</p>
<blockquote>
<div><p>When a specific line in a commit causes a check to fail, you will see details
about the failure, warning, or notice next to the relevant code in the
<span class="guilabel">Files</span> tab of the pull request.</p>
</div></blockquote>
<p>コミットの checks を省略させたり、要求させたりすることをコミットログで指示可能。例によって二行の空行の後に指示をする：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bash$ git commit -m &quot;Refactor usability tests</span>
<span class="go">&gt;</span>
<span class="go">&gt;</span>
<span class="go">request-checks: true&quot;</span>
</pre></div>
</div>
</section>
<section id="troubleshooting-required-status-checks">
<h4>Troubleshooting required status checks<a class="headerlink" href="#troubleshooting-required-status-checks" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>After you enable required status checks, your branch may need to be
up-to-date with the base branch before merging.</p>
</div></blockquote>
<blockquote>
<div><p>You won’t be able to push local changes to a protected branch until all
required status checks pass.</p>
</div></blockquote>
<p>手堅い。</p>
<blockquote>
<div><p>Sometimes, the results of the status checks for the test merge commit and
head commit will conflict.</p>
</div></blockquote>
<p>これはプロジェクト進行が怪しいのではないか。</p>
<p>この辺りは後ほど。</p>
</section>
</section>
<section id="proposing-changes-to-your-work-with-pull-requests">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Proposing changes to your work with pull requests</a><a class="headerlink" href="#proposing-changes-to-your-work-with-pull-requests" title="Link to this heading">¶</a></h3>
<p>これが本題なのでは。</p>
<section id="about-branches">
<h4>About branches<a class="headerlink" href="#about-branches" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>Typically, you might create a new branch from the default branch of your
repository. You can then work on this new branch in isolation from changes
that other people are making to the repository. A branch you create to build
a feature is commonly referred to as a feature branch or topic branch.</p>
</div></blockquote>
<p>ブランチは本体から孤立させる役目がある。トピックブランチには同義語が多い。</p>
<blockquote>
<div><p>You can also use a branch to publish a GitHub Pages site.</p>
</div></blockquote>
<p>これは別の章でやる。</p>
<p>次は既定ブランチの定義であり、GitHub 固有の概念と考える方がいい：</p>
<blockquote>
<div><p>The default branch is the branch that GitHub displays when anyone visits your
repository. The default branch is also the initial branch that Git checks out
locally when someone clones the repository.</p>
</div></blockquote>
<p>Pull request を始める：</p>
<blockquote>
<div><p>Once you’re satisfied with your work, you can open a pull request to merge
the changes in the current branch (the head branch) into another branch (the
base branch).</p>
</div></blockquote>
<p>Pull request が完了したら、用済みブランチを削除する。</p>
<p>保護ブランチは、それがなければどういうことがあり得るかを理解するのがいい：</p>
<blockquote>
<div><p>If you’re working on a branch that’s protected, you won’t be able to delete
or force push to the branch.</p>
</div></blockquote>
<p>保護ブランチの性質はたくさんある。次に挙げる項目のうち、最初のもの以外は設定による：</p>
<ul class="simple">
<li><p>ブランチに対する削除、強制 push は不可。</p></li>
<li><p>CI 試験に合格するまでマージ不可。</p></li>
<li><p>評価がなされるまではマージ不可。</p></li>
<li><p>コード所有者が許可するまでマージ不可。</p></li>
<li><p>署名と検証がないものはマージ不可。</p></li>
</ul>
</section>
<section id="creating-and-deleting-branches-within-your-repository">
<h4>Creating and deleting branches within your repository<a class="headerlink" href="#creating-and-deleting-branches-within-your-repository" title="Link to this heading">¶</a></h4>
<p>ブランチを GitHub で作成、削除する方法。割愛。</p>
<blockquote>
<div><p>If the branch you want to delete is associated with an open pull request, you
must merge or close the pull request before deleting the branch.</p>
</div></blockquote>
<p>ブランチに関連する未済 pull requests を道連れに削除する。</p>
</section>
<section id="about-pull-requests">
<span id="pull-requests-overview"></span><h4>About pull requests<a class="headerlink" href="#about-pull-requests" title="Link to this heading">¶</a></h4>
<p>Pull request は次の用途を想定した操作だ：</p>
<ul class="simple">
<li><p>GitHub 上のリポジトリーでブランチに push した変更を他の人に伝える。</p></li>
<li><p>協力者と変更の可能性について議論、確認する。</p></li>
<li><p>変更が base ブランチにマージされる前に、さらに関連コミットを追加する。</p></li>
</ul>
<p>Pull request は GitHub 上の操作なので、Git 単体ではなく GitHub ツールで実施するものだ。</p>
<blockquote>
<div><p>After initializing a pull request, you’ll see a review page that shows a
high-level overview of the changes between your branch (the compare branch)
and the repository’s base branch.</p>
</div></blockquote>
<p>ここで compare と base を術語と捉え、pull requests 関連文書の読み込みを効率的にしたい。</p>
<blockquote>
<div><p>Once you’ve created a pull request, you can push commits from your topic
branch to add them to your existing pull request. These commits will appear
in chronological order within your pull request and the changes will be
visible in the <span class="guilabel">Files changed</span> tab.</p>
</div></blockquote>
<p>ブランチをマージするのが目的なので、コミットは一般に複数あってかまわないということだ。</p>
<p>他の協力者たちはこのようなブランチに対して評価することが可能。コミットを追加することさえ可能。</p>
<blockquote>
<div><p>You can see information about the branch’s current deployment status and past
deployment activity on the <span class="guilabel">Conversation</span> tab.</p>
</div></blockquote>
<p>会話タブで配備状態を確認できるというのは不思議な感じがする？</p>
<blockquote>
<div><p>After you’re happy with the proposed changes, you can merge the pull request.</p>
</div></blockquote>
<p>マージ完了をもってブランチ作成者の目的は果たされる。</p>
<p>Draft pull requests という機能がある：</p>
<blockquote>
<div><p>When you create a pull request, you can choose to create a pull request that
is ready for review or a draft pull request. Draft pull requests cannot be
merged, and code owners are not automatically requested to review draft pull
requests.</p>
</div></blockquote>
<p>マージ可否と審査の有無が通常と下書きの違いだと読める。</p>
<blockquote>
<div><p>The compare and pull request pages use different methods to calculate the
diff for changed files:</p>
</div></blockquote>
<p>差分の違いが少し理解しにくい。評価時は後者の差分を使い、マージ時には前者の差分が本質的ということか？</p>
</section>
<section id="about-comparing-branches-in-pull-requests">
<h4>About comparing branches in pull requests<a class="headerlink" href="#about-comparing-branches-in-pull-requests" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><span class="guilabel">Files changed</span> を押すと差分が表示される画面になる。</p></li>
<li><p>差分表示モードがいくつかある。</p></li>
<li><p>大規模 pull request の概要をつかむために、各種フィルターを利用する。</p></li>
</ul>
<blockquote>
<div><p>There are two comparison methods for the git diff command; two-dot
(<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span> <span class="pre">A..B</span></code>) and three-dot (<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">diff</span> <span class="pre">A...B</span></code>). By default, pull
requests on GitHub show a three-dot diff.</p>
<p>The three-dot comparison shows the difference between the latest common
commit of both branches (merge base) and the most recent version of the topic
branch.</p>
</div></blockquote>
<p>この記述だとまだわかりづらい。</p>
<blockquote>
<div><p>Since the three-dot comparison compares with the merge base, it is focusing
on “what a pull request introduces”.</p>
</div></blockquote>
<blockquote>
<div><p>In contrast, by comparing the branches using the three-dot comparison,
changes in the topic branch are always in the diff if the base branch is
updated, because the diff shows all of the changes since the branches
diverged.</p>
</div></blockquote>
<p>これでようやく理解できる。そしてマージはしょっちゅう行うほうが良い：</p>
<blockquote>
<div><p>To avoid getting confused, merge the base branch (for example, main) into
your topic branch frequently. By merging the base branch, the diffs shown by
two-dot and three-dot comparisons are the same.</p>
</div></blockquote>
</section>
<section id="creating-a-pull-request">
<h4>Creating a pull request<a class="headerlink" href="#creating-a-pull-request" title="Link to this heading">¶</a></h4>
<p>対象リポジトリーに書き込み権限がない場合、それをフォークするところから始める。</p>
<blockquote>
<div><p>Pull requests can only be opened between two branches that are different.</p>
</div></blockquote>
<p>用語を二つ確認する：</p>
<blockquote>
<div><p>When thinking about branches, remember that the <em>base branch</em> is where
changes should be applied, the <em>head branch</em> contains what you would like to
be applied.</p>
</div></blockquote>
<p><span class="guilabel">Compare &amp; pull request</span> ボタンを押す。それから <span class="guilabel">Create Pull
Request</span> を押す。</p>
<p>GitHub CLI でも作成可能だ。コマンドラインオプションにブランチは指定したい：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bash$ gh pr create \</span>
<span class="go">  --base my-base-branch --head my-changed-branch \</span>
<span class="go">  --title &quot;The bug is fixed&quot; \</span>
<span class="go">  --body &quot;Everything works again&quot; \</span>
<span class="go">  --label &quot;bug,help wanted&quot; \</span>
<span class="go">  --reviewer monalisa,hubot</span>
</pre></div>
</div>
</section>
<section id="creating-a-pull-request-from-a-fork">
<h4>Creating a pull request from a fork<a class="headerlink" href="#creating-a-pull-request-from-a-fork" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>If your pull request compares your topic branch with a branch in the upstream
repository as the base branch, then your topic branch is also called the
compare branch of the pull request.</p>
</div></blockquote>
<p>トピックブランチと比較ブランチは同じ概念だと考えて支障はない。</p>
<p>まず、フォーム元リポジトリーページを開く。ファイル一覧の上にあるボタン
<span class="guilabel">Compare &amp; pull request</span> を押す。<span class="guilabel">Open a pull request</span> ページが開く。そこに小さく書いてある <span class="guilabel">compare across forks</span> を押す。</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">base</span></code>: 川上</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">head</span></code>: compare ブランチ</p></li>
</ul>
<p><span class="guilabel">Allow edits from maintainers</span> を押す。<span class="guilabel">Create Pull Request</span>
を押せるように進む。</p>
</section>
<section id="using-query-parameters-to-create-a-pull-request">
<h4>Using query parameters to create a pull request<a class="headerlink" href="#using-query-parameters-to-create-a-pull-request" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>Use query parameters to create custom URLs to open pull requests with
pre-populated fields.</p>
</div></blockquote>
<p>HTTP リクエストで pull request を開く。これを使うぐらいなら GitHub CLI
でいいだろう。</p>
</section>
<section id="changing-the-stage-of-a-pull-request">
<h4>Changing the stage of a pull request<a class="headerlink" href="#changing-the-stage-of-a-pull-request" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>You can mark a draft pull request as ready for review or convert a pull
request to a draft.</p>
</div></blockquote>
<ul class="simple">
<li><p>下書きの <span class="guilabel">Ready for review</span> を押す。</p></li>
<li><p>Pull request の <span class="guilabel">Convert to draft</span> を押す。</p></li>
</ul>
</section>
<section id="requesting-a-pull-request-review">
<h4>Requesting a pull request review<a class="headerlink" href="#requesting-a-pull-request-review" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>After you create a pull request, you can ask a specific person to review the
changes you’ve proposed.</p>
</div></blockquote>
<blockquote>
<div><p>Owners and collaborators on a repository owned by a personal account can
assign pull request reviews.</p>
<p>Suggested reviewers are based on <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">blame</span></code> data.</p>
</div></blockquote>
<p><span class="guilabel">Reviewers</span> 欄を見ればわかる？</p>
</section>
<section id="keeping-your-pull-request-in-sync-with-the-base-branch">
<h4>Keeping your pull request in sync with the base branch<a class="headerlink" href="#keeping-your-pull-request-in-sync-with-the-base-branch" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>Updating your pull request with the latest changes from the base branch can
help catch problems prior to merging.</p>
</div></blockquote>
<p>これはさっき述べられた。</p>
<p><span class="guilabel">Pull requests</span> 画面のリクエスト項目にある <span class="guilabel">Update branch</span>
などを押す。ドロップダウンリストにマージオプションがある。</p>
</section>
<section id="changing-the-base-branch-of-a-pull-request">
<h4>Changing the base branch of a pull request<a class="headerlink" href="#changing-the-base-branch-of-a-pull-request" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>After a pull request is opened, you can change the base branch to compare the
changes in the pull request against a different branch.</p>
</div></blockquote>
<p>この機能は要るのか？</p>
</section>
<section id="committing-changes-to-a-pull-request-branch-created-from-a-fork">
<h4>Committing changes to a pull request branch created from a fork<a class="headerlink" href="#committing-changes-to-a-pull-request-branch-created-from-a-fork" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>You can commit changes on a pull request branch that was created from a fork
of your repository with permission from the pull request creator.</p>
</div></blockquote>
<p>Git 操作で当該ブランチをローカルにクローンして、普通にコミットする。</p>
</section>
</section>
<section id="addressing-merge-conflicts">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Addressing merge conflicts</a><a class="headerlink" href="#addressing-merge-conflicts" title="Link to this heading">¶</a></h3>
<p>マージ衝突の解決方法と見ていく？</p>
<section id="about-merge-conflicts">
<h4>About merge conflicts<a class="headerlink" href="#about-merge-conflicts" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>Often, merge conflicts happen when people make different changes to the same
line of the same file, or when one person edits a file and another person
deletes the same file.</p>
</div></blockquote>
<p>それ以外の違いは Git が自然に解消してくれる。</p>
<blockquote>
<div><p>The <span class="guilabel">Merge pull request</span> button is deactivated until you’ve
resolved all conflicts between the compare branch and base branch.</p>
</div></blockquote>
<p>衝突の解消は手動による編集が基本だ。</p>
<p>衝突を解消するまで、そのブランチの作業は先に進めないとみなしていい。</p>
</section>
<section id="resolving-a-merge-conflict-on-github">
<h4>Resolving a merge conflict on GitHub<a class="headerlink" href="#resolving-a-merge-conflict-on-github" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>You can resolve simple merge conflicts that involve competing line changes on
GitHub, using the conflict editor.</p>
</div></blockquote>
<p>衝突解消のための専用編集ツールを使う場合。</p>
<p><span class="guilabel">Pull requests</span> 画面の <span class="guilabel">Resolve conflicts</span> を押す。このボタンがグレーになっているときは GitHub でもお手上げという複雑な衝突であるので、ほんとうに手作業でやるしかない。次節参照。</p>
<p>ファイル内の衝突をすべて解決したら <span class="guilabel">Mark as resolved</span> を押す。</p>
<p>最後の一つ前の段階で、マージ先のブランチをもう一度確認する。マージ先のブランチがわからずに衝突解消作業をしていたわけではないのだが。</p>
<p>最終的に <span class="guilabel">Merge pull request</span> ボタンを押せるようにする。</p>
</section>
<section id="resolving-a-merge-conflict-using-the-command-line">
<h4>Resolving a merge conflict using the command line<a class="headerlink" href="#resolving-a-merge-conflict-using-the-command-line" title="Link to this heading">¶</a></h4>
<p>この節は GitHub とは独立して理解する。</p>
<p>コマンドラインとテキストエディターで解消するのが基本だ。<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">status</span></code> すると
<code class="docutils literal notranslate"><span class="pre">both</span> <span class="pre">modified</span></code> であるファイルが含まれているはず。</p>
<p>エディターで衝突マークが追加されたファイルを目と手で編集する。ファイルを保存したら Git でコミットする。これでブランチが正常化する。</p>
<p>ファイル自体が衝突する場合（削除や改名）はテキスト編集というより Git コマンドで解消する。<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code>, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">rm</span></code> などを確定する。</p>
</section>
</section>
<section id="reviewing-changes-in-pull-requests">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Reviewing changes in pull requests</a><a class="headerlink" href="#reviewing-changes-in-pull-requests" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>After a pull request has been opened, you can review and discuss the set of
proposed changes.</p>
</div></blockquote>
<p>一連の文書で現れる各文章の代名詞主語が誰を指しているのか不明瞭な場合が多いのが気になる。</p>
<section id="about-pull-request-reviews">
<h4>About pull request reviews<a class="headerlink" href="#about-pull-request-reviews" title="Link to this heading">¶</a></h4>
<p>評価：コメント、許可、要求</p>
<blockquote>
<div><p>You can define which individuals or teams own certain types or areas of code
in a <code class="file docutils literal notranslate"><span class="pre">CODEOWNERS</span></code> file.</p>
</div></blockquote>
<p>急所：</p>
<blockquote>
<div><p>A review has three possible statuses:</p>
<ul class="simple">
<li><p><span class="guilabel">Comment</span>: Submit general feedback without explicitly approving
the changes or requesting additional changes.</p></li>
<li><p><span class="guilabel">Approve</span>: Submit feedback and approve merging the changes
proposed in the pull request.</p></li>
<li><p><span class="guilabel">Request changes</span>: Submit feedback that must be addressed before
the pull request can be merged.</p></li>
</ul>
</div></blockquote>
<p>マージ可かどうかを見分ける方法：</p>
<blockquote>
<div><p>If your repository requires approving reviews from people with <code class="docutils literal notranslate"><span class="pre">write</span></code> or
<code class="docutils literal notranslate"><span class="pre">admin</span></code> permissions, then any approvals from people with these permissions
are denoted with a green check mark, and approvals from people without these
permissions have a gray check mark. Approvals with a gray check mark do not
affect whether the pull request can be merged.</p>
</div></blockquote>
<p><span class="guilabel">Conversation</span> にも解消状態が存在する：</p>
<blockquote>
<div><p>To indicate that a conversation on the <span class="guilabel">Files changed</span> tab is
complete, click <span class="guilabel">Resolve conversation</span>.</p>
</div></blockquote>
<p><span class="guilabel">Files changed</span> タブの左下辺りに <span class="guilabel">Conversations</span> を押すと会話があれば出る。</p>
<p>評価を再依頼することが可能。</p>
</section>
<section id="reviewing-proposed-changes-in-a-pull-request">
<h4>Reviewing proposed changes in a pull request<a class="headerlink" href="#reviewing-proposed-changes-in-a-pull-request" title="Link to this heading">¶</a></h4>
<p>現行のコードの差分を確認しながら批評する。</p>
<blockquote>
<div><p>While reviewing the files in a pull request, you can leave individual
comments on specific changes. After you finish reviewing each file, you can
mark the file as viewed.</p>
</div></blockquote>
<p>これで見逃しがないことを期待する。</p>
<p><span class="guilabel">Files changed</span> タブのすぐ下辺りの歯車アイコンで差分表示を
<span class="guilabel">united</span> か <span class="guilabel">split</span> か選ぶ。</p>
<p>差分の chunk ごとにコメントを付すことが可能。</p>
<p><span class="guilabel">Start a review</span> や <span class="guilabel">Add review comment</span> を押す。</p>
<blockquote>
<div><p>If the pull request contains changes to dependencies you can use the
dependency review for a manifest or lock file to see what has changed and
check whether the changes introduce security vulnerabilities.</p>
</div></blockquote>
<p>この種の差分は <span class="guilabel">rich diff</span> を押すと特殊な表示となる。バージョンが目立つような。</p>
<blockquote>
<div><p>After you finish reviewing a file, you can mark the file as viewed, and the
file will collapse. If the file changes after you view the file, it will be
unmarked as viewed.</p>
</div></blockquote>
<p><span class="guilabel">Viewed</span> にチェックがつく。</p>
<p><span class="guilabel">Review changes</span> を押して <span class="guilabel">Submit review</span> を押せば評価完了。</p>
</section>
<section id="filtering-files-in-a-pull-request">
<h4>Filtering files in a pull request<a class="headerlink" href="#filtering-files-in-a-pull-request" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>To help you quickly review changes in a large pull request, you can filter
changed files or use the file tree to navigate between files.</p>
</div></blockquote>
<p>大規模な変更はもらいたくないものだ。</p>
<p><span class="guilabel">Files changed</span> タブ下メニューにある <span class="guilabel">File filter</span> を押すと、いい感じのフィルターオプションが現れる。</p>
</section>
<section id="finding-changed-methods-and-functions-in-a-pull-request">
<h4>Finding changed methods and functions in a pull request<a class="headerlink" href="#finding-changed-methods-and-functions-in-a-pull-request" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>You can quickly find proposed changes to a method or function in a pull
request in <code class="docutils literal notranslate"><span class="pre">.go</span></code>, <code class="docutils literal notranslate"><span class="pre">.js</span></code>, <code class="docutils literal notranslate"><span class="pre">.ts</span></code>, <code class="docutils literal notranslate"><span class="pre">.py</span></code>, <code class="docutils literal notranslate"><span class="pre">.php</span></code>, and <code class="docutils literal notranslate"><span class="pre">.rb</span></code> files.</p>
</div></blockquote>
<p>怪しい触れ込みだ。</p>
<p><span class="menuselection">Files changed ‣ Jump to</span> のドロップダウンリストに関数一覧が現れるようだ。</p>
</section>
<section id="commenting-on-a-pull-request">
<h4>Commenting on a pull request<a class="headerlink" href="#commenting-on-a-pull-request" title="Link to this heading">¶</a></h4>
<p>何度も見てきたように：</p>
<blockquote>
<div><p>You can comment on a pull request’s <span class="guilabel">Conversation</span> tab to leave
general comments, questions, or props. You can also suggest changes that the
author of the pull request can apply directly from your comment.</p>
</div></blockquote>
<p><span class="menuselection">Files changed ‣ Conversations</span> でその pull request の会話すべてを見つけられる。</p>
</section>
<section id="viewing-a-pull-request-review">
<h4>Viewing a pull request review<a class="headerlink" href="#viewing-a-pull-request-review" title="Link to this heading">¶</a></h4>
<p><span class="guilabel">Conversation</span> ページの下部、<span class="guilabel">View all changes</span> を押す。</p>
</section>
<section id="reviewing-dependency-changes-in-a-pull-request">
<h4>Reviewing dependency changes in a pull request<a class="headerlink" href="#reviewing-dependency-changes-in-a-pull-request" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>If a pull request contains changes to dependencies, you can view a summary of
what has changed and whether there are known vulnerabilities in any of the
dependencies.</p>
</div></blockquote>
<p>そして前に習ったように：</p>
<blockquote>
<div><p>It provides an easily understandable visualization of dependency changes with
a rich diff on the <span class="guilabel">Files Changed</span> tab of a pull request.</p>
</div></blockquote>
<p>この評価で得られる情報とは：</p>
<blockquote>
<div><ul class="simple">
<li><p>Which dependencies were added, removed, or updated, along with the release
dates.</p></li>
<li><p>How many projects use these components.</p></li>
<li><p>Vulnerability data for these dependencies.</p></li>
</ul>
</div></blockquote>
<p>次のような特別アクションがある：</p>
<blockquote>
<div><p>You can use the dependency review action to help enforce dependency reviews
on pull requests in your repository.</p>
</div></blockquote>
<p>表示順序で優遇される：</p>
<blockquote>
<div><p>Any added or changed dependencies that have vulnerabilities are listed first,
ordered by severity and then by dependency name. This means that the highest
severity dependencies are always at the top of a dependency review.</p>
</div></blockquote>
</section>
<section id="incorporating-feedback-in-your-pull-request">
<h4>Incorporating feedback in your pull request<a class="headerlink" href="#incorporating-feedback-in-your-pull-request" title="Link to this heading">¶</a></h4>
<p>評価者が pull request に対して変更を提案するとどうなるか。</p>
<blockquote>
<div><p>you can also apply suggested changes if you have write access to the upstream
repository.</p>
</div></blockquote>
<p>これがわからない。誰が適用できるのか。</p>
<blockquote>
<div><p>Applying one suggested change or a batch of suggested changes creates a
single commit on the compare branch of the pull request.</p>
</div></blockquote>
<p>実質的には当該 pull request に対して新規コミットが加わる。さらに、</p>
<blockquote>
<div><p>Each person who suggested a change included in the commit will be a co-author
of the commit.</p>
</div></blockquote>
<p>やり方は？</p>
<p><span class="guilabel">Commit suggestion</span> と <span class="guilabel">Add suggestion to batch</span> を押す。</p>
</section>
<section id="approving-a-pull-request-with-required-reviews">
<h4>Approving a pull request with required reviews<a class="headerlink" href="#approving-a-pull-request-with-required-reviews" title="Link to this heading">¶</a></h4>
<p>評価が必要かどうかはリポジトリーの性質らしい。</p>
<blockquote>
<div><p>If a pull request you approved has changed significantly, you can dismiss
your review.</p>
</div></blockquote>
<p>Pull request を提出した者が評価結果を却下可能だと読める。次の節で述べられるものか。</p>
<p><span class="guilabel">Approve</span> からの <span class="guilabel">Submit review</span> で評価は終わる。</p>
<blockquote>
<div><p>Pull request authors cannot approve their own pull requests.</p>
</div></blockquote>
<p>この条件と矛盾する条件を考える。</p>
</section>
<section id="dismissing-a-pull-request-review">
<h4>Dismissing a pull request review<a class="headerlink" href="#dismissing-a-pull-request-review" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>If your repository requires reviews, you can dismiss pull request reviews
that are no longer valid or are unable to be approved by the reviewer.</p>
</div></blockquote>
<p>ああ、却下するというのは自分の提出を撤回するということか。</p>
<blockquote>
<div><p>When you dismiss a review, you must add a comment explaining why you
dismissed it. Your comment will be added to the pull request conversation.</p>
</div></blockquote>
<p>却下するには <span class="guilabel">Dismiss review</span> を押す。弁解を記入する必要がある。</p>
</section>
<section id="checking-out-pull-requests-locally">
<h4>Checking out pull requests locally<a class="headerlink" href="#checking-out-pull-requests-locally" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>When someone sends you a pull request from a fork or branch of your
repository, you can merge it locally to resolve a merge conflict or to test
and verify the changes before merging on GitHub.</p>
</div></blockquote>
<p>この話題が最後ということは、この手法は主流ではないということか。</p>
<p>休眠 pull request を再生するには、pull request ID がわかっていれば、次のコマンドでコードを得られる：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bash$ git fetch origin pull/ID/head:BRANCH_NAME</span>
</pre></div>
</div>
<p>このブランチで作業を引き継いでプッシュすれば pull request を新しい ID で再発行可能となる。</p>
<blockquote>
<div><p>The remote <code class="docutils literal notranslate"><span class="pre">refs/pull/</span></code> namespace is read-only.</p>
</div></blockquote>
<p>したがって、ここにはプッシュできない。</p>
<p>GitHub CLI が使えるなら：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bash$ gh pr checkout PULL-REQUEST</span>
</pre></div>
</div>
</section>
</section>
<section id="incorporating-changes-from-a-pull-request">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Incorporating changes from a pull request</a><a class="headerlink" href="#incorporating-changes-from-a-pull-request" title="Link to this heading">¶</a></h3>
<blockquote>
<div><p>You can propose changes to your work on GitHub through pull requests. Learn
how to create, manage, and merge pull requests.</p>
</div></blockquote>
<section id="about-pull-request-merges">
<h4>About pull request merges<a class="headerlink" href="#about-pull-request-merges" title="Link to this heading">¶</a></h4>
<p>基本的には <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span></code> の様式の議論だ。</p>
<blockquote>
<div><p>When you click the default <span class="guilabel">Merge pull request</span> option on a pull
request on GitHub.com, all commits from the feature branch are added to the
base branch in a merge commit. The pull request is merged using the
<code class="docutils literal notranslate"><span class="pre">--no-ff</span></code> option.</p>
</div></blockquote>
<p>マージオプション <code class="docutils literal notranslate"><span class="pre">--no-ff</span></code> がオンであるということを承知しおく。</p>
<blockquote>
<div><p>When you select the <span class="guilabel">Squash and merge</span> option on a pull request on
GitHub.com, the pull request’s commits are squashed into a single commit.</p>
</div></blockquote>
<p>作業途中のコミットが含まれているブランチだから、それらを縮合していいと考える。こちらは <code class="docutils literal notranslate"><span class="pre">--ff</span></code> でマージ。</p>
<blockquote>
<div><p>When you squash and merge, GitHub generates a default commit message, which
you can edit.</p>
</div></blockquote>
<p>Git の生成する既定メッセージと異なる。</p>
<blockquote>
<div><p>If you plan to continue work on the head branch of a pull request after the
pull request is merged, we recommend you don’t squash and merge the pull
request.</p>
</div></blockquote>
<p>なるほど。<code class="docutils literal notranslate"><span class="pre">--squash</span></code> を多用する作業では衝突を生じやすい。</p>
<blockquote>
<div><p>When you select the <span class="guilabel">Rebase and merge</span> option on a pull request on
GitHub.com, all commits from the topic branch (or head branch) are added onto
the base branch individually without a merge commit.</p>
</div></blockquote>
<p>ただし、次の仕様上の事実に注意する：</p>
<blockquote>
<div><p>The rebase and merge behavior on GitHub deviates slightly from <code class="docutils literal notranslate"><span class="pre">git</span>
<span class="pre">rebase</span></code>.</p>
</div></blockquote>
<p>あとは間接的マージという概念の記述。割愛。</p>
</section>
<section id="merging-a-pull-request">
<h4>Merging a pull request<a class="headerlink" href="#merging-a-pull-request" title="Link to this heading">¶</a></h4>
<p>マージの基本的な考え方：</p>
<blockquote>
<div><p>In a pull request, you propose that changes you’ve made on a head branch
should be merged into a base branch. By default, any pull request can be
merged at any time, unless the head branch is in conflict with the base
branch.</p>
</div></blockquote>
<p>他にも状態チェックやブランチ保護などの条件もある。全てクリアできていれば：</p>
<blockquote>
<div><p>You can configure a pull request to merge automatically when all merge
requirements are met.</p>
</div></blockquote>
<p>マージ衝突の解消を Git 操作で（ブラウザーでもコンソールでも他でも）行う。解消したらマージ。最終的に作業用ブランチは不要になる。</p>
<blockquote>
<div><p>The repository may be configured so that the head branch for a pull request
is automatically deleted when you merge a pull request.</p>
</div></blockquote>
<p>自動処理設定をオンにしておく。</p>
<p>マージでは通常 <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">merge</span> <span class="pre">--no-ff</span></code> コマンドが働く。</p>
<blockquote>
<div><p>You can link a pull request to an issue to show that a fix is in progress and
to automatically close the issue when someone merges the pull request.</p>
</div></blockquote>
<p>このページに GitHub 上のマージ手順が記載されている。</p>
<ol class="arabic simple">
<li><p>リポジトリー <span class="menuselection">Pull requests</span> ページで pull request を一つ選ぶ。</p></li>
<li><p>ページ下部の <span class="guilabel">Merge pull request</span> ドロップダウンからマージ方法を選択してボタンを押す。</p></li>
<li><p>コミットメッセージを整える。</p></li>
<li><p>場合によっては（マージコミット作成時）提出者のメールアドレスを指定する。</p></li>
<li><p><span class="guilabel">Confirm</span> ボタンを押す。</p></li>
<li><p>不要になったブランチを削除する。</p></li>
</ol>
<p>GitHub CLI で処理することも可能。このようにするようだ：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gh pr merge MERGE_ID \</span>
<span class="go">  --squash \</span>
<span class="go">  --body COMMIT_MESSAGE \</span>
<span class="go">  --delete-branch</span>
</pre></div>
</div>
</section>
<section id="automatically-merging-a-pull-request">
<h4>Automatically merging a pull request<a class="headerlink" href="#automatically-merging-a-pull-request" title="Link to this heading">¶</a></h4>
<p>自動マージ有効化について。</p>
<blockquote>
<div><p>If you enable auto-merge for a pull request, the pull request will merge
automatically when all required reviews are met and all required status
checks have passed.</p>
</div></blockquote>
<p>自動マージを有効にしていても、一定の状況下で無効になる。</p>
<blockquote>
<div><p>For example, if a maintainer enables auto-merge for a pull request from a
fork, auto-merge will be disabled after a contributor pushes new changes to
the pull request.</p>
</div></blockquote>
<p>有効化設定は pull request ごとに対しての操作だ。自動マージを有効化したい pull
request 画面を開く。</p>
</section>
<section id="merging-a-pull-request-with-a-merge-queue">
<h4>Merging a pull request with a merge queue<a class="headerlink" href="#merging-a-pull-request-with-a-merge-queue" title="Link to this heading">¶</a></h4>
<p>マージを待っている行列がある。ステータスチェックを待つ必要がない。</p>
<blockquote>
<div><p>Using a merge queue is particularly useful on branches that have a relatively
high number of pull requests merging each day from many different users.</p>
</div></blockquote>
<p>だからウチには要らない。</p>
<p>ステータスチェックが終わっている Pull request 画面の <span class="guilabel">Merge when
ready</span> を押す。反対に、キューから除きたくなったら <span class="guilabel">Remove from queue</span>
を押す。</p>
<p>マージキューを観察するにはブランチページを開く。キューが空でなければリンクがあるはず。</p>
<p>マージキューから pull request が削除される場合がある。理由はタイムラインから確認可能。</p>
</section>
<section id="closing-a-pull-request">
<h4>Closing a pull request<a class="headerlink" href="#closing-a-pull-request" title="Link to this heading">¶</a></h4>
<blockquote>
<div><p>You may choose to close a pull request without merging it into the upstream
branch.</p>
</div></blockquote>
<p>閉じる前に次をチェック：</p>
<blockquote>
<div><p>Tip: If you opened a pull request with the wrong base branch, rather than
closing it out and opening a new one, you can instead change the base branch.</p>
</div></blockquote>
<p>Pull request 画面を開いて <span class="guilabel">Close pull request</span> を押す。場合によっては専用ブランチを削除する。</p>
</section>
<section id="reverting-a-pull-request">
<h4>Reverting a pull request<a class="headerlink" href="#reverting-a-pull-request" title="Link to this heading">¶</a></h4>
<p>これはマージ後の取り消しを念頭に置いている。</p>
<blockquote>
<div><p>Reverting a pull request on GitHub creates a new pull request that contains
one revert of the merge commit from the original merged pull request.</p>
</div></blockquote>
<p>考え方は <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">revert</span></code> と同様だろう。</p>
<p><span class="guilabel">Conversation</span> 画面のタイムラインにおけるマージ項目右側
<span class="guilabel">Revert</span> ボタンを押す。</p>
</section>
</section>
</section>
</section>


          </div>
    <div class="related bottom">
      &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="repositories.html" title="Previous">Repositories documentation ノート</a>
        </li>
      
        <li>
          &uarr;
          <a href="index.html" title="Parent">GitHub Docs 読書ノート</a>
        </li>
        <li>
          <a href="discussions.html" title="Next">GitHub Discussions documentation ノート</a>
          &rarr;
        </li>
    </ul>
  </nav>
    </div>

      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
  <ul>
    <li id="footer_logo">
      <a class="image-reference" href="../index.html" title="読書ノート Home"><img src="../_images/logo.svg"/></a>
    </li>
    <li id="footer_copyright">
      Copyright &copy; 1999-2024, プレハブ小屋 All rights reserved.
    </li>
  </ul>
</div>
  </body>
</html>